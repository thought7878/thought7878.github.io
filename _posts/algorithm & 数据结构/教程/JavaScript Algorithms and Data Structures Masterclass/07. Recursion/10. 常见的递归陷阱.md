10. Common Recursion Pitfalls


视频讲述了编写递归解决方案时常见的陷阱及相关原理，具体如下：

## 未设置基线条件或基线条件有误的陷阱
[00:00]
`基线条件`是**递归终止的关键**，以阶乘函数为例，若未设置基线条件，计算2的阶乘时会不断调用1的阶乘、0的阶乘、-1的阶乘等，无限循环，最终出现“最大调用栈大小超出”错误，不同运行环境（如Node.js或其他引擎）的*最大调用栈限制不同，大约在一万次调用左右*。

![[_posts/algorithm & 数据结构/教程/JavaScript Algorithms and Data Structures Masterclass/07. Recursion/media/712652b2ee9af77d280cb83fdf8d6968_MD5.jpeg]]

## 返回错误结果或忘记返回结果的陷阱（一）
[01:39]
*即使有正确的基线条件，若返回内容错误也会导致问题*。比如阶乘函数中，若返回“num乘以num的阶乘”，计算2的阶乘时会返回“2乘以2的阶乘”，陷入无限循环，最终同样出现“最大调用栈大小超出”错误，*尤其当代码较长时，此类问题更难通过调试发现*。


## 返回错误结果或忘记返回结果的陷阱（二）
[02:26]
*在基线条件处未正确返回值也会引发问题*。例如阶乘函数中，当num等于1时，若用“console.log(1)”替代“return 1”，虽能打印出1，但因未返回值，调用栈无法正常弹出，会继续执行“1乘以0的阶乘”，导致num不断减小，直至出现“最大调用栈大小超出”错误，只有正确返回值才能让递归正常传递结果并终止。


## “最大调用栈大小超出”错误的相关说明
[04:26]
**该错误**通常被称为`栈溢出`，源于*递归未终止、无终止条件，当调用栈中帧数过多、函数调用次数超出限制时触发*，知名网站“Stack Overflow”的名称便来源于此。


## 总结：递归常见问题
[04:55]
编写递归解决方案时，`常见问题`包括**未设置基线条件、忘记返回值或返回错误内容**，这些问题都*会导致栈溢出*，影响递归函数的正常运行。
