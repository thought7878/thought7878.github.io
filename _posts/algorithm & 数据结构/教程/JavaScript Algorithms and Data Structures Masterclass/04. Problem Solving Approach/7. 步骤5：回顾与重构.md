7. Step 5 Look Back and Refactor


视频围绕问题解决*五步法中的“回顾与重构”* 展开，强调其*对提升开发者能力的重要性*，并*结合代码案例讲解重构思路与方法*，具体如下：

## 回顾与重构的重要性、易被忽视的情况
[00:00]
回顾与重构是问题解决五步法的最后一步，也是提升开发者能力的关键一步。即便得到可行方案（无论完美或临时凑合），也易因“能用即可”的心态跳过此步（如完成后想结束工作去娱乐），但在多数场景下（除单打独斗且有紧急截止日期的特殊情况），都需努力改进代码，否则会错失优化机会。


## 回顾与重构的核心内容
[01:13]
并非仅“诗意向往”，而是要逐个分析组件、逐行检查代码。需关注代码外观、可读性（是否易理解）与效率，在两者间找到平衡；在面试场景中，完成方案后要主动思考代码不足，如不确定是否有更好实现方式可通过搜索验证。


## 回顾与重构的自问问题清单
[02:07]
包含六大问题，分别是能否验证结果（确保代码正确运行）、能否用不同方法推导结果（思考问题是否有其他未想到的可行解法）、方案是否直观易懂（在白板或代码编辑器上是否合理）、结果或方法能否用于其他问题（对比与过往问题的相似性，培养解决其他问题的洞察力）、能否优化解决方案性能（关注时间复杂度和空间复杂度，识别低效部分如大量嵌套循环）、代码是否符合规范（如公司规范、语言规范，检查缩进等细节，面试中需承认代码不整洁并表达改进意愿），以及了解他人如何解决该问题（面试中可向面试官请教，独自工作时可参考其他语言实现获取思路）。


## 结合代码案例讲解重构过程（语法与逻辑优化）
[06:01]
初始代码通过正则表达式保留字母数字字符、统一转为小写，再用for循环遍历字符统计出现次数。重构时，一是将for循环替换为“for...of”循环，直接操作字符（如char.toLowerCase()），无需通过索引获取字符，简化代码；二是用三元表达式替代if-else语句处理字符计数（若字符在对象中则值加一，否则初始化为1），缩短代码；三是将变量声明从var改为let和const，符合ES2015语法。


## 代码性能优化：用字符编码替代正则表达式
[10:06]
虽正则表达式可快速检查字符是否为字母数字，但在JavaScript中性能可能因场景和浏览器有差异（如Chrome曾存在相关问题）。可通过charCodeAt获取字符编码，结合布尔比较判断是否为字母数字（数字字符编码47-58、大写字母64-91、小写字母96-123），这种方式经测试比正则表达式更快，还可将该判断逻辑封装为独立的isAlphaNumeric函数，提升代码可读性。


## 代码逻辑顺序的思考
[14:27]
思考小写转换与字母数字检查的顺序问题——是先将整个字符串转小写再过滤非字母数字字符，还是先过滤再转小写。最终认为取决于输入字符串的具体形式，案例中选择先判断字符是否为字母数字，再转小写并进行计数操作，同时强调独立函数使代码更易读。





