**普通流（Normal Flow）** 是 CSS 视觉格式化模型中的*默认布局方式*。在普通流中，HTML 元素*按照它们在文档中的顺序和类型（块盒、行盒/块级元素或行内元素）进行排列*。这是*网页布局的基础模式*，适用于大多数简单的页面结构。

>**注意：**
>块级元素、行内元素是老标准的术语；新标准是，*块级盒子/块盒、行级盒子/行盒、行内块盒*
>
>块级元素，标准说法是块级盒子/块盒
>行内元素，标准说法是行级盒子/行盒
>行内块级元素，标准说法是行内块盒
>

---

## **1. 普通流的核心规则**
在普通流中，元素的布局遵循以下规则：

### **1.1 块级元素（Block-level Elements）**
- **特点**：
  - 占据父容器的整个宽度。
  - 在垂直方向上堆叠排列（从上到下）。
  - 默认情况下，每个块级元素会独占一行。
- **常见块级元素**：`<div>`、`<p>`、`<h1>` 到 `<h6>`、`<ul>`、`<li>` 等。

```html
<div>Block 1</div>
<div>Block 2</div>
```

**效果**：
```
+---------------------------+
| Block 1                   |
+---------------------------+
| Block 2                   |
+---------------------------+
```

---

### **1.2 行内元素（Inline Elements）**
- **特点**：
  - *只占据内容所需的宽度*。
  - 在水平方向上依次排列（从左到右）。
  - 不会强制换行，除非内容超出容器宽度。
- **常见行内元素**：`<span>`、`<a>`、`<strong>`、`<em>` 等。

```html
<span>Inline 1</span>
<span>Inline 2</span>
```

**效果**：
```
Inline 1 Inline 2
```

---

### **1.3 行内块元素（Inline-block Elements）**
- **特点**：
  - 类似于行内元素，*在水平方向上排列*。
  - 类似于块级元素，*可以设置宽度和高度*，仍具有块级元素的特性。
- **示例**：
```css
.inline-block {
  display: inline-block;
  width: 100px;
  height: 50px;
}
```

```html
<div class="inline-block">Box 1</div>
<div class="inline-block">Box 2</div>
```

**效果**：
```
+--------+ +--------+
| Box 1  | | Box 2  |
+--------+ +--------+
```

---

## **2. 普通流的工作机制**
在普通流中，浏览器根据以下规则渲染元素：

### **2.1 文档流顺序**
- 元素*按照 HTML 中的书写顺序依次排列*。
- *后续元素的位置由前一个元素决定*。

```html
<div>First</div>
<div>Second</div>
<div>Third</div>
```

**效果**：
```
+---------------------------+
| First                     |
+---------------------------+
| Second                    |
+---------------------------+
| Third                     |
+---------------------------+
```

---

### **2.2 外边距折叠（Margin Collapse）**
- **定义**：相邻的块级元素之间的外边距会合并成一个外边距。
- **适用场景**：
  - *垂直方向上的兄弟元素*。
  - *父子元素之间*（如果父元素没有边框、内边距或其他分隔因素）。

```css
div {
  margin-top: 20px;
  margin-bottom: 20px;
}
```

```html
<div>Block 1</div>
<div>Block 2</div>
```

**效果**：
- 实际间距为 `20px`，而不是 `40px`（外边距折叠）。

---

### **2.3 自动调整宽度**
- 块级元素的宽度*默认是父容器的 100%*。
- 如果设置了 `margin` 或 `padding`，内容区域会自动调整以适应父容器。

```css
div {
  width: 50%;
  margin: 0 auto; /* 水平居中 */
}
```

```html
<div>Centered Block</div>
```

**效果**：
```
+---------------------------+
|        Centered Block     |
+---------------------------+
```

---

## **3. 普通流的限制**
虽然普通流适合简单的布局，但在复杂场景下可能会显得不足：
1. **无法实现复杂的对齐**：例如水平垂直居中。
2. **不支持灵活的多列布局**：需要借助浮动（Floats）、Flexbox 或 Grid。
3. **难以控制重叠元素**：需要使用定位（Positioning）。

---

## **4. 如何脱离普通流**
当普通流无法满足需求时，可以通过以下方式脱离普通流：

### **4.1 浮动（Floats）**
- 使用 `float` 属性让元素*向左或向右移动，脱离正常流*。
- 示例：
```css
.float-left {
  float: left;
}
```

### **4.2 定位（Positioning）**
- 使用 `position` 属性（如 `absolute`、`fixed`）将元素*从普通流中移除*。
- 示例：
```css
.absolute-box {
  position: absolute;
  top: 10px;
  left: 10px;
}
```

### **4.3 Flexbox 和 Grid**
- 使用*现代布局技术（如 Flexbox 和 Grid）**替代**普通流*。
- 示例：
```css
.container {
  display: flex;
  justify-content: center;
}
```

---

## **5. 总结**
- **普通流** 是网页布局的默认模式，适用于简单、线性的页面结构。
- 块级元素垂直堆叠，行内元素水平排列。
- 当需要更复杂的布局时，可以通过浮动、定位或现代布局技术（如 Flexbox 和 Grid）脱离普通流。
