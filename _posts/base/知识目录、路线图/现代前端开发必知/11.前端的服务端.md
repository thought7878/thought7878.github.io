【【现代前端开发必知11】前端要掌握的服务端技术栈，这期视频讲清楚】 https://www.bilibili.com/video/BV1QhSEYMEh2/?share_source=copy_web&vd_source=9c1e19a73fa7bd23bb37aa8d7467d862


我们传统认知上的前端开发是面向用户界面，以提供良好的用户体验为核心，由此形成了前端技术栈。
Node.js出现后现代，前端的能力边界已经扩宽到了服务端，我们**借助服务端技术栈可以开发出体验更好的产品**，毋庸置疑的是，掌握服务端技术是通往全栈开发的必经之路。服务端是一个很大的话题，有必要说明的是，我在*这个频道中提到的`服务端`特指服务于前端开发的服务端*，而*它只是整个服务端领域的冰山一角*，并*不包含数据库、中间件、分布式服务、K8S*等底层设施。

# 为什么要引入服务端？
为什么要引入服务端？

*在传统前端开发中*，**所有的代码和功能都运行在客户端**，这通常没有什么问题，**但随着业务体量增大，前端很容易不堪重负**。比如：
- 需要传输到客户端的**脚本体积越来越大，导致传输延迟上涨，渲染性能下降**。
- 前端**要调用的接口越来越多**，导致客户端**白屏时间越来越长**，服务端性能下降等等。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/39c7827fc9458a6a2535ccbce94eb6ff_MD5.jpeg]]
![[_posts/base/知识目录、路线图/现代前端开发必知/media/7214c13b5431ee874cdf88ec78edbc86_MD5.jpeg]]

**要解决这些问题**，光靠纯前端优化是很难进行的。这个时候**服务端的优势**就会显现出来。比如：
- **在服务端渲染页面能有效减少传输量，缩短白屏时间**。
- **在服务端聚合接口**能消除客户端频繁的接口调用。
- 在服务端也能很容易的**配置安全策略和持久化日志**等等。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/440e53e5470c58c1af0f0aeebdff7c96_MD5.jpeg]]

---

接下来我就*从四个维度展开介绍*，**前端视角下的服务端：运行时、基础框架、应用框架、应用架构**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/a1236d2747d18efb73f8a7d55ff73f7f_MD5.jpeg]]

# 运行时
首先是`运行时`，我们在第五期视频前端编程语言中*曾提到JS运行时的概念*。它是**JS代码的执行环境，包含JS引擎、JS标准库、一组环境相关的API**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/bcb657c3e19031705968f3e053cbc6ac_MD5.jpeg]]

## Node.js
而`Node.js`**就是一种运行时，它赋予了JS语言在服务端执行的能力**。Node.js是*最流行、最稳定、应用范围最广的服务端运行时*。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/9c4b7647bcc5b40b1723c6a5f34425c1_MD5.jpeg]]
**它为上层应用提供了诸如HTTP协议实现、文件系统、查询字符串处理等服务端开发必备的基础API**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/3f424a69c69b29cb348ed39048358c12_MD5.jpeg]]
![[_posts/base/知识目录、路线图/现代前端开发必知/media/eba45569546fbcceb15bd28ba7ccb706_MD5.jpeg]]
![[_posts/base/知识目录、路线图/现代前端开发必知/media/768133303f3af124fdb7f30049b6ae13_MD5.jpeg]]

## Deno、Bun
除了Node.js这个运行之外，还有Deno、Bun，它们有各自的优缺点。不过大致的**区别点**在于*性能、安全性和社区生态*，应该根据实际需求选择。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/93a544840d85d729c27979641592f881_MD5.jpeg]]

# 基础框架
这些*运行时的功能很强大*，但是**仅依靠他们是无法*高效率*完成一个相对复杂的业务的**。我们**必须对它进行一层封装，形成基础框架**。这就好像我们在第七期视频中提到的，*UI框架是对客户端运行时如浏览器API的封装一样*。

`Express`、`Koa`、`Fastify`是**常见的服务端基础框架，他们在Node.js之上添加了额外功能，专门用于构建web服务**。

以Express为例，基础框架通常会维护一个`应用对象Application`**代表一个web服务器**，**接收来自某个端口上的所有HTTP请求**。
然后**对HTTP协议进行抽象**，提供`请求request`和`响应response`两大对象。
最后提供`路由router`，简化不同请求的处理方式。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/09b7f802cc195087502431fb7542a487_MD5.jpeg]]
![[_posts/base/知识目录、路线图/现代前端开发必知/media/a76c1919f613535c8b08d8efbc2ac436_MD5.jpeg]]
![[_posts/base/知识目录、路线图/现代前端开发必知/media/ffc64f1c44b60301eb54bbbd13787bd8_MD5.jpeg]]

**基础框架可以应付大多数简单的业务场景**，比如，完成简单的数据处理，或者搭建一个简易的代理服务器。

# 应用框架
**如果*业务更复杂*，就应该选择应用框架了**。`应用框架`是**对基础框架的进一步封装**。这就好像我们在第八期视频中提到的，*前端应用框架通常是基于UI框架封装的一样*。

## 常见的应用框架
**常见的应用框架**包括NestJS、Egg.js、Sails.js、Krakenjs等等。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/e042655e4dd9eaf2b605a31cdce25b9d_MD5.jpeg]]
相比基础框架，**应用框架会提供更多更复杂的功能**。以NestJS为例，它*抽象了模块、控制器、服务等概念*，同时*添加了诸如验证、缓存、队列、日志、会话等通用功能*。**这些能力大大增强了应用框架对复杂业务的适用性**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/9dc5a403b33c139c24998709e21a1b22_MD5.jpeg]]
![[_posts/base/知识目录、路线图/现代前端开发必知/media/e4d4b3a3f3b24c2c4387b656e6af71ec_MD5.jpeg]]

## 全栈框架
还有一类特别的框架，**融合了前端应用框架和服务端框架**，形成了所谓的`全栈框架`。比如，*Next.JS就是典型的全栈应用框架*。
相比纯服务端应用框架，**它更简洁，更贴合前端的渲染需求**。
我们常说的**服务端渲染更多是内置于这样的全栈框架之中**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/c3fb248b34b7462ec83ae23cda47a764_MD5.jpeg]]

# 应用架构
说完应用框架就不得不说应用架构，就像第八期视频中的前端应用架构一样，服务端也有自己的应用架构，**常见的有MVC、RESTful、BFF**。

## MVC
`MVC`是模型、视图、控制器的简称。`模型`负责定义数据结构，`视图`负责展示数据，`控制器`负责处理用户输入和业务逻辑。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/93cbcc04be12432b8ab68c25c30ba467_MD5.jpeg]]

MVC是一种*经典的应用架构*模式，各部分的*职责划分清晰*，容易上手。

## RESTful
`RESTful`是一种*通过HTTP协议的get、post、put、delete等方法的语义来操作资源*。它是**以资源和动作为核心，以实现简单和语义化的API设计**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/c183be763b05ddfa0481a827eda5ba40_MD5.jpeg]]

## BFF
另一种架构范式叫`BFF`，它的全称是`Backend For Frontend`，是**一种面向前端应用的架构模式**。
**它位于前端和真正的后端之间**，通常作为体验适配层，**负责：**
- *处理多端应用的请求*，
- *聚合后端提供的原子接口*，
- 让前端应用可以*更标准且灵活的访问后端服务*。
BFF架构是目前**业内成熟的方案，非常适合大型C端业务**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/313b9382ac529b886c5e1d4a87d8844a_MD5.jpeg]]

---

本期我们解释了前端引入服务端的必要性，以及从运行时、基础框架、应用框架、应用架构四个维度介绍了服务端的构成。