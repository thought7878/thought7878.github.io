【【现代前端开发必知06】那些简单而又复杂的工具链】 https://www.bilibili.com/video/BV1BNWVenEV5/?share_source=copy_web&vd_source=9c1e19a73fa7bd23bb37aa8d7467d862

https://tingwu.aliyun.com/doc/transcripts/pev8qdoagd75nkga

00:00 现代前端开发工具链概览![](https://tingwu.aliyun.com/api/lab/get/v2/pev8qdoagd75nkga/65951558.png)  
1. 本地环境与集成环境的一致性，以及三方待开发、数据安全协作和共享问题是软件开发中的核心挑战。  
2. 包管理在现代软件开发中扮演着关键角色，尤其是前端开发采用模块化后，以npm为代表的包管理器应运而生，促进代码组织与复用。  
3. NPM作为最早的包管理器，被广泛采用，具有最强的兼容性，但速度较慢，是note GS默认自带的包管理器。  
4. EN和PNPM是前端包管理工具的代表，各自具有特点，与NPM一起构成当前前端开发中主要的包管理解决方案。  
5. 高效的包管理对于开发中大型项目至关重要，能够显著提升开发效率和代码质量，是现代软件开发不可或缺的一部分。![](https://tingwu.aliyun.com/api/lab/get/v2/pev8qdoagd75nkga/65951559.png)  
6. 通过并行安装和缓存机制，npm提高了速度但消耗了更多资源，后续的P npm则采用了共享依赖模型，进一步优化了效率与资源消耗，尽管带来了兼容性挑战。  
7. 每一代包管理器都在解决上一代的问题，追求更快更省是其核心发展方向，这体现了前端软件生态的庞大和复杂性。  
8. 包管理器不仅要处理直接或间接的依赖关系，还需应对版本差异，这是前端开发中一项相当复杂的工作。  
9. 企业级包管理工具在解决安装速度和资源消耗问题的同时，还需关注供应链污染，如npm仓库中带有bug的包可能引发的安全问题。  
10. 面对供应链污染等挑战，企业级包管理工具需要具备更强大的防护机制，以确保前端项目的稳定性和安全性。![](https://tingwu.aliyun.com/api/lab/get/v2/pev8qdoagd75nkga/65951560.png)  
11. 企业级包管理器在开源基础上增加bug包黑名单控制，如cnp m的bug versions，确保安装时避免问题包，无需开发者改动代码，同时通过网络IO优化等跨领域技能加速依赖安装。  
12. 包管理分为单包管理和多包管理，其中多包管理适用于管理同一代码仓库内的多个包，便于共享依赖、复用代码、联合调试和发布，现代前端多采用如NPM的workspace模式、nara和rush等方案。  
13. 前端构建工具从基于task runner的工具发展至现代的puzzle vet、turban、ack和aspect等，涵盖代码转译、优化、打包、开发服务器及插件系统，实现从源代码到最终产物的一站式构建。  
14. 极致整合和使用rust重写核心模块是近年前端构建工具的发展趋势，旨在提升构建效率和性能，同时插件系统提供灵活的功能扩展，满足定制化需求。  
15. 构建工具中的转译器、优化器、打包器等组件协同工作，实现代码的转换、优化和合并，同时开发服务器通过HMR传输和原生ES模块接口代理等功能提升开发体验。  
  
04:34 现代前端构建工具解析与发展趋势![](https://tingwu.aliyun.com/api/lab/get/v2/pev8qdoagd75nkga/65951561.png)![](https://tingwu.aliyun.com/api/lab/get/v2/pev8qdoagd75nkga/65951562.png)![](https://tingwu.aliyun.com/api/lab/get/v2/pev8qdoagd75nkga/65951563.png)![](https://tingwu.aliyun.com/api/lab/get/v2/pev8qdoagd75nkga/65951564.png)![](https://tingwu.aliyun.com/api/lab/get/v2/pev8qdoagd75nkga/65951565.png)  
16. 小程序开发者工具和接口调试工具（如Postman、Charles）用于模拟和真机调试，以及框架自带的调试工具（如React Developer Tools、Vue DevTools）展示虚拟DOM结构和组件状态，是现代前端开发不可或缺的工具。  
17. 持续集成CI和持续部署CD在现代前端研发流程中扮演关键角色，通过GitHub Actions、Travis CI等免费工具或平台轻松实现，提升软件研发的效率和质量。  
18. 现代前端工具链的介绍为后续内容铺垫，包括用户界面的探索，强调关注网站fromtalk.com获取更新计划，预告下一期视频内容。  
19. 强调通过使用上述工具和平台，现代前端开发已经从蛮荒时代步入了高效、自动化的新阶段，大大降低了开发难度和时间成本。  
20. 鼓励观众关注后续视频，预告将深入讨论各式各样的用户界面，强调持续关注以获取更多前端开发知识和技巧的重要性。

---

前几期我们介绍了现代前端开发必知的计算机网络和前端编程语言相关的内容。本期我们进入前端工具链的话题。
在以前制作一张网页可能只需要一个文本编辑器，而在现代完成一个非常简单的前端应用就要用到十几种工具。为什么事情变得越来越复杂了？前端真的是差生文具多吗？

## 什么是工具链（Toolchain）
`工具链`通常指的是**一组用于软件开发的工具和技术**，**帮助开发者管理好从源代码到最终软件的整个开发过程**。对于前端来讲，这些工具通常包括*集成开发环境、包理工具、构建工具、调试工具、持续集成与部署工具*等。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/674d723d07cbecab129b69cfb083f889_MD5.jpeg]]

## 集成开发环境（IDE）
现代前端*通常使用`VSCode`作为集成开发环境*，这不仅仅是因为它具备良好的开发体验，还*得益于它强大的插件生态*，让一些比较新的语言或开发工具也能很方便的集成进来。

前端开发中的很多任务都可以在VSCode中一站式完成。比如*使用版本控制系统git、管理NPM包和脚本、调试nodejs程序*等等。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/b3c914ad97db9d7de9680d35b6a66b82_MD5.jpeg]]
另外还有和本地VSCode非常相似的`云IDE`，比如腾讯的cloud studio，华为的code arts和阿里云的cloud IDE等等。他们核心*解决了本地环境和集成环境的一致性，三方待开发数据安全、协作和共享等问题*。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/01d95529017b3503115d34b9990425c8_MD5.jpeg]]

## 包管理
`包管理`是现代软件开发绕不开的话题，*自从前端开始采用模块化开发后*，以npm为代表的包管理器也应运而生。**包管理的核心**是**代码组织与复用**，这也是*开发中大型项目所必须的要求*。

现在前端的包管理工具有几个代表，*NPM、Yarn、PNPM*，它们各有特点：
- `NPM`是最早出现的包管理器，也是Node.js默认自带的包管管理器，被广泛采用，兼容性最强，*但速度比较慢*。
- `Yarn`*通过并行安装和缓存，解决了npm速度慢的问题*，但资源消耗较大。
- `Pnpm`后来居上，采用共享依赖模型，同时解决了npm和yarn的问题，但兼容性问题较多。
可以看到*每一代包管理器都会解决上一代的问题，又快又省*是包管理器的核心演进方向。
我们应该知道前端有一个数量相当庞大的软件生态，大到一个工具，小到一个函数，都可以做成一个包。许多包又直接或间接依赖另一些包，再加上版本不同，因此此包管理其实是一件相当复杂的事情。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/5eef09ecfabd0ba36370145e24e276dd_MD5.jpeg]]

### 企业级的包管理
虽然开源包管理工具已经很好的解决了安装速度和资源消耗问题，但企业级的包管理还可以做更多事情。

**比较典型的场景**是应对`供应链污染`。前端项目的直接供应商是npm仓库，*一个带有bug的包发布后会导致本地或持续集成环境产生问题，轻则构建失败，严重时还有安全问题*。因此，**企业级包管理器会在开源包管理器的基础上增加对bug包的黑名单控制**。
*例如*，cnpm的bug versions就是*维护了一套黑名单*，每次cnpm安装时都会检查和避免安装问题包，而不需要开发者改动项目代码。
另一个案例是，企业级包管理器可以*通过网络IO优化、FUSE、OverlyFS文件系统、文件IO优化*等跨领域技能*进一步加速依赖安装*，这也是目前开源方案没有做到的。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/089e642f88fed107a2f8f6be8168327c_MD5.jpeg]]

![[_posts/base/知识目录、路线图/现代前端开发必知/media/e0307f83dce3e5c97995cc3520c77360_MD5.jpeg]]

### 单包管理和多包管理
*包管理有两个主要模式，单包管理和多包管理*。我们最常用的是单包管理，`多包管理`适用于**在一个代码仓库里管理多个包**，相比单包管理，可以**很方便地共享依赖、跨包复用代码、进行联合调试和发布**等等。

现代前端通常采用`MonoRepo`的方式管理多包，比如，*NPM自带的workspace模式*、开源方案Lerna、Rush等等。

## 构建工具
[04:13]
说完包管理，我们接着说说构建工具。前端构建工具的出现时间其实比较晚，首先是基于task runner的ground gap以及模块化打包工具brother ify where pack和roll up，然后是现代的puzzle vet、turban、ack和aspect等。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/25cc514db4b536508b85b1aa516e7a15_MD5.jpeg]]

现代前端构建工具通常包含**代码转译器、优化器、打包器、开发服务器、插件系统**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/03b79ca6d688c75f2748d0188b83673d_MD5.jpeg]]

### 转译器（编译器/代码转换器）
`转译器（Transpiler）`，有的也叫`代码转换器`，或者直接叫`编译器（Compiler）`，
- 它们都是**将源代码转换为目标平台能够直接运行的代码**，
- 同时**让一些比较新的语言特性能兼容旧的环境**，比如，箭头函数到普通函数的转换，JSX到JS的转换，Sass/Less到CSS的转换等等。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/e14ba15bab4fa918443a0798620a9786_MD5.jpeg]]

### 优化器
`优化器`是**将转译完成的代码进一步优化**，比如*分割、压缩、混淆*，以**提升传输效率和安全性**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/e548e299d784ef4c3dccbac38d2a14ac_MD5.jpeg]]

### 打包器
`打包器`是**将转译好的代码合并到一块儿**，**它通常会内置转译器、优化器，从源代码到最终产物一站式完成**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/106403f57633003d1d1d6b55db076775_MD5.jpeg]]

### 开发服务器
`开发服务器`**提供一个本地的HTTP服务器**，通过*HMR、传输原生ES模块、接口代理*等功能**来提升开发体验**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/a91827f11c9848a919ecad0947ec0fc8_MD5.jpeg]]

### 插件系统
`插件系统`是**功能扩展的主要方式**，可以**灵活地改变整个构建工具的行为，来实现定制化需求**。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/206be9d2fb97e9cb2ec52079bd66a2a3_MD5.jpeg]]

### 构建工具的大趋势
近些年**前端构建工具的大趋势**是*极致整合*，以及*使用rust重写核心模块*。
`极致整合`是**为了减少学习负担**，如果你是Webpack时代的开发者，一定体会过*一遍遍配置babel插件、webpack插件的痛苦*，而现代工具全部帮你搞定了。
`使用rust重写`是**为了显著提升构建和打包效率**。你可能还体会不到*改一行代码持续集成要等十分钟*，内存OOM，业务方还拼命催上线的痛苦。*而基于rust的构建工具能很大程度上缓解集成压力，提升工程师的幸福感*。
![[_posts/base/知识目录、路线图/现代前端开发必知/media/3004665f5bb23e3568a839ee0b660db4_MD5.jpeg]]

![[_posts/base/知识目录、路线图/现代前端开发必知/media/f9cab512d7e0520c21357ed4b4e72b5c_MD5.jpeg]]

### 现代构建工具是简单而又复杂的
现代构建工具是简单而又复杂的：
- `简单`是因为它对开发者**屏蔽了许多内部细节**，比如，基本都内置了诸如hmr、转译工具、css预处理器等工具。配合脚手架用起来很简单，你得庆幸刚入门就用上了它们。
- `复杂`是因为他们*有的选择兼容rollup生态*（Vite），*有的选择兼容webpack生态*（Rspack），有的则另辟蹊径。*这导致他们的底层架构大不相同。如果开发者要深度定制，则会面临许多取舍和困难*。

## 调试工具
现代前端针对*不同场景会用到不同的调试工具*，
- `浏览器开发者工具`用于普通HTML页面的UI网络性能调试，比如chrome dev tools、suffer web inspect等。
- `小程序开发者工具`用于小程序模拟和真机调试。
- `接口调试工具`，比如postman Charles等等。
- `框架自带的调试工具`，比如reject develop tools、view deaf tools, 他们可以展示更为直观的虚拟dorm结构和组件状态。

## CI/CD
一个健壮和可靠的软件研发流程离不开持续集成CI和持续部署CD CI。CD在现代前端也是必不可少的，它并不复杂，相比以前蛮荒时代，现在我们可以借助github action，travis CI drinkings等免费的工具或平台来轻松完成这些事情。更多内容后续会在单独一期视频中展开，可以关注我们的网站from talk点com获取更新计划。本期我们介绍了现代前端工具链的主要成员，下一期我们来聊聊各式各样的用户界面。点关注不迷路，我们下期再见。
