# 定义
    
- **全称**：CSRF（Cross - Site Request Forgery），即跨站请求伪造。它是一种网络安全漏洞，攻击者*通过诱导用户在已登录目标网站的状态下，访问恶意网站，在恶意网站下，利用用户的身份认证信息（如 Cookie）在目标网站执行非用户本意的操作*。

# 攻击原理
    
- **利用用户认证状态**：用户在登录目标网站（如银行网站、电商网站等）后，浏览器会保存用户的身份认证信息，通常是通过 Cookie 来保存。当用户访问包含恶意请求的第三方网站时，*由于浏览器会自动携带与目标网站相关的 Cookie，攻击者就可以利用这一点*。

- **构造恶意请求**：*攻击者在恶意网站中构造一个看似合法的请求，这个请求的目标是用户已经登录的目标网站*。例如，在一个银行转账的场景中，攻击者可以构造一个包含转账操作的 HTML 表单或 JavaScript 脚本。表单的`action`属性指向银行网站的转账接口，并且通过隐藏的输入字段设置转账金额和收款账户等信息。

- **诱导用户访问**：攻击者通过各种方式（如发送欺骗性的链接、在恶意广告中嵌入链接等）诱导用户访问包含恶意请求的网站。*当用户访问这个网站时，浏览器会自动发送用户在目标网站的身份认证信息（Cookie），并且执行恶意请求，**就好像是用户自己在目标网站发起的操作一样***。

# CSRF 攻击的类型
    
- **自动发起的请求**：
	- **利用 HTML 标签**：攻击者可以使用`<img>`、`<iframe>`、`<script>`等 HTML 标签来自动发起请求。例如，使用`<img src="https://bank.example.com/transfer?amount=1000&account=attacker - account"/>`，当用户访问包含这个标签的页面时，浏览器会尝试加载图片，实际上就会向银行网站发送一个转账请求。虽然浏览器可能因为图片加载失败而显示错误，但请求已经被发送。
	- **利用 JavaScript**：通过 JavaScript 代码来发起请求也是常见的方式。例如，`var xhr = new XMLHttpRequest(); xhr.open("POST", "https://bank.example.com/transfer", true); xhr.setRequestHeader("Content - type", "application/x - www - form - urlencoded"); xhr.send("amount = 1000&account = attacker - account");`。如果用户访问的页面包含这样的脚本，就会向银行网站发送转账请求。
- **用户触发的请求**：
	- **利用表单欺骗**：攻击者构造一个看似正常的表单，如一个虚假的抽奖表单。当用户填写并提交表单时，实际上是在向目标网站发送恶意请求。例如，表单的`action`属性指向用户的电商账户修改密码接口，而用户以为是在参加抽奖活动，从而在不知情的情况下修改了自己的密码。

# 危害
    
- **资金损失**：在金融相关的网站中，CSRF 攻击可能导致用户资金被盗转。攻击者可以构造转账、支付等请求，将用户账户中的资金转移到自己的账户。
- **信息篡改**：可以修改用户在目标网站上的个人信息，如修改密码、修改收货地址等。这可能导致用户账户被攻击者控制，或者用户的购物、通信等信息被篡改。
- **恶意操作**：在社交网络等网站上，可能导致用户发布恶意内容、关注或取消关注某些用户等非用户本意的操作，影响用户的声誉和正常的社交活动。