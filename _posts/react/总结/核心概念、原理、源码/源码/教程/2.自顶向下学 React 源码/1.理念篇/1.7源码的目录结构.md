本视频讲述了React源码顶层目录结构的划分逻辑，重点说明packages目录下各核心子包（react、scheduler、reconciler、react-dom等）的职能定位与内部组织，明确调度器、协调器、渲染器的物理存放位置，并区分了稳定包、试验性包与辅助包的性质。

![[4f7d0b7ad9b324e683d4cbe0292e773f_MD5.webp]]

## 本节学习目标与意义 
[00:00](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=0)
    
- 源码目录结构概述 [00:00](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=0)  
	本节学习源码的目录结构。
- 学习目标 [00:03](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=3)  
	通过本节学习，可了解源码目录划分方式，以及调度器、协调器、渲染器所在目录。
- 后续衔接 [00:13](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=13)  
	为进入架构篇做好准备。

## 顶层目录总览 
[00:17](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=17)
    
- 顶层三目录划分 [00:17](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=17)  
	React源码顶层目录分为三个文件夹：`fixtures`、`packages`、`scripts`。
- fixtures目录功能 [00:17](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=17)  
	`fixtures`包含为贡献者准备的小型React测试项目，便于理解React。
- packages目录功能 [00:37](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=37)  
	`packages`目录下存放React仓库中所有与React相关的包。
- scripts目录功能 [00:45](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=45)  
	`scripts`目录下存放与React工具链相关的脚本。

## pages目录说明（应为packages目录之误，依据上下文及常规命名修正为packages）
[00:50](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=50)
    
- packages目录分类讲解启动 [00:50](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=50)  
	接下来关注`packages`目录，其下有非常多文件夹，将分类讲解。

## react包：平台无关核心API 
[00:58](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=58)
    
- react包内容概览 [00:58](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=58)  
	`react`包包含大量平台无关代码，如`react-children`、`react-component`、`react-pure-component`。
- hooks的暴露位置与实现分离 [01:17](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=77)  
	`react`包下包含众多Hook，但其实现并不在此。
- hooks导出路径 [01:27](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=87)  
	Hook（如`useState`）从`src/react`被暴露出来。
- useState的引用性质 [01:50](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=110)  
	`useState`仅含两行代码。
- useState非实现位置 [01:59](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=119)  
	`useState`具体实现不在此处，此处仅为引用。

## scheduler包：调度器实现 
[02:09](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=129)
    
- 调度器代码位置 [02:09](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=129)  
	调度器相关代码位于`scheduler`包中。

## reconciler包：协调器实现 
[02:24](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=144)
    
- 协调器代码位置 [02:24](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=144)  
	协调器代码全部位于`reconciler`包中。
- reconciler包结构 [02:31](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=151)  
	`reconciler`包内文件极多，分为`new`和`old`两个版本。
- old版本对应关系 [02:40](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=160)  
	上一节构建出的React版本即对应此处的`old`版本。
- new版本用途 [02:46](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=166)  
	`new`版本为React团队测试新特性而准备。

## 渲染器相关包 
[02:52](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=172)
    
- react-dom渲染器 [02:52](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=172)  
	最常见的React DOM渲染器，与DOM操作相关的API均暴露在`react-dom`包下。
- 其他渲染器存在 [03:04](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=184)  
	同样存在`react-native`渲染器及`react-node`渲染器。
- react-node渲染器说明 [03:09](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=189)  
	`react-node`的README指出，它是一个为调试Fiber而存在的渲染器。
- react-art渲染器 [03:18](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=198)  
	`react-art`渲染器用于渲染到`<canvas>`及SVG。

## 公共方法与类型定义位置 
[03:25](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=205)
    
- 公共方法存放位置 [03:25](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=205)  
	公共方法保存在`shared`文件夹下。
- shared包示例功能 [03:34](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=214)  
	`shared`包中包含`object-is`polyfill、`ReactSymbols`实现，以及所有React type类型的声明。

## packages下其他包的性质分类 
[03:47](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=227)
    
- 试验性质包 [03:47](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=227)  
	`packages`下除前述包外，还有试验性质的包。
- 试验包设计目的 [04:01](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=241)  
	将React流程中的一部分抽离为可独立使用的包。
- 试验包使用警告 [04:07](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=247)  
	因属试验性质，不建议在生产环境使用。
- react-reconciler的双重属性 [04:12](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=252)  
	`react-reconciler`本身即为一个试验性质的包。
- react-reconciler的独立性验证 [04:17](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=257)  
	`react-reconciler`（发言人误读为“counselor”）即React协调器。
- react-reconciler的NPM独立性 [04:24](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=264)  
	其README注明它本身是一个独立的NPM包，可通过`react-reconciler`构建简单`react-dom`。
- 辅助性质包 [04:44](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=284)  
	还包括辅助性质的包，将辅助功能形成单独包。
- 辅助包示例 [04:52](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=292)  
	示例包括`react-client`、`react-fetch`、`react-refetch`。

## 总结与后续安排 
[05:01](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=301)
    
- 源码目录划分总结 [04:52](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=292)  
	React源码目录大体划分为上述结构。
- 理念篇结束与架构篇开启 [05:01](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=24a5c265c54f495bba51ddb53eeec646#?seek_t=301)  
	至此理念篇学习结束，接下来将进入架构篇，深入React源码。