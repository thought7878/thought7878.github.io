

本视频讲述了`最小堆`数据结构的基本概念、`完全二叉树`的特性及*其与数组存储的关系*，并介绍了*最小堆的常见操作*（如 pick、push 和 pop）及*其应用场景*。

![[_posts/react/总结/核心概念、原理、源码/源码/教程/React18底层源码深入剖析/第5章 React18全新底层核心运行机制：任务调度机制的代码实践/media/9c3d703d686711470884984d7fbfb726_MD5.webp]]

## 二叉树
[00:14](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=649abdd1fba04df493057be1e8facc1d#?seek_t=14)
    
- 二叉树的概念  
	`二叉树`是指每个节点*最多有两个子节点*的树结构，称为左子节点和右子节点。

## 满二叉树
[01:02](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=649abdd1fba04df493057be1e8facc1d#?seek_t=62)
    
- `满二叉树`（Full Binary Tree，国内定义）、完美二叉树（国外定义）
	每一层上的节点数都达到最大值，*除叶子结点（最后一层外），所有节点都有两个子节点*。
- *节点总数计算公式*  
	层数为 K，K 的满二叉树总节点数为 2^K−1。

![[_posts/react/总结/核心概念、原理、源码/源码/教程/React18底层源码深入剖析/第5章 React18全新底层核心运行机制：任务调度机制的代码实践/media/612e5a7a3da2c990b4898a9aaeaf3f4e_MD5.webp]]

### 国内外关于满二叉树定义的差异 
[02:53](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=649abdd1fba04df493057be1e8facc1d#?seek_t=173)
    
- 国内标准要求所有非叶子节点必须有两个子节点，而国外有些资料将“完美二叉树”等同于满二叉树。
![[_posts/react/总结/核心概念、原理、源码/源码/教程/React18底层源码深入剖析/第5章 React18全新底层核心运行机制：任务调度机制的代码实践/media/0abf5afa82169e920b02b6ef156c0c16_MD5.webp]]

## 完全二叉树
[04:54](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=649abdd1fba04df493057be1e8facc1d#?seek_t=294)
    
- `完全二叉树`的概念  
	在满二叉树基础上，*仅在最下层从右向左连续缺少若干节点*。
- 存储方式  
	完全二叉树*适合用数组存储，因其结构规律性强，浪费空间少*。
![[_posts/react/总结/核心概念、原理、源码/源码/教程/React18底层源码深入剖析/第5章 React18全新底层核心运行机制：任务调度机制的代码实践/media/2e35b1c7d2205a8d483968d3ebd040d5_MD5.webp]]

## 满二叉树、完全二叉树的**数组索引**关系 
[06:54](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=649abdd1fba04df493057be1e8facc1d#?seek_t=414)
    
- 父子节点索引公式
	- 父节点索引：parentIndex
	- 左子节点索引：(parentIndex+1)\*2 - 1
	- 右子节点索引：(parentIndex+1)\*2
![[_posts/react/总结/核心概念、原理、源码/源码/教程/React18底层源码深入剖析/第5章 React18全新底层核心运行机制：任务调度机制的代码实践/media/36122d2f1b4fe17948e6033db62bb4c5_MD5.webp]]

## 最小堆
[07:48](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=649abdd1fba04df493057be1e8facc1d#?seek_t=468)
参考：[[2.堆的简介]]

- 最小堆的定义  
	`最小堆`（最小二叉堆/小顶堆）是一棵完全二叉树，且满足*父节点的值小于子节点的*（任意子树的根节点小于等于其左右子节点）。
- **用途**  
	**快速获取当前集合中的最小元素**。
![[_posts/react/总结/核心概念、原理、源码/源码/教程/React18底层源码深入剖析/第5章 React18全新底层核心运行机制：任务调度机制的代码实践/media/842f7d5531426cd3094284824e23c5e8_MD5.webp]]

### 计算数组索引
![[_posts/react/总结/核心概念、原理、源码/源码/教程/React18底层源码深入剖析/第5章 React18全新底层核心运行机制：任务调度机制的代码实践/media/e7531ef89a9713b93da7a70c48082562_MD5.webp]]

### 最小堆与其他堆结构对比 
[09:15](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=649abdd1fba04df493057be1e8facc1d#?seek_t=555)
    
- 最小堆 vs 最大堆
	- 最小堆：根节点为最小值。
	- 最大堆（又称大顶堆）：根节点为最大值。

### 最小堆的核心操作概述 
[12:13](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=649abdd1fba04df493057be1e8facc1d#?seek_t=733)
    
- peek操作  
	*获取*堆顶元素（即最小值）。peek：瞄一眼
- push操作  
	向堆中*插入*一个新元素并重新调整堆结构以保持最小堆性质。
- pop操作  
	*删除*堆顶元素并重新调整堆结构。

## 测试用例设计与实现思路 
[15:35](https://b.quark.cn/apps/5AZ7aRopS/routes/quark-video-ai-summary/pc?debug=0&fid=649abdd1fba04df493057be1e8facc1d#?seek_t=935)
    
- 示例代码中使用对象数组模拟任务调度场景，其中 `sortIndex` 字段用于比较大小。
- 测试逻辑包括：
	- 创建空堆时取最小值失败。
	- 单个元素时返回自身。
	- 多个元素时正确维护堆结构并提取最小值。