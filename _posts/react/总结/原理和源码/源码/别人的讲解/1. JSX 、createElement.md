视频：[React 源码  -- JSX 、createElement](https://www.bilibili.com/video/BV1ZE3ReBELQ/?share_source=copy_web&vd_source=9c1e19a73fa7bd23bb37aa8d7467d862)

## React的渲染流程
视频：[00:00]

参考：[[React的渲染流程-DS]]

JSX -createElement()--> ReactElement --> Fiber --> Commit
- 第一个阶段：构建Fiber树，JSX -createElement()--> ReactElement --> Fiber
- 第二个阶段：增删改DOM，Commit


## JSX
视频：[00:50]
参考：[[JSX-DS]]

### 单个子元素的编译

![[_posts/react/总结/原理和源码/源码/别人的讲解/media/c7e410245a3b124bc3093409b9fe68c1_MD5.jpeg]]

### 属性的编译

![[_posts/react/总结/原理和源码/源码/别人的讲解/media/a841071b792be23c78c4fe05729cfee6_MD5.jpeg]]

### 嵌套的编译

![[_posts/react/总结/原理和源码/源码/别人的讲解/media/de49fab9dbbdfa723fb717c5b5d396c8_MD5.jpeg]]


### 函数组件的编译
**第一个参数是函数引用，不是Host Component的字符串。**

*为什么函数、类组件的首字母一定要大写？* ***Babel在编译时*，使用首字母的大小写，来区分函数组件（类组件）、Host Component。 如果函数组件的首字母小写了，就会变成Host Component的createElement调用方式，会丢失函数引用，发生错误。** 如下图

![[_posts/react/总结/原理和源码/源码/别人的讲解/media/572982cc712bc9d52f53dab870820446_MD5.jpeg]]

![[_posts/react/总结/原理和源码/源码/别人的讲解/media/1f4e20b9b05c67765e49aeb071b92561_MD5.jpeg]]

### 函数组件内部JSX的编译

![[_posts/react/总结/原理和源码/源码/别人的讲解/media/8681ae5e4e5d0c64c1836e49ade1f7f6_MD5.jpeg]]

### 编译的总结
**Babel 会将JS中出现<>的地方，编译成 `jsx()`、`jsxs()`、`React.createElement()`的调用。**

![[_posts/react/总结/原理和源码/源码/别人的讲解/media/e7825555efb364a7a812fd4d512d4874_MD5.jpeg]]

## ReactElement、createElement()
[03:16]

![[_posts/react/总结/原理和源码/源码/别人的讲解/media/0edbbc854c276463855a89e23dfc4380_MD5.jpeg]]

子元素为文本：
![[_posts/react/总结/原理和源码/源码/别人的讲解/media/89fbe56e6b12a2be6bd4bc2f297ebf48_MD5.jpeg]]

有属性：
![[_posts/react/总结/原理和源码/源码/别人的讲解/media/82f1656d68d4f11b448e38f2420c6d0d_MD5.jpeg]]

多个子元素：
![[_posts/react/总结/原理和源码/源码/别人的讲解/media/7526f5a3d66b10b7fbee5fa10e9f4de9_MD5.jpeg]]

函数组件：**type是App**
![[_posts/react/总结/原理和源码/源码/别人的讲解/media/836950350c38caf9c65a14e7b62af933_MD5.jpeg]]

总结：
![[_posts/react/总结/原理和源码/源码/别人的讲解/media/ed9ca81c87eca2b32d3433c73f8f9f71_MD5.jpeg]]











## 相关资料
[React 源码  -- JSX 、createElement](https://www.bilibili.com/video/BV1ZE3ReBELQ/?share_source=copy_web&vd_source=9c1e19a73fa7bd23bb37aa8d7467d862)
