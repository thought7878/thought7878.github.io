# Why
- **处理数据获取和订阅**
    - **数据获取**：在 Web 应用中，组件通常需要*从外部数据源（如服务器 API）获取数据来展示内容*。例如，在一个新闻应用中，新闻列表组件需要从服务器获取最新的新闻数据。`useEffect`可以**用于触发网络请求来获取数据**。通过在`useEffect`中调用数据获取函数（如`fetch`），可以*在组件挂载（mount）时获取数据，并且在依赖项（如查询参数）变化时重新获取数据*，确保组件展示的数据是最新的。
    - **事件订阅**：*许多组件需要订阅外部事件来更新自身状态或执行某些操作*。比如，在一个聊天应用中，聊天窗口组件可能需要订阅消息推送事件。`useEffect`提供了一个合适的地方来设置这些订阅，并且可以在组件卸载（unmount）时清理这些订阅，防止内存泄漏。例如，在`useEffect`中可以使用`addEventListener`来*订阅浏览器窗口的滚动事件*，并且在组件卸载时使用`removeEventListener`来取消订阅。
- **实现 DOM 操作和其他副作用**
    - **DOM 操作**：尽管 React 鼓励通过更新状态来间接修改 DOM，但在某些情况下，直接的 DOM 操作是必要的。例如，在一个自定义的下拉菜单组件中，可能需要在组件挂载时获取下拉菜单的 DOM 元素，设置其样式或者添加事件监听器。`useEffect`允许在合适的时机（组件挂载后）进行这些 DOM 操作。
    - **与第三方库集成**：当使用第三方库时，往往需要执行一些初始化或清理操作。例如，在使用一个图表库时，*可能需要在组件挂载时初始化图表，并且在组件卸载时销毁图表*。`useEffect`可以帮助管理这些与第三方库相关的操作，使得组件能够正确地与外部库集成。

# What

`useEffect`是 React 提供的一个 Hook，用于在函数组件中执行副作用（Side Effects）。**副作用**是指那些在函数组件渲染过程之外发生的操作，比如数据获取、订阅事件、手动修改 DOM 等。

## 源码


# How
**基本语法**：

```jsx
useEffect(() => { 
// 副作用逻辑 
}, [dependency1, dependency2,...]);
```

- 第一个参数是一个函数，包含了要执行的副作用逻辑。这个函数会在组件挂载后、更新后（如果依赖项变化）以及卸载前执行。

- 第二个参数是一个依赖项数组。它用于**控制副作用函数的执行时机**。
	- 如果依赖项数组为空（`[]`），副作用函数*只会在组件挂载和卸载时执行一次*，类似于`componentDidMount`和`componentWillUnmount`生命周期方法的组合（在类组件中）。
	- 如果依赖项数组包含某些变量，那么*当这些变量中的任何一个发生变化时，副作用函数就会重新执行*。

**示例**：

```jsx
import React, { useState, useEffect } from'react';
function ExampleComponent() {
  const [count, setCount] = useState(0);
  useEffect(() => {
    // 组件挂载时，设置文档标题为包含计数的内容
    document.title = `You clicked ${count} times`;
    return () => {
      // 组件卸载时，清理操作（这里只是示例，此例中无实际清理内容）
      console.log('组件卸载，清理操作');
    };
  }, [count]);
  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
```

**示例说明**：

在`ExampleComponent`中，`useEffect`用于更新文档标题，使其显示按钮被点击的次数（通过`count`状态）。依赖项数组为`[count]`，这意味着每当`count`状态发生变化时，副作用函数就会重新执行，更新文档标题。同时，副作用函数返回一个清理函数，在组件卸载时会执行这个清理函数，这里只是简单地打印日志，在实际应用中可能会用于取消订阅、清除定时器等操作。