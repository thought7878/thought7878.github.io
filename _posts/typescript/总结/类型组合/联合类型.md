### è”åˆç±»å‹ï¼ˆType Unionï¼‰

**è”åˆç±»å‹**ï¼ˆUnion Typesï¼‰æ˜¯ TypeScript çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œå…è®¸ä¸€ä¸ªå˜é‡æˆ–è¡¨è¾¾å¼**åŒæ—¶æ”¯æŒå¤šç§ç±»å‹**ã€‚é€šè¿‡ `|` ç¬¦å·å°†å¤šä¸ªç±»å‹ç»„åˆï¼Œ*è¡¨ç¤ºâ€œæˆ–â€çš„é€»è¾‘å…³ç³»*ï¼Œ**é€‚ç”¨äºéœ€è¦å¤„ç†åŠ¨æ€æˆ–å¤šç§å¯èƒ½æ•°æ®ç±»å‹çš„åœºæ™¯**ã€‚

---

#### ä¸€ã€åŸºæœ¬è¯­æ³•ä¸å®šä¹‰
è”åˆç±»å‹é€šè¿‡ `|` åˆ†éš”å¤šä¸ªç±»å‹ï¼Œè¡¨ç¤º*å€¼çš„ç±»å‹å¯ä»¥æ˜¯å…¶ä¸­ä¹‹ä¸€*ï¼š
```typescript
let value: string | number;
value = "hello"; // âœ… å…è®¸
value = 42;      // âœ… å…è®¸
value = true;    // âŒ é”™è¯¯ï¼šä¸æ˜¯ string æˆ– number
```

**åº”ç”¨åœºæ™¯**ï¼š
- å˜é‡å¯èƒ½ä¸ºå¤šç§ç±»å‹ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ã€API å“åº”ï¼‰ã€‚
- å‡½æ•°å‚æ•°æˆ–è¿”å›å€¼æ”¯æŒå¤šç±»å‹è¾“å…¥/è¾“å‡ºã€‚
- ä¸ç±»å‹åˆ«åç»“åˆï¼Œå®šä¹‰å¤æ‚ç±»å‹é€»è¾‘ã€‚

---

#### äºŒã€ç±»å‹æ”¶çª„ï¼ˆType Narrowingï¼‰
ç›´æ¥æ“ä½œè”åˆç±»å‹å˜é‡æ—¶ï¼Œåªèƒ½è®¿é—®æ‰€æœ‰ç±»å‹çš„å…±æœ‰å±æ€§å’Œæ–¹æ³•ã€‚*éœ€é€šè¿‡**ç±»å‹æ”¶çª„**ç¡®å®šå…·ä½“ç±»å‹åæ“ä½œ*ã€‚

##### 1. **`typeof` ç±»å‹å®ˆå«**
```typescript
function printValue(value: string | number) {
  if (typeof value === "string") {
    console.log(value.toUpperCase()); // ç±»å‹æ”¶çª„ä¸º string
  } else {
    console.log(value.toFixed(2));    // ç±»å‹æ”¶çª„ä¸º number
  }
}
```

##### 2. **`instanceof` ç±»å‹å®ˆå«**
é€‚ç”¨äºç±»å®ä¾‹çš„è”åˆç±»å‹ï¼š
```typescript
class Cat { meow() {} }
class Dog { bark() {} }

function handlePet(pet: Cat | Dog) {
  if (pet instanceof Cat) {
    pet.meow();
  } else {
    pet.bark();
  }
}
```

##### 3. **è‡ªå®šä¹‰ç±»å‹è°“è¯**
é€šè¿‡è¿”å›ç±»å‹ä¸º `ç±»å‹è°“è¯` çš„å‡½æ•°å®ç°å¤æ‚é€»è¾‘ï¼š
```typescript
interface Fish { swim(): void }
interface Bird { fly(): void }

function isFish(pet: Fish | Bird): pet is Fish {
  return "swim" in pet;
}

function move(pet: Fish | Bird) {
  if (isFish(pet)) {
    pet.swim();
  } else {
    pet.fly();
  }
}
```

##### 4. **å¯è¾¨è¯†è”åˆï¼ˆDiscriminated Unionsï¼‰**
é€šè¿‡å…±æœ‰å­—æ®µï¼ˆæ ‡ç­¾ï¼‰åŒºåˆ†è”åˆæˆå‘˜ï¼š
```typescript
type Shape =
  | { kind: "circle"; radius: number }
  | { kind: "square"; side: number };

function getArea(shape: Shape) {
  switch (shape.kind) {
    case "circle":
      return Math.PI * shape.radius ** 2; // å¯è®¿é—® radius
    case "square":
      return shape.side ** 2;             // å¯è®¿é—® side
  }
}
```

---

#### ä¸‰ã€è”åˆç±»å‹ä¸ç±»å‹æ“ä½œ

##### 1. **è”åˆç±»å‹ä¸ç±»å‹åˆ«å**
é€šè¿‡ `type` å®šä¹‰å¯å¤ç”¨çš„è”åˆç±»å‹ï¼š
```typescript
type Status = "pending" | "success" | "error";
type ID = string | number;

function logStatus(status: Status) {
  console.log(status.toUpperCase());
}
```

##### 2. **è”åˆç±»å‹ä¸æ•°ç»„**
è¡¨ç¤ºæ•°ç»„å…ƒç´ å¯ä»¥æ˜¯å¤šç§ç±»å‹ï¼š
```typescript
const mixedArray: (string | number)[] = ["text", 42];
```

##### 3. **è”åˆç±»å‹ä¸å‡½æ•°é‡è½½**
ç®€åŒ–å‡½æ•°å¤šç±»å‹å‚æ•°çš„å£°æ˜ï¼š
```typescript
// æ›¿ä»£å¤šä¸ªé‡è½½å£°æ˜
function parseInput(input: string | number): string | number {
  return typeof input === "string" ? input.trim() : input.toFixed(2);
}
```

---

#### å››ã€è”åˆç±»å‹çš„æ³¨æ„äº‹é¡¹

1. **é»˜è®¤åªèƒ½è®¿é—®å…±æœ‰æˆå‘˜**  
   æœªæ”¶çª„æ—¶ï¼Œåªèƒ½ä½¿ç”¨æ‰€æœ‰ç±»å‹çš„å…±æœ‰å±æ€§/æ–¹æ³•ï¼š
   ```typescript
   function getLength(value: string | any[]) {
     return value.length; // âœ… length æ˜¯å…±æœ‰å±æ€§
   }
   ```

2. **é¿å…è¿‡åº¦å¤æ‚çš„è”åˆ**  
   è¿‡å¤šçš„è”åˆç±»å‹ä¼šé™ä½ä»£ç å¯ç»´æŠ¤æ€§ï¼Œå»ºè®®æ‹†åˆ†ä¸ºæ›´å°çš„ç±»å‹ã€‚

3. **è°¨æ…ä½¿ç”¨ç±»å‹æ–­è¨€**  
   å¼ºåˆ¶æ–­è¨€å¯èƒ½ç»•è¿‡ç±»å‹æ£€æŸ¥ï¼Œå¼•å‘è¿è¡Œæ—¶é”™è¯¯ï¼š
   ```typescript
   let value: string | number = "hello";
   (value as number).toFixed(2); // âŒ è¿è¡Œæ—¶é”™è¯¯
   ```

4. **ä¸äº¤å‰ç±»å‹çš„åŒºåˆ«**  
   - **è”åˆç±»å‹**ï¼š`A | B` è¡¨ç¤ºå¯ä»¥æ˜¯ A æˆ– Bã€‚
   - **äº¤å‰ç±»å‹**ï¼š`A & B` è¡¨ç¤ºåŒæ—¶æ˜¯ A å’Œ B çš„ç±»å‹ç»„åˆã€‚

---

#### äº”ã€å®é™…åº”ç”¨ç¤ºä¾‹

**åœºæ™¯ä¸€ï¼šå¤„ç† API å“åº”**  
```typescript
type ApiResponse = 
  | { status: "success"; data: User }
  | { status: "error"; message: string };

function handleResponse(response: ApiResponse) {
  if (response.status === "success") {
    console.log(response.data.name); // ç±»å‹å®‰å…¨è®¿é—®
  } else {
    console.error(response.message);
  }
}
```

**åœºæ™¯äºŒï¼šåŠ¨æ€é…ç½®é€‰é¡¹**  
```typescript
type ThemeConfig = 
  | { mode: "light"; brightness: number }
  | { mode: "dark"; contrast: number };

function applyTheme(config: ThemeConfig) {
  if (config.mode === "light") {
    setBrightness(config.brightness);
  } else {
    setContrast(config.contrast);
  }
}
```

---

#### å…­ã€æ€»ç»“

- **æ ¸å¿ƒä»·å€¼**ï¼šæä¾›çµæ´»æ€§ï¼Œæ”¯æŒå˜é‡ã€å‡½æ•°å‚æ•°æˆ–è¿”å›å€¼çš„å¤šç±»å‹å¤„ç†ã€‚
- **ç±»å‹å®‰å…¨**ï¼šé€šè¿‡ç±»å‹æ”¶çª„ç¡®ä¿æ“ä½œåˆæ³•ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚
- **æœ€ä½³å®è·µ**ï¼š
  - ä¼˜å…ˆä½¿ç”¨å¯è¾¨è¯†è”åˆæå‡ä»£ç å¯è¯»æ€§ã€‚
  - é¿å…è¿‡åº¦å¤æ‚çš„è”åˆç±»å‹ï¼Œå¿…è¦æ—¶æ‹†åˆ†ã€‚
  - ç»“åˆç±»å‹åˆ«åå’Œæ¥å£ç®¡ç†å¤æ‚ç±»å‹é€»è¾‘ã€‚

è”åˆç±»å‹æ˜¯ TypeScript åŠ¨æ€ç±»å‹å¤„ç†çš„æ ¸å¿ƒå·¥å…·ï¼Œåˆç†ä½¿ç”¨èƒ½æ˜¾è‘—æå‡ä»£ç çš„çµæ´»æ€§ä¸å¥å£®æ€§ã€‚ ğŸ› ï¸