【两小时，带你深入前端性能优化方案】 https://www.bilibili.com/video/BV1GAWDe7E3k/?p=10&share_source=copy_web&vd_source=9c1e19a73fa7bd23bb37aa8d7467d862


视频讲述了实现图片懒加载的解决方案，具体如下：

- **明确实现图片懒加载的两步**：[00:00]第一步是构建自定义指令，第二步是利用intersection observer完成DOM是否可见的检测。
- **明确实现前需了解当前资源请求数量**：[00:26]在进行解决方案实现之前，要先明确当前资源的请求数量。
- **创建自定义指令的步骤**：[00:42]在代码的SRC里新建directives文件夹，在该文件夹中创建index.js文件，通过此文件完成自定义指令，在文件中export default导出一个带有install函数的对象，以便用app.use的方式使用。
- **app.use方法的相关说明**：[01:23]app.use是vue3中提供的安装插件的方法，插件可以是对象或函数，若传入对象，该对象必须携带install方法，调用时会传入app实例。
- **注册指令及相关设置**：[02:54]在插件中利用app.directive方法注册指令，指令名字为image lazy，指令对象中监听vue中的mounted生命周期钩子，该钩子接收EL参数，EL代表image dom对象。
- **处理ESLint错误**：[04:14]使用指令时可能会出现ESLint错误，可到eslintrc文件的rules里关闭对应的错误检测，重启项目后错误消失。
- **实现图片懒加载的六步**：[05:38]第一步缓存当前图片路径，即保存img标签上的src；第二步将img的src变为占位图，实现一开始不加载；第三步利用intersection observer监听DOM是否将要被看到，该方法接收要监听的DOM和回调方法，回调方法中可通过isIntersecting判断DOM是否被看到；第四步当DOM被看到时渲染图片，指定EL.src等于缓存的路径；第五步渲染完成后通过intersection observer返回对象的stop方法停止监听。
- **验证图片懒加载效果**：[09:02]在浏览器中清空缓存重新加载，调慢网速滚动页面，可看到图片从占位图变为实际图片，且资源请求数相比未实现时减少，随着滚动会不断增加。
- **图片懒加载在实际开发中的应用**：[10:06]图片懒加载在日常企业开发中很常见，例如B站就有此功能，滚动时请求的图片资源数会不断增加。