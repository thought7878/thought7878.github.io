# å‰ç«¯ç³»ç»Ÿè®¾è®¡ï¼šæ¶æ„å¸ˆçš„å…¨æ ˆæ€ç»´ä¸å®æˆ˜æŒ‡å—

ä½œä¸ºå‰ç«¯æ¶æ„å¸ˆï¼Œ**ç³»ç»Ÿè®¾è®¡**å·²ä»å•çº¯çš„"é¡µé¢å®ç°"å‡çº§ä¸º**æ„å»ºå¯æ‰©å±•ã€é«˜æ€§èƒ½ã€é«˜å¯ç”¨çš„å‰ç«¯ç”Ÿæ€ç³»ç»Ÿ**ã€‚è¿™ä¸ä»…æ˜¯æŠ€æœ¯é€‰å‹é—®é¢˜ï¼Œæ›´æ˜¯**è¿æ¥ä¸šåŠ¡éœ€æ±‚ä¸æŠ€æœ¯å®ç°çš„æˆ˜ç•¥æ¡¥æ¢**ã€‚ä»¥ä¸‹æ˜¯æˆ‘åŸºäºå¤šä¸ªäº¿çº§DAUåº”ç”¨çš„å®æˆ˜ç»éªŒæ€»ç»“ï¼Œèšç„¦**æ¶æ„æ€ç»´**ã€**è®¾è®¡æ¨¡å¼**å’Œ**è½åœ°é™·é˜±**ï¼ŒåŠ©ä½ è®¾è®¡çœŸæ­£å¯æ‰©å±•çš„å‰ç«¯ç³»ç»Ÿã€‚

---

## ä¸€ã€å‰ç«¯ç³»ç»Ÿè®¾è®¡çš„æœ¬è´¨ï¼šè¶…è¶Š"åˆ‡é¡µé¢"çš„è®¤çŸ¥

### 1. ä¼ ç»Ÿè®¤çŸ¥ vs ç°ä»£æŒ‘æˆ˜
| ä¼ ç»Ÿè®¤çŸ¥ | ç°ä»£æŒ‘æˆ˜ | æ¶æ„å½±å“ |
|----------|----------|----------|
| "å‰ç«¯å³UIå±‚" | å‰ç«¯æ˜¯**å®Œæ•´åº”ç”¨å±‚** | éœ€è¦å…¨æ ˆæ€ç»´ |
| "å…³æ³¨æµè§ˆå™¨å…¼å®¹" | å…³æ³¨**å¤šç«¯ä½“éªŒä¸€è‡´æ€§** | æ¶æ„å¤æ‚åº¦â†‘ |
| "é¡µé¢è·³è½¬é€»è¾‘" | **çŠ¶æ€é©±åŠ¨çš„ä½“éªŒæµ** | æ•°æ®æµè®¾è®¡å…³é”® |
| "é™æ€èµ„æºä¼˜åŒ–" | **åŠ¨æ€èƒ½åŠ›ä¸æ€§èƒ½å¹³è¡¡** | éœ€è¦ç²¾ç»†æ²»ç† |
| "å›¢é˜Ÿç‹¬ç«‹å¼€å‘" | **å¾®å‰ç«¯ååŒç”Ÿæ€** | æ¥å£è®¾è®¡é‡è¦æ€§â†‘ |

> ğŸ’¡ **æ¶æ„å¸ˆæ´å¯Ÿ**ï¼š  
> ç°ä»£å‰ç«¯ç³»ç»Ÿæœ¬è´¨æ˜¯**åˆ†å¸ƒå¼åº”ç”¨**ï¼š  
> - **å®¢æˆ·ç«¯**ï¼šæµè§ˆå™¨/ç§»åŠ¨ç«¯/æ¡Œé¢ç«¯  
> - **è¾¹ç¼˜å±‚**ï¼šCDN/Edge Functions  
> - **æœåŠ¡å±‚**ï¼šBFF/APIç½‘å…³  
> - **æ•°æ®å±‚**ï¼šç¼“å­˜/æ•°æ®åº“  
> å‰ç«¯æ¶æ„å¸ˆå¿…é¡»å…·å¤‡**å…¨æ ˆè§†è§’**ï¼Œç†è§£å„å±‚äº¤äº’ã€‚

### 2. ç³»ç»Ÿè®¾è®¡çš„äº”å¤§æ ¸å¿ƒç›®æ ‡
| ç›®æ ‡ | è¡¡é‡æŒ‡æ ‡ | ä¸šåŠ¡ä»·å€¼ |
|------|----------|----------|
| **å¯æ‰©å±•æ€§** | æ–°åŠŸèƒ½æ¥å…¥æ—¶é—´ | äº§å“è¿­ä»£é€Ÿåº¦â†‘ 300% |
| **é«˜æ€§èƒ½** | FCP/LCP < 1.5s | ç”¨æˆ·ç•™å­˜ç‡â†‘ 20% |
| **é«˜å¯ç”¨** | å‰ç«¯é”™è¯¯ç‡ < 0.1% | å•†ä¸šæŸå¤±â†“ 70% |
| **å¯ç»´æŠ¤æ€§** | ä»£ç è…åŒ–ç‡ < 5% | å›¢é˜Ÿæ•ˆç‡â†‘ 40% |
| **å®‰å…¨æ€§** | æ¼æ´ä¿®å¤æ—¶é—´ < 2h | åˆè§„é£é™©â†“ 90% |

> ğŸ“Š **æ•°æ®éªŒè¯**ï¼š  
> æŸç”µå•†å¹³å°å®æ–½ç³»ç»Ÿè®¾è®¡è§„èŒƒåï¼š  
> - é¦–å±åŠ è½½æ—¶é—´ä»3.2s â†’ 0.9s  
> - çº¿ä¸Šäº‹æ•…ä»15æ¬¡/æœˆ â†’ 2æ¬¡/æœˆ  
> - æ–°åŠŸèƒ½äº¤ä»˜å‘¨æœŸä»3å‘¨ â†’ 5å¤©  

---

## äºŒã€æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼šæ¶æ„å¸ˆçš„å†³ç­–æ¡†æ¶

### 1. åˆ†å±‚æ¶æ„åŸåˆ™ï¼ˆé¿å…"é¢æ¡ä»£ç "ï¼‰
```mermaid
graph TD
  A[è¡¨ç°å±‚] -->|ç”¨æˆ·äº¤äº’| B[åº”ç”¨å±‚]
  B -->|ä¸šåŠ¡é€»è¾‘| C[é¢†åŸŸå±‚]
  C -->|æ•°æ®å¥‘çº¦| D[åŸºç¡€è®¾æ–½å±‚]
  D --> E[API/ç¬¬ä¸‰æ–¹æœåŠ¡]
  
  A -->|ç›´æ¥è®¿é—®| D  %% ç¦æ­¢ï¼
  B -->|ç›´æ¥è®¿é—®| E  %% ç¦æ­¢ï¼
```

**å„å±‚èŒè´£**ï¼š
- **è¡¨ç°å±‚**ï¼šUIç»„ä»¶ã€è·¯ç”±ã€æ ·å¼
- **åº”ç”¨å±‚**ï¼šç”¨ä¾‹å®ç°ã€çŠ¶æ€ç®¡ç†ã€å¯¼èˆªé€»è¾‘
- **é¢†åŸŸå±‚**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€é¢†åŸŸæ¨¡å‹
- **åŸºç¡€è®¾æ–½å±‚**ï¼šAPIé€‚é…å™¨ã€ç¼“å­˜ã€å·¥å…·åº“

**åæ¨¡å¼**ï¼š
```jsx
// é”™è¯¯ï¼šè¡¨ç°å±‚ç›´æ¥è°ƒç”¨API
function UserProfile() {
  const [user, setUser] = useState(null);
  
  useEffect(() => {
    // ç¦æ­¢ï¼è¿ååˆ†å±‚åŸåˆ™
    fetch(`/api/users/${id}`).then(res => setUser(res.json()));
  }, [id]);
  
  return <div>{user?.name}</div>;
}
```

**æ­£ç¡®å®è·µ**ï¼š
```jsx
// é¢†åŸŸå±‚ï¼šdomain/users.js
export const getUser = (id) => 
  apiClient.get(`/users/${id}`).then(mapToDomainModel);

// åº”ç”¨å±‚ï¼šusecases/fetchUserProfile.js
export const fetchUserProfile = async (id) => {
  try {
    return { data: await getUser(id) };
  } catch (error) {
    return { error: mapDomainError(error) };
  }
};

// è¡¨ç°å±‚ï¼šUserProfile.jsx
function UserProfile() {
  const { data, error } = useFetchUserProfile(params.id);
  return <div>{data?.name}</div>;
}
```

### 2. å…³æ³¨ç‚¹åˆ†ç¦»åŸåˆ™ï¼ˆSoCï¼‰
| å…³æ³¨ç‚¹ | å®ç°æ–¹å¼ | å·¥å…· |
|--------|----------|------|
| **æ•°æ®è·å–** | loader/action | React Router |
| **çŠ¶æ€ç®¡ç†** | é¢†åŸŸæ¨¡å‹+çŠ¶æ€æœº | XState |
| **UIæ¸²æŸ“** | ç»„ä»¶åŒ–+è®¾è®¡ç³»ç»Ÿ | Storybook |
| **å¯¼èˆªé€»è¾‘** | è·¯ç”±é…ç½® | React Router |
| **é”™è¯¯å¤„ç†** | ç»Ÿä¸€é”™è¯¯è¾¹ç•Œ | ErrorBoundary |

**æ¶æ„ä»·å€¼**ï¼š  
æ¯ä¸ªå…³æ³¨ç‚¹å¯ç‹¬ç«‹æ¼”è¿›ï¼Œé¿å…"ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«"ã€‚

### 3. æ¸è¿›å¼å¢å¼ºåŸåˆ™
```mermaid
graph LR
  A[æ ¸å¿ƒåŠŸèƒ½] --> B[åŸºç¡€ä½“éªŒ]
  B --> C[å¢å¼ºä½“éªŒ]
  C --> D[ä¸ªæ€§åŒ–ä½“éªŒ]
  
  A -->|å¿…é¡»å·¥ä½œ| E[æ— JSç¯å¢ƒ]
  B -->|å¿…é¡»å·¥ä½œ| F[åŸºç¡€JSç¯å¢ƒ]
  C -->|ä¼˜é›…é™çº§| G[ç°ä»£æµè§ˆå™¨]
  D -->|å¯é€‰| H[é«˜çº§è®¾å¤‡]
```

**å®æ–½ç­–ç•¥**ï¼š
1. **æ ¸å¿ƒåŠŸèƒ½**ï¼šæœåŠ¡ç«¯æ¸²æŸ“å…³é”®å†…å®¹
2. **åŸºç¡€ä½“éªŒ**ï¼šHTML/CSSå®ç°åŸºæœ¬äº¤äº’
3. **å¢å¼ºä½“éªŒ**ï¼šJSæ·»åŠ åŠ¨æ€åŠŸèƒ½
4. **ä¸ªæ€§åŒ–**ï¼šåŸºäºè®¾å¤‡èƒ½åŠ›æ¸è¿›å¢å¼º

> âœ… **æ¡ˆä¾‹**ï¼š  
> æŸç”µå•†å•†å“é¡µï¼š  
> - æ— JSï¼šé™æ€å•†å“ä¿¡æ¯+åŸºç¡€è¡¨å•  
> - åŸºç¡€JSï¼šå›¾ç‰‡è½®æ’­+ç®€å•äº¤äº’  
> - ç°ä»£æµè§ˆå™¨ï¼š3Dé¢„è§ˆ+ARè¯•ç©¿  

---

## ä¸‰ã€å‰ç«¯æ¶æ„æ¨¡å¼ï¼šé€‰æ‹©åˆé€‚çš„éª¨æ¶

### 1. æ¶æ„æ¨¡å¼å†³ç­–çŸ©é˜µ
| æ¨¡å¼       | é€‚ç”¨åœºæ™¯  | å›¢é˜Ÿè§„æ¨¡  | é£é™©     |
| -------- | ----- | ----- | ------ |
| **å•ä½“åº”ç”¨** | MVPé˜¶æ®µ | < 5äºº  | æ‰©å±•æ€§å·®   |
| **æ¨¡å—åŒ–**  | ä¸­å‹åº”ç”¨  | 5-20äºº | æ¨¡å—è¾¹ç•Œæ¨¡ç³Š |
| **å¾®å‰ç«¯**  | å¤§å‹å¹³å°  | > 20äºº | é›†æˆå¤æ‚åº¦é«˜ |
| **è¾¹ç¼˜è®¡ç®—** | å…¨çƒåŒ–åº”ç”¨ | è·¨åœ°åŸŸå›¢é˜Ÿ | è°ƒè¯•å›°éš¾   |

### 2. å•ä½“åº”ç”¨ â†’ æ¨¡å—åŒ– â†’ å¾®å‰ç«¯æ¼”è¿›
**æ¼”è¿›è·¯å¾„**ï¼š
```mermaid
graph LR
  A[å•ä½“åº”ç”¨] -->|ä»£ç åˆ†å‰²| B[æ¨¡å—åŒ–]
  B -->|è¿è¡Œæ—¶é›†æˆ| C[å¾®å‰ç«¯]
  C -->|è¾¹ç¼˜è®¡ç®—| D[åˆ†å¸ƒå¼å‰ç«¯]
```

**å®æ–½æ­¥éª¤**ï¼š
1. **å•ä½“åº”ç”¨**ï¼šåŸºç¡€æ¶æ„æ­å»º
   - ç»Ÿä¸€æ„å»ºå·¥å…·é“¾
   - åŸºç¡€ç»„ä»¶åº“
   - æ ¸å¿ƒçŠ¶æ€ç®¡ç†

2. **æ¨¡å—åŒ–**ï¼šé€»è¾‘è§£è€¦
   - æŒ‰åŠŸèƒ½åŸŸæ‹†åˆ†æ¨¡å—
   - å®šä¹‰æ¨¡å—æ¥å£
   - å…±äº«ä¾èµ–æ²»ç†

3. **å¾®å‰ç«¯**ï¼šè¿è¡Œæ—¶è§£è€¦
   - ç‹¬ç«‹éƒ¨ç½²å•å…ƒ
   - æ²™ç®±éš”ç¦»
   - è·¨åº”ç”¨é€šä¿¡

4. **åˆ†å¸ƒå¼å‰ç«¯**ï¼šè¾¹ç¼˜è®¡ç®—
   - CDNæ‰§è¡Œé€»è¾‘
   - è®¾å¤‡ç«¯æ™ºèƒ½è·¯ç”±
   - å…¨å±€çŠ¶æ€åŒæ­¥

**å…³é”®è½¬æŠ˜ç‚¹**ï¼š
- **æ¨¡å—åŒ–è§¦å‘ç‚¹**ï¼šæ„å»ºæ—¶é—´ > 5åˆ†é’Ÿ
- **å¾®å‰ç«¯è§¦å‘ç‚¹**ï¼šå›¢é˜Ÿ > 15äººæˆ–å‘å¸ƒé¢‘ç‡å†²çª
- **è¾¹ç¼˜è®¡ç®—è§¦å‘ç‚¹**ï¼šå…¨çƒç”¨æˆ·å»¶è¿Ÿ > 500ms

---

## å››ã€çŠ¶æ€ç®¡ç†è®¾è®¡ï¼šé¿å…"çŠ¶æ€æ²¼æ³½"

### 1. çŠ¶æ€åˆ†ç±»ä¸æ²»ç†ç­–ç•¥
| çŠ¶æ€ç±»å‹ | ç”Ÿå‘½å‘¨æœŸ | ç¤ºä¾‹ | ç®¡ç†æ–¹æ¡ˆ |
|----------|----------|------|----------|
| **UIçŠ¶æ€** | ç»„ä»¶çº§ | æŒ‰é’®åŠ è½½çŠ¶æ€ | useState |
| **åº”ç”¨çŠ¶æ€** | ä¼šè¯çº§ | ç”¨æˆ·ç™»å½•çŠ¶æ€ | Context API |
| **é¢†åŸŸçŠ¶æ€** | ä¸šåŠ¡æµç¨‹ | è´­ç‰©è½¦æ•°æ® | Zustand/Jotai |
| **æŒä¹…çŠ¶æ€** | é•¿æœŸå­˜å‚¨ | ç”¨æˆ·åå¥½ | localStorage |
| **å…±äº«çŠ¶æ€** | å¤šæ¨¡å— | è®¾è®¡ç³»ç»Ÿä¸»é¢˜ | Module Federation |

### 2. çŠ¶æ€ç®¡ç†æ¶æ„å›¾
```mermaid
graph TD
  A[çŠ¶æ€æº] --> B{çŠ¶æ€ç±»å‹}
  B -->|UIçŠ¶æ€| C[ç»„ä»¶å†…çŠ¶æ€]
  B -->|åº”ç”¨çŠ¶æ€| D[Context Provider]
  B -->|é¢†åŸŸçŠ¶æ€| E[çŠ¶æ€åº“]
  B -->|å…±äº«çŠ¶æ€| F[è¿œç¨‹æ¨¡å—]
  
  C --> G[ç»„ä»¶æ¶ˆè´¹]
  D --> G
  E --> G
  F --> G
  
  H[çŠ¶æ€æ²»ç†] --> I[çŠ¶æ€ç”Ÿå‘½å‘¨æœŸ]
  H --> J[çŠ¶æ€è¾¹ç•Œ]
  H --> K[çŠ¶æ€åŒæ­¥]
```

### 3. é¢†åŸŸçŠ¶æ€ç®¡ç†å®æˆ˜
**åæ¨¡å¼**ï¼š
```jsx
// é”™è¯¯ï¼šçŠ¶æ€ä¸UIè€¦åˆ
function Cart() {
  const [items, setItems] = useState([]);
  
  const addItem = (product) => {
    // å¤æ‚ä¸šåŠ¡é€»è¾‘æ··æ‚åœ¨ç»„ä»¶ä¸­
    const existing = items.find(i => i.id === product.id);
    if (existing) {
      setItems(items.map(i => 
        i.id === product.id ? {...i, quantity: i.quantity + 1} : i
      ));
    } else {
      setItems([...items, {...product, quantity: 1}]);
    }
  };
  
  return <CartUI items={items} onAdd={addItem} />;
}
```

**æ­£ç¡®æ¨¡å¼**ï¼š
```jsx
// é¢†åŸŸå±‚ï¼šdomain/cart.js
export class Cart {
  constructor(items = []) {
    this.items = items;
  }
  
  addItem(product) {
    const existing = this.items.find(i => i.id === product.id);
    if (existing) {
      return new Cart(this.items.map(i => 
        i.id === product.id ? {...i, quantity: i.quantity + 1} : i
      ));
    }
    return new Cart([...this.items, {...product, quantity: 1}]);
  }
  
  get total() {
    return this.items.reduce((sum, i) => sum + i.price * i.quantity, 0);
  }
}

// åº”ç”¨å±‚ï¼šusecases/cart.js
export const useCart = () => {
  const [cart, setCart] = useState(new Cart());
  
  const addItem = (product) => {
    setCart(prev => prev.addItem(product));
  };
  
  return { cart, addItem };
};

// è¡¨ç°å±‚ï¼šCart.jsx
function Cart() {
  const { cart, addItem } = useCart();
  return <CartUI items={cart.items} onAdd={addItem} />;
}
```

**æ¶æ„ä¼˜åŠ¿**ï¼š
- ä¸šåŠ¡é€»è¾‘å¯æµ‹è¯•ï¼ˆæ— éœ€æ¸²æŸ“ç»„ä»¶ï¼‰
- çŠ¶æ€å˜æ›´å¯é¢„æµ‹ï¼ˆä¸å¯å˜æ›´æ–°ï¼‰
- é€»è¾‘å¤ç”¨ç®€å•ï¼ˆç‹¬ç«‹äºUIï¼‰

---

## äº”ã€æ•°æ®æµè®¾è®¡ï¼šæ„å»ºé«˜æ•ˆä¿¡æ¯ç®¡é“

### 1. æ•°æ®æµæ¨¡å¼å¯¹æ¯”
| æ¨¡å¼        | ä»£è¡¨æ–¹æ¡ˆ      | é€‚ç”¨åœºæ™¯  | é£é™©     |
| --------- | --------- | ----- | ------ |
| **è¯·æ±‚-å“åº”** | REST API  | ç®€å•äº¤äº’  | è¿‡åº¦è¯·æ±‚   |
| **äº‹ä»¶é©±åŠ¨**  | WebSocket | å®æ—¶åº”ç”¨  | çŠ¶æ€åŒæ­¥éš¾  |
| **çŠ¶æ€åŒæ­¥**  | GraphQL   | å¤æ‚æ•°æ®  | æŸ¥è¯¢å¤æ‚åº¦é«˜ |
| **è¾¹ç¼˜æ•°æ®**  | CDNç¼“å­˜     | å…¨çƒåŒ–åº”ç”¨ | æ•°æ®ä¸€è‡´æ€§  |

### 2. æ··åˆæ•°æ®æµæ¶æ„
```mermaid
graph LR
  A[å®¢æˆ·ç«¯] -->|å…³é”®æ•°æ®| B(BFF)
  A -->|å®æ—¶æ›´æ–°| C[WebSocket]
  A -->|è¾¹ç¼˜æ•°æ®| D[Edge Cache]
  B --> E[å¾®æœåŠ¡]
  C --> F[æ¶ˆæ¯é˜Ÿåˆ—]
  D --> G[CDN]
  
  subgraph æ•°æ®æ²»ç†
    H[æ•°æ®å¥‘çº¦] --> I[ç‰ˆæœ¬ç®¡ç†]
    H --> J[é”™è¯¯å¤„ç†]
    H --> K[ç¼“å­˜ç­–ç•¥]
  end
```

**å®æ–½è¦ç‚¹**ï¼š
1. **å…³é”®æ•°æ®**ï¼šé€šè¿‡BFFèšåˆå¾®æœåŠ¡æ•°æ®
   ```js
   // BFFç¤ºä¾‹
   app.get('/api/product/:id', async (req, res) => {
     const [product, reviews, recommendations] = await Promise.all([
       productService.getProduct(req.params.id),
       reviewService.getReviews(req.params.id),
       recommendationService.getForProduct(req.params.id)
     ]);
     res.json({ product, reviews, recommendations });
   });
   ```

2. **å®æ—¶æ›´æ–°**ï¼šWebSocketä»…æ¨é€å˜æ›´
   ```js
   // æœåŠ¡ç«¯
   socket.on('subscribe:cart', (userId) => {
     const cart = getCart(userId);
     socket.join(`cart:${userId}`);
     socket.emit('cart:update', cart);
   });
   
   // å®¢æˆ·ç«¯
   socket.on('cart:update', (cart) => {
     dispatch(cartActions.update(cart));
   });
   ```

3. **è¾¹ç¼˜æ•°æ®**ï¼šCDNç¼“å­˜é™æ€åŒ–åŠ¨æ€å†…å®¹
   ```js
   // é€šè¿‡Cache-Controlæ§åˆ¶
   app.get('/api/regions', (req, res) => {
     res.set('Cache-Control', 'public, max-age=3600');
     res.json(getRegions());
   });
   ```

### 3. æ•°æ®åŠ è½½ä¼˜åŒ–ç­–ç•¥
| é—®é¢˜ | æ–¹æ¡ˆ | æ•ˆæœ |
|------|------|------|
| **ç€‘å¸ƒè¯·æ±‚** | å¹¶è¡ŒåŠ è½½ | TTFBâ†“ 40% |
| **é‡å¤è¯·æ±‚** | å…¨å±€ç¼“å­˜ | è¯·æ±‚é‡â†“ 60% |
| **ç™½å±ç­‰å¾…** | é¢„åŠ è½½+éª¨æ¶å± | FCPâ†‘ 35% |
| **æ•°æ®ä¸ä¸€è‡´** | ç‰ˆæœ¬åŒ–ç¼“å­˜ | é”™è¯¯ç‡â†“ 75% |

**å…·ä½“å®ç°**ï¼š
```jsx
// å…¨å±€ç¼“å­˜ç­–ç•¥
const cache = new Map();

export const fetchData = (key, fetcher) => {
  if (cache.has(key)) return cache.get(key);
  
  const promise = fetcher().then(data => {
    cache.set(key, data);
    return data;
  });
  
  cache.set(key, promise);
  return promise;
};

// è·¯ç”±çº§é¢„åŠ è½½
<Route 
  path="/products/:id" 
  loader={async ({ params }) => {
    // é¢„åŠ è½½ç›¸å…³æ•°æ®
    const [product, reviews] = await Promise.all([
      fetchData(`/products/${params.id}`, () => 
        fetch(`/api/products/${params.id}`)),
      fetchData(`/reviews/${params.id}`, () => 
        fetch(`/api/reviews/${params.id}`))
    ]);
    return { product, reviews };
  }}
/>
```

---

## å…¥å£æ–‡ä»¶ï¼šsrc/index.js
```jsx
import React from 'react';
import ReactDOM from 'react-dom';
import { RouterProvider } from 'react-router-dom';
import { router } from './router';
import { ErrorBoundary } from './components/ErrorBoundary';

// å…¨å±€é”™è¯¯å¤„ç†
window.addEventListener('error', (event) => {
  logErrorToService(event.error);
});

ReactDOM.hydrateRoot(
  document.getElementById('root'),
  <React.StrictMode>
    <ErrorBoundary>
      <RouterProvider router={router} />
    </ErrorBoundary>
  </React.StrictMode>
);

// æœåŠ¡ç«¯æ¸²æŸ“æ°´åˆ
if (window.__INITIAL_DATA__) {
  router.initialize(window.__INITIAL_DATA__);
}
```

**æ¶æ„ä»·å€¼**ï¼š
- **ç»Ÿä¸€å…¥å£**ï¼šæ‰€æœ‰é”™è¯¯è¢«æ•è·
- **ç¯å¢ƒéš”ç¦»**ï¼šåŒºåˆ†å®¢æˆ·ç«¯/æœåŠ¡ç«¯
- **å¯æ‰©å±•ç‚¹**ï¼šé¢„ç•™æ€§èƒ½ç›‘æ§æ¥å…¥

### 2. é”™è¯¯å¤„ç†å±‚çº§è®¾è®¡
```mermaid
graph TD
  A[é”™è¯¯æº] --> B{é”™è¯¯ç±»å‹}
  B -->|JSé”™è¯¯| C[å…¨å±€é”™è¯¯ç›‘å¬]
  B -->|APIé”™è¯¯| D[HTTPæ‹¦æˆªå™¨]
  B -->|æ¸²æŸ“é”™è¯¯| E[ErrorBoundary]
  B -->|ä¸šåŠ¡é”™è¯¯| F[ä¸šåŠ¡é€»è¾‘å¤„ç†]
  
  C --> G[é”™è¯¯åˆ†ç±»]
  D --> G
  E --> G
  F --> G
  
  G --> H[é”™è¯¯ä¸ŠæŠ¥]
  H --> I[é”™è¯¯åˆ†æ]
  I --> J[è‡ªåŠ¨ä¿®å¤]
```

**å…·ä½“å®ç°**ï¼š
```js
// HTTPæ‹¦æˆªå™¨
apiClient.interceptors.response.use(
  response => response,
  error => {
    if (error.response) {
      // 401 å¤„ç†
      if (error.response.status === 401) {
        store.dispatch(logout());
      }
      // ä¸šåŠ¡é”™è¯¯
      if (error.response.data.code) {
        return Promise.reject(new BizError(
          error.response.data.message,
          error.response.data.code
        ));
      }
    }
    return Promise.reject(error);
  }
);

// ErrorBoundary
class ErrorBoundary extends React.Component {
  state = { hasError: false, error: null };
  
  static getDerivedStateFromError(error) {
    return { 
      hasError: true,
      error: error instanceof BizError ? 
        error : 
        new Error('ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·é‡è¯•')
    };
  }
  
  componentDidCatch(error, info) {
    logError({
      error,
      componentStack: info.componentStack,
      timestamp: Date.now()
    });
  }
  
  render() {
    if (this.state.hasError) {
      return <ErrorPage error={this.state.error} />;
    }
    return this.props.children;
  }
}
```

### 3. ç›‘æ§æŒ‡æ ‡ä½“ç³»
| ç±»åˆ« | å…³é”®æŒ‡æ ‡ | å‘Šè­¦é˜ˆå€¼ | å·¥å…· |
|------|----------|----------|------|
| **æ€§èƒ½** | FCP/LCP | > 2.5s | Lighthouse |
| **ç¨³å®šæ€§** | å‰ç«¯é”™è¯¯ç‡ | > 0.5% | Sentry |
| **ä½“éªŒ** | CLS | > 0.1 | Web Vitals |
| **ä¸šåŠ¡** | è½¬åŒ–ç‡ä¸‹é™ | > 10% | GA4 |
| **èµ„æº** | JSé”™è¯¯ç‡ | > 1% | è‡ªå®šä¹‰ç›‘æ§ |

**ç›‘æ§å®æ–½**ï¼š
```js
// æ€§èƒ½ç›‘æ§
import { getLCP, getFID, getCLS } from 'web-vitals';

const sendToAnalytics = (metric) => {
  const body = JSON.stringify({
    id: metric.id,
    name: metric.name,
    value: metric.value,
    rating: metric.rating,
    navigationType: metric.navigationType
  });
  
  // å‘é€åˆ°åˆ†ææœåŠ¡
  navigator.sendBeacon('/analytics', body);
};

getLCP(sendToAnalytics);
getFID(sendToAnalytics);
getCLS(sendToAnalytics);

// é”™è¯¯ç›‘æ§
Sentry.init({
  dsn: 'https://xxx@sentry.io/123',
  integrations: [
    new Sentry.BrowserTracing({
      routingInstrumentation: Sentry.reactRouterV6Instrumentation(
        useEffect,
        useLocation,
        useNavigationType,
        createRoutesFromChildren,
        matchRoutes
      )
    })
  ],
  tracesSampleRate: 0.1
});
```

---

## ä¸ƒã€å®‰å…¨æ€§è®¾è®¡ï¼šå‰ç«¯ä¸æ˜¯ä¿¡ä»»è¾¹ç•Œ

### 1. å‰ç«¯å®‰å…¨å¨èƒçŸ©é˜µ
| å¨èƒç±»å‹ | é£é™©ç­‰çº§ | é˜²å¾¡æªæ–½ | å·¥å…· |
|----------|----------|----------|------|
| **XSS** | âš ï¸âš ï¸âš ï¸ | CSP+è½¬ä¹‰ | DOMPurify |
| **CSRF** | âš ï¸âš ï¸ | SameSite Cookie | Axiosæ‹¦æˆªå™¨ |
| **æ•æ„Ÿä¿¡æ¯æ³„éœ²** | âš ï¸âš ï¸âš ï¸ | ç¯å¢ƒå˜é‡éš”ç¦» | Webpack DefinePlugin |
| **ç¬¬ä¸‰æ–¹åº“æ¼æ´** | âš ï¸âš ï¸ | ä¾èµ–æ‰«æ | Snyk |
| **APIæ»¥ç”¨** | âš ï¸ | è¯·æ±‚é™æµ | BFFå±‚ |

### 2. CSPç­–ç•¥å®æ–½æŒ‡å—
```http
Content-Security-Policy: 
  default-src 'self';
  script-src 'self' 'unsafe-inline' 'unsafe-eval' https://trusted.cdn.com;
  style-src 'self' 'unsafe-inline';
  img-src 'self' data: https://*.example.com;
  connect-src 'self' https://api.example.com;
  font-src 'self';
  object-src 'none';
  base-uri 'self';
  form-action 'self';
  frame-ancestors 'none';
```

**Webpacké›†æˆ**ï¼š
```js
// webpack.config.js
module.exports = {
  plugins: [
    new CspHtmlWebpackPlugin({
      'default-src': ["'self'"],
      'script-src': ["'self'", "'unsafe-eval'", "https://trusted.cdn.com"],
      // ...å…¶ä»–ç­–ç•¥
    })
  ]
};
```

### 3. æ•æ„Ÿä¿¡æ¯é˜²æŠ¤æ–¹æ¡ˆ
**é”™è¯¯åšæ³•**ï¼š
```js
// å±é™©ï¼æ•æ„Ÿä¿¡æ¯æš´éœ²
const API_KEY = 'sk_live_xxx';
fetch(`/api?token=${API_KEY}`);
```

**æ­£ç¡®æ–¹æ¡ˆ**ï¼š
1. **BFFå±‚ä»£ç†**ï¼š
   ```js
   // å®¢æˆ·ç«¯
   fetch('/bff/payments/create');
   
   // BFFå±‚
   app.post('/bff/payments/create', (req, res) => {
     const stripe = new Stripe(process.env.STRIPE_SECRET_KEY);
     const payment = stripe.payments.create(req.body);
     res.json(payment);
   });
   ```

2. **ç¯å¢ƒå˜é‡å®‰å…¨**ï¼š
   ```bash
   # .env.production
   VITE_PUBLIC_API_URL=https://api.example.com
   STRIPE_PUBLIC_KEY=pk_live_xxx
   # æ³¨æ„ï¼šæ•æ„Ÿå¯†é’¥ä¸æ³¨å…¥å‰ç«¯ï¼
   ```

3. **ä»£ç æ··æ·†**ï¼š
   ```js
   // webpack-obfuscatoré…ç½®
   new JavaScriptObfuscator({
     rotateStringArray: true,
     stringArray: true,
     stringArrayThreshold: 0.75
   })
   ```

---

## å…«ã€å›¢é˜Ÿåä½œä¸å·¥ç¨‹åŒ–

### 1. å‰ç«¯ç³»ç»Ÿè®¾è®¡è§„èŒƒ
| ç»´åº¦ | è§„èŒƒè¦æ±‚ | è¿åç¤ºä¾‹ | æ­£ç¡®ç¤ºä¾‹ |
|------|----------|----------|----------|
| **æ¶æ„** | ä¸¥æ ¼åˆ†å±‚ | è¡¨ç°å±‚è°ƒç”¨API | é€šè¿‡usecasesè®¿é—® |
| **çŠ¶æ€** | æ˜ç¡®ç”Ÿå‘½å‘¨æœŸ | å…¨å±€useStateæ»¥ç”¨ | é¢†åŸŸçŠ¶æ€ç‹¬ç«‹ç®¡ç† |
| **æ•°æ®** | å®šä¹‰æ•°æ®å¥‘çº¦ | ç›´æ¥ä½¿ç”¨APIå“åº” | æ˜ å°„åˆ°é¢†åŸŸæ¨¡å‹ |
| **é”™è¯¯** | ç»Ÿä¸€é”™è¯¯å¤„ç† | å¤„å¤„try/catch | ErrorBoundary+å…¨å±€æ‹¦æˆª |
| **æ€§èƒ½** | å…³é”®æŒ‡æ ‡ç›‘æ§ | æ— æ€§èƒ½åŸºçº¿ | FCP<1.5så¼ºåˆ¶è¦æ±‚ |

### 2. è®¾è®¡è¯„å®¡æ£€æŸ¥æ¸…å•
- [ ] æ˜¯å¦å®šä¹‰äº†æ¸…æ™°çš„å±‚è¾¹ç•Œï¼Ÿ
- [ ] çŠ¶æ€ç®¡ç†æ˜¯å¦ç¬¦åˆç”Ÿå‘½å‘¨æœŸåŸåˆ™ï¼Ÿ
- [ ] æ•°æ®æµæ˜¯å¦æœ‰å†—ä½™è¯·æ±‚ï¼Ÿ
- [ ] é”™è¯¯å¤„ç†æ˜¯å¦è¦†ç›–æ‰€æœ‰åœºæ™¯ï¼Ÿ
- [ ] æ€§èƒ½å…³é”®è·¯å¾„æ˜¯å¦ä¼˜åŒ–ï¼Ÿ
- [ ] å®‰å…¨çº¢çº¿æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Ÿ
- [ ] æ˜¯å¦è€ƒè™‘äº†å¾®å‰ç«¯é›†æˆç‚¹ï¼Ÿ

### 3. è‡ªåŠ¨åŒ–ä¿éšœä½“ç³»
| ç¯èŠ‚ | å·¥å…· | ä½œç”¨ |
|------|------|------|
| **è®¾è®¡çº¦æŸ** | ESLint | é˜²æ­¢æ¶æ„è¿è§„ |
| **ä»£ç è´¨é‡** | SonarQube | è¯†åˆ«ä»£ç è…åŒ– |
| **ä¾èµ–å®‰å…¨** | Snyk | æ‰«ææ¼æ´ä¾èµ– |
| **æ€§èƒ½åŸºçº¿** | Lighthouse | ä¿éšœç”¨æˆ·ä½“éªŒ |
| **ç±»å‹å®‰å…¨** | TypeScript | å‡å°‘è¿è¡Œæ—¶é”™è¯¯ |
| **å¯è§†åŒ–** | Storybook | ç»„ä»¶æ–‡æ¡£åŒ– |

**ESLintæ¶æ„è§„åˆ™ç¤ºä¾‹**ï¼š
```js
// eslint-plugin-architecture.js
module.exports = {
  rules: {
    'no-cross-layer-access': {
      create: (context) => ({
        ImportDeclaration: (node) => {
          const from = node.source.value;
          const layers = ['presentation', 'application', 'domain', 'infrastructure'];
          
          // æ£€æŸ¥è·¨å±‚è®¿é—®
          if (from.startsWith('@app/')) {
            const currentLayer = getCurrentLayer(context.getFilename());
            const targetLayer = getTargetLayer(from);
            
            if (layers.indexOf(targetLayer) < layers.indexOf(currentLayer)) {
              context.report(node, 'ç¦æ­¢è·¨å±‚è®¿é—®ï¼');
            }
          }
        }
      })
    }
  }
};
```

---

## ä¹ã€ç°ä»£å‰ç«¯ç³»ç»Ÿè®¾è®¡è¶‹åŠ¿

### 1. è¾¹ç¼˜è®¡ç®—å‰ç«¯ï¼ˆEdge Computingï¼‰
```mermaid
graph LR
  A[ç”¨æˆ·] --> B{æœ€è¿‘è¾¹ç¼˜èŠ‚ç‚¹}
  B -->|æ‰§è¡Œé€»è¾‘| C[Edge Function]
  C --> D[ç¼“å­˜æ•°æ®]
  C --> E[è°ƒç”¨API]
  D -->|æ¯«ç§’çº§å“åº”| A
  E -->|å›æº| F[æ ¸å¿ƒæœåŠ¡]
```

**æŠ€æœ¯æ ˆ**ï¼š
- Cloudflare Workers
- Vercel Edge Functions
- AWS Lambda@Edge

**åº”ç”¨åœºæ™¯**ï¼š
- A/Bæµ‹è¯•åˆ†æµ
- ä¸ªæ€§åŒ–å†…å®¹æ¸²æŸ“
- å®æ—¶æ•°æ®è½¬æ¢
- å®‰å…¨é˜²æŠ¤

### 2. å‰ç«¯çŠ¶æ€ç®¡ç†æ–°èŒƒå¼
| ä¼ ç»Ÿæ–¹æ¡ˆ | æ–°èŒƒå¼ | ä¼˜åŠ¿ |
|----------|--------|------|
| Redux | Zustand/Jotai | ç®€åŒ–çŠ¶æ€ç®¡ç† |
| æ‰‹åŠ¨æ•°æ®æµ | React Router loader | å£°æ˜å¼æ•°æ®åŠ è½½ |
| å…¨å±€çŠ¶æ€ | åŸºäºè·¯ç”±çš„çŠ¶æ€ | æ›´ç»†ç²’åº¦æ§åˆ¶ |
| çŠ¶æ€åŒæ­¥ | CRDTs | ç¦»çº¿ååŒ |

**React Router loaderç¤ºä¾‹**ï¼š
```jsx
const router = createBrowserRouter([
  {
    path: "/orders",
    loader: async () => {
      return queryClient.fetchQuery(['orders'], fetchOrders);
    },
    element: <Orders />,
    errorElement: <ErrorBoundary />,
    // è‡ªåŠ¨å¤„ç†ç«æ€
    shouldRevalidate: ({ currentUrl, nextUrl }) => {
      return currentUrl.searchParams.get('page') !== 
             nextUrl.searchParams.get('page');
    }
  }
]);
```

### 3. AIé©±åŠ¨çš„å‰ç«¯ç³»ç»Ÿ
| åº”ç”¨åœºæ™¯ | æŠ€æœ¯å®ç° | ä»·å€¼ |
|----------|----------|------|
| **æ™ºèƒ½é”™è¯¯ä¿®å¤** | é”™è¯¯æ—¥å¿—+LLM | ä¿®å¤æ—¶é—´â†“ 80% |
| **æ€§èƒ½é¢„æµ‹** | å†å²æ•°æ®+æœºå™¨å­¦ä¹  | æå‰å‘ç°ç“¶é¢ˆ |
| **æ— éšœç¢ä¼˜åŒ–** | CV+è‡ªç„¶è¯­è¨€å¤„ç† | æ— éšœç¢åˆè§„ç‡â†‘ 90% |
| **ä»£ç ç”Ÿæˆ** | AIè¾…åŠ©ç¼–ç  | å¼€å‘æ•ˆç‡â†‘ 40% |

---

## åã€å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•†å¹³å°å‰ç«¯ç³»ç»Ÿè®¾è®¡

### 1. æ¶æ„å…¨æ™¯å›¾
```mermaid
graph TD
  A[ç”¨æˆ·ç«¯] --> B[è¾¹ç¼˜å±‚]
  B --> C[Webåº”ç”¨]
  B --> D[Mobile App]
  B --> E[PWA]
  
  C --> F[å¾®å‰ç«¯å®¹å™¨]
  F --> G[å•†å“ä¸­å¿ƒ]
  F --> H[è´­ç‰©è½¦]
  F --> I[æ”¯ä»˜]
  
  G --> J[BFF]
  H --> J
  I --> J
  
  J --> K[å¾®æœåŠ¡]
  K --> L[å•†å“æœåŠ¡]
  K --> M[è®¢å•æœåŠ¡]
  K --> N[æ”¯ä»˜æœåŠ¡]
```

### 2. å…³é”®è®¾è®¡å†³ç­–
| é—®é¢˜ | æ–¹æ¡ˆ | æ•ˆæœ |
|------|------|------|
| **é¦–å±æ€§èƒ½** | è¾¹ç¼˜æ¸²æŸ“+å…³é”®CSS | FCP 0.8s |
| **å¤šå›¢é˜Ÿåä½œ** | æ¨¡å—è”é‚¦å¾®å‰ç«¯ | å‘å¸ƒé¢‘ç‡â†‘ 3x |
| **çŠ¶æ€ä¸€è‡´æ€§** | åŸºäºWebSocketçš„çŠ¶æ€åŒæ­¥ | æ•°æ®å†²çªâ†“ 90% |
| **å…¨çƒåŒ–ä½“éªŒ** | åœ°åŸŸåŒ–è¾¹ç¼˜é…ç½® | å…¨çƒå»¶è¿Ÿ<200ms |
| **é”™è¯¯å¤„ç†** | åˆ†å±‚é”™è¯¯è¾¹ç•Œ+æ™ºèƒ½é™çº§ | P0äº‹æ•…â†“ 75% |

### 3. æ€§èƒ½ä¼˜åŒ–å®æ–½
```js
// è¾¹ç¼˜æ¸²æŸ“é…ç½® (Vercel)
module.exports = {
  edgeConfig: {
    // å…³é”®æ•°æ®è¾¹ç¼˜ç¼“å­˜
    productData: {
      ttl: 60, // 60ç§’ç¼“å­˜
      staleWhileRevalidate: 300 // è¿‡æœŸå5åˆ†é’Ÿå†…ä»å¯æœåŠ¡
    },
    // ä¸ªæ€§åŒ–é…ç½®
    userPreferences: {
      ttl: 3600,
      cacheKey: 'user-id' // æŒ‰ç”¨æˆ·IDç¼“å­˜
    }
  },
  // è·¯ç”±çº§é¢„åŠ è½½
  rewrites: () => [
    {
      source: '/products/:id',
      has: [{ type: 'header', key: 'x-device-type', value: 'mobile' }],
      destination: '/mobile/products/:id'
    }
  ]
};
```

---

## æ€»ç»“ï¼šå‰ç«¯ç³»ç»Ÿè®¾è®¡çš„æ¶æ„æ€ç»´

| ç»´åº¦ | é”™è¯¯è®¤çŸ¥ | æ­£ç¡®å®è·µ |
|------|----------|----------|
| **æœ¬è´¨** | "å®ç°UIç•Œé¢" | **æ„å»ºæ•°å­—äº§å“ç³»ç»Ÿ** |
| **è®¾è®¡** | æŒ‰åŠŸèƒ½ç»„ç»‡ | **æŒ‰æ•°æ®è¾¹ç•Œç»„ç»‡** |
| **æ¼”è¿›** | ä¸€æ¬¡æ€§è®¾è®¡ | **æ¸è¿›å¼æ¶æ„æ¼”è¿›** |
| **ä»·å€¼** | æŠ€æœ¯å®ç° | **ä¸šåŠ¡èƒ½åŠ›è½½ä½“** |

> âœ… **æ¶æ„å¸ˆç»ˆæå»ºè®®**ï¼š
> 1. **ä»é—®é¢˜å‡ºå‘**ï¼šä¸è¦ä¸ºæŠ€æœ¯è€ŒæŠ€æœ¯ï¼Œå…ˆå®šä¹‰ä¸šåŠ¡é—®é¢˜
> 2. **æ¸è¿›å¼æ¼”è¿›**ï¼šä»å°å¤„å¼€å§‹ï¼Œé€æ­¥æ‰©å±•æ¶æ„
> 3. **åº¦é‡é©±åŠ¨**ï¼šå»ºç«‹å…³é”®æŒ‡æ ‡ï¼Œç”¨æ•°æ®æŒ‡å¯¼è®¾è®¡
> 4. **å®‰å…¨ç¬¬ä¸€**ï¼šå‰ç«¯ä¸æ˜¯ä¿¡ä»»è¾¹ç•Œï¼Œå®‰å…¨å¿…é¡»å‰ç½®
> 5. **å›¢é˜Ÿå…±å»º**ï¼šæ¶æ„æ˜¯å›¢é˜Ÿå…±è¯†ï¼Œä¸æ˜¯ä¸ªäººå†³ç­–

å‰ç«¯ç³»ç»Ÿè®¾è®¡å·²ä»"æŠ€æœ¯å®ç°"å‡çº§ä¸º**äº§å“æˆåŠŸçš„å…³é”®å› ç´ **ã€‚ä½œä¸ºæ¶æ„å¸ˆï¼Œä½ çš„è®¾è®¡å°†å†³å®šï¼š  
ğŸ›¡ï¸ **ç”¨æˆ·ä½“éªŒ**ï¼šå½±å“ç”¨æˆ·ç•™å­˜å’Œè½¬åŒ–ç‡  
ğŸš€ **å›¢é˜Ÿæ•ˆç‡**ï¼šå†³å®šäº§å“è¿­ä»£é€Ÿåº¦  
ğŸ’¡ **ä¸šåŠ¡åˆ›æ–°**ï¼šæ”¯æ’‘æ–°ä¸šåŠ¡æ¨¡å¼çš„å¿«é€ŸéªŒè¯  

> å¦‚æœéœ€è¦å…·ä½“åœºæ™¯çš„å®æ–½æ–¹æ¡ˆï¼ˆå¦‚"ä»å•ä½“åº”ç”¨åˆ°å¾®å‰ç«¯çš„å®Œæ•´è¿ç§»è·¯çº¿å›¾"æˆ–"é«˜å¹¶å‘ç”µå•†å¹³å°çš„å‰ç«¯æ¶æ„è®¾è®¡æ¨¡æ¿"ï¼‰ï¼Œæˆ‘å¯ä»¥æä¾›å¯è½åœ°çš„æ¶æ„è“å›¾å’Œå·¥å…·é“¾ï¼ ğŸ’»