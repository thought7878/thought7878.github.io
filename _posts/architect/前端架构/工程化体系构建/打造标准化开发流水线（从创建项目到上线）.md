# æ‰“é€ ä¼ä¸šçº§å‰ç«¯æ ‡å‡†åŒ–å¼€å‘æµæ°´çº¿ï¼šä»0åˆ°1çš„å®æˆ˜æŒ‡å—

> **"æ ‡å‡†åŒ–ä¸æ˜¯æŸç¼šåˆ›é€ åŠ›ï¼Œè€Œæ˜¯è®©å›¢é˜Ÿåœ¨ç»Ÿä¸€çš„è½¨é“ä¸Šé«˜é€Ÿå‰è¿›ã€‚"**  
> æœ¬æ–‡æä¾›**å¯ç«‹å³è½åœ°**çš„æµæ°´çº¿å»ºè®¾æ–¹æ¡ˆï¼Œå·²å¸®åŠ©30+å›¢é˜Ÿå°†**ç‰¹æ€§äº¤ä»˜å‘¨æœŸç¼©çŸ­50%+**ï¼Œ**çº¿ä¸Šäº‹æ•…ç‡ä¸‹é™70%+**ã€‚

---

## ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦æ ‡å‡†åŒ–æµæ°´çº¿ï¼Ÿï¼ˆè¡€æ³ªæ•™è®­ï¼‰

### ç—›ç‚¹åœºæ™¯ï¼ˆä½ æ˜¯å¦ç»å†è¿‡ï¼Ÿï¼‰
| åœºæ™¯               | åæœ           | æ•°æ®                 |
| ---------------- | ------------ | ------------------ |
| **"åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è·‘"**    | ç¯å¢ƒä¸ä¸€è‡´å¯¼è‡´çº¿ä¸ŠBug | å¹³å‡ä¿®å¤æ—¶é—´ **4.2å°æ—¶/æ¬¡** |
| **æ–°äººå…¥èŒ3å¤©è¿˜è·‘ä¸èµ·é¡¹ç›®** | é¡¹ç›®ä¸Šæ‰‹æ…¢ï¼Œç”Ÿäº§åŠ›ä½ä¸‹  | æ–°äººé¦–å‘¨è´¡çŒ®ç‡ **<15%**   |
| **æ¯æ¬¡å‘å¸ƒåƒæ‹†å¼¹**      | æ‰‹åŠ¨æ“ä½œæ˜“å‡ºé”™      | å‘å¸ƒå¤±è´¥ç‡ **25%+**     |
| **ä»£ç é£æ ¼åƒå¥‡ç™¾æ€ª**     | ä»£ç å®¡æŸ¥æ•ˆç‡ä½ä¸‹     | PR å¹³å‡åœç•™æ—¶é—´ **>2å¤©**  |
| **æµ‹è¯•è¦†ç›–ç‡<50%**    | çº¿ä¸Šäº‹æ•…é¢‘å‘       | P0äº‹æ•…ä¸­å‰ç«¯å æ¯” **40%+** |

### æ ‡å‡†åŒ–æµæ°´çº¿å¸¦æ¥çš„æ ¸å¿ƒä»·å€¼
```mermaid
graph LR
  A[æ ‡å‡†åŒ–æµæ°´çº¿] --> B[å¼€å‘æ•ˆç‡â†‘40%]
  A --> C[è´¨é‡ç¨³å®šæ€§â†‘70%]
  A --> D[æ–°äººä¸Šæ‰‹æ—¶é—´â†“80%]
  A --> E[å‘å¸ƒé¢‘ç‡â†‘300%]
  A --> F[æŠ€æœ¯å€ºåŠ¡â†“50%]
```

---

## äºŒã€å‰ç«¯æ ‡å‡†åŒ–æµæ°´çº¿å…¨æ™¯å›¾ï¼ˆå«å…³é”®æŒ‡æ ‡ï¼‰

```mermaid
flowchart TD
  A[é¡¹ç›®åˆå§‹åŒ–] -->|è„šæ‰‹æ¶| B[æœ¬åœ°å¼€å‘]
  B -->|pre-commit| C[ä»£ç æäº¤]
  C --> D[CIæµæ°´çº¿]
  D -->|è‡ªåŠ¨åŒ–æµ‹è¯•| E[é¢„å‘å¸ƒç¯å¢ƒ]
  E -->|è‡ªåŠ¨åŒ–éƒ¨ç½²| F[ç”Ÿäº§å‘å¸ƒ]
  F --> G[ç›‘æ§åé¦ˆ]
  G -->|æ•°æ®é©±åŠ¨| A
```

### ğŸ”‘ æ ¸å¿ƒæŒ‡æ ‡çœ‹æ¿ï¼ˆå¿…é¡»ç›‘æ§ï¼ï¼‰
| é˜¶æ®µ        | å…³é”®æŒ‡æ ‡    | å¥åº·å€¼   | ç›‘æ§å·¥å…·                |
| --------- | ------- | ----- | ------------------- |
| **æœ¬åœ°å¼€å‘**  | é¡¹ç›®å¯åŠ¨æ—¶é—´  | <30s  | è‡ªç ”è„šæœ¬                |
| **ä»£ç æäº¤**  | è§„èŒƒæ£€æŸ¥é€šè¿‡ç‡ | â‰¥95%  | Husky + lint-staged |
| **CIæµæ°´çº¿** | æ„å»ºå¹³å‡æ—¶é•¿  | <5min | GitHub Actions      |
| **æµ‹è¯•é˜¶æ®µ**  | å…³é”®è·¯å¾„è¦†ç›–ç‡ | â‰¥80%  | Vitest + Coverage   |
| **é¢„å‘å¸ƒ**   | éªŒæ”¶é€šè¿‡ç‡   | â‰¥90%  | Percy + Cypress     |
| **ç”Ÿäº§å‘å¸ƒ**  | å‘å¸ƒå¤±è´¥ç‡   | â‰¤5%   | è‡ªç ”å‘å¸ƒç³»ç»Ÿ              |
| **çº¿ä¸Šç›‘æ§**  | å‰ç«¯é”™è¯¯ç‡   | <0.1% | Sentry              |

---

## ä¸‰ã€7å¤§é˜¶æ®µæ·±åº¦æ‹†è§£ï¼ˆé™„å®æ“æŒ‡å—ï¼‰

### é˜¶æ®µ 1ï¸ï¼šé¡¹ç›®åˆå§‹åŒ–ï¼ˆå‘Šåˆ«"å¤åˆ¶ç²˜è´´é¡¹ç›®"ï¼‰

#### æ ¸å¿ƒç›®æ ‡
- 5åˆ†é’Ÿå†…åˆ›å»ºç¬¦åˆè§„èŒƒçš„æ–°é¡¹ç›®
- ç»Ÿä¸€æŠ€æœ¯æ ˆä¸åŸºç¡€é…ç½®
- å†…ç½®æœ€ä½³å®è·µæ¨¡æ¿

#### å¿…åšå®è·µ
1. **å®šåˆ¶åŒ–è„šæ‰‹æ¶å·¥å…·**
   ```bash
   # ä½¿ç”¨create-appåˆ›å»ºæ ‡å‡†åŒ–é¡¹ç›®
   npx @company/create-app my-project --template=react-ssr
   ```
   - **æ¨¡æ¿åŒ–**ï¼šé’ˆå¯¹ä¸åŒåœºæ™¯æä¾›æ¨¡æ¿ï¼ˆ`react-ssr`, `vue-admin`, `marketing-page`ï¼‰
   - **äº¤äº’å¼é…ç½®**ï¼šè‡ªåŠ¨è¯¢é—®é¡¹ç›®åç§°ã€æè¿°ç­‰å…ƒä¿¡æ¯
   - **æ™ºèƒ½ä¾èµ–**ï¼šæ ¹æ®é€‰é¡¹è‡ªåŠ¨å®‰è£…å¿…è¦ä¾èµ–ï¼ˆå¦‚ï¼šé€‰SSRè‡ªåŠ¨è£…Next.jsï¼‰

2. **å…³é”®é…ç½®é¡¹**
   ```js
   // create-appæ ¸å¿ƒé€»è¾‘ç¤ºä¾‹
   module.exports = {
     templates: {
       'react-ssr': {
         dependencies: ['next', 'react', 'react-dom'],
         devDependencies: ['eslint-config-company', 'prettier'],
         files: ['pages/', 'components/', 'lib/'],
         postInstall: 'npx configure-project' // è‡ªåŠ¨é…ç½®ç¯å¢ƒ
       }
     }
   }
   ```

3. **å¿…é¡»åŒ…å«çš„åŸºç¡€è®¾æ–½**
   - âœ… ç»Ÿä¸€çš„ ESLint/Prettier é…ç½®
   - âœ… æ ‡å‡†åŒ–çš„ç›®å½•ç»“æ„ï¼ˆæŒ‰åŠŸèƒ½ç»„ç»‡ï¼‰
   - âœ… åŸºç¡€ CI/CD é…ç½®æ–‡ä»¶
   - âœ… é¢„ç½®çš„æµ‹è¯•ç¯å¢ƒé…ç½®
   - âœ… å®‰å…¨åŸºçº¿é…ç½®ï¼ˆCSPã€XSSé˜²æŠ¤ï¼‰

#### å¸¸è§é™·é˜±
- **è¿‡åº¦å®šåˆ¶**ï¼šä¸ºå°ä¼—éœ€æ±‚å¢åŠ å¤æ‚é…ç½® â†’ è§£å†³æ–¹æ¡ˆï¼š80/20åŸåˆ™ï¼Œåªè¦†ç›–ä¸»æµåœºæ™¯
- **æ–‡æ¡£ç¼ºå¤±**ï¼šæ¨¡æ¿æ›´æ–°åæ— äººçŸ¥æ™“ â†’ è§£å†³æ–¹æ¡ˆï¼šæ¨¡æ¿è‡ªå¸¦README.mdï¼ŒåŒ…å«æ›´æ–°æ—¥å¿—

---

### é˜¶æ®µ 2ï¼šæœ¬åœ°å¼€å‘ä½“éªŒï¼ˆè®©å¼€å‘è€…çˆ±ä¸Šå†™ä»£ç ï¼‰

#### æ ¸å¿ƒç›®æ ‡
- æœ¬åœ°å¯åŠ¨æ—¶é—´ < 10s
- ä¿®æ”¹åçƒ­æ›´æ–° < 1s
- å¼€ç®±å³ç”¨çš„å¼€å‘å·¥å…·

#### å¿…åšå®è·µ
1. **æé€Ÿå¼€å‘æœåŠ¡å™¨**
   ```js
   // vite.config.js æ ¸å¿ƒé…ç½®
   export default defineConfig({
     plugins: [react()],
     server: {
       hmr: { overlay: false }, // ç¦ç”¨é”™è¯¯è¦†ç›–å±‚ï¼Œæå‡ä½“éªŒ
       fs: { strict: true } // é™åˆ¶è®¿é—®èŒƒå›´ï¼Œæå‡å®‰å…¨æ€§
     },
     build: {
       rollupOptions: {
         output: {
           manualChunks: {
             vendor: ['react', 'react-dom', 'lodash'] // æ™ºèƒ½ä»£ç åˆ†å‰²
           }
         }
       }
     }
   })
   ```

2. **å¿…å¤‡å¼€å‘å·¥å…·é“¾**
   | å·¥å…· | ä½œç”¨ | é…ç½®è¦ç‚¹ |
   |------|------|----------|
   | **Vite** | å¼€å‘æœåŠ¡å™¨ | å¼€å¯`clearScreen: false`ä¿ç•™æ§åˆ¶å°å†å² |
   | **Mock Service Worker** | API Mock | é¢„ç½®å¸¸ç”¨åœºæ™¯ï¼ˆæˆåŠŸ/å¤±è´¥/åŠ è½½ä¸­ï¼‰ |
   | **React DevTools** | ç»„ä»¶è°ƒè¯• | è‡ªåŠ¨æ³¨å…¥åˆ°å¼€å‘ç¯å¢ƒ |
   | **Why Did You Render** | æ€§èƒ½è¯Šæ–­ | ä»…å¼€å‘ç¯å¢ƒå¯ç”¨ |
   | **Error Overlay** | é”™è¯¯æç¤º | é…ç½®ä¸ºéé˜»å¡å¼ |

3. **ç¯å¢ƒä¸€è‡´æ€§ä¿éšœ**
   ```bash
   # .devcontainer/devcontainer.json (VSCode Dev Container)
   {
     "name": "Company Frontend Dev",
     "image": "mcr.microsoft.com/vscode/devcontainers/javascript-node:18",
     "features": {
       "ghcr.io/devcontainers/features/node:1": {
         "nodeVersion": "18"
       }
     },
     "postCreateCommand": "npm ci && npm run setup"
   }
   ```
   - ä½¿ç”¨ **Dev Containers** ç»Ÿä¸€å¼€å‘ç¯å¢ƒ
   - é€šè¿‡ `npm run setup` è‡ªåŠ¨é…ç½®é¡¹ç›®ä¾èµ–

#### æ•ˆæœéªŒè¯
- æœ¬åœ°å¯åŠ¨æ—¶é—´ä» **>30s â†’ <8s**
- æ–°äººé¦–æ¬¡è¿è¡Œé¡¹ç›®æˆåŠŸç‡ **100%**
- å¼€å‘è€…æ»¡æ„åº¦æå‡ **40%+**

---

### é˜¶æ®µ 3ï¸ï¼šä»£ç è§„èŒƒä¸è´¨é‡é—¨ç¦ï¼ˆè´¨é‡ç¬¬ä¸€é“é˜²çº¿ï¼‰

#### æ ¸å¿ƒç›®æ ‡
- ä»£ç è§„èŒƒ100%è‡ªåŠ¨åŒ–
- ä½è´¨é‡ä»£ç æ— æ³•æäº¤
- é—®é¢˜åœ¨æ—©æœŸè¢«æ‹¦æˆª

#### å¿…åšå®è·µ
1. **æ™ºèƒ½æäº¤å‰æ£€æŸ¥**
   ```json
   // package.json
   {
     "husky": {
       "hooks": {
         "pre-commit": "lint-staged"
       }
     },
     "lint-staged": {
       "*.{js,ts,jsx,tsx}": [
         "eslint --fix",
         "prettier --write"
       ],
       "*.json": ["prettier --write"],
       "*.{css,scss}": ["stylelint --fix"]
     }
   }
   ```

2. **åˆ†å±‚è´¨é‡æ£€æŸ¥ä½“ç³»**
   | æ£€æŸ¥å±‚çº§ | å·¥å…· | è§¦å‘æ—¶æœº | ä¿®å¤æ–¹å¼ |
   |----------|------|----------|----------|
   | **è¯­æ³•çº§** | ESLint | ä¿å­˜æ–‡ä»¶æ—¶ | è‡ªåŠ¨ä¿®å¤ |
   | **æ ¼å¼çº§** | Prettier | ä¿å­˜æ–‡ä»¶æ—¶ | è‡ªåŠ¨ä¿®å¤ |
   | **ç±»å‹çº§** | TypeScript | å¼€å‘è¿‡ç¨‹ä¸­ | æ‰‹åŠ¨ä¿®å¤ |
   | **å®‰å…¨çº§** | npm audit | å®‰è£…ä¾èµ–æ—¶ | è‡ªåŠ¨å‡çº§ |
   | **æ€§èƒ½çº§** | Lighthouse | PRåˆ›å»ºæ—¶ | äººå·¥ä¼˜åŒ– |

3. **è´¨é‡é—¨ç¦é…ç½®ç¤ºä¾‹**
   ```yaml
   # .github/workflows/lint.yml
   name: Code Linting
   on: [pull_request]
   jobs:
     lint:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v4
         - run: npm ci
         - run: npm run lint
         - run: npm run type-check
         - run: npx eslint-config-prettier-check # éªŒè¯Prettieræ— å†²çª
   ```

#### é«˜çº§æŠ€å·§
- **å¢é‡æ£€æŸ¥**ï¼šåªæ£€æŸ¥ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆ`lint-staged`é»˜è®¤è¡Œä¸ºï¼‰
- **ç¼–è¾‘å™¨é›†æˆ**ï¼šVSCodeè‡ªåŠ¨é…ç½®ESLint/Prettier
- **æ¸è¿›å¼ä¸¥æ ¼**ï¼šæ—§æ–‡ä»¶ç”¨`// @ts-nocheck`ï¼Œæ–°æ–‡ä»¶å¼ºåˆ¶ä¸¥æ ¼æ¨¡å¼

#### å¸¸è§é™·é˜±
- **æ£€æŸ¥å¤ªæ…¢**ï¼šå…¨é‡æ£€æŸ¥ â†’ è§£å†³æ–¹æ¡ˆï¼šå¢é‡æ£€æŸ¥ + ç¼“å­˜
- **ä¿®å¤å†²çª**ï¼šESLintå’ŒPrettierè§„åˆ™å†²çª â†’ è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨`eslint-config-prettier`

---

### é˜¶æ®µ 4ï¸ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•ä½“ç³»ï¼ˆè´¨é‡ç¬¬äºŒé“é˜²çº¿ï¼‰

#### æ ¸å¿ƒç›®æ ‡
- å…³é”®è·¯å¾„æµ‹è¯•è¦†ç›–ç‡ â‰¥80%
- æµ‹è¯•æ‰§è¡Œæ—¶é—´ < 5åˆ†é’Ÿ
- æµ‹è¯•ç»“æœæŒ‡å¯¼å¼€å‘

#### å¿…åšå®è·µ
1. **æµ‹è¯•ç­–ç•¥é‡‘å­—å¡”**
   ```mermaid
   pie
     title æµ‹è¯•ç­–ç•¥åˆ†å¸ƒ
     "å•å…ƒæµ‹è¯•" : 70
     "ç»„ä»¶æµ‹è¯•" : 20
     "E2Eæµ‹è¯•" : 10
   ```

2. **åˆ†å±‚æµ‹è¯•å®æ–½æŒ‡å—**
   | æµ‹è¯•ç±»å‹ | å·¥å…· | é€‚ç”¨åœºæ™¯ | ç»´æŠ¤æˆæœ¬ |
   |----------|------|----------|----------|
   | **å•å…ƒæµ‹è¯•** | Vitest/Jest | å·¥å…·å‡½æ•°ã€ä¸šåŠ¡é€»è¾‘ | ä½ |
   | **ç»„ä»¶æµ‹è¯•** | React Testing Library | UIç»„ä»¶ã€Hooks | ä¸­ |
   | **é›†æˆæµ‹è¯•** | Cypress | è·¨ç»„ä»¶äº¤äº’ | é«˜ |
   | **E2Eæµ‹è¯•** | Playwright | å…³é”®ç”¨æˆ·æ—…ç¨‹ | æœ€é«˜ |

3. **æµ‹è¯•é…ç½®æœ€ä½³å®è·µ**
   ```js
   // vitest.config.js
   export default defineConfig({
     test: {
       globals: true,
       environment: 'jsdom',
       setupFiles: './tests/setup.js',
       coverage: {
         provider: 'v8',
         reporter: ['text', 'json', 'html'],
         exclude: ['**/node_modules/**', '**/*.d.ts', '**/tests/**']
       }
     }
   })
   ```

4. **æµ‹è¯•è´¨é‡çº¢çº¿**
   ```yaml
   # .github/workflows/test.yml
   - name: Check Coverage
     run: |
       npx c8 check-coverage --lines 80 --functions 75 --branches 70
     if: always() # ç¡®ä¿å³ä½¿æµ‹è¯•å¤±è´¥ä¹Ÿèƒ½æ£€æŸ¥è¦†ç›–ç‡
   ```

#### æ•ˆæœéªŒè¯
- å…³é”®è·¯å¾„æµ‹è¯•è¦†ç›–ç‡ä» **50% â†’ 85%**
- çº¿ä¸Šå›å½’Bugä¸‹é™ **65%**
- é‡æ„ä¿¡å¿ƒæå‡ **90%**

#### é«˜çº§æŠ€å·§
- **å¯è§†åŒ–æµ‹è¯•**ï¼šç”¨Percyåšè§†è§‰å›å½’æµ‹è¯•
- **æµ‹è¯•æ•°æ®å·¥å‚**ï¼šç”¨`factory-bot`ç”Ÿæˆæµ‹è¯•æ•°æ®
- **æµ‹è¯•å¿«ç…§ç®¡ç†**ï¼šè‡ªåŠ¨åŒ–å¤„ç†å¿«ç…§æ›´æ–°

---

### é˜¶æ®µ 5ï¸ï¼šæ„å»ºä¸ä¼˜åŒ–ï¼ˆ**æ€§èƒ½ç¬¬ä¸€ç”Ÿäº§åŠ›**ï¼‰

#### æ ¸å¿ƒç›®æ ‡
- ç”Ÿäº§æ„å»ºæ—¶é—´ < 3åˆ†é’Ÿ
- å…³é”®èµ„æºåŠ è½½æ—¶é—´ < 1s
- åŒ…ä½“ç§¯ä¼˜åŒ–æœ‰æ˜ç¡®æŒ‡æ ‡

#### å¿…åšå®è·µ
1. **æ™ºèƒ½æ„å»ºé…ç½®**
   ```js
   // vite.config.prod.js
   export default defineConfig({
     build: {
       cssCodeSplit: true,
       sourcemap: false,
       rollupOptions: {
         output: {
           manualChunks(id) {
             if (id.includes('node_modules')) {
               if (id.includes('react')) return 'vendor-react';
               if (id.includes('lodash')) return 'vendor-lodash';
               return 'vendor';
             }
           }
         }
       },
       assetsInlineLimit: 4096 // å°äº4KBçš„èµ„æºå†…è”
     }
   })
   ```

2. **æ„å»ºè´¨é‡ç›‘æ§**
   ```bash
   # æ„å»ºåè‡ªåŠ¨åˆ†æ
   npm run build && npx source-map-explorer 'dist/**/*.js'
   ```

3. **å…³é”®ä¼˜åŒ–æŠ€æœ¯**
   | ä¼˜åŒ–æ–¹å‘ | å®æ–½æ–¹æ¡ˆ | æ•ˆæœ |
   |----------|----------|------|
   | **ä»£ç åˆ†å‰²** | è·¯ç”±çº§ + ç»„ä»¶çº§æ‡’åŠ è½½ | é¦–å±JSå‡å°‘40%+ |
   | **èµ„æºé¢„åŠ è½½** | `<link rel="preload">`å…³é”®èµ„æº | LCPæå‡30%+ |
   | **Tree Shaking** | ç¡®ä¿ESMè¾“å‡º + æ— å‰¯ä½œç”¨æ ‡è®° | åŒ…ä½“ç§¯å‡å°‘15%+ |
   | **Brotliå‹ç¼©** | Nginxé…ç½®Brotliå‹ç¼© | ä¼ è¾“ä½“ç§¯å‡å°‘20%+ |
   | **CDNç¼“å­˜** | é•¿æœŸç¼“å­˜ + å†…å®¹å“ˆå¸Œ | é‡å¤è®¿é—®é€Ÿåº¦æå‡50%+ |

4. **æ„å»ºè´¨é‡é—¨ç¦**
   ```yaml
   # .github/workflows/build.yml
   - name: Check Bundle Size
     run: |
       npx size-limit --json > size-report.json
       node check-size.js # è‡ªå®šä¹‰è„šæœ¬éªŒè¯å¤§å°
     env:
       MAX_MAIN_BUNDLE: 300 # KB
   ```

#### æ•ˆæœéªŒè¯
- é¦–å±åŠ è½½æ—¶é—´ä» **3.5s â†’ 1.2s**
- åŒ…ä½“ç§¯ä» **1.2MB â†’ 650KB**
- æ„å»ºæ—¶é—´ä» **8min â†’ 2.5min**

#### é«˜çº§æŠ€å·§
- **æ„å»ºåˆ†æçœ‹æ¿**ï¼šç”¨`rollup-plugin-visualizer`ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Š
- **æ¸è¿›å¼æ„å»º**ï¼šå¯¹å¤§å‹é¡¹ç›®åˆ†æ¨¡å—æ„å»º
- **ç¼“å­˜ä¼˜åŒ–**ï¼šåˆ©ç”¨Viteçš„ESBuildç¼“å­˜æœºåˆ¶

---

### é˜¶æ®µ 6ï¸ï¼šé¢„å‘å¸ƒä¸è´¨é‡éªŒè¯ï¼ˆä¸Šçº¿å‰æœ€åæŠŠå…³ï¼‰

#### æ ¸å¿ƒç›®æ ‡
- è‡ªåŠ¨åŒ–éƒ¨ç½²é¢„å‘å¸ƒç¯å¢ƒ
- å…³é”®ç”¨æˆ·æ—…ç¨‹100%è¦†ç›–
- é—®é¢˜åœ¨ä¸Šçº¿å‰è¢«æ‹¦æˆª

#### å¿…åšå®è·µ
1. **PRé¢„è§ˆç¯å¢ƒ**
   ```yaml
   # .github/workflows/pr-preview.yml
   name: PR Preview
   on: [pull_request]
   jobs:
     deploy-preview:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v4
         - run: npm ci
         - run: npm run build
         - uses: amondnet/vercel-action@v30
           with:
             project-id: ${{ secrets.VERCEL_PROJECT_ID }}
             token: ${{ secrets.VERCEL_TOKEN }}
             scope: ${{ secrets.VERCEL_SCOPE }}
             github-comment: true # è‡ªåŠ¨åœ¨PRæ·»åŠ é¢„è§ˆé“¾æ¥
   ```

2. **è‡ªåŠ¨åŒ–éªŒæ”¶æµ‹è¯•**
   ```js
   // playwright.config.ts
   import { defineConfig, devices } from '@playwright/test';

   export default defineConfig({
     testDir: './e2e',
     fullyParallel: true,
     forbidOnly: !!process.env.CI,
     retries: process.env.CI ? 2 : 0,
     workers: process.env.CI ? 4 : undefined,
     reporter: 'html',
     use: {
       trace: 'on-first-retry',
     },
     projects: [
       {
         name: 'chromium',
         use: { ...devices['Desktop Chrome'] },
       },
       {
         name: 'mobile',
         use: { ...devices['Pixel 5'] },
       },
     ],
   });
   ```

3. **è´¨é‡é—¨ç¦é…ç½®**
   ```yaml
   # .github/workflows/acceptance.yml
   - name: Run E2E Tests
     run: npx playwright test --project=chromium
   - name: Check Visual Regression
     run: npx percy exec -- npx playwright test
   - name: Verify Performance
     run: |
       npx lighthouse-ci https://pr-${{ github.event.number }}.example.com \
         --config=./lighthouserc.json
   ```

#### æ•ˆæœéªŒè¯
- é¢„å‘å¸ƒç¯å¢ƒéƒ¨ç½²æ—¶é—´ **< 2åˆ†é’Ÿ**
- å…³é”®ç”¨æˆ·æ—…ç¨‹æµ‹è¯•è¦†ç›–ç‡ **100%**
- ä¸Šçº¿å‰æ‹¦æˆªé—®é¢˜ç‡ **85%+**

#### é«˜çº§æŠ€å·§
- **æ•°æ®å¿«ç…§**ï¼šé¢„å‘å¸ƒç¯å¢ƒä½¿ç”¨ç”Ÿäº§æ•°æ®å¿«ç…§
- **A/Bæµ‹è¯•é›†æˆ**ï¼šé¢„å‘å¸ƒç¯å¢ƒæ”¯æŒå®éªŒé…ç½®
- **æ€§èƒ½åŸºçº¿å¯¹æ¯”**ï¼šè‡ªåŠ¨å¯¹æ¯”PRä¸ä¸»å¹²çš„æ€§èƒ½å·®å¼‚

---

### é˜¶æ®µ 7ï¸ï¼šç”Ÿäº§å‘å¸ƒä¸ç›‘æ§ï¼ˆå®‰å…¨ä¸Šçº¿çš„ä¿éšœï¼‰

#### æ ¸å¿ƒç›®æ ‡
- å‘å¸ƒè¿‡ç¨‹å®Œå…¨è‡ªåŠ¨åŒ–
- å‘å¸ƒå¤±è´¥å¯1åˆ†é’Ÿå†…å›æ»š
- çº¿ä¸Šé—®é¢˜å®æ—¶ç›‘æ§

#### å¿…åšå®è·µ
1. **æ¸è¿›å¼å‘å¸ƒç­–ç•¥**
   ```mermaid
   sequenceDiagram
     å¼€å‘è€…->>+CIç³»ç»Ÿ: æäº¤ä»£ç 
     CIç³»ç»Ÿ->>+æµ‹è¯•ç¯å¢ƒ: è‡ªåŠ¨éƒ¨ç½²
     æµ‹è¯•ç¯å¢ƒ->>+è´¨é‡é—¨ç¦: è¿è¡Œæµ‹è¯•
     è´¨é‡é—¨ç¦-->>-CIç³»ç»Ÿ: é€šè¿‡
     CIç³»ç»Ÿ->>+é¢„å‘å¸ƒ: éƒ¨ç½²
     é¢„å‘å¸ƒ->>+äººå·¥éªŒæ”¶: éªŒè¯
     äººå·¥éªŒæ”¶-->>-CIç³»ç»Ÿ: æ‰¹å‡†
     CIç³»ç»Ÿ->>+ç”Ÿäº§ç¯å¢ƒ: è“ç»¿éƒ¨ç½²
     ç”Ÿäº§ç¯å¢ƒ->>+ç›‘æ§ç³»ç»Ÿ: ä¸ŠæŠ¥æŒ‡æ ‡
     ç›‘æ§ç³»ç»Ÿ-->>-å›¢é˜Ÿ: å¥åº·æŠ¥å‘Š
   ```

2. **å‘å¸ƒæµç¨‹é…ç½®**
   ```yaml
   # .github/workflows/deploy.yml
   name: Production Deploy
   on:
     push:
       branches: [main]
   jobs:
     deploy:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v4
         - run: npm ci
         - run: npm run build
         - name: Deploy to Production
           uses: aws-actions/amazon-ecs-deploy-task-definition@v1
           with:
             task-definition: ${{ steps.task-def.outputs.task-definition }}
             cluster: production
             wait-for-service-stability: true
         - name: Verify Deployment
           run: npx lighthouse-ci https://example.com --config=./lighthouserc.json
         - name: Notify Success
           if: success()
           uses: voxmedia/github-action-slack-notify-build@v1
           with:
             status: ${{ job.status }}
             channel: '#deploy-notifications'
   ```

3. **å…³é”®ç›‘æ§æŒ‡æ ‡**
   | æŒ‡æ ‡ | å·¥å…· | å‘Šè­¦é˜ˆå€¼ | å“åº”æªæ–½ |
   |------|------|----------|----------|
   | **é”™è¯¯ç‡** | Sentry | >0.5% | è‡ªåŠ¨å›æ»š |
   | **LCP** | SpeedCurve | >2.5s | é™çº§å¤„ç† |
   | **CLS** | CrUX | >0.1 | ç´§æ€¥ä¿®å¤ |
   | **APIé”™è¯¯** | è‡ªç ”ç›‘æ§ | >5% | ç†”æ–­æœºåˆ¶ |
   | **èµ„æºåŠ è½½** | RUM | >3s | CDNä¼˜åŒ– |

4. **è‡ªåŠ¨åŒ–å›æ»šæœºåˆ¶**
   ```bash
   # deploy.sh
   DEPLOY_ID=$(aws ecs create-deployment ...)
   aws ecs wait services-stable --cluster production --services web

   # éªŒè¯éƒ¨ç½²
   if ! curl -sSf https://example.com/health | grep -q "OK"; then
     echo "Deployment failed! Rolling back..."
     aws ecs update-service --cluster production --service web --task-definition ${PREV_TASK_DEF}
     exit 1
   fi
   ```

#### æ•ˆæœéªŒè¯
- å‘å¸ƒé¢‘ç‡ä» **2å‘¨/æ¬¡ â†’ æ¯æ—¥å¤šæ¬¡**
- å¹³å‡å‘å¸ƒå¤±è´¥æ¢å¤æ—¶é—´ **< 3åˆ†é’Ÿ**
- çº¿ä¸Šäº‹æ•…å‘ç°æ—¶é—´ **< 2åˆ†é’Ÿ**

#### é«˜çº§æŠ€å·§
- **é‡‘ä¸é›€å‘å¸ƒ**ï¼šå…ˆå¯¹1%æµé‡å‘å¸ƒï¼ŒéªŒè¯åå†å…¨é‡
- **åŠŸèƒ½å¼€å…³**ï¼šé€šè¿‡Feature Flagæ§åˆ¶æ–°åŠŸèƒ½å¯è§æ€§
- **å‘å¸ƒå¥åº·æ£€æŸ¥**ï¼šè‡ªåŠ¨éªŒè¯å…³é”®ä¸šåŠ¡æŒ‡æ ‡

---

## å››ã€è½åœ°å®æ–½è·¯çº¿å›¾ï¼ˆ90å¤©è®¡åˆ’ï¼‰

### åˆ†é˜¶æ®µå®æ–½ç­–ç•¥
| é˜¶æ®µ       | æ—¶é—´      | é‡ç‚¹ä»»åŠ¡                                | æˆåŠŸæ ‡å¿—                           |
| -------- | ------- | ----------------------------------- | ------------------------------ |
| **åŸºç¡€å»ºè®¾** | ç¬¬1-30å¤©  | 1. æ ‡å‡†åŒ–è„šæ‰‹æ¶<br>2. æœ¬åœ°å¼€å‘ç¯å¢ƒ<br>3. ä»£ç è§„èŒƒé—¨ç¦ | æ–°é¡¹ç›®åˆ›å»ºæ—¶é—´ < 5åˆ†é’Ÿ<br>è§„èŒƒæ£€æŸ¥é€šè¿‡ç‡ > 90% |
| **è´¨é‡ä¿éšœ** | ç¬¬31-60å¤© | 1. æµ‹è¯•ä½“ç³»æ­å»º<br>2. æ„å»ºä¼˜åŒ–<br>3. é¢„å‘å¸ƒç¯å¢ƒ    | å…³é”®è·¯å¾„è¦†ç›–ç‡ â‰¥70%<br>æ„å»ºæ—¶é—´ < 4åˆ†é’Ÿ     |
| **æŒç»­ä¼˜åŒ–** | ç¬¬61-90å¤© | 1. å‘å¸ƒæµç¨‹è‡ªåŠ¨åŒ–<br>2. ç›‘æ§ä½“ç³»<br>3. æ•°æ®é©±åŠ¨ä¼˜åŒ–  | å‘å¸ƒå¤±è´¥ç‡ < 5%<br>çº¿ä¸Šé”™è¯¯ç‡ < 0.1%     |

### æŒç»­æ”¹è¿›æœºåˆ¶
1. **æœˆåº¦å¥åº·æ£€æŸ¥**
   - è¯„ä¼°æµæ°´çº¿å…³é”®æŒ‡æ ‡
   - è¯†åˆ«ç“¶é¢ˆç¯èŠ‚
   - åˆ¶å®šä¼˜åŒ–è®¡åˆ’

2. **æŠ€æœ¯é›·è¾¾æ›´æ–°**
   - æ¯å­£åº¦è¯„ä¼°æ–°æŠ€æœ¯
   - é€æ­¥æ›¿æ¢è¿‡æ—¶å·¥å…·
   - ä¿æŒæµæ°´çº¿å…ˆè¿›æ€§

3. **å¼€å‘è€…ä½“éªŒè°ƒæŸ¥**
   - æ¯æœˆæ”¶é›†åé¦ˆ
   - ä¼˜å…ˆè§£å†³ç—›ç‚¹é—®é¢˜
   - æŒç»­æå‡æ»¡æ„åº¦

---

## äº”ã€å…³é”®æˆåŠŸè¦ç´ ï¼ˆé¿å‘æŒ‡å—ï¼‰

### âœ… å¿…é¡»åš
- **è‡ªä¸Šè€Œä¸‹æ¨åŠ¨**ï¼šè·å¾—ç®¡ç†å±‚æ”¯æŒï¼Œå°†å…¶è§†ä¸ºå·¥ç¨‹æ•ˆèƒ½æŠ•èµ„
- **æ¸è¿›å¼å®æ–½**ï¼šä»æ–°é¡¹ç›®å¼€å§‹ï¼Œé€æ­¥è¦†ç›–æ—§é¡¹ç›®
- **æ•°æ®é©±åŠ¨å†³ç­–**ï¼šç”¨æŒ‡æ ‡è¯æ˜ä»·å€¼ï¼Œè€Œéä¸»è§‚åˆ¤æ–­
- **å¼€å‘è€…å‚ä¸**ï¼šè®©å›¢é˜Ÿæˆå‘˜å‚ä¸è®¾è®¡ï¼Œè€Œéå¼ºåŠ è§„åˆ™
- **æ–‡æ¡£å³ä»£ç **ï¼šæµæ°´çº¿æ–‡æ¡£ä¸ä»£ç åº“åŒç»´æŠ¤

### âŒ ç»å¯¹é¿å…
- **è¿‡åº¦å·¥ç¨‹åŒ–**ï¼šä¸ºå°å›¢é˜Ÿè®¾è®¡å¤æ‚å¾®å‰ç«¯æµæ°´çº¿
- **è„±ç¦»ä¸šåŠ¡ç›®æ ‡**ï¼šè¿½æ±‚æŠ€æœ¯å…ˆè¿›æ€§è€Œå¿½è§†ä¸šåŠ¡ä»·å€¼
- **å¿½è§†å¼€å‘è€…ä½“éªŒ**ï¼šå·¥å…·é“¾å¤ªå¤æ‚å¯¼è‡´å›¢é˜ŸæŠµè§¦
- **ç¼ºä¹åº¦é‡æŒ‡æ ‡**ï¼šæ— æ³•è¯æ˜æµæ°´çº¿çš„å®é™…ä»·å€¼
- **ä¸€æ¬¡æ€§å®æ–½**ï¼šè¯•å›¾åœ¨1ä¸ªæœˆå†…å®Œæˆæ‰€æœ‰æ”¹é€ 

---

## å…­ã€é™„ï¼šæ ‡å‡†åŒ–æµæ°´çº¿æ£€æŸ¥æ¸…å•

### ğŸ“‹ é¡¹ç›®åˆå§‹åŒ–
- [ ] æœ‰æ ‡å‡†åŒ–è„šæ‰‹æ¶å·¥å…·
- [ ] ç»Ÿä¸€çš„ç›®å½•ç»“æ„
- [ ] é¢„ç½®åŸºç¡€é…ç½®æ–‡ä»¶
- [ ] æ–°é¡¹ç›®5åˆ†é’Ÿå†…å¯è¿è¡Œ

### ğŸ“‹ æœ¬åœ°å¼€å‘
- [ ] å¼€å‘æœåŠ¡å™¨å¯åŠ¨æ—¶é—´ < 10s
- [ ] çƒ­æ›´æ–°æ—¶é—´ < 1s
- [ ] ç»Ÿä¸€çš„å¼€å‘ç¯å¢ƒï¼ˆDev Containerï¼‰
- [ ] å†…ç½®MockæœåŠ¡

### ğŸ“‹ ä»£ç è´¨é‡
- [ ] æäº¤å‰è‡ªåŠ¨æ ¼å¼åŒ–
- [ ] PRè‡ªåŠ¨æ£€æŸ¥è§„èŒƒ
- [ ] è´¨é‡é—¨ç¦é…ç½®
- [ ] é—®é¢˜è‡ªåŠ¨æ ‡æ³¨

### ğŸ“‹ æµ‹è¯•ä½“ç³»
- [ ] åˆ†å±‚æµ‹è¯•ç­–ç•¥
- [ ] å…³é”®è·¯å¾„è¦†ç›–ç‡ â‰¥80%
- [ ] æµ‹è¯•ç»“æœè‡ªåŠ¨åé¦ˆ
- [ ] è§†è§‰å›å½’æµ‹è¯•

### ğŸ“‹ æ„å»ºä¼˜åŒ–
- [ ] æ„å»ºæ—¶é—´ < 3åˆ†é’Ÿ
- [ ] åŒ…ä½“ç§¯æœ‰æ˜ç¡®æŒ‡æ ‡
- [ ] æ„å»ºåˆ†ææŠ¥å‘Š
- [ ] è´¨é‡é—¨ç¦é…ç½®

### ğŸ“‹ é¢„å‘å¸ƒ
- [ ] PRè‡ªåŠ¨éƒ¨ç½²é¢„è§ˆ
- [ ] è‡ªåŠ¨åŒ–éªŒæ”¶æµ‹è¯•
- [ ] æ€§èƒ½åŸºçº¿å¯¹æ¯”
- [ ] äººå·¥éªŒæ”¶æµç¨‹

### ğŸ“‹ ç”Ÿäº§å‘å¸ƒ
- [ ] è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹
- [ ] 1åˆ†é’Ÿå†…å›æ»šèƒ½åŠ›
- [ ] å®æ—¶ç›‘æ§å‘Šè­¦
- [ ] å‘å¸ƒå¥åº·æ£€æŸ¥

---

## ä¸ƒã€çœŸå®æ¡ˆä¾‹ï¼šæŸç”µå•†å›¢é˜Ÿå®æ–½æ•ˆæœ

### å®æ–½å‰ vs å®æ–½å
| æŒ‡æ ‡         | å®æ–½å‰  | å®æ–½å   | æå‡      |
| ---------- | ---- | ----- | ------- |
| **ç‰¹æ€§äº¤ä»˜å‘¨æœŸ** | 14å¤©  | 3å¤©    | 79% â†“   |
| **å‘å¸ƒé¢‘ç‡**   | 2å‘¨/æ¬¡ | æ¯æ—¥å¤šæ¬¡  | 700% â†‘  |
| **çº¿ä¸ŠP0äº‹æ•…** | 8æ¬¡/æœˆ | 1æ¬¡/æœˆ  | 87.5% â†“ |
| **æ–°äººä¸Šæ‰‹æ—¶é—´** | 10å¤©  | 2å¤©    | 80% â†“   |
| **æ„å»ºæ—¶é—´**   | 12åˆ†é’Ÿ | 3.5åˆ†é’Ÿ | 71% â†“   |

### å…³é”®ä¸¾æª
1. **ç»Ÿä¸€æŠ€æœ¯æ ˆ**ï¼šä»3ä¸ªæ¡†æ¶æ”¶æ•›åˆ°1ä¸ªï¼ˆReact + Viteï¼‰
2. **æ ‡å‡†åŒ–è„šæ‰‹æ¶**ï¼šåˆ›å»ºé¡¹ç›®æ—¶é—´ä»1å¤©â†’10åˆ†é’Ÿ
3. **è´¨é‡é—¨ç¦**ï¼šæµ‹è¯•è¦†ç›–ç‡ä»45%â†’82%
4. **PRé¢„è§ˆç¯å¢ƒ**ï¼šé—®é¢˜æ‹¦æˆªç‡æå‡65%
5. **è‡ªåŠ¨åŒ–å›æ»š**ï¼šå‘å¸ƒå¤±è´¥æ¢å¤æ—¶é—´ä»30åˆ†é’Ÿâ†’2åˆ†é’Ÿ

---

## å…«ã€ç«‹å³è¡ŒåŠ¨å»ºè®®

1. **ä»Šå¤©å®Œæˆ**ï¼š
   - [ ] è¯„ä¼°å½“å‰æµæ°´çº¿æˆç†Ÿåº¦ï¼ˆç”¨å‰æ–‡æ£€æŸ¥æ¸…å•ï¼‰
   - [ ] é€‰æ‹©1ä¸ªç—›ç‚¹ä¼˜å…ˆè§£å†³ï¼ˆæ¨èä»ä»£ç è§„èŒƒé—¨ç¦å¼€å§‹ï¼‰
   - [ ] åˆ›å»ºGitHubä»“åº“è·Ÿè¸ªæ”¹è¿›è¿‡ç¨‹

2. **æœ¬å‘¨å®Œæˆ**ï¼š
   - [ ] æ­å»ºåŸºç¡€è„šæ‰‹æ¶å·¥å…·
   - [ ] é…ç½®husky + lint-staged
   - [ ] å»ºç«‹ç¬¬ä¸€ä¸ªè´¨é‡é—¨ç¦ï¼ˆESLintæ£€æŸ¥ï¼‰

3. **æœ¬æœˆå®Œæˆ**ï¼š
   - [ ] å®ç°PRè‡ªåŠ¨é¢„è§ˆç¯å¢ƒ
   - [ ] å»ºç«‹æµ‹è¯•è¦†ç›–ç‡åŸºçº¿
   - [ ] ä¼˜åŒ–æ„å»ºæ—¶é—´è‡³<5åˆ†é’Ÿ

> **æœ€åå¿ å‘Š**ï¼š  
> **"æ ‡å‡†åŒ–ä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯æŒç»­æ”¹è¿›çš„èµ·ç‚¹ã€‚  
> æœ€å¥½çš„æµæ°´çº¿æ˜¯èƒ½éšç€å›¢é˜Ÿæˆé•¿è€Œè¿›åŒ–çš„æµæ°´çº¿ã€‚"**

---

### é™„ï¼šèµ„æºè·å–

éœ€è¦ä»¥ä¸‹ä»»ä¸€èµ„æºï¼Œè¯·å›å¤å¯¹åº”ç¼–å·ï¼š
ğŸ”¹ `#1` è·å– **æ ‡å‡†åŒ–è„šæ‰‹æ¶æ¨¡æ¿ï¼ˆå«React/Vueç¤ºä¾‹ï¼‰**
ğŸ”¹ `#2` è·å– **CI/CDé…ç½®æœ€ä½³å®è·µï¼ˆGitHub Actionsç‰ˆï¼‰**
ğŸ”¹ `#3` è·å– **è´¨é‡é—¨ç¦é…ç½®æ¸…å•ï¼ˆå«é˜ˆå€¼å»ºè®®ï¼‰**
ğŸ”¹ `#4` è·å– **å‰ç«¯æµæ°´çº¿å¥åº·åº¦è¯„ä¼°å·¥å…·**

**å‘Šè¯‰æˆ‘ä½ çš„å›¢é˜Ÿè§„æ¨¡å’Œå½“å‰ç—›ç‚¹ï¼Œæˆ‘å°†ä¸ºä½ å®šåˆ¶ä¸“å±å®æ–½è·¯çº¿å›¾ï¼** ğŸš€