【使用React开发微前端_02. The Basics of Module Federation】 https://www.bilibili.com/video/BV1wZeuzNEY8/?share_source=copy_web&vd_source=9c1e19a73fa7bd23bb37aa8d7467d862

参考：[[模块联邦（Module Federation）-QW2]]

视频讲述了使用React开发微前端时，**通过Webpack的模块联邦插件实现容器项目（主项目）调用产品项目（远程项目）代码的基础步骤**，具体如下：


- **明确主项目与远程项目**：[00:28]`主项目（Host Project）`是尝试*调用其他项目代码*的应用，此处为容器应用；`远程项目（Remote Project）`是*向其他项目提供代码*的项目，此处为产品项目。
- **确定远程项目对外提供的模块**：[00:51]在产品项目中，决定对外提供的模块，目前只有src/index.js文件可提供，故选择该文件。
- **在远程项目中设置模块联邦插件**：[01:25]在产品项目的webpack配置文件中，引入webpack的模块联邦插件，*设置名称为products，文件名为remoteEntry.js，exposes配置为键.products/index、值./src/index*。
```js
const HtmlWebpackPlugin = require('html-webpack-plugin');
const ModuleFederationPlugin = require('webpack/lib/container/ModuleFederationPlugin');

module.exports = {
  mode: 'development',
  devServer: {
    port: 8081,
  },
  plugins: [
	// 模块联邦plugin
    new ModuleFederationPlugin({
      name: 'products',
      filename: 'remoteEntry.js',
      exposes: {
        './ProductsIndex': './src/index',
      },
    }),
    new HtmlWebpackPlugin({
      template: './public/index.html',
    }),
  ],
};
```

- **在主项目中设置模块联邦插件**：[02:53]在容器项目的webpack配置文件中，引入模块联邦插件，设置名称为container，remotes对象中products的值为products@http://localhost:8881/remoteEntry.js。
```js
const HtmlWebpackPlugin = require('html-webpack-plugin');
const ModuleFederationPlugin = require('webpack/lib/container/ModuleFederationPlugin');

module.exports = {
  mode: 'development',
  devServer: {
    port: 8080,
  },
  plugins: [
    new ModuleFederationPlugin({
      name: 'container',
      remotes: {
        products: 'products@http://localhost:8081/remoteEntry.js',
      },
    }),
    new HtmlWebpackPlugin({
      template: './public/index.html',
    }),
  ],
};
```

- **主项目的重构与导入**：[04:34]将容器目录下的index.js重命名为bootstrap.js，在src目录下新建index.js并放入import函数调用./bootstrap；在bootstrap.js顶部导入products/index模块。
- **测试与问题修复**：[05:59]重启webpack进程，在浏览器中测试，发现因容器项目无id为dev-products的元素导致错误，在容器的public index.html文件的body部分添加该div后，容器应用成功加载并执行产品应用代码。