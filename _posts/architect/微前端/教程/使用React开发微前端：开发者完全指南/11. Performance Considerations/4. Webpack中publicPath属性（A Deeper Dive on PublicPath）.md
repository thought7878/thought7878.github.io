
视频围绕**Webpack中publicPath属性**在微前端开发中的应用展开，分析相关错误原因及解决方案，具体如下：


- **阐述publicPath属性作用及问题背景**：[00:00]说明视频目的是深入讨论无法加载main.js文件的错误，指出问题与publicPath属性相关。*该属性针对生产环境，确保远程入口js文件能找到Webpack生成并存储在S3存储桶marketing目录最新文件夹中的文件*，且*在开发环境运行项目时也很重要*。还提及Webpack处理app.js和index.html文件时，html-webpack-plugin插件会自动在html中添加引用输出文件的script标签，此逻辑同样适用于远程入口文件。
![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. Performance Considerations/media/018ee42050788e0f9c1aacc6c377d5b1_MD5.jpeg]]


- **分析浏览器加载main.js文件错误原因**：[02:13]*浏览器会依据当前域名和路径查找main.js文件*。当访问localhost:8082/auth/signup（URL末尾无斜杠）时，*浏览器会尝试在该路径下查找main.js*（`localhost:8082/auth/main.js`，*URL末尾无斜杠，认为signup是资源不是路径*），而*实际main.js托管在localhost:8082/main.js，导致加载错误，本质是在错误路径寻找文件*。
![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. Performance Considerations/media/d2d9b122a50eb83e80e63c396089fada_MD5.jpeg]]

![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. Performance Considerations/media/4223f210bfe3323d56f57b4a80e06715_MD5.jpeg]]


- **探讨单斜杠publicPath的局限性**：[03:34]说明设置publicPath为单斜杠可让浏览器*从当前域名而非当前路径加载main.js*，解决单体应用加载问题，*但在微前端架构中存在缺陷*。当容器在localhost:8080启动并加载auth应用远程入口文件时，*远程入口文件会按单斜杠publicPath从localhost:8080加载main.js，导致获取到容器应用的main.js而非auth应用的*。参考：[[解析路径]]

![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. Performance Considerations/media/305062fab53f6dde07cabfbfa256e28a_MD5.jpeg]]

![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. Performance Considerations/media/aafc1b52cd929c9de17112e29126279d_MD5.jpeg]]

![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. Performance Considerations/media/5fdda1f532daab529c228cf469cd7471_MD5.jpeg]]

![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. Performance Considerations/media/a8dc43b7e2ed1a3aafc7f7c757c7eada_MD5.jpeg]]


- **提出完整URL设置的解决方案**：[08:50]指出在Webpack开发配置文件中，*将publicPath设为完整域名*（如http://localhost:8082）可解决问题。这样index.html会包含main.js文件的绝对完整URL，*远程入口文件也会使用该URL*。*既能解决隔离开发时的加载问题，也能解决通过容器运行时的加载问题*。
![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. Performance Considerations/media/120843d29bd87c4074a1e65247f4f283_MD5.jpeg]]


- **解释营销应用无publicPath相关问题的原因**：[09:38]说明营销应用*未设置publicPath属性，加载其远程入口文件*（来自localhost:8081）时，*远程入口文件会从获取自身的域名（localhost:8081）加载main.js*，而该域名下存在营销应用正确的main.js文件，因此无需处理publicPath相关复杂问题即可正常运行。
![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. Performance Considerations/media/e7bdf3994f0d74ae112971644626d099_MD5.jpeg]]

