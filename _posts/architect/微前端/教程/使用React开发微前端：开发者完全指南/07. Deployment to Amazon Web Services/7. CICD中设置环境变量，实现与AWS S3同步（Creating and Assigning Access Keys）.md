

视频讲述了**在GitHub操作工作流中设置环境变量，以实现与AWS S3存储桶同步**的相关操作，包括**在AWS生成访问密钥和在GitHub设置密钥**等内容，具体如下：


- **GitHub工作流中的环境变量作用**：[00:00]容器yaml文件中的带双大括号的美元符号等是环境变量引用，*在GitHub仓库中设置为加密密钥，运行工作流时会被实际值替换*，需设置*目标存储桶名称、访问密钥（Access_Key）、秘密访问密钥（Secret_Access_Key）* 三个环境变量，其中访问密钥和秘密密钥用于**访问AWS账户并修改S3存储桶文件，类似用户名和密码**。


- **生成 AWS 访问密钥和秘密密钥的准备**：[01:10]需*先在 AWS 生成秘密访问密钥和访问密钥，再返回 GitHub 设置*存储桶名称、访问密钥和秘密访问密钥这三个密钥。
- **生成AWS访问密钥和秘密访问密钥的步骤**：[01:26]在AWS控制台搜索*IAM服务*，左侧菜单找到用户部分并点击添加用户，设置用户名（如mfe-github-action），*选择程序访问类型*以生成密钥，然后进入权限选项。
- **为AWS新用户分配权限**：[02:25]亚马逊建议*使用最小权限策略*，即新用户仅有权对特定S3存储桶更改和上传文件，及对特定CloudFront分发做小修改，视频中为节省时间并因后续会删除用户，选择直接附加现有策略，赋予用户所有S3存储桶和CloudFront分发的完全访问权限，之后点击下一步标签，不添加标签，进入审核后创建用户。
- **处理AWS生成的密钥**：[04:14]用户创建后会显示秘密访问密钥，该密钥仅显示一次，需立即使用，否则需重新生成，*要将访问密钥和秘密访问密钥复制到GitHub仓库的设置中*，而非源代码内部。
- **在GitHub仓库设置密钥**：[04:46]返回GitHub仓库，找到Settings，在左侧底部找到*Secrets*，点击最右侧创建新密钥，*需创建三个密钥，分别是AWS访问密钥ID*（全大写加下划线，值为从AWS管理控制台复制的访问密钥）、*AWS密钥访问密钥*（值为从AWS管理控制台复制的秘密访问密钥，且绝对不能与他人共享）、*AWS S3存储桶名称*（值为从S3管理控制台获取的存储桶确切名称）。
- **完成设置后的预期结果**：[07:33]理论上，*完成上述设置后可以运行GitHub操作，将创建的分发文件或实际生产文件复制到S3存储桶*，测试将在下一视频中进行。