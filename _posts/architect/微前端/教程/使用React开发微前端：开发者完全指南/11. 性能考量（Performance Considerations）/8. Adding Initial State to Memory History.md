
视频讲述了微前端项目中 **“点击登录按钮两次才能看到登录表单”的bug成因、解决方法**，同时对营销应用进行了相同修复，具体如下：


- **提出bug问题**：[00:00]提出核心问题“为何必须点击登录按钮两次才能看到登录表单”，并提及将结合之前关于容器内浏览器历史记录与营销部分内存历史记录的示意图展开分析。
- **分析bug根源**：[00:30]指出`内存历史记录`的默认初始路径，*始终从根路径/开始，即便地址栏有其他路径*。认证应用创建内存历史记录时初始路径为/，且*历史监听器仅在路径变化时触发*，*首次进入认证应用，处于/路径时无对应路由规则，故首次点击登录按钮无反应，第二次点击才触发事件告知导航到/auth/sign-in，显示表单*。
![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. 性能考量（Performance Considerations）/media/eb0981df57e31da0cfe928287afeb9f2_MD5.jpeg]]


- **修复认证应用bug**：[03:08]`解决方法`是*为内存历史记录设置初始状态*，在创建内存历史记录处添加含initialEntries选项的对象，该选项为数组且元素为初始路径；假设挂载函数接收含initialPath的额外选项，用其作为数组元素；在应用容器app.js文件调用挂载函数时，除导航选项外，告知初始路径为历史记录的location.pathname属性当前值（需小写），修复后点击登录按钮可立即显示认证应用。
![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. 性能考量（Performance Considerations）/media/a8efa6a0e78db0e340967e78a2e9068b_MD5.jpeg]]

![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/11. 性能考量（Performance Considerations）/media/fca9e7cc22ea3115eee86cdbef30695c_MD5.jpeg]]


- **修复营销应用潜在问题**：[05:15]说明营销应用虽因路由特点暂未显现该bug，但技术上存在相同问题，即首次启动时内存历史记录默认处于/路径。按相同修复逻辑，在容器组件营销应用Js文件添加初始路径选项（为历史位置路径名称），在营销项目bootstrap.js文件中，让挂载函数接收初始选项，创建内存历史记录时提供含初始路径数组的initialEntries选项。
- **测试修复效果与补充说明**：[06:43]测试刷新页面后访问定价页面、登录页面及返回应用均正常；解释之前未早展示该修复方法的原因，是因添加第二个应用后才出现此类问题，若一开始写相关代码会让学习者困惑，延迟解释是为展示不添加这些选项的后果；提及后续需处理点击登录后的实际认证逻辑。