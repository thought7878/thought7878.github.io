

视频讲述了在React微前端开发中，**实现容器应用到子应用（营销应用）的通信**，以同步导航状态的具体步骤，具体如下：


- **提出容器到营销应用通信需求及初始问题**：[00:00]当用户点击容器管理的链接进行导航时，*需检测导航并将变化传递给营销应用*；但当前营销应用的js文件中，调用挂载方法创建营销应用后，无对营销应用的引用，无法传递值，这是实现通信的核心挑战。
- **修改营销项目启动配置js文件以提供通信接口**：[00:51]在营销项目的启动配置js文件中，让挂载函数返回一个对象，该对象包含供容器调用的函数（如父级导航函数），用于更新或改变营销应用，为容器到营销应用的通信建立基础。
- **在营销应用js文件中处理挂载函数返回对象并监听导航**：[01:52]在营销应用js文件中，接收挂载函数返回的包含父级导航函数的对象并解构出父级导航函数；在useEffect中检测导航发生，计划导航发生时调用父级导航函数传递新路由或路径，同时为限制useEffect仅在营销应用首次渲染时执行，添加空数组作为第二个参数。
- **为浏览器历史对象设置监听器以触发父级导航**：[02:33]在营销应用的bootstrap.js和app.js文件中，在useEffect之后执行history.listen，当浏览器历史发生变化时调用父级导航函数（onParentNavigate），确保容器导航变化能通知到营销应用。
- **完善父级导航函数逻辑避免无限循环并实现导航同步**：[04:48]在bootstrap.js文件中，修改父级导航函数，从history.listen触发的location对象中解构pathname并命名为nextPathname；通过对比当前history.location的pathname与nextPathname，仅当二者不同时执行history.push(nextPathname)，避免无限循环，实现容器导航时营销应用内的同步导航。
- **测试导航功能验证通信与同步效果**：[06:19]刷新页面后，点击定价、应用等链接切换页面，URL能实时更新；点击浏览器返回按钮，导航也能正常工作，在新浏览器标签页中测试也确认前后导航符合预期，成功实现容器与营销应用的双向通信及历史对象同步。