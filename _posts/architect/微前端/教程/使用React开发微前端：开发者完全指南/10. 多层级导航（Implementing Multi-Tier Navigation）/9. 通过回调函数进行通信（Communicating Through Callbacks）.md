

视频讲述了在React微前端开发中，实现容器与营销模块**通过回调函数进行通信**的具体方法和流程，包括*回调函数的传递、接收、触发及测试验证*，具体如下：


- **明确通信场景与核心机制**：[00:00]`场景`为用户点击营销应用内链接时，需让容器知晓路径变化；`核心机制`是容器在*调用营销应用挂载函数时，向下传递名为onNavigate的回调函数，营销应用触发导航后调用该回调向容器传递信息*。
![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/10. 多层级导航（Implementing Multi-Tier Navigation）/media/3f7f180e9709a99253a5df1fa427060a_MD5.jpeg]]

- **容器端传递onNavigate回调函数**：[01:00]前往容器组件及营销应用js文件，在容器调用营销应用挂载函数的位置，传递第二个参数（一个对象，便于未来扩展传递多个选项），并在该对象中传入onNavigate函数，初始设置为调用时执行控制台日志，提示“容器检测到营销应用的导航”。
- **营销应用端接收并触发回调函数**：[01:44]进入营销src启动js文件，在mount函数定义中接收包含onNavigate键的第二个参数；利用createMemoryHistory返回的历史对象的listen事件监听器，调用history.listen，使路径变化时自动调用onNavigate函数，实现导航触发回调。


- **梳理通信流程与测试验证**：[02:50]`流程`为容器决定挂载营销应用→创建并传递onNavigate回调→营销应用创建内存历史对象并绑定listen监听器→用户点击链接更新内存历史→自动调用回调。保存文件后在浏览器测试，刷新页面点击定价按钮，成功在控制台看到导航检测日志。
- **后续优化方向**：[03:51]计划在下一视频中，在营销应用回调函数内确定导航目标URL，并使用该URL更新容器内的浏览器历史，完善导航同步功能。