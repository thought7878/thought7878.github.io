参考：[[原理-QW]]

视频讲述了**路由库中历史对象**的相关内容，具体如下：

## 路由库的组成部分
[00:00]
所有路由库（如React Router、Vue Router、Angular Router等）*可视为两个独立部分*，*一是历史对象*，用于**获取、修改用户当前访问的应用程序路径**；*二是路由器*，用于**根据当前路径显示内容**。
![[110cea7cd96674a8f352e1aee84bd439_MD5.jpeg]]


## 历史对象的类型
[00:55]
所有路由库通常*实现三种历史对象*，分别是*浏览器历史对象、哈希历史对象、内存/抽象历史对象*（React Router中称为*内存历史*，Vue Router中称为*抽象历史*）。

### 浏览器历史对象
[01:15]
是最流行的类型，*通过检查地址栏中URL域名之后的部分，来确定用户当前访问的应用程序路径，并将该部分传递给路由器，由路由器决定显示内容*。
![[8b78cad1da8d65ae4401a64345c8406e_MD5.jpeg]]


### 哈希历史对象
[01:51]
视频中表示不会在应用中使用，暂不讲解。
![[5c9b6e7a738d1596e6bf9f726590b643_MD5.jpeg]]


### 内存/抽象历史对象
[01:58]
将用户当前路径*存储在内存或代码中*，用户访问的路径**没有视觉提示，不使用地址栏确定用户当前访问的路径**。
![[1e3697b603c2ccc5d022698434154862_MD5.jpeg]]


## 微前端应用中历史对象的使用
[02:30]
*采用多层级导航方法，在容器内和子应用内部都设置路由逻辑，且每个路由实例完全独立*，**原因**是能使用不同版本的路由库甚至不同的路由库。

**容器决定显示哪个微前端；子应用自行决定显示哪个页面。**

创建路由实例时需明确指定历史类型，*容器内最常见使用浏览器历史记录，子应用中使用内存历史记录*。

![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/10. 多层级导航（Implementing Multi-Tier Navigation）/media/ffc26d9f1a548ef0dcb83646c8a6cb8f_MD5.jpeg]]


## 不同路由库历史实现的差异及问题
[03:44]
不同路由库（如react router和vue router）的浏览器历史记录等实现方式不同，若应用中使用多个浏览器历史对象，*可能导致多个对象同时修改地址栏URL，出现竞态条件等严重问题*。


## 子应用使用内存历史对象的原因
[05:22]
**若应用中使用多个浏览器历史对象，可能导致多个对象同时修改地址栏URL，因此，在子应用中使用内存历史对象。**

*子应用使用内存历史对象，容器内的浏览器历史对象是唯一访问和更新地址栏的*。子应用的历史对象有当前URL的独立副本，可自行更改更新，*且不会进入地址栏尝试更改，避免问题*。后续会添加代码确保各历史副本间路径同步。