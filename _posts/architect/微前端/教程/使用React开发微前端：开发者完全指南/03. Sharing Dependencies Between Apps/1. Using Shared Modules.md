【使用React开发微前端_03. Sharing Dependencies Between Apps】 https://www.bilibili.com/video/BV1TuYUz7EXz/?share_source=copy_web&vd_source=9c1e19a73fa7bd23bb37aa8d7467d862


视频讲述了**在使用React开发微前端时，不同子项目之间依赖共享的相关内容**，具体如下：


- **问题提出：子项目重复加载依赖**：[00:00]产品和购物车项目都使用faker模块，*当前各自加载副本*，faker模块约2.9MB（兆字节），重复加载情况糟糕，需解决共享问题。
![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/03. Sharing Dependencies Between Apps/media/4ac7d812734f969e4e915fe5e9f6269d_MD5.jpeg]]

- **解决方案：使用模块联邦插件**：[01:05]通过模块联邦插件，容器应用加载产品和购物车模块的远程入口文件后，*会意识到两者都需要faker模块，从而仅加载一个副本并共享给两个子应用，无需编写额外代码，只需调整配置*。
![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/03. Sharing Dependencies Between Apps/media/88c21938520412892b3e91c85cf19517_MD5.jpeg]]

- **配置操作：修改Webpack配置**：[02:20]在产品和购物车的Webpack配置文件的模块联邦插件`shared`选项中，添加字符串“faker”，*表明尝试共享该模块，容器会自动检测，无需修改容器配置*。
![[_posts/architect/微前端/教程/使用React开发微前端：开发者完全指南/03. Sharing Dependencies Between Apps/media/a05fdcb4ee982f181dc9785777f435d7_MD5.jpeg]]

- **配置后操作及效果**：[03:21]需重启产品和购物车的webpack进程，之后在localhost:8080刷新页面，*仅加载faker的一个副本，共享成功*。
- **出现新问题：独立加载子项目出错**：[03:50]独立加载产品应用（localhost:8081）时，屏幕无内容且控制台报错，提示共享模块无法立即使用。
- **问题原因分析**：[04:19]独立加载产品时，index.js文件会立即获取并使用faker，而标记faker为共享模块后其默认异步加载，导致index.js加载时faker尚未可用；通过容器加载时，远程入口文件的代码和配置会处理好index.js与faker的加载顺序，因此无问题。
- **后续计划**：[05:47]需要修复独立运行产品时出现的错误，将在下一视频中讲解。