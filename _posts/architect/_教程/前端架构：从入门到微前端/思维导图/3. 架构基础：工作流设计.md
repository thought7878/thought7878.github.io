从**代码的角度**出发，展示**前端架构的基础内容**：**基础规范**、**文档**化、通过流程化**提高代码质量**和**测试策略**。

---
# **基础架构**：一系列工具与流程的集合，一系列规范和规划。启动项目时需制定

# 不同时期的项目启动，会有不同的看法，和团队规模密切相关
## 1.0时期的迭代0：是选定一个前端框架。要进行一堆细致的分析才能决定使用哪一个，需搭建一个持续集成环境，需编写构建脚本
## 2.0时期的迭代0：是选定前端框架+完整的构建脚本和构建系统。适合一个小团队的架构。小团队的规范可口头约定，大团队的规范一定是自动化的

## 3.0时期的迭代0：是选定前端框架+完整的构建脚本和构建系统+流程规范化。更大规模的团队，要开发自己的前端框架、Design System、脚手架、开发工具、协作工具。**于是，少数码农的工作重心便从业务转向了构建工具**。
## **为了保障团队能顺利合作开发**，需制定一系列的**开发流程**，创建**开发规范**

# 流程与规范的过去、现在对比：
技术在不断演进，帮助我们不断地提高生产力、使流程规范化。随着我们不断地优化开发流程，这些工作越来越自动化。这些流程通过规范代码，来提升代码的可阅读性，减少代码中可能出现的bug。这些流程与规范，就是在本章中讨论的内容。

## 过去手动下载依赖，现在一键安装依赖
## 过去需单独进行测试，现在可在提交代码后自动测试
## 过去只有规范，期盼成员能遵循。现在规范被硬编码到流程中，操作由程序来进行检测（如，使用Lint工具、使用测试覆盖率检测测试是否测试过等）


# 3.1 代码之旅：基础规范（可读性）
## **为什么要有基础规范？** 设计架构时，要考虑由下而上的模式，**底层的实践最终会影响整个系统的架构**（再好的架构，若没有好的工程实践，最终得到的只是一个空有其表的架构方案）

## **为了提升代码的可读性**：

### **规范代码组织结构**（**反映了架构的模式**，可真真切切地感受到它与系统架构的相似之处）

### 统一代码风格（即源代码的书写风格）

### 命名规范（组件、函数等）

### 开发工具规范

# 3.2 应用架构决定代码结构
## 如何读懂代码结构
### 打开README了解应该阅读哪些相关的资料。

### 阅读package.json了解系统的基础设施、使用了哪些组件库，以及配置了哪些构建脚本。

### 浏览主目录下的一个个文件，了解系统的一些插件的配置。

### 进入项目代码中阅读和了解。

## 例子，Angular应用的主目录下的结构：

![[_posts/architect/_教程/前端架构：从入门到微前端/思维导图/media/203183889cc3238cbfc8cd8d9207fb5a_MD5.jpeg]]

通过上面的文件名信息，我们可以快速地了解系统的一些基础组成。这对于其他前端框架也是相似的，这些配置文件实则是定义了一系列的规范。对于不同的开发者，它们可以起到规范的作用。

在src目录的app文件夹下，有如下一些文件：
![[_posts/architect/_教程/前端架构：从入门到微前端/思维导图/media/8ce69be7564337b0deb1bce53f10ddae_MD5.jpeg]]

### 从代码组织形式来看，它更像基于组件的架构，非MVC架构
从这里的代码组织形式来看，它更像是基于组件的架构，而不再是类似于MVC形式的架构。对于其他前端框架比如React，如果我们通过状态来管理应用，那么从组织构建上看，它像MVC架构。

从文件名上就可以了解这是一个组件（Component），而由于CSS、HTML、TypeScript的分离，我们又可以快速地在修改代码时找到对应的文件。这种特性对于庞大工程的项目来说相当有帮助，但是对于简单的业务，比如加载（Loading）组件时，使用与React、Vue相似的结构会更简洁，即一个文件包含CSS、HTML、JavaScript代码。

## **确定了应用架构后，按照架构编写代码结构（目录、文件的结构）**

## **参考：**[[设计可扩展的代码结构（前端领域驱动设计(DDD)实战）]]

# 3.3 统一代码风格，避免架构腐烂 
代码是写给人看的，给计算机执行的是二进制码。
## 代码风格：即源代码的书写风格（比如，缩进使用两个空格而不是4个）


# 3.4 使用Lint规范代码 
## TSLint、CSSLint代码扫描工具：对代码风格进行检测，语法验证
## 代码风格的规范：
对于代码风格来说，有太多需要规范的地方，比如下面这些事项：

### 是否以分号（；）结束语句。

### 缩进四个空格，还是两个空格。

### 判断是否相等的时候，使用\=\=\=，以避免类型转换。

### 函数大括号是否换行。

## Lint配置选项：生成自己的，使用其他团队创建好的风格配置（如，Airbnb创建的eslint-config-airbnb规范，可在它的基础上修改）


# 3.5 规范化命名，提升可读性 
我们开始进一步了解业务逻辑、阅读项目的代码和函数。于是，我们又进一步将注意力放到命名上。

命名，对于程序员来说是一件相当头疼的事，对于英语不是母语的开发人员来说更是如此。为了取一个变量名，我们需要打开翻译软件、网站，输入对应的中文名，以获取可能的英语单词。再按自己的经验来决定使用哪个单词。即便如此，一个英文单词又可能拥有多个中文含义，我们又需要进一步翻译成中文。即便最后我们决定使用这个单词，在和其他程序员讨论代码的时候，可能还会对这些代码有一定的争议。

这个头疼的问题不是我们使用规范能解决的，但是我们可以通过制定命名规则来统一命名方法。


## 3.5.1 命名法 
## 3.5.2 CSS及其预处理器命名规则 
## 3.5.3 组件命名规则 
# 3.6 规范开发工具，提升开发效率 
# 3.7 项目的文档化：README搭建指南 
# 3.8 绘制架构图：减少沟通成本 
## 3.8.1 代码生成 
## 3.8.2 专业工具 
## 3.8.3 软件附带工具 
## 3.8.4 在线工具 
# 3.9 可编辑文档库：提升协作性 
# 3.10 记录架构决策：轻量级架构决策记录
# 3.11 可视化文档：注重代码的可读性
# 3.12 看板工具：统一管理业务知识 
# 3.13 提交信息：每次代码提交文档化
## 3.13.1 项目方式 
## 3.13.2 开源项目方式 
## 3.13.3 对比不同文档方式 
# 3.14 通过流程化提高代码质量 
## 3.14.1 代码预处理 
## 3.14.2 手动检视代码 
# 3.15 使用工具提升代码质量 
## 3.15.1 代码扫描工具 
## 3.15.2 IDE 快速重构 
# 3.16 测试策略 
## 3.16.1 单元测试 
## 3.16.2 组件测试 
## 3.16.3 契约/接口测试 
# 3.17 小结 