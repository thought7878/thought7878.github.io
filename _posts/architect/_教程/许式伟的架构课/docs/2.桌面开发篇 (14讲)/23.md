# 《Web开发：浏览器、小程序与PWA》内容总结

这篇文章由七牛云许式伟撰写，*从架构角度分析了Web开发、浏览器、小程序与PWA*的技术演进和商业价值。

## 浏览器带来的重大变革

文章首先从界面开发视角分析了*浏览器带来的四大关键变化：*

### 1. 窗口系统的颠覆
- 网页成为单一窗口，不再有父子窗口关系
- 所有界面元素（input、image、div等通用控件和canvas）都是虚拟视图(Virtual View)
- 事件分派机制统一化，淡化了子View与图形(Shape)的界限

### 2. 窗口绘制机制的根本转变
- *从调用操作系统GDI绘制界面，转变为使用HTML+CSS声明界面*
- **关键洞见**：HTML+CSS本质上不是View层，而是ViewModel层
- 浏览器自动处理了View层更新和局部优化，大幅提升了开发效率
- 开发者*无需关心视图局部更新问题，浏览器已自动完成*

### 3. 语言限制与突破
- 浏览器长期仅支持JavaScript，形成语言制约
- *尝试突破的方案：*
  - Google的Dart语言（已失败）
  - 代码转换器：用其他语言开发，发布前转为JavaScript
  - WebAssembly：*打通各类语言与Web的桥梁*

### 4. B/S架构的转变
- 从单用户系统变为多用户系统
- Browser端无数据，数据集中在Server端
- 对应用架构提出全新挑战

## 小程序的崛起与特点

### 发展历程
- 2016年9月，微信小程序(最初称"应用号")开始内测
- 随后支付宝小程序、手机厂商"快应用"、今日头条小程序等相继出现
- 小程序成为"真正意义上的国产操作系统"，对抗Android和iOS生态

### 成功原因
- 拥有7亿级用户基础，是当时世界上最大的单一来源操作系统
- IM(即时通讯)作为移动时代最佳浏览器，封闭性强，适合构建应用生态

### 与传统Web开发的区别
- 小程序是Native程序在线化，而非PC Web移动化
- 小程序是完整的应用，而非由多个Web页面构成
- 需要提交应用给平台审核，平台掌控应用生杀大权

### 核心问题
- **标准不统一**：各平台接口快速迭代，难以建立统一标准
- **权限边界问题**：平台可下线已有大量用户的App，带来社会伦理问题
- **商业依赖风险**：开发者高度依赖平台，"刀刃永远是两面的"

## PWA (Progressive Web App)

### 基本概念
- Google在2015年推出的*移动浏览器方案*，早于微信小程序
- 可理解为"海外版的小程序"

### 与小程序的主要差异
1. **演进思路不同**：
   - PWA：兼容并对Web进行逐步改造升级
   - 小程序：与Web有较大差异，更接近Native应用

2. **关注焦点不同**：
   - PWA：更技术化，*关注断网体验和本地应用一致性*
   - 小程序：关注用户市场和商业价值，后续推出小游戏验证

3. **生态系统不同**：
   - PWA：无中心化AppStore，更像技术标准，非封闭操作系统
   - 小程序：具备完整的"账号(Account)-支付(Pay)-应用市场(AppStore)"商业闭环

### PWA的局限与前景
- **主要局限**：缺乏账号系统和支付能力，缺少商业闭环
- **未来展望**：可能由Facebook发扬光大，结合Libra可能"秒杀"微信小程序
  - Facebook已具备账户体系，加上Libra(支付)和PWA技术，形成完整商业闭环

## 核心洞见

1. **技术演进本质**：从命令行→字符界面→图形界面→浏览器→小程序，是交互方式的自然演进

2. **商业价值转变**：
   - 软件服务化：实现"24小时不间断服务"，放大各环节价值
   - 随时发布：极大改进软件迭代效率
   - 跨平台：消除操作系统差异，实现"一份代码到处运行"

3. **平台竞争格局**：
   - 中国：以微信小程序为代表的封闭生态
   - 海外：以PWA为代表的技术标准+Libra支付的开放生态
   - 未来可能由Facebook整合PWA+Libra，形成更具竞争力的解决方案

文章最后指出，无论是中国特色的小程序还是海外版的PWA，都代表了移动浏览器的高速迭代，反映了人机交互方式的持续演进和商业生态的激烈竞争。