# 《跨平台与 Web 开发的建议》内容总结

这篇文章由七牛云许式伟撰写，系统性地分析了*浏览器带来的两大变革——跨平台桌面程序开发和Web开发（B/S架构）*，并提供了实用的架构建议。

## 浏览器带来的两大变革

文章开篇指出，浏览器从技术角度主要带来两大变革：
1. **跨平台桌面程序开发**：消除了不同操作系统平台的差异性
2. **Web开发**：B/S架构的新型应用开发模式

## 跨平台桌面程序开发的挑战

### 复杂性来源
- **操作系统多样性**：
  - PC本地：Windows、macOS、Linux等
  - PC Web：Chrome、Safari、Firefox等
  - Mobile本地：Android、iOS等
  - Mobile Web：小程序、PWA等

- **屏幕尺寸差异**：
  - 大屏：PC、笔记本、Pad等
  - 中屏：手机
  - 小屏：手表

### 现状与挑战
- 跨平台开发是"超级难题"，无数方案层出不穷但无真正深入人心的解决方案
- "每一次统一的努力，都最终变成新的分裂"现象普遍
- 放弃某个操作系统意味着放弃流量入口和用户
- 同一操作系统在不同屏幕尺寸上交互范式差异大，增加跨平台工作量

## Web开发的特点与架构

### Web开发的独特挑战
- **多用户**：数据存储在Server端而非Client端
- **更高的数据可靠性要求**：数据丢失责任从用户转移到软件厂商
- **更多分工安排**：分为两大流派
  - **胖前端**：尽可能多的业务逻辑放在前端，极端情况为单页应用，体验更接近Native App
  - **胖后端**：主要逻辑在后端，包括界面交互事件响应也通过网络交给后端

### 浏览器端的架构演变
- **HTML+CSS的本质**：应理解为ViewModel层而非View层
  - HTML DOM从数据角度完整描述界面
  - View层已被浏览器自身实现
  - 浏览器自动处理了界面局部更新优化

- **架构模式变化**：MVC演变为MVMP（Model-ViewModel-Presenter）
  - 事件响应：View接收用户交互事件，委托给ViewModel层
  - 数据变化：Presenter层处理Model层的DataChanged事件，更新ViewModel

### 服务端架构解析
- **底层**：多租户Model层（Multi-User Model）
  - 实现自动化（Automation）所需的API
  - 支持直接API调用
  
- **Web层**：基于会话的（Session-based）
  - **Session-based Model**：多租户API转译成单租户场景
    - 代码量少，理论上可自动实现
  - **Session-based ViewModel**：HTML+JavaScript+CSS文件
    - 真正的Web业务入口
    - 通过互联网将数据返回浏览器，浏览器基于ViewModel渲染View

## 核心架构建议

- **Model层至关重要**：认真思考使用接口设计
- **"把Model层做厚"**：
  - 使前端更薄，更能适应变化
  - 体现架构师对稳定点和变化点的抉择
  - 与第一章强调的"稳定点与变化点分离，分而治之"原则一致

## 深刻洞见

- **跨平台困境**：是"大前端"程序员永恒的痛，"计划赶不上变化"是常态
- **架构演变逻辑**：从命令行→字符界面→图形界面→浏览器→小程序，是交互方式的自然演进
- **技术本质不变**：尽管框架名称变化（MVC→MVP→MVVM→MVMP），核心思想仍是稳定点与变化点分离

文章最后强调，面对复杂多变的跨平台和Web开发环境，架构师应坚持核心原则——认真对待Model层，将其做厚，这样才能构建出既稳定又灵活的应用架构，有效应对快速变化的技术生态。