# 《架构：系统的概要设计》内容总结

这篇文章由七牛云许式伟撰写，系统阐述了**架构设计中的概要设计阶段**，重点讲解了**系统分解的方法论**和实践价值。

## 基础架构与业务架构

- **架构师工作的两大领域**：
  - **基础架构**：*技术选型*（操作系统、编程语言、技术框架、第三方库等）
  - **业务架构**：*基于业务需求的系统设计*

- **基础架构的重要性**：
  - 考验技术前瞻性和判断力
  - 影响面更广，选错代价更高
  - 真正优秀的架构师会重视技术选型和基础平台建设
  - 阿里"大中台、小前台"理念本质上也是强调基础平台建设

## 系统分解的核心原则

### 评判标准
- **接口设计**：功能的使用界面应符合业务需求的自然预期
- **高内聚**：功能自身代码尽可能写在一起，避免分散
  - 实践方法：功能单独一个文件，或用注释行分割逻辑"小文件"
  - 优势：团队协作顺畅，代码提交冲突少
- **低耦合**：功能间依赖应尽可能少且简洁
  - 基础组件依赖：关注稳定（成熟度和持久性）
  - 业务模块依赖：关注必要性和接口设计

## 系统分解的方法论

### 实施步骤
1. **从需求归纳出发**：理清需求功能点涉及的数据对象和操作接口
2. **功能归类**：将功能点归于不同类别
3. **理清关系**：明确类与类的逻辑关系，做到自洽
4. **确定串联方式**：核心是整个系统如何被有效串联起来

### 概要设计阶段要点
- 以**子系统为维度**阐述系统角色关系
- 对关键子系统进一步分解，确定模块职责和接口
- 不必细化无风险的子系统
- **必须有代码产出**：
  - 系统初始框架代码
  - 原型性验证代码
  - 价值：关注全局系统性风险，提供具象认知
- **"代码即文档"**：代码是理解一致性更强的文档

## 桌面程序的系统分解实践

- **MVC架构的形成原因**：
  - 区分需求的稳定点和变化点
  - 业务核心逻辑稳定（Model层）
  - 用户交互方式多变（View/Controllers有差异）
  - Model层也有变化点：存储和网络

- **"画图"程序案例对比**：
  - **v01版本**：470行代码，所有功能混杂
  - **v26版本（MVC架构）**：580行代码，分为多个文件
    - 模型：model.js
    - 视图：view.js
    - 创建器：freepath.js, rect.js等
    - 总控：index.htm

- **MVC架构价值**：
  - 不是降低总代码行数
  - 关注团队协同作战和工作并行
  - 功能高内聚，功能间低耦合
  - 复杂功能迭代时分工必要性凸显

## 核心洞见

1. **系统分解的本质**：稳定点与变化点分离，分而治之
   - 业务核心逻辑是稳定点（Model）
   - 用户交互是变化点（View/Controller）

2. **概要设计的核心**：确定系统如何被有效串联起来，而非完整模块列表

3. **架构经验来源**："做中学"，架构经验是一线实战经验的积累和总结
   - 计算机科学是实践科学，架构更是如此
   - 通过实践理解架构演变过程

4. **代码质量判断**：存在大量说不清业务意图的函数或职责不清的模块，表明还处在"搬砖"阶段

文章最后强调，概要设计阶段应通过代码产出来验证设计思路，这不仅有助于消除全局系统性风险，还能为团队提供更具体、更一致的认知。好的系统分解能够使功能高内聚、功能间低耦合，从而提升团队协作效率和系统的可维护性。