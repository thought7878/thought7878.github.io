# 《05 - 思考题解读：如何实现可自我迭代的计算机？》内容总结

## 核心主旨
本文是许式伟*对"如何实现可自我迭代的计算机"思考题的深度解读*，重点阐述了*需求分析在架构设计中的核心地位*，以及*如何通过识别需求的稳定点与变化点来设计系统架构*。

## 需求分析的重要性

* **关键地位**：需求分析是良好架构设计的基础，架构师应至少花费三分之一的精力在需求分析上
* **实践启示**：即使优秀架构师进入新领域，也需要经过几次迭代才能设计出良好架构，因为领域需求理解需要过程
* **核心方法**：区分需求的**稳定点**（系统核心能力）和**变化点**（需考虑扩展性设计的部分）

## 思考题回顾

* **问题**：第一台以键盘+显示器为标准输入输出的现代计算机出现后，最小功能集但计算能力可自我迭代的计算机应具备哪些能力？
* **功能需求**：
  * 键盘和显示器的驱动程序
  * 外置存储设备的驱动程序
  * 汇编程序编辑器（可读取、修改、保存汇编代码）
  * 汇编编译器（可将汇编代码编译成机器代码）
  * 支持执行外置存储设备中的机器代码程序

## 系统设计思路

### 1. 计算机基础架构分析
* 计算机分为三大类零部件：**中央处理器**、**存储**、**输入输出设备**
* **存储**上的程序主要包括：
  * BIOS（主板ROM上的启动程序）
  * 外置存储上的软件
* **输入输出设备**中，外置存储是主要变数

### 2. BIOS与外置存储职责划分
* **BIOS负责**：
  * 键盘和显示器的驱动程序
  * 外置存储设备的驱动程序
  * 支持执行外置存储中引导区的机器代码程序
  * 跳转到外置存储的固定地址，将执行权交给引导程序

* **外置存储上的引导程序负责**：
  * 支持外置存储的数据格式（文件系统或Key-Value存储）
  * 提供管理外置存储的基础能力（如`ls`程序）
  * 执行外置存储上的可执行程序（`sh`程序）
  * 文本编辑器（`vi`程序）
  * 汇编编译器（`asm`程序）
  * 最终将执行权交给`sh`程序（实现系统扩展性）

### 3. 变化点与稳定点分析
* **变化点**：
  * 外置存储的数据格式 → 由文件系统/Key-Value存储子系统负责
  * 用户最终迭代出的能力 → 由`sh`程序支持执行外置存储上任意程序
  * 编辑器的交互范式 → 由`vi`程序迭代编辑器能力
  * 汇编语言的使用范式 → 由`asm`程序响应CPU指令集迭代

* **稳定点**：计算机的核心计算能力（由CPU提供）

## 架构设计启示

1. **需求分析是持续过程**：需求分析是从模糊到细化并最终清晰定义的过程，需要不断与客户沟通

2. **架构无标准答案**：不同人设计的系统可能不同，但通过对比可以加深对架构设计决策的理解

3. **变化点与稳定点关系**：
   * 稳定点往往*在系统层次的底层，提供核心功能*
   * 变化点往往*在更抽象的上层，调用稳定点提供的功能*
   * 稳定点需要提供功能给变化点使用

4. **实践指导**：
   * 识别需求变化点，为变化点设计扩展性
   * 将变化点从核心部件剥离，使核心架构保持稳定
   * 通过规格定义实现部件间的松耦合

## 结语

本文通过"可自我迭代的计算机"这一具体案例，展示了如何从需求分析出发，识别稳定点与变化点，并据此设计系统架构。作者强调，架构设计不是一蹴而就的过程，而是需要不断迭代、完善。对于初学者，即使面对复杂的系统设计任务，理解需求分析中稳定点和变化点的判断方法也至关重要。正如文中所述："架构并无标准答案，但通过对比别人的方案与自己的不同之处，可以加深你对架构设计在决策上的体会。" 这种思维方式不仅适用于计算机系统设计，也是软件架构设计的通用方法论。