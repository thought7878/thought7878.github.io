Applying Tree Shaking To Our Application

视频讲述了如何*在应用程序中应用 Tree Shaking 以实现优化*效果，具体如下：

## 回顾 Tree Shaking 工作原理及视频目标

[00:00]
提及之前视频已讲解 Tree Shaking 工作原理，当时用简单示例（几个 JavaScript 文件）说明；
**本视频目标**是对应用程序应用 Tree Shaking，并观察是否有优化效果。

## 初始生产构建包大小及 lodash 占用情况

[00:18]
首先运行生产构建，查看生成的包大小，目前 JavaScript 包*约 110 千字节*；
指出应用程序本身不大，**但 lodash 占用该包大小的 70%，且虽仅从 lodash 导入一个函数，整个库仍被包含在生成的 JavaScript 文件中**。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/07. Tree Shaking/media/20b0e72110d219eeebc8e7edc360b14d_MD5.jpeg]]

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/07. Tree Shaking/media/8213f0c935736f42327aab2bbb0b529d_MD5.jpeg]]

## lodash 未被 Tree Shaking 优化的原因及解决办法

[00:59]
**lodash 代码库未使用 ECMAScript 模块，而 Tree Shaking 仅适用于 ECMAScript 模块**；
*可通过 npm 包 lodash-es 解决，因其将 lodash 库导出为 script 模块*，需将 lodash 替换为 lodash-es，先在终端移除 lodash，再安装 lodash-es。

## 应用 Tree Shaking 后的包大小变化及优化效果

[01:47]
再次运行生产构建，检查包大小变化，发现生成的 JavaScript 包*仅约 45 千字节*，相比初始的 110 千字节减少近 70%，且仅修改一行代码就实现该优化。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/07. Tree Shaking/media/8c7178945b5c0490b0124bf75bd07548_MD5.jpeg]]

## 总结本视频内容

[02:35]
总结本视频了解了 Tree Shaking 在包含多个 JavaScript 文件的大型应用中的工作方式。
