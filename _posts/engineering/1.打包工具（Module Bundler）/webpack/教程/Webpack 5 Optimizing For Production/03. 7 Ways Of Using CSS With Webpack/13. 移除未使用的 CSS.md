Removing Unused CSS From The Generated Bundles

视频讲述了如何在应用程序中优化样式，重点介绍使用工具移除生成包中未使用的 CSS，以及结合 Bootstrap 框架进行实践的过程，具体如下：

## 优化背景与问题

[00:00]
在构建网站使用 Bootstrap、Foundation、Tailwind 等 CSS 框架时，**通常仅使用框架小部分功能，但未使用的 CSS 样式仍会被包含在最终包中**，需要了解并**移除这些未使用 CSS**。

## 移除未使用 CSS 的工具

[00:57]
`Purge CSS`，该工具**可分析内容和 CSS 文件，匹配 CSS 中定义的选择器与实际使用的选择器，安全移除未使用的 CSS 选择器，减小最终包体积**。

## 安装并导入 Bootstrap 框架

[02:18]
首先在终端安装 Bootstrap，然后在样式文件夹内创建名为 vendors.css 的新文件并导入 Bootstrap CSS，接着在主 JavaScript 文件 index.js 中导入 Bootstrap，且需在导入其他 CSS 文件前引入 vendors 文件，避免第三方库样式覆盖自定义样式。

## 使用 Bootstrap 类重构通知组件

[03:10]
改变通知弹出时的 DOM 元素创建方式，使用 Bootstrap 的“alert”和“alert##success”类来样式化通知组件，同时仍可叠加自定义样式，如将通知定位在屏幕底部，并移除自定义 CSS 中不再需要的、由 Bootstrap 提供的样式，仅保留设置 margin##bottom 为零的样式以消除 Bootstrap 警报默认的底部边距。

## 检查添加 Bootstrap 后的包体积问题

[05:39]
前往终端检查 CSS 包大小，发现添加 Bootstrap 后 CSS 包大小约两百千字节，远大于之前的约两千字节，包体积增大问题明显，需要进一步优化。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/f672d7fa17d0cd3c7ac81557e12fdccb_MD5.jpeg]]

## 配置 Purge CSS 优化包体积

[06:13]
通过 npm 安装 `purgecss-webpack-plugin` Purge CSS，然后在 Webpack 配置文件中将其插件添加到插件列表，使用 globe npm 包指定 Purge CSS 需分析的 src 文件夹内文件；同时在自定义 CSS 中添加注释，告知 Purge CSS 忽略用于显示通知的选择器，避免其因 Webpack 在生产构建中将 CSS 选择器转换为不可读哈希而被误移除。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/63e202e6298d04a31e92be80f6d2e1b4_MD5.jpeg]]

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/d6702eda19bdaa693b7313050f37cb27_MD5.jpeg]]

## 展示优化后的包体积效果

[08:48]
再次在终端检查 CSS 包大小，发现包体积大幅减小，从约两百千字节降至约五千字节，成功实现 CSS 包体积优化。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/a9f226975e358d3136c384f6e64c1b8a_MD5.jpeg]]

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/f672d7fa17d0cd3c7ac81557e12fdccb_MD5.jpeg]]
