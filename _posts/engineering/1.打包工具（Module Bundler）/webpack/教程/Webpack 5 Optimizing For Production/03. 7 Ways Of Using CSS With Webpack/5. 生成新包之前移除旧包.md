Removing Old Bundles Before Generating New Ones

视频讲述了在使用 Webpack 构建项目时，**如何解决旧构建文件冗余问题**，以及*如何通过配置优化文件管理*，具体如下：

## 提出 Webpack 构建的旧文件冗余问题

[00:00]
之前视频展示了**构建过程中自动生成 html 文件，每次运行 webpack 会在磁盘文件夹生成新文件，但不会删除之前构建的旧文件，多次修改代码和样式后，磁盘文件夹会积累大量冗余文件**。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/8ef0597cce934b15adaa8510d7049a52_MD5.jpeg]]

## 解决旧文件冗余的 clean 配置选项

[01:04]
Webpack 有专门的 `clean 配置选项`，它是输出配置的一部分，值可简单*设为 true*，也可设为包含属性的*对象*；
将 clean 设为 true 后，每次运行构建过程，*webpack 会清理输出路径（如 dist 目录）文件夹，删除其中所有文件*，确保生成新文件前文件夹干净。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/2476df3252823b368495ace8d59607c4_MD5.jpeg]]

### 演示 clean 设为 true 的效果

[01:51]
当前文件夹包含之前构建的残留文件，在终端运行 webpack 后，查看编辑器可发现磁盘文件夹中仅保留一份 javascript 文件和一份 css 文件，旧冗余文件被删除。

### 讲解 clean 配置对象的 dry 属性

[02:34]
`dry` 是 clean 配置对象的属性之一，*通过 webpack 指定 dry 时，会打印出应被删除的文件列表，但不会实际删除文件*；恢复之前移除的 console.log 语句、取消 css 文件中注释的行后，运行 webpack 可看到待删除文件列表。

### 讲解 clean 配置对象的 keep 属性

[03:18]
`keep 属性`用于*告知 webpack 在清理目录时应保留的文件*，*例如*可通过配置让 webpack 保留 css 文件、仅删除 javascript 文件；
运行 webpack 时，会显示除符合正则表达式的文件（如指定保留的 css 文件）外，其他文件（如 javascript 文件）将被删除，且此时因配置情况未实际删除文件，移除相关限制选项后才会实际执行删除操作，删除 javascript 文件并保留 css 文件。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/7afaf974a64f0a7331ad487628851d7a_MD5.jpeg]]

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/f478d2ad7c7090365962aca654a41d33_MD5.jpeg]]

## 介绍 Webpack 文件分类管理方法

[04:23]
目前所有文件（javascript、css、图片等）都生成在单一磁盘文件夹，可通过配置让 webpack 将不同类型文件放入独立子文件夹，如在 list 文件夹内创建 js 文件夹存放 javascript 文件，创建对应文件夹存放 css 文件。

## 演示文件分类管理配置的效果

[05:30]
在终端运行 webpack 后，检查磁盘文件夹变化，可发现已生成 javascript 和 css 的独立目录，实现了文件的有序组织。

## 总结本视频学习内容

[05:47]
本视频学习了如何使用 clean 选项保持磁盘目录整洁有序，同时学习了通过配置实现 Webpack 构建文件的分类管理。
