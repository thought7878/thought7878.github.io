Generating HTML Based On Your Custom Template


视频讲述了如何利用webpack的相关插件和配置，*实现基于自定义模板自动生成HTML文件并更新文件引用*，具体如下：

## 提出问题与解决方案引入
[00:00]
之前视频中**配置webpack让生成文件名称含内容哈希，导致代码修改后需手动更新HTML中文件引用**，本视频将展示**通过`html-webpack-plugin`自动更新引用**，该插件*还能从头创建HTML文件*。

## 插件配置与通用设置
[00:59]
需在通用webpack配置文件中导入`html-webpack-plugin`并添加到插件列表，可*指定生成HTML文件名称*以支持多HTML文件生成，同时因自动生成HTML（适用于生产和开发环境），可删除原index.html并使用自定义template.html。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/8aa8f6a561e1a24ce437c32d22a1e96c_MD5.jpeg]]


## 路径与服务器配置调整
[02:33]
由于HTML文件生成路径变化，需*更新图片文件引用*（让webpack从父文件夹查找图片），同时*更新开发服务器配置*（因原index.html在项目根目录，现与JS、CSS文件同目录）。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/9693bab412ce5841162b7d1fefab8216_MD5.jpeg]]

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/ccc79199fba457d44a743ad33cb792c3_MD5.jpeg]]

## HTML处理规则
[03:14]
要在通用配置中*添加处理HTML文件的特殊规则*，**使用`html-loader`帮助webpack处理自定义HTML模板（因`html-webpack-plugin`会内部导入模板文件）**。
最后需安装`html-webpack-plugin`和`html-loader`。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/eb05920043d1978b1f3a3b5695b351fa_MD5.jpeg]]

## 不同模式下构建结果验证
[04:14]
运行webpack后可在磁盘目录看到新生成的HTML文件，*生产模式下HTML文件内容会被压缩，开发模式下不压缩以加快构建过程且自动注入带`defer`属性的script标签*（提升性能），且**开发模式不生成单独CSS文件故无CSS引用，生产模式会有CSS文件引用**。

开发模式：
![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/be3a72f0b781d073ddad00b0e872f87a_MD5.jpeg]]

生产模式：
![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/05914d4928e3bfdbc8cbbcf2a387a405_MD5.jpeg]]

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/28d3ffc4b3d1d6530dead8140fcb2d75_MD5.jpeg]]


