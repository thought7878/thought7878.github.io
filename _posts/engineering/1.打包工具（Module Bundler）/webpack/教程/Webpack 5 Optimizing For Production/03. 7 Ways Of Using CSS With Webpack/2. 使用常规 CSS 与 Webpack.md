Using Regular CSS With Webpack


视频讲述了**如何在Webpack中使用常规CSS**，并*简要介绍了加载器（Loaders）* 的相关知识，包括*整合CSS到Webpack构建流程的原因、所需加载器、配置方法*及实际操作验证，具体如下：

## Webpack处理CSS的优势与目标
[00:00]
*Webpack可直接通过JavaScript导入CSS等多种资源，将CSS整合到构建流程能带来优化CSS代码、支持CSS预处理器和CSS-in-JS库等好处*，视频目标是*演示如何实现这一整合*，解决当前从HTML引用未经过Webpack处理的CSS的情况。

## 导入CSS文件的初步操作
[01:00]
需先从HTML文件中移除对CSS文件的引用，再在JavaScript文件（如index.js，也可根据需求选择其他非入口JS文件）中添加CSS文件导入语句。
但此时Webpack*因原生仅支持导入JavaScript和JSON文件，无法处理CSS导入*，**需借助加载器Loader**。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/874100fd5d700c26b7dfcab3ec5fdc08_MD5.jpeg]]

## Webpack加载器的作用
[01:57]
`加载器Loader`是**能让Webpack处理特定文件类型**的JavaScript库。

现有多种加载器（如XML加载器、CSV加载器），*处理CSS需同时使用css-loader和style-loader*，其中`css-loader`负责从磁盘读取CSS文件内容，`style-loader`负责将CSS注入文档对象模型（DOM）。


## Webpack处理CSS的规则配置
[02:43]
需在Webpack配置中添加`module`属性（为JavaScript对象），其下包含`rules`属性（可含多个规则，*每个规则对应处理一种或多种文件类型*）；
针对CSS文件的规则为对象，至少包含`test`和`use`两个属性，`test`用正则表达式（*匹配以.css结尾的文件*）指定匹配的文件类型，`use`指定*用于处理CSS文件的加载器*（即css-loader和style-loader），且多个加载器可在单个规则中组合使用。

```js
const path = require('path')

const config = {
  entry: './src/js/index.js',
  output: {
    path: path.resolve(__dirname, '../dist'),
    filename: 'bundle.js'
  },
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [ 'style-loader', 'css-loader' ]
      }
    ]
  }
};

module.exports = config
```

## 处理CSS中的图片引用
[04:51]
*由于Webpack暂未配置处理图片，Webpack不知道如何导入图片*，需先注释掉CSS文件中引用图片的代码；同时，每个Webpack加载器都是npm包，需安装css-loader和style-loader这两个额外依赖包，以确保Webpack能正常使用它们处理CSS。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/b8a16b06f885ace83c9d65aeff4bdd2f_MD5.jpeg]]

## 验证Webpack处理CSS的效果
[05:30]
重新构建应用后，通过复制index.html的完整路径在浏览器中打开，可观察到应用仍正常运行，说明已成功将简单CSS文件导入JavaScript代码，且使用style-loader会将CSS与JavaScript打包成名为bundle.js的单个文件（后续视频将讲解生成独立CSS文件的方法）。

## 后续视频内容预告
[06:01]
接下来的视频将介绍使用CSS模块、Less、Sass、PostCSS，以及与Webpack配合使用的多个CSS##in##JS库等内容。