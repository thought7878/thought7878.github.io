CSS Module

视频讲述了处理应用程序中 CSS 的不同方法，重点介绍了**CSS 模块**的相关知识，包括*其解决的问题、定义、使用方法、在 Webpack 中的配置*等内容，具体如下：

## CSS 模块解决的问题
  [00:00]
  本节将讨论处理应用程序中 CSS 的不同方法，包括 CSS 模块、Less、PostCSS 以及 JSS 和 Motion 等 CSS in JS 解决方案。此部分重点聚焦 CSS 模块，并先解释为何需要 CSS 模块，提及 CSS 于 1996 年发布，初衷是分离样式与网站文档。
  **因 CSS 全局特性，在大型应用中易出现冲突问题，CSS 模块正是为解决该问题而生**。
  
## CSS 模块定义与特性
  [01:26]
  `CSS 模块`是**所有类名和动画名都具有局部作用域**的 CSS 文件，**能避免全局命名空间问题**；
  它并非浏览器功能，而是**在构建过程中改变类名和选择器以实现作用域**的步骤；
  使用时需配置 Webpack。
  
### 实现通知功能的代码编写与 CSS 模块文件创建
  [02:04]
  为实现新增待办事项时显示通知并两秒后移除的功能，先在 ui.js 创建相关函数，之后需为差异创建样式并放入新文件，该文件将成为 CSS 模块，此 CSS 模块会在屏幕底部绿色框中心显示消息。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/fcb5cd4db3e59a379cb7bfae308ce6e1_MD5.jpeg]]

### 在 JavaScript 中引用 CSS 模块类名的方法
  [04:26]
  在 JavaScript 文件顶部像往常一样导入样式，然后引用样式对象的对应属性（如 notification 属性），CSS 模块会定义一个映射文件类名到动态作用域类名的对象，该对象可在 JavaScript 代码中使用，且文件中的类名在整个项目中不必唯一，Webpack 会将其替换为生成的类名并在页面渲染。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/914e4ad2238afd2603207eb5ff6c6dc6_MD5.jpeg]]

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/b91bbb74df9bf6ab941837638fda5b0d_MD5.jpeg]]

## Webpack 中 CSS 模块的配置步骤
  [05:53]
  先向生产配置添加必要规则，保留原有适用于非 CSS 模块 CSS 文件的规则，使其跳过 CSS 模块文件，再为以 module.css 结尾的 CSS 文件添加单独规则，应用相同加载器并传递 modules 选项以启用 CSS 模块；之后将生产配置中的相关调整复制到开发配置，先从常规规则中排除 CSS 模块文件，再粘贴 CSS 模块规则，且开发模式下需将 mini css 提取插件替换为 style loader，并通过 localIdentName 属性配置生成易于识别的类名，方便调试。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/bb82261eba33f2faf5bdc44d5b445c15_MD5.jpeg]]
  
## CSS 模块效果验证与配置调整
  [07:07]
  运行 Webpack 后可在浏览器看到通知提示（两秒后消失），通过开发者工具能查看 Webpack 生成的类名，*若想让类名更易读，可在 Webpack 配置中调整 localIdentName 属性*，官方文档*建议生产环境使用使类名完全不可读的配置值，开发模式则配置为易于识别的类名*。


![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/de39db9618bbee414c59223e29818927_MD5.jpeg]]

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/0aebcb638cbe7b3be7594a8415770d3d_MD5.jpeg]]


![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/f7fc7b6fab382f9d1700fbc43f3babc8_MD5.jpeg]]

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/03. 7 Ways Of Using CSS With Webpack/media/8a6c3742b6edadcbdddd83e54bc2ba78_MD5.jpeg]]

