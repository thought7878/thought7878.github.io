Lazy Loading Multiple Modules In Parallel

视频讲述了**如何将 jQuery 也转换为动态导入**，并**实现多个 JavaScript 模块（jQuery 和 Bootstrap）的并行懒加载**，同时介绍相关配置调整及效果验证，具体如下：

## 回顾前期内容与本期目标

[00:00]
回顾之前视频中动态导入和懒加载的工作原理，以及*已将 Bootstrap 从静态导入转为动态导入*的操作；
明确**本期目标**是*对 jQuery 做同样转换，并学习在一个动态导入中引入多个 JavaScript 模块*。

## 并行导入多模块的核心方法

[01:22]
动态导入函数返回 Promise，**可通过 Promise.all 组合多个动态导入以实现多模块并行加载**；
以同时导入 Bootstrap 和 jQuery 为例，说明需将多个动态导入放入 Promise.all 的数组参数中，数组元素依次对应各模块。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/08. Applying Code Splitting and Lazy Loading/media/4606efcea361b0f173a061d713c15c5a_MD5.jpeg]]

[02:59]
代码无法直接识别\$代表jQuery，需显式映射；
由于jQuery从npm包中默认导出，动态导入时要将其默认导出映射到变量，以实现\$函数的正常使用。

[03:43]
需对同时依赖 jQuery 和 Bootstrap 的另一个函数做相同改造，在函数内部使用 Promise.all 导入这两个库；
完成改造后，移除文件顶部 jQuery 的静态导入，因其已通过动态导入使用。

## Webpack 配置调整

[04:57]
由于 jQuery 已改为动态导入，其会被其他缓存组（async）覆盖，故需移除 webpack 生产配置中为 jQuery 创建独立 js 包的缓存组。

## 懒加载效果验证

[05:29]
在浏览器开发者工具网络标签查看效果，初始页面加载仅加载四个 js 文件，无 jQuery 和 Bootstrap；添加新待办事项时无额外内容加载（因相关代码不依赖这两个库），删除待办事项时才加载 jQuery 和 Bootstrap 的 js 包，初始加载节省约 160KB 流量。
