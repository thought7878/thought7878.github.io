Define Your Own Strategy For Code Splitting

视频讲述了在 Webpack 5 中定义**自定义代码分割策略**的相关内容，包括*对前面代码分割策略的回顾、自定义策略的具体设定、运行时代码处理、效果验证*等，具体如下：

## 回顾前面的代码分割策略

[00:00]
之前探讨过多种代码分割策略，如*将特定 JavaScript 库（如 jquery、bootstrap 等）提取到独立包中*，Webpack 可*智能判断需单独提取的库*（只需定义规则），还能*将 node 模块文件夹中所有依赖打包到单个 JS 文件*，或*为每个依赖单独打包成文件*。

## 自定义代码分割策略

[00:57]
除现有策略外，**可针对特定场景定义自定义策略**，**为 jquery、bootstrap、lodash**（因使用 lodash-es，仅导入所需函数，包约 2000 字节）**创建独立 JS 包**；
**调整提取单独包的最小尺寸**；
**node_modules 文件夹里其余未明确指定的模块将打包到单个文件**（名为 node_modules 的 JS 文件）；
Webpack 还允许**将所有包共享的运行时代码打包到独立单一 JS 文件**，*默认每个入口包含运行时代码，指定值后会生成所有包共享的单一运行时文件*。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/08. Applying Code Splitting and Lazy Loading/media/9e4f45ca0d6cbe381895f606ba00bfa8_MD5.jpeg]]

## 验证自定义策略的打包结果

[03:36]
运行终端中的包分析器查看生成的包图表，可见*三个包含指定库（jquery、bootstrap、lodash）的独立包、一个 node_modules包、一个运行时代码块、一个包含自身代码的main包*。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/08. Applying Code Splitting and Lazy Loading/media/b7622e19a5851cdad0118baa85b460dc_MD5.jpeg]]

## 测试待办事项应用兼容性

[04:17]
为确认应用与新代码拆分策略兼容，运行构建过程后，将 index.html 路径粘贴到浏览器，添加新待办事项，验证应用仍能正常运行，同时明确通过此次操作学会结合不同代码分割策略并为该应用定义自定义策略。

![[_posts/engineering/1.打包工具（Module Bundler）/webpack/教程/Webpack 5 Optimizing For Production/08. Applying Code Splitting and Lazy Loading/media/67318416b66c46249a75ba8810af532b_MD5.jpeg]]
