### 1. 什么是 Husky

**Husky** 是*一个 Git 钩子工具*，在前端开发中应用广泛。**Git 钩子**是*在 Git 执行特定事件（如提交代码 `commit`、推送代码 `push` 等）前后执行脚本的机制*。**Husky 简化了 Git 钩子的使用和配置**，让开发者能够方便地在这些关键节点执行自定义脚本，从而保障代码质量、实施代码规范等。

### 2. 为什么要使用 Husky

- **保障代码质量**：在代码提交或推送前，可以通过 Husky 触发代码检查工具（如 ESLint、Stylelint）和测试脚本的运行。若代码不符合规范或测试不通过，就阻止代码提交或推送，避免有问题的代码进入版本控制系统。
- **强制执行代码规范**：借助 Husky 能够确保团队成员提交的代码都遵循统一的代码规范，维持代码风格的一致性，提升代码的可读性和可维护性。
- **自动化流程**：在代码提交或推送的关键节点自动执行特定任务，实现流程的自动化，减少人工干预，提高开发效率。

### 3. 如何使用 Husky

#### 3.1 安装 Husky

在项目根目录下，使用 npm 或 yarn 进行安装：

```bash
npm install husky --save-dev
# 或者使用 yarn
yarn add husky --dev
```

#### 3.2 启用 Git 钩子

安装完成后，执行以下命令来启用 Git 钩子：

```bash
npx husky install
```

此命令会在项目根目录下创建一个 `.husky` 文件夹，用于存放 Git 钩子脚本。

*为了在每次安装依赖后自动启用 Husky*，可以在 `package.json` 中添加如下脚本：

```json
{
  "scripts": {
    "prepare": "husky install"
  }
}
```

#### 3.3 添加钩子

可以使用 `husky add` 命令来添加钩子。以下是几个常见的钩子配置示例：

##### pre - commit 钩子

*在代码提交前执行 ESLint 检查*，确保代码符合规范。在终端执行以下命令添加 `pre - commit` 钩子：

```bash
npx husky add .husky/pre-commit "npx eslint src"
```

*上述命令会在 `.husky` 文件夹下创建一个 `pre - commit` 文件，文件内容为执行 `npx eslint src` 命令*，即对 `src` 目录下的代码进行 ESLint 检查。*如果检查不通过，提交操作将被阻止*。

##### pre - push 钩子

*在代码推送前执行测试脚本*，确保代码的功能正常。添加 `pre - push` 钩子的命令如下：

```bash
npx husky add .husky/pre-push "npx jest"
```

该命令会在 `.husky` 文件夹下创建 `pre - push` 文件，其中的脚本会执行 `npx jest` 命令运行测试用例。若测试不通过，代码将无法推送。

### 4. 注意事项

- **脚本路径和依赖**：确保在钩子脚本中使用的命令和工具路径正确，并且相关依赖已经安装。例如，若要使用 ESLint 进行代码检查，需要在项目中安装 ESLint 及其相关配置。
- **错误处理**：当钩子脚本执行失败时，Git 操作会被阻止。要确保在脚本中正确处理错误，并给出清晰的错误信息，方便开发者定位和解决问题。
- **与其他工具集成**：Husky 可以和多种前端工具集成，如 ESLint、Prettier、Jest 等，根据项目需求合理配置钩子，以实现更全面的代码质量保障。
