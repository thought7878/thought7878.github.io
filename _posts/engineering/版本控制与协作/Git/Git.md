
### 一、Git 概述

**Git** 是一个免费、开源的分布式版本控制系统，常用于软件开发中*对代码的版本管理*。由 Linus Torvalds 为了帮助管理 Linux 内核开发而开发。它主要用于软件开发过程中的代码版本管理，但也可以用于管理任何文件集合的历史变更。相比于传统的集中式版本控制系统（如 SVN），Git 的分布式特性*让每个开发者的本地仓库都包含完整的项目历史*，允许离线工作，并能更高效地处理分支和合并操作。

### 二、基本概念

#### 集中式 vs 分布式
- 传统的集中式版本控制系统（如 SVN）依赖于一个中央服务器来存储所有版本的代码，而 Git 是分布式的，每个开发者的本地仓库都完整包含了项目的所有历史记录和版本信息。这意味着开发者可以在本地进行大部分的版本控制操作，无需频繁与远程服务器交互。

#### 仓库（Repository）
- 是存储项目文件和版本历史的地方，分为本地仓库和远程仓库。本地仓库在开发者的本地计算机上，远程仓库通常位于服务器上，用于团队协作和代码共享。
- 可以通过 `git init` 初始化本地仓库，使用 `git clone` 克隆远程仓库到本地。
#### 提交（Commit）
- 是对项目文件更改的一次记录，每次提交都会生成一个唯一的哈希值（如 SHA - 1）来标识。
- 提交时需要添加描述信息（`-m` 参数），清晰说明本次更改的内容和目的。
#### 分支（Branch）
- 是独立于主代码线的开发线路，允许开发者在不影响主代码的情况下进行新功能开发、bug 修复等工作。
- 常见分支包括主分支（如 `master` 或 `main`）、开发分支、功能分支、发布分支和热修复分支等。
#### 标签（Tag）
- 是对某个特定提交的标记，通常用于标记项目的重要版本，如发布版本。标签分为轻量标签和附注标签。

#### 远程仓库（Remote Repository）
- 存储在服务器上的仓库，用于团队成员之间的代码共享和协作。常见的远程仓库托管平台有 GitHub、GitLab、Bitbucket 等。

### 三、常用命令

#### 仓库操作

1. **初始化仓库**
   ```bash
   git init
   ```
   在当前目录下创建一个新的 Git 仓库。
2. **克隆远程仓库**
   ```bash
   git clone <远程仓库地址>
   ```
   将远程仓库的代码复制到本地。可以指定本地目录名：`git clone <远程仓库地址> <本地目录名>`

#### 文件操作

1. **查看文件状态**
   ```bash
   git status
   ```
   显示工作目录和暂存区中文件的状态，如已修改、已添加、已删除等。
2. **添加文件到暂存区**
   ```bash
   git add <文件名>  # 添加指定文件
   git add .         # 添加所有修改的文件
   ```
   暂存区是一个中间区域，用于准备提交的文件。
3. **提交暂存区的文件**
   ```bash
   git commit -m "提交描述信息"
   ```
   将暂存区的文件提交到本地仓库。
4. **撤销文件修改**
   ```bash
   git checkout -- <文件名>
   ```
   丢弃工作目录中指定文件的修改。
5. **移除暂存区的文件**
   ```bash
   git reset HEAD <文件名>
   ```
   将指定文件从暂存区移除，但保留工作目录中的修改。

#### 分支操作

1. **查看分支**
   ```bash
   git branch        # 查看本地分支
   git branch -r     # 查看远程分支
   git branch -a     # 查看所有分支
   ```
2. **创建分支**
   ```bash
   git branch <分支名>
   ```
3. **切换分支**
   ```bash
   git checkout <分支名>
   ```
4. **创建并切换分支**
   ```bash
   git checkout -b <分支名>
   ```
5. **合并分支**
   ```bash
   git merge <分支名>
   ```
   将指定分支的更改合并到当前分支。可能会出现冲突，需要手动解决。
6. **删除分支**
   ```bash
   git branch -d <分支名>  # 删除已合并的分支
   git branch -D <分支名>  # 强制删除未合并的分支
   ```

#### 远程仓库操作

1. **查看远程仓库信息**
   ```bash
   git remote -v
   ```
2. **添加远程仓库**
   ```bash
   git remote add <远程仓库名> <远程仓库地址>
   ```
3. **推送本地分支到远程仓库**
   ```bash
   git push <远程仓库名> <分支名>
   ```
   首次推送可以使用 `git push -u <远程仓库名> <分支名>`，将本地分支和远程分支关联起来。
4. **从远程仓库拉取代码**
   ```bash
   git pull <远程仓库名> <分支名>
   ```
   相当于先 `git fetch` 再 `git merge`。
5. **获取远程仓库最新信息**
   ```bash
   git fetch <远程仓库名>
   ```
   只获取远程仓库的更新信息，不合并到本地分支。

#### 版本回退

1. **软回退**
   ```bash
   git reset --soft <提交哈希值>
   ```
   回退到指定提交，保留工作目录和暂存区的修改。
2. **混合回退**
   ```bash
   git reset --mixed <提交哈希值>
   ```
   回退到指定提交，保留工作目录的修改，但清空暂存区。
3. **硬回退**
   ```bash
   git reset --hard <提交哈希值>
   ```
   回退到指定提交，丢弃工作目录和暂存区的所有修改。
4. **撤销提交**
   ```bash
   git revert <提交哈希值>
   ```
   创建一个新的提交来撤销指定提交的更改。

### 四、工作流程

1. **集中式工作流**
   - 所有团队成员直接在主分支上进行开发和提交，适用于小型团队和简单项目。
2. **功能分支工作流**
   - 每个新功能或任务都在独立的分支上进行开发，开发完成后再合并到主分支，能隔离不同功能的开发。
3. **GitFlow 工作流**
   - 定义了严格的分支模型，包括主分支（`master`）、开发分支（`develop`）、功能分支（`feature`）、发布分支（`release`）和热修复分支（`hotfix`），适用于大型项目和需要严格版本管理的项目。
4. **GitHub Flow 工作流**
   - 基于功能分支工作流，强调快速迭代和持续部署。新功能在分支上开发，通过拉取请求（Pull Request）进行代码审查，审查通过后合并到主分支。

### 五、高级特性

1. **钩子（Hooks）**
   - 是在特定 Git 事件发生时自动执行的脚本，如 `pre - commit` 钩子可在提交代码前进行代码检查，`post - receive` 钩子可在推送代码后自动部署。
2. **子模块（Submodule）**
   - 允许在一个 Git 仓库中包含另一个 Git 仓库，用于管理项目中的外部依赖。
3. **变基（Rebase）**
   - 将一个分支的修改应用到另一个分支上，使提交历史更加线性。但在多人协作时需谨慎使用，避免丢失提交记录。

### 六、与其他工具集成

1. **与 IDE 集成**
   - 大多数集成开发环境（如 Visual Studio Code、WebStorm）都集成了 Git 功能，方便开发者在 IDE 中进行版本控制操作。
2. **与 CI/CD 工具集成**
   - 可与 Jenkins、GitLab CI/CD、GitHub Actions 等持续集成/持续部署工具集成，实现代码提交后的自动化构建、测试和部署。
