## 定义与作用
在 Git 里，`暂存区`（Staging Area，也被叫做索引 Index）是一个**中间地带**，处于工作区（Workspace）和本地仓库（Local Repository）之间。*它就像一个缓冲区*，其**核心作用**是让开发者能够精细地*挑选哪些文件的修改要被纳入到下一次的提交中*，从而灵活地控制提交的内容和范围。

## 命令
### 工作区到暂存区
当在工作区对文件进行了创建、修改或删除等操作后，若想将这些修改记录到版本控制系统中，首先要把这些修改添加到暂存区。使用 `git add` 命令可以完成这一操作。例如：

```bash
git add file.txt  # 将指定的 file.txt 文件添加到暂存区
git add .         # 将工作区所有修改的文件添加到暂存区
```

### 暂存区到本地仓库
当暂存区准备好了要提交的内容后，使用 `git commit` 命令可以把暂存区的内容永久保存到本地仓库，形成一个新的提交记录。示例如下：

```bash
git commit -m "本次提交的描述信息"
```

### 查看
#### 查看文件状态
借助 `git status` 命令，能够*查看工作区和暂存区中文件的状态*。文件可能处于*未跟踪（Untracked）、已修改（Modified）、已暂存（Staged）* 等不同状态。例如，当一个新文件被创建但还未添加到暂存区时，`git status` 会显示它为*未跟踪文件*；当使用 `git add` 把该文件添加到暂存区后，它的状态就会变为*已暂存*。

#### 查看与上一次提交之间的差异
使用 `git diff --staged` 命令可以*查看暂存区与上一次提交之间的差异*，了解哪些修改会被包含在下次提交中。

## 暂存区的操作命令

### 从暂存区移除文件
如果已经把文件添加到了暂存区，但之后又不想将其包含在本次提交中，可以使用 `git reset HEAD <文件名>` 命令*将文件从暂存区移除，不过工作区的修改会被保留*。例如：

```bash
git reset HEAD file.txt
```

### 修改暂存区文件内容
若在将文件添加到暂存区后，又对工作区的文件进行了修改，此时可以再次使用 `git add` 命令将新的修改更新到暂存区。

### 撤销暂存区的修改
如果想要撤销暂存区中某个文件的所有修改，回到上一次提交时的状态，可以先使用 `git reset HEAD <文件名>` 将文件从暂存区移除，再使用 `git checkout -- <文件名>` 丢弃工作区的修改。

## 实际应用场景

- **分阶段提交**：在开发过程中，一次可能会对多个功能或模块进行修改。通过暂存区，可以将不同功能的修改分别添加到暂存区并分多次提交，使得每个提交的内容更加聚焦和清晰，便于后续的代码审查和版本管理。
- **部分提交**：当修改了一个文件中的多个部分，但只想提交其中一部分修改时，可以通过 `git add -p` 命令以交互方式选择要添加到暂存区的内容，实现部分提交。例如：

```bash
git add -p file.txt
```

执行该命令后，Git 会逐块显示文件的修改内容，让你选择是否将每一块添加到暂存区。
