`git rebase` 是 Git 中一个非常强大但**需要谨慎使用**的命令，它用于**重新应用一系列提交到一个新的基础之上**。常用于整理提交历史、合并分支、清理 commit 记录等。

---

## 📌 一、基本概念

### 💡 什么是 rebase？

> **Rebase（变基）** 就是将某段提交“移动”或“复制”到另一个提交历史的顶端，并以新的提交为基础继续提交。

通俗理解：就像你写了一堆代码，现在想让这些改动“基于”别人最新的代码来重新提交一次。

---

## 🧭 二、常见使用场景

### ✅ 场景1：更新本地分支到最新主分支（如 `main`）

```bash
git checkout feature-branch
git rebase main
```

作用：将 `feature-branch` 上的提交移到 `main` 分支的最新提交之后。

---

### ✅ 场景2：整理本地提交历史（交互式 rebase）

```bash
git rebase -i HEAD~5
```

打开编辑器后可以对最近 5 次提交执行以下操作：

| 操作符 | 含义 |
|--------|------|
| `pick` (p) | 使用该提交 |
| `reword` (r) | 修改提交信息 |
| `edit` (e) | 编辑该提交（可用于修改内容） |
| `squash` (s) | 合并到前一个提交 |
| `fixup` (f) | 合并到前一个提交，不保留提交信息 |
| `drop` (d) | 删除该提交 |

保存退出后 Git 会依次重放这些提交。

---

### ✅ 场景3：解决冲突时继续 rebase

在 rebase 过程中如果遇到冲突：

```bash
# 查看冲突文件
git status

# 手动解决冲突后标记为已解决
git add <filename>

# 继续 rebase
git rebase --continue
```

如果你想放弃 rebase 并回到原来的状态：

```bash
git rebase --abort
```

---

### ✅ 场景4：强制推送到远程仓库（慎用）

如果你已经把旧的提交历史推送到远程，而你又修改了本地提交历史（比如 squash 或删除 commit），你需要强制推送：

```bash
git push --force
```

⚠️ 警告：这会覆盖远程仓库的历史，可能影响其他开发者，请确保你知道自己在做什么！

---

## 🔁 三、与 merge 的区别

| 对比项         | `git merge`                    | `git rebase`                      |
|----------------|--------------------------------|-----------------------------------|
| 提交历史       | 保留原样，生成新合并提交       | 线性化历史，看起来更干净          |
| 是否修改历史   | 不会                           | 会（重写提交历史）                |
| 是否安全       | 更安全                         | 需要小心处理，尤其在公共分支上     |
| 推荐使用场景   | 公共分支、多人协作             | 本地开发分支、私有分支            |

---

## 🛠 四、常用命令总结

| 命令                             | 说明 |
|----------------------------------|------|
| `git rebase main`                | 将当前分支的提交移到 `main` 最新提交之后 |
| `git rebase -i HEAD~n`           | 交互式编辑最近 n 次提交 |
| `git rebase --continue`          | 解决冲突后继续 rebase |
| `git rebase --skip`              | 跳过当前冲突提交（慎用） |
| `git rebase --abort`             | 放弃 rebase，恢复原始状态 |
| `git push --force`               | 强制推送被 rebase 修改过的提交 |

---

## 🧪 五、小贴士

- 如果你在 rebase 中卡住了，可以用 `git rebase --abort` 回退；
- 可以使用 `git reflog` 查看操作记录，找回误删的提交；
- 不建议在公共分支（如 `main` / `master`）上使用 rebase；
- 在 IDE（如 VS Code、IntelliJ IDEA）中也可以图形化操作 rebase。

---

如果你告诉我你想实现什么目标，我可以帮你写出具体的 rebase 命令流程 😊