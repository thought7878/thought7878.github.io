è¦æ­å»ºä¸€ä¸ªç±»ä¼¼äº [react-day-picker](file:///Users/ll/Desktop/learn-notes/frontend/react/3rd/react-day-picker/website/node_modules/react-day-picker) é¡¹ç›®çš„å¼€å‘ç¯å¢ƒï¼Œç”¨äºå¼€å‘ä½ çš„ `NumberField` React ç»„ä»¶ï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚æˆ‘ä»¬å°†ä½¿ç”¨ **React + TypeScript** æ„å»ºç»„ä»¶ï¼Œå¹¶å¼•å…¥å¿…è¦çš„å·¥å…·é“¾ä»¥ç¡®ä¿é«˜è´¨é‡çš„å¼€å‘ä½“éªŒã€‚

---

### ğŸ§° æŠ€æœ¯æ ˆæ¦‚è§ˆ

| ç±»åˆ«     | å·¥å…·/æŠ€æœ¯                           |
| -------- | ----------------------------------- |
| å‰ç«¯æ¡†æ¶ | React (>=18.x)ã€TypeScript (~5.8.3) |
| æ„å»ºå·¥å…· | pnpmã€tscï¼ˆTypeScript ç¼–è¯‘å™¨ï¼‰      |
| å•å…ƒæµ‹è¯• | Jest                                |
| æ ·å¼ç®¡ç† | CSS Modulesã€Sass / TailwindCSS     |
| æ–‡æ¡£ç”Ÿæˆ | Docusaurusï¼ˆå¯é€‰ï¼‰                  |
| ä»£ç è§„èŒƒ | ESLint + Prettier                   |
| å¼€å‘ç¯å¢ƒ | Node.js >=18                        |

---

## âœ… æ­å»ºæ­¥éª¤è¯¦è§£

### 1. åˆå§‹åŒ–é¡¹ç›®ç›®å½•ç»“æ„

åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ä½œä¸ºä½ çš„ç»„ä»¶åº“æ ¹ç›®å½•ï¼š

```bash
mkdir react-number-field
cd react-number-field
```

åˆå§‹åŒ– [package.json](file:///Users/ll/Desktop/learn-notes/frontend/react/3rd/react-day-picker/package.json) æ–‡ä»¶ï¼š

```bash
pnpm init
```

---

### 2. å®‰è£…ä¾èµ–

#### ğŸ“¦ æ ¸å¿ƒä¾èµ–ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

```bash
pnpm add react react-dom
```

#### ğŸ›  å¼€å‘ä¾èµ–

```bash
pnpm add -D typescript ts-node jest @types/react @types/react-dom \
  eslint prettier eslint-config-prettier eslint-plugin-react \
  @typescript-eslint/eslint-plugin @typescript-eslint/parser \
  docusaurus tailwindcss sass css-modules-typescript-declarations \
  date-fns
```

---

### 3. é…ç½® TypeScript

åˆ›å»º `tsconfig.json` æ–‡ä»¶ï¼š

```json
{
  "compilerOptions": {
    "target": "es5",
    "module": "esnext",
    "lib": ["dom", "dom.iterable", "esnext"],
    "strict": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "outDir": "./dist"
  },
  "include": ["src"]
}
```

---

### 4. åˆ›å»ºæºç ç»“æ„

åœ¨é¡¹ç›®ä¸­åˆ›å»ºå¦‚ä¸‹ç»“æ„ï¼š

```
src/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ NumberField/
â”‚       â”œâ”€â”€ NumberField.tsx
â”‚       â””â”€â”€ index.ts
â”œâ”€â”€ types/
â”œâ”€â”€ utils/
â”œâ”€â”€ style/
â”‚   â”œâ”€â”€ style.css
â”‚   â””â”€â”€ style.module.css
â””â”€â”€ index.ts
```

#### ç¤ºä¾‹ï¼š`NumberField.tsx`

```tsx
import React, { useState } from "react";

interface NumberFieldProps {
  value?: number;
  onChange?: (value: number) => void;
  min?: number;
  max?: number;
}

export const NumberField: React.FC<NumberFieldProps> = ({
  value = 0,
  onChange,
  min = -Infinity,
  max = Infinity,
}) => {
  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const num = parseFloat(e.target.value);
    if (!isNaN(num) && num >= min && num <= max) {
      onChange?.(num);
    }
  };

  return (
    <input
      type="number"
      value={value}
      onChange={handleChange}
      min={min}
      max={max}
    />
  );
};
```

---

### 5. æ·»åŠ æ„å»ºè„šæœ¬

ç¼–è¾‘ `package.json` çš„ `scripts` å­—æ®µï¼š

```json
"scripts": {
  "build": "pnpm build:cjs && pnpm build:esm && pnpm build:css",
  "build:cjs": "tsc --project tsconfig-cjs.json && echo '{ \"type\": \"commonjs\" }' > dist/cjs/package.json",
  "build:esm": "tsc --project tsconfig-esm.json",
  "build:css": "sass src/style/style.module.css dist/style.css",
  "dev": "vite",
  "test": "jest",
  "lint": "eslint . --ext .ts,.tsx",
  "format": "prettier --write src/**/*.ts{,x}"
}
```

ä½ è¿˜éœ€è¦åˆ›å»º `tsconfig-cjs.json` å’Œ `tsconfig-esm.json` æ¥åˆ†åˆ«æ”¯æŒ CommonJS å’Œ ES Module è¾“å‡ºã€‚

---

### 6. é…ç½®æ ·å¼ä¸ä¸»é¢˜ï¼ˆå¯é€‰ï¼‰

ä½ å¯ä»¥ä½¿ç”¨ CSS Modules æˆ– TailwindCSS æ¥å®šä¹‰ `NumberField` çš„æ ·å¼ã€‚ä¾‹å¦‚ï¼š

```css
/* src/style/NumberField.module.css */
.input {
  padding: 0.5rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 1rem;
}
```

å¹¶åœ¨ç»„ä»¶ä¸­å¯¼å…¥ï¼š

```tsx
import styles from './NumberField.module.css';

<input className={styles.input} ... />
```

---

### 7. æ·»åŠ æ–‡æ¡£ç½‘ç«™ï¼ˆå¯é€‰ï¼‰

ä½¿ç”¨ Docusaurus åˆ›å»ºæ–‡æ¡£é¡µé¢ï¼š

```bash
npx create-docusaurus@latest website classic
```

ç„¶ååœ¨ `website/docs` ä¸­æ·»åŠ ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹å’Œ API æ–‡æ¡£ã€‚

---

### 8. ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆJestï¼‰

ä¸º `NumberField` ç¼–å†™æµ‹è¯•ï¼š

```tsx
// __tests__/NumberField.test.tsx
import React from "react";
import { render, fireEvent } from "@testing-library/react";
import { NumberField } from "../src/components/NumberField";

test("renders input with correct value", () => {
  const { getByRole } = render(<NumberField value={5} />);
  expect(getByRole("spinbutton")).toHaveValue(5);
});
```

---

### âœ… æ€»ç»“

ä½ ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ React ç»„ä»¶å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥å¼€å§‹å¼€å‘å’Œå‘å¸ƒä½ çš„ `NumberField` ç»„ä»¶äº†ã€‚è¿™ä¸ªç»“æ„å…·å¤‡ï¼š

- ç±»å‹å®‰å…¨ï¼ˆTypeScriptï¼‰
- æ”¯æŒå¤šç§æ¨¡å—æ ¼å¼ï¼ˆCJS / ESMï¼‰
- å¯å®šåˆ¶åŒ–æ ·å¼ï¼ˆCSS Modules / Tailwindï¼‰
- è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆJestï¼‰
- æ–‡æ¡£æ”¯æŒï¼ˆDocusaurusï¼‰

å¦‚éœ€è¿›ä¸€æ­¥é›†æˆ CI/CDã€æ‰“åŒ…å‘å¸ƒåˆ° npm ç­‰æµç¨‹ï¼Œä¹Ÿå¯ä»¥ç»§ç»­æ‰©å±•ã€‚æ˜¯å¦éœ€è¦æˆ‘å¸®ä½ ç”Ÿæˆå®Œæ•´çš„åˆå§‹æ¨¡æ¿ï¼Ÿ
