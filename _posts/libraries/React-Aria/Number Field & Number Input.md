# useNumberFieldState

`react-stately` 是一个由 Adobe 开发的库，它为 UI 组件提供了可复用的状态管理和行为逻辑。`react-stately` 并*不直接处理渲染逻辑，而是提供状态管理功能*，可以被不同的 UI 框架和库（如 React, Vue, Angular 等）使用。

`useNumberFieldState` 是 `react-stately` 中的一个 Hook，**用于管理数字输入字段（Number Field）的状态**。这个 Hook 通常与 `NumberField` 组件一起使用，该组件可以是任何框架的实现，比如 @react-aria/numberfield 提供了基于 ARIA 的 NumberField 的行为。

## 为什么要使用 useNumberFieldState

- **简化开发:** 提供了开箱即用的数字输入功能，减少了开发者的工作量。
- **提高可访问性:** 确保数字输入框符合 WCAG 规范，提升用户体验。
- **增强可定制性:** 提供了丰富的选项，可以根据需求定制数字输入框的行为。

## `useNumberFieldState` 的主要功能包括：

1. **状态管理**：管理数值、最小值、最大值、步长等。
2. **验证**：确保输入的值在允许的范围内，并符合指定的格式。
3. **响应式更新**：当状态改变时触发更新。
4. **格式化:** 可以自定义数字的格式化方式，例如添加千分位分隔符、小数位数等。
5. **键盘导航:** 支持使用上下键调整数值。

### 使用示例：

```jsx
import { useNumberFieldState } from "@react-stately/numberfield";

function MyNumberField() {
  let state = useNumberFieldState({
    minValue: 0,
    maxValue: 100,
    defaultValue: 50,
  });

  // ... 接下来你可以使用 state 来控制 NumberField 的行为
}
```

在这个例子中，`useNumberFieldState` 创建了一个数字输入字段的状态，设置了最小值、最大值和默认值。然后你可以使用返回的状态对象来控制和响应数值的变化。

请注意，为了完整地实现一个可交互的数字输入框，你还需要使用来自 `@react-aria/numberfield 的 `useNumberField Hook 来生成必要的 ARIA 属性，以及一些 DOM 元素来渲染实际的界面。

## API

```ts
useNumberFieldState(props: NumberFieldStateOptions): NumberFieldState
```

### NumberFieldStateOptions

它定义了 `useNumberFieldState` Hook 的配置选项。**这些选项用于初始化数字输入字段的状态**，并控制其行为。

```ts
export interface NumberFieldStateOptions extends NumberFieldProps {
  locale: string;
}
```

#### `NumberFieldStateOptions` 通常包含以下属性：

1. **`value`**: (`number | undefined) 当前数值。如果未设置，则使用 `defaultValue`或`minValue`。
2. **`defaultValue`**: (`number | undefined) 默认数值，当 `value` 未设置时使用。
3. **`minValue`**: (`number | undefined) 数值的最小限制。
4. **`maxValue`**: (`number | undefined) 数值的最大限制。
5. **`step`**: (`number | undefined) 数值变化的步长。
6. **`isDisabled**: (`boolean`) 是否禁用输入字段。
7. **`isRequired**: (`boolean`) 是否是必填项。
8. **`isValid**: (`boolean | undefined) 是否有效。如果未设置，则会根据 `minValue`和`maxValue` 进行验证。
9. **`formatOptions`**: (`Intl.NumberFormatOptions | undefined) 国际化格式化选项，用于显示和解析数值。[Intl.NumberFormatOptions 文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat)
10. **`parseOptions`**: (`Object | undefined) 自定义解析选项，用于解析用户输入的字符串。
11. **`onChange`**: ((value: number | undefined) => void) 值变化时的回调函数。

|                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |           |                                                                                                                                                                                                                                                                                                                                           |
| -------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `locale`             | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                                                                                                                                                                                                                                                                                                                                       | `'en-US'` | The locale that should be used for parsing. <br>应该用于分析的区域设置。                                                                                                                                                                                                                                                                              |
| `formatOptions`      | [Intl.NumberFormatOptions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat)                                                                                                                                                                                                                                                                                                                                                                       | —         | Formatting options for the value displayed in the number field. This also affects what characters are allowed to be typed by the user. <br>选择数字字段中显示的值的选项。这也会影响允许用户键入的字符。                                                                                                                                                                 |
| `isDisabled`         | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                                                                                                                                                                                                                                     | —         | Whether the input is disabled. <br>输入是否被禁用。                                                                                                                                                                                                                                                                                               |
| `isReadOnly`         | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                                                                                                                                                                                                                                     | —         | Whether the input can be selected but not changed by the user. <br>输入是否可以被选择但不能被用户改变。                                                                                                                                                                                                                                                     |
| `isRequired`         | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                                                                                                                                                                                                                                     | —         | Whether user input is required on the input before form submission. <br>表单送出前，是否需要使用者输入。                                                                                                                                                                                                                                                  |
| `isInvalid`          | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                                                                                                                                                                                                                                     | —         | Whether the input value is invalid. <br>输入值是否无效。                                                                                                                                                                                                                                                                                          |
| `validationBehavior` | `'aria' \| 'native'`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `'aria'`  | Whether to use native HTML form validation to prevent form submission when the value is missing or invalid, or mark the field as required or invalid via ARIA. <br>是否使用本地 HTML 表单验证来防止值缺失或无效时提交表单，或者通过 ARIA 将字段标记为必填或无效。                                                                                                                  |
| `validate`           | (value: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)) => [ValidationError](https://react-spectrum.adobe.com/react-stately/useNumberFieldState.html#/tmp/827df33ce4b0199e40d518d07d7acd9e/node_modules/@react-types/shared/src/inputs.d.ts:ValidationError) \| true \| [null](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/null) \| [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined) | —         | A function that returns an error message if a given value is invalid. Validation errors are displayed to the user when the form is submitted if `validationBehavior="native"`. For realtime validation, use the `isInvalid prop instead. <br>如果给定值无效，则返回错误消息的函数。如果`validationBehavior=“native”，`则在提交表单时向用户显示验证错误。对于实时验证，请使用`isInvalid 属性。 |
| `autoFocus`          | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                                                                                                                                                                                                                                     | —         | Whether the element should receive focus on render. <br>元素是否应在呈现时接收焦点。                                                                                                                                                                                                                                                                    |
| `onFocus`            | (e: [FocusEvent](https://developer.mozilla.org/docs/Web/API/FocusEvent)<Target>) => void                                                                                                                                                                                                                                                                                                                                                                                                                          | —         | Handler that is called when the element receives focus. <br>当元素获得焦点时调用的对象。                                                                                                                                                                                                                                                                |
| `onBlur`             | (e: [FocusEvent](https://developer.mozilla.org/docs/Web/API/FocusEvent)<Target>) => void                                                                                                                                                                                                                                                                                                                                                                                                                          | —         | Handler that is called when the element loses focus. <br>当元素失去焦点时调用的对象。                                                                                                                                                                                                                                                                   |
| `onFocusChange`      | (isFocused: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)) => void                                                                                                                                                                                                                                                                                                                                                                                                | —         | Handler that is called when the element's focus status changes. <br>当元素的焦点状态更改时调用的对象。                                                                                                                                                                                                                                                     |
| `onKeyDown`          | (e: [KeyboardEvent](https://react-spectrum.adobe.com/react-stately/useNumberFieldState.html#/tmp/827df33ce4b0199e40d518d07d7acd9e/node_modules/@react-types/shared/src/events.d.ts:KeyboardEvent)) => void                                                                                                                                                                                                                                                                                                        | —         | Handler that is called when a key is pressed. <br>当按下某个键时调用的对象。                                                                                                                                                                                                                                                                           |
| `onKeyUp`            | (e: [KeyboardEvent](https://react-spectrum.adobe.com/react-stately/useNumberFieldState.html#/tmp/827df33ce4b0199e40d518d07d7acd9e/node_modules/@react-types/shared/src/events.d.ts:KeyboardEvent)) => void                                                                                                                                                                                                                                                                                                        | —         | Handler that is called when a key is released. <br>释放键时调用的对象。                                                                                                                                                                                                                                                                             |
| `placeholder`        | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                                                                                                                                                                                                                                                                                                                                       | —         | Temporary text that occupies the text input when it is empty. <br>当文本输入为空时占用文本输入的临时文本。                                                                                                                                                                                                                                                    |
| `value`              | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                                                                                                                                                                                                                                                                                                                                                                                                                       | —         | The current value (controlled). <br>当前值（受控）。                                                                                                                                                                                                                                                                                              |
| `defaultValue`       | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                                                                                                                                                                                                                                                                                                                                                                                                                       | —         | The default value (uncontrolled). <br>默认值（不受控制）。                                                                                                                                                                                                                                                                                          |
| `onChange`           | (value: T) => void                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | —         | Handler that is called when the value changes. <br>值更改时调用的函数。                                                                                                                                                                                                                                                                             |
| `minValue`           | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                                                                                                                                                                                                                                                                                                                                                                                                                       | —         | The smallest value allowed for the input. <br>输入允许的最小值。                                                                                                                                                                                                                                                                                   |
| `maxValue`           | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                                                                                                                                                                                                                                                                                                                                                                                                                       | —         | The largest value allowed for the input. <br>输入允许的最大值。                                                                                                                                                                                                                                                                                    |
| `step`               | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                                                                                                                                                                                                                                                                                                                                                                                                                       | —         | The amount that the input value changes with each increment or decrement "tick". <br>输入值随每次增量或减量“滴答”而变化的量。                                                                                                                                                                                                                                |
| `label`              | [ReactNode](https://reactjs.org/docs/rendering-elements.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                     | —         | The content to display as the label. <br>要显示为标签的内容。                                                                                                                                                                                                                                                                                       |
| `description`        | [ReactNode](https://reactjs.org/docs/rendering-elements.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                     | —         | A description for the field. Provides a hint such as specific requirements for what to choose. <br>字段的说明。提供提示，例如选择内容的具体要求。                                                                                                                                                                                                                |
| `errorMessage`       | [ReactNode](https://reactjs.org/docs/rendering-elements.html) \| (v: [ValidationResult](https://react-spectrum.adobe.com/react-stately/useNumberFieldState.html#/tmp/827df33ce4b0199e40d518d07d7acd9e/node_modules/@react-types/shared/src/inputs.d.ts:ValidationResult)) => [ReactNode](https://reactjs.org/docs/rendering-elements.html)                                                                                                                                                                        | —         | An error message for the field. <br>字段的错误消息。                                                                                                                                                                                                                                                                                              |
|                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |           |                                                                                                                                                                                                                                                                                                                                           |

#### 示例代码：

```jsx
import { useNumberFieldState } from "@react-stately/numberfield";

function MyNumberField() {
  const state = useNumberFieldState({
    minValue: 0,
    maxValue: 100,
    step: 1,
    defaultValue: 50,
    isDisabled: false,
    isRequired: true,
    formatOptions: {
      style: "decimal",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0,
    },
  });

  // ... 使用 state 来控制 NumberField 的行为
}
```

在这个示例中，我们设置了 `minValue`、`maxValue` 和 `defaultValue`，并定义了一些其他属性，例如是否禁用、是否必填，以及如何格式化数值。

通过使用 `useNumberFieldState` 和相应的配置选项，你可以创建一个具有特定行为和格式的数字输入字段。这些配置选项使你能够根据需要定制输入字段的行为。

### NumberFieldState

#### Properties

| Name                 | Type                                                                                          | Description                                                                                                                                                                                                                      |
| -------------------- | --------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `inputValue`         | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)   | The current text value of the input. Updated as the user types, and formatted according to `formatOptions` on blur. <br>输入的当前文本值。更新为用户类型，并根据`格式模糊选项`格式化。                                           |
| `numberValue`        | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)   | The currently parsed number value, or NaN if a valid number could not be parsed. Updated based on the `inputValue` as the user types. <br>当前解析的数字值，如果无法解析有效数字，则为 NaN。根据用户输入的`inputValue进行`更新。 |
| `canIncrement`       | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | Whether the current value can be incremented according to the maximum value and step. <br>当前值是否可以根据最大值和步长递增。                                                                                                   |
| `canDecrement`       | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | Whether the current value can be decremented according to the minimum value and step. <br>当前值是否可以根据最小值和步长递减。                                                                                                   |
| `realtimeValidation` | `ValidationResult`                                                                            | Realtime validation results, updated as the user edits the value. <br>实时验证结果，在用户编辑值时更新。                                                                                                                         |
| `displayValidation`  | `ValidationResult`                                                                            | Currently displayed validation results, updated when the user commits their changes. <br>当前显示的验证结果，在用户提交更改时更新。                                                                                              |
| `minValue`           | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)   | The minimum value of the number field. <br>数字字段的最小值。                                                                                                                                                                    |
| `maxValue`           | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)   | The maximum value of the number field. <br>数字字段的最大值。                                                                                                                                                                    |

#### Methods

| Method                                                                                                                                                                                                      | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| validate(value: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | Validates a user input string according to the current locale and format options. Values can be partially entered, and may be valid even if they cannot currently be parsed to a number. Can be used to implement validation as a user types. <br>根据当前区域设置和格式选项验证用户输入字符串。值可以部分输入，即使当前无法将其解析为数字，也可能有效。可用于实现用户类型的验证。                                                                                                                                                       |
| setInputValue(val: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): void                                                                                       | Sets the current text value of the input. <br>设置输入的当前文本值。                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| setNumberValue(val: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)): void                                                                                      | Sets the number value.  设置数值。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `commit(): void                                                                                                                                                                                             | Commits the current input value. The value is parsed to a number, clamped according to the minimum and maximum values of the field, and snapped to the nearest step value. This will fire the `onChange` prop with the new value, and if uncontrolled, update the `numberValue`. Typically this is called when the field is blurred. <br>提交当前输入值。该值被解析为一个数字，根据字段的最小值和最大值进行箝位，并捕捉到最近的步长值。这将使用新值触发`onChange`属性，如果不受控制，则更新`numberValue`。通常，当字段模糊时调用此功能。 |
| `increment(): void                                                                                                                                                                                          | Increments the current input value to the next step boundary, and fires `onChange`. <br>将当前输入值递增到下一步边界，并在`onChange上`触发。                                                                                                                                                                                                                                                                                                                                                                                             |
| `decrement(): void                                                                                                                                                                                          | Decrements the current input value to the next step boundary, and fires `onChange`. <br>将当前输入值递减到下一步边界，并在`onChange上`触发。                                                                                                                                                                                                                                                                                                                                                                                             |
| `incrementToMax(): void                                                                                                                                                                                     | Sets the current value to the `maxValue` if any, and fires `onChange`. <br>将当前值设置为`maxValue（`如果有的话），并触发`onChange`。                                                                                                                                                                                                                                                                                                                                                                                                    |
| `decrementToMin(): void                                                                                                                                                                                     | Sets the current value to the `minValue` if any, and fires `onChange`. <br>将当前值设置为`minValue（`如果有的话），并触发`onChange`。                                                                                                                                                                                                                                                                                                                                                                                                    |
| `updateValidation(result: ValidationResult ): void                                                                                                                                                          | Updates the current validation result. Not displayed to the user until `commitValidation` is called. <br>更新当前验证结果。在调用`commitValidation`之前不向用户显示。                                                                                                                                                                                                                                                                                                                                                                    |
| `resetValidation(): void                                                                                                                                                                                    | Resets the displayed validation state to valid when the user resets the form. <br>当用户重置表单时，将显示的验证状态重置为有效。                                                                                                                                                                                                                                                                                                                                                                                                         |
| `commitValidation(): void                                                                                                                                                                                   | Commits the realtime validation so it is displayed to the user. <br>提交实时验证，以便向用户显示。                                                                                                                                                                                                                                                                                                                                                                                                                                       |

# useNumberField

`useNumberField 是 `@react-aria/numberfield 库中的一个 Hook，它与 `react-stately` 库配合使用，用来帮助构建符合可访问性标准的数字输入字段（Number Field）。`useNumberField **主要负责生成所需的 ARIA 属性和其他行为逻辑**，以确保数字输入字段在不同的辅助技术中表现一致。

## `useNumberField 的主要功能包括：

1. **生成 ARIA 属性**：为数字输入字段生成正确的 ARIA 属性，_以确保屏幕阅读器和其他辅助技术能够正确识别和操作该组件_。
2. **处理用户交互**：处理键盘事件（如箭头键、Enter 键等）以及其他用户输入。
3. **格式化和解析**：格式化数字以便展示给用户，并解析用户输入的字符串以转换成数值。

## API

```ts
useNumberField(
	props: AriaNumberFieldProps,
	state: NumberFieldState,
	inputRef: RefObject<HTMLInputElement | null>
): NumberFieldAria
```

### Input

#### props: AriaNumberFieldProps

```ts
export interface AriaNumberFieldProps
  extends NumberFieldProps,
    DOMProps,
    AriaLabelingProps,
    TextInputDOMEvents {
  /** A custom aria-label for the decrement button. If not provided, the localized string "Decrement" is used. */
  decrementAriaLabel?: string;
  /** A custom aria-label for the increment button. If not provided, the localized string "Increment" is used. */
  incrementAriaLabel?: string;
  /**
   * Enables or disables changing the value with scroll.
   */
  isWheelDisabled?: boolean;
}
```

| Name                                                | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Default  | Descriptiion                                                                                                                                                                                                                                                                                                                               |
| --------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| *以下属性与NumberField StateOptions一致，缺少一个locale，其余完全一致* |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |          |                                                                                                                                                                                                                                                                                                                                            |
| `formatOptions`                                     | [Intl.NumberFormatOptions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat)                                                                                                                                                                                                                                                                                                                                                               | —        | Formatting options for the value displayed in the number field. This also affects what characters are allowed to be typed by the user. <br>选择数字字段中显示的值的选项。这也会影响允许用户键入的字符。                                                                                                                                                                  |
| `isDisabled`                                        | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                                                                                                                                                                                                                             | —        | Whether the input is disabled. <br>输入是否被禁用。                                                                                                                                                                                                                                                                                                |
| `isReadOnly`                                        | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                                                                                                                                                                                                                             | —        | Whether the input can be selected but not changed by the user. <br>输入是否可以被选择但不能被用户改变。                                                                                                                                                                                                                                                      |
| `isRequired`                                        | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                                                                                                                                                                                                                             | —        | Whether user input is required on the input before form submission. <br>表单送出前，是否需要使用者输入。                                                                                                                                                                                                                                                   |
| `isInvalid`                                         | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                                                                                                                                                                                                                             | —        | Whether the input value is invalid. <br>输入值是否无效。                                                                                                                                                                                                                                                                                           |
| `validationBehavior`                                | `'aria' \| 'native'`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `'aria'` | Whether to use native HTML form validation to prevent form submission when the value is missing or invalid, or mark the field as required or invalid via ARIA. <br>是否使用本地 HTML 表单验证来防止值缺失或无效时提交表单，或者通过 ARIA 将字段标记为必填或无效。                                                                                                                   |
| `validate`                                          | (value: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)) => [ValidationError](https://react-spectrum.adobe.com/react-aria/useNumberField.html#/tmp/827df33ce4b0199e40d518d07d7acd9e/node_modules/@react-types/shared/src/inputs.d.ts:ValidationError) \| true \| [null](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/null) \| [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined) | —        | A function that returns an error message if a given value is invalid. Validation errors are displayed to the user when the form is submitted if `validationBehavior="native"`. For realtime validation, use the `isInvalid prop instead.  <br>如果给定值无效，则返回错误消息的函数。如果`validationBehavior=“native”，`则在提交表单时向用户显示验证错误。对于实时验证，请使用`isInvalid 属性。 |
| `autoFocus`                                         | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                                                                                                                                                                                                                             | —        | Whether the element should receive focus on render. <br>元素是否应在呈现时接收焦点。                                                                                                                                                                                                                                                                     |
| `onFocus`                                           | (e: [FocusEvent](https://developer.mozilla.org/docs/Web/API/FocusEvent)<Target>) => void                                                                                                                                                                                                                                                                                                                                                                                                                  | —        | Handler that is called when the element receives focus. <br>当元素获得焦点时调用的对象。                                                                                                                                                                                                                                                                 |
| `onBlur`                                            | (e: [FocusEvent](https://developer.mozilla.org/docs/Web/API/FocusEvent)<Target>) => void                                                                                                                                                                                                                                                                                                                                                                                                                  | —        | Handler that is called when the element loses focus. <br>当元素失去焦点时调用的对象。                                                                                                                                                                                                                                                                    |
| `onFocusChange`                                     | (isFocused: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)) => void                                                                                                                                                                                                                                                                                                                                                                                        | —        | Handler that is called when the element's focus status changes. <br>当元素的焦点状态更改时调用的对象。                                                                                                                                                                                                                                                      |
| `onKeyDown`                                         | (e: [KeyboardEvent](https://react-spectrum.adobe.com/react-aria/useNumberField.html#/tmp/827df33ce4b0199e40d518d07d7acd9e/node_modules/@react-types/shared/src/events.d.ts:KeyboardEvent)) => void                                                                                                                                                                                                                                                                                                        | —        | Handler that is called when a key is pressed. <br>当按下某个键时调用的对象。                                                                                                                                                                                                                                                                            |
| `onKeyUp`                                           | (e: [KeyboardEvent](https://react-spectrum.adobe.com/react-aria/useNumberField.html#/tmp/827df33ce4b0199e40d518d07d7acd9e/node_modules/@react-types/shared/src/events.d.ts:KeyboardEvent)) => void                                                                                                                                                                                                                                                                                                        | —        | Handler that is called when a key is released. <br>释放键时调用的对象。                                                                                                                                                                                                                                                                              |
| `placeholder`                                       | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | Temporary text that occupies the text input when it is empty. <br>当文本输入为空时占用文本输入的临时文本。                                                                                                                                                                                                                                                     |
| `value`                                             | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | The current value (controlled). <br>当前值（受控）。                                                                                                                                                                                                                                                                                               |
| `defaultValue`                                      | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | The default value (uncontrolled). <br>默认值（不受控制）。                                                                                                                                                                                                                                                                                           |
| `onChange`                                          | (value: T) => void                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | —        | Handler that is called when the value changes. <br>值更改时调用的函数。                                                                                                                                                                                                                                                                              |
| `minValue`                                          | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | The smallest value allowed for the input. <br>输入允许的最小值。                                                                                                                                                                                                                                                                                    |
| `maxValue`                                          | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | The largest value allowed for the input. <br>输入允许的最大值。                                                                                                                                                                                                                                                                                     |
| `step`                                              | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | The amount that the input value changes with each increment or decrement "tick". <br>输入值随每次增量或减量“滴答”而变化的量。                                                                                                                                                                                                                                 |
| `label`                                             | [ReactNode](https://reactjs.org/docs/rendering-elements.html)                                                                                                                                                                                                                                                                                                                                                                                                                                             | —        | The content to display as the label. <br>要显示为标签的内容。                                                                                                                                                                                                                                                                                        |
| `description`                                       | [ReactNode](https://reactjs.org/docs/rendering-elements.html)                                                                                                                                                                                                                                                                                                                                                                                                                                             | —        | A description for the field. Provides a hint such as specific requirements for what to choose. <br>字段的说明。提供提示，例如选择内容的具体要求。                                                                                                                                                                                                                 |
| `errorMessage`                                      | [ReactNode](https://reactjs.org/docs/rendering-elements.html) \| (v: [ValidationResult](https://react-spectrum.adobe.com/react-aria/useNumberField.html#/tmp/827df33ce4b0199e40d518d07d7acd9e/node_modules/@react-types/shared/src/inputs.d.ts:ValidationResult)) => [ReactNode](https://reactjs.org/docs/rendering-elements.html)                                                                                                                                                                        | —        | An error message for the field. <br>字段的错误消息。                                                                                                                                                                                                                                                                                               |
| *以上属性与NumberField StateOptions一致，以下属性为独有*           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |          |                                                                                                                                                                                                                                                                                                                                            |
| `decrementAriaLabel`                                | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | A custom aria-label for the decrement button. If not provided, the localized string "Decrement" is used. <br>递减按钮的自定义咏叹调标签。如果未提供，则使用本地化字符串“Decrement”。                                                                                                                                                                                     |
| `incrementAriaLabel`                                | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | A custom aria-label for the increment button. If not provided, the localized string "Increment" is used. <br>增量按钮的自定义 aria-label。如果未提供，则使用本地化字符串“Increment”。                                                                                                                                                                               |
| `isWheelDisabled`                                   | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                                                                                                                                                                                                                             | —        | Enables or disables changing the value with scroll. <br>启用或禁用使用滚动更改值。                                                                                                                                                                                                                                                                      |
| `id`                                                | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | The element's unique identifier. See [MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id). <br>元素的唯一标识符。参见[MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id)。                                                                                                                          |
| `aria-label`                                        | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | Defines a string value that labels the current element. <br>定义标记当前元素的字符串值。                                                                                                                                                                                                                                                                 |
| `aria-labelledby`                                   | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | Identifies the element (or elements) that labels the current element. <br>标识标记当前元素的元素（或多个元素）。                                                                                                                                                                                                                                              |
| `aria-describedby`                                  | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | Identifies the element (or elements) that describes the object. <br>描述对象的元素。                                                                                                                                                                                                                                                               |
| `aria-details`                                      | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                                                                                                                                                                                                                                                                                                                               | —        | Identifies the element (or elements) that provide a detailed, extended description for the object. <br>为对象提供详细扩展描述的元素。                                                                                                                                                                                                                     |
| `onCopy`                                            | ClipboardEventHandler<[HTMLInputElement](https://developer.mozilla.org/docs/Web/API/HTMLInputElement)>                                                                                                                                                                                                                                                                                                                                                                                                    | —        | Handler that is called when the user copies text. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/oncopy). <br>当用户复制文本时调用的对象。参见[MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/oncopy)。                                                                                                          |
| `onCut`                                             | ClipboardEventHandler<[HTMLInputElement](https://developer.mozilla.org/docs/Web/API/HTMLInputElement)>                                                                                                                                                                                                                                                                                                                                                                                                    | —        | Handler that is called when the user cuts text. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/oncut). <br>当用户剪切文本时调用的对象。参见[MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/oncut)。                                                                                                              |
| `onPaste`                                           | ClipboardEventHandler<[HTMLInputElement](https://developer.mozilla.org/docs/Web/API/HTMLInputElement)>                                                                                                                                                                                                                                                                                                                                                                                                    | —        | Handler that is called when the user pastes text. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/onpaste). <br>当用户粘贴文本时调用的对象。参见[MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/onpaste)。                                                                                                        |
| `onCompositionStart`                                | CompositionEventHandler<[HTMLInputElement](https://developer.mozilla.org/docs/Web/API/HTMLInputElement)>                                                                                                                                                                                                                                                                                                                                                                                                  | —        | Handler that is called when a text composition system starts a new text composition session. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/compositionstart_event). <br>当文本撰写系统启动新的文本撰写会话时调用的对象。参见[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/compositionstart_event)。                             |
| `onCompositionEnd`                                  | CompositionEventHandler<[HTMLInputElement](https://developer.mozilla.org/docs/Web/API/HTMLInputElement)>                                                                                                                                                                                                                                                                                                                                                                                                  | —        | Handler that is called when a text composition system completes or cancels the current text composition session. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/compositionend_event). <br>文本合成系统完成或取消当前文本合成会话时调用的对象。参见[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/compositionend_event)。           |
| `onCompositionUpdate`                               | CompositionEventHandler<[HTMLInputElement](https://developer.mozilla.org/docs/Web/API/HTMLInputElement)>                                                                                                                                                                                                                                                                                                                                                                                                  | —        | Handler that is called when a new character is received in the current text composition session. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/compositionupdate_event). <br>在当前文本合成会话中接收到新字符时调用的字符串。参见[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/compositionupdate_event)。                       |
| `onSelect`                                          | ReactEventHandler<[HTMLInputElement](https://developer.mozilla.org/docs/Web/API/HTMLInputElement)>                                                                                                                                                                                                                                                                                                                                                                                                        | —        | Handler that is called when text in the input is selected. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/select_event). <br>选择输入中的文本时调用的对象。参见[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/select_event)。                                                                                            |
| `onBeforeInput`                                     | FormEventHandler<[HTMLInputElement](https://developer.mozilla.org/docs/Web/API/HTMLInputElement)>                                                                                                                                                                                                                                                                                                                                                                                                         | —        | Handler that is called when the input value is about to be modified. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/beforeinput_event). <br>当输入值即将被修改时调用的对象。参见[MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/beforeinput_event)。                                                               |
| `onInput`                                           | FormEventHandler<[HTMLInputElement](https://developer.mozilla.org/docs/Web/API/HTMLInputElement)>                                                                                                                                                                                                                                                                                                                                                                                                         | —        | Handler that is called when the input value is modified. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event). <br>修改输入值时调用的对象。参见[MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event)。                                                                                           |

##### AriaNumberFieldProps 与 NumberFieldStateOptions 的关系

都继承`NumberFieldProps`

```ts
export interface AriaNumberFieldProps
  extends NumberFieldProps,
    DOMProps,
    AriaLabelingProps,
    TextInputDOMEvents {
  decrementAriaLabel?: string;
  incrementAriaLabel?: string;
  isWheelDisabled?: boolean;
}
```

```ts
export interface NumberFieldStateOptions extends NumberFieldProps {
  locale: string;
}
```

#### state: NumberFieldState

#### inputRef: RefObject

### Output

#### 返回的对象通常包含以下属性：

1. **`inputProps`**: (`Object`) 包含了所有必要的 ARIA 属性和其他属性，可以直接应用于 `<input>` 或其他可编辑元素。
2. **`buttonProps`**: (`Object`) 如果你的数字输入字段包含增加或减少按钮，这些属性可以用于这些按钮，确保它们也能正确地处理用户交互和可访问性。

请注意，`useNumberField 和 `useNumberFieldState` 需要结合使用，前者负责生成 ARIA 属性和处理交互，后者则负责管理数字输入字段的状态。这些 Hook 使得开发者可以轻松地构建符合 WAI-ARIA 标准的可访问性组件。

### 使用示例：

```jsx
import { useNumberField, useNumberFieldState } from "@react-aria/numberfield";
import { useRef } from "react";

function MyNumberField() {
  let state = useNumberFieldState({
    minValue: 0,
    maxValue: 100,
    step: 1,
    defaultValue: 50,
    isDisabled: false,
    isRequired: true,
    formatOptions: {
      style: "decimal",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0,
    },
  });

  let ref = useRef(null);
  let { inputProps } = useNumberField({
    ref,
    state,
  });

  return <input {...inputProps} />;
}
```

在这个示例中，我们首先使用 `useNumberFieldState` 来初始化数字输入字段的状态。接着，我们创建一个引用（ref）来连接到 DOM 节点，并使用 `useNumberField Hook 来生成包含所有必要 ARIA 属性的 `inputProps`对象。最后，我们将这些属性应用到\<input\>` 元素上，创建一个可交互的数字输入字段。
