"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const te=require("obsidian");/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Rr(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Oe={},Ln=[],Ut=()=>{},Cu=()=>!1,Ta=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Br=e=>e.startsWith("onUpdate:"),ot=Object.assign,Yr=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Su=Object.prototype.hasOwnProperty,Fe=(e,t)=>Su.call(e,t),ye=Array.isArray,Wn=e=>Uo(e)==="[object Map]",oo=e=>Uo(e)==="[object Set]",bl=e=>Uo(e)==="[object Date]",Ce=e=>typeof e=="function",ze=e=>typeof e=="string",Wt=e=>typeof e=="symbol",Ye=e=>e!==null&&typeof e=="object",bs=e=>(Ye(e)||Ce(e))&&Ce(e.then)&&Ce(e.catch),ks=Object.prototype.toString,Uo=e=>ks.call(e),xu=e=>Uo(e).slice(8,-1),_s=e=>Uo(e)==="[object Object]",Ur=e=>ze(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,So=Rr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Oa=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Vu=/-(\w)/g,At=Oa(e=>e.replace(Vu,(t,n)=>n?n.toUpperCase():"")),Du=/\B([A-Z])/g,xn=Oa(e=>e.replace(Du,"-$1").toLowerCase()),Fa=Oa(e=>e.charAt(0).toUpperCase()+e.slice(1)),rr=Oa(e=>e?`on${Fa(e)}`:""),_t=(e,t)=>!Object.is(e,t),da=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Cs=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},ya=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let kl;const Ea=()=>kl||(kl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ao(e){if(ye(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],a=ze(o)?Nu(o):ao(o);if(a)for(const r in a)t[r]=a[r]}return t}else if(ze(e)||Ye(e))return e}const ju=/;(?![^(]*\))/g,$u=/:([^]+)/,Mu=/\/\*[^]*?\*\//g;function Nu(e){const t={};return e.replace(Mu,"").split(ju).forEach(n=>{if(n){const o=n.split($u);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Dt(e){let t="";if(ze(e))t=e;else if(ye(e))for(let n=0;n<e.length;n++){const o=Dt(e[n]);o&&(t+=o+" ")}else if(Ye(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Au="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Tu=Rr(Au);function Ss(e){return!!e||e===""}function Ou(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Lo(e[o],t[o]);return n}function Lo(e,t){if(e===t)return!0;let n=bl(e),o=bl(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=Wt(e),o=Wt(t),n||o)return e===t;if(n=ye(e),o=ye(t),n||o)return n&&o?Ou(e,t):!1;if(n=Ye(e),o=Ye(t),n||o){if(!n||!o)return!1;const a=Object.keys(e).length,r=Object.keys(t).length;if(a!==r)return!1;for(const l in e){const s=e.hasOwnProperty(l),i=t.hasOwnProperty(l);if(s&&!i||!s&&i||!Lo(e[l],t[l]))return!1}}return String(e)===String(t)}function Lr(e,t){return e.findIndex(n=>Lo(n,t))}const xs=e=>!!(e&&e.__v_isRef===!0),P=e=>ze(e)?e:e==null?"":ye(e)||Ye(e)&&(e.toString===ks||!Ce(e.toString))?xs(e)?P(e.value):JSON.stringify(e,Vs,2):String(e),Vs=(e,t)=>xs(t)?Vs(e,t.value):Wn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,a],r)=>(n[lr(o,r)+" =>"]=a,n),{})}:oo(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>lr(n))}:Wt(t)?lr(t):Ye(t)&&!ye(t)&&!_s(t)?String(t):t,lr=(e,t="")=>{var n;return Wt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pt;class Fu{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=pt,!t&&pt&&(this.index=(pt.scopes||(pt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=pt;try{return pt=this,t()}finally{pt=n}}}on(){pt=this}off(){pt=this.parent}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function Ds(){return pt}function Eu(e,t=!1){pt&&pt.cleanups.push(e)}let Be;const sr=new WeakSet;class js{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,pt&&pt.active&&pt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,sr.has(this)&&(sr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ms(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,_l(this),Ns(this);const t=Be,n=Lt;Be=this,Lt=!0;try{return this.fn()}finally{As(this),Be=t,Lt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)qr(t);this.deps=this.depsTail=void 0,_l(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?sr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Sr(this)&&this.run()}get dirty(){return Sr(this)}}let $s=0,xo,Vo;function Ms(e,t=!1){if(e.flags|=8,t){e.next=Vo,Vo=e;return}e.next=xo,xo=e}function Wr(){$s++}function Jr(){if(--$s>0)return;if(Vo){let t=Vo;for(Vo=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;xo;){let t=xo;for(xo=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Ns(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function As(e){let t,n=e.depsTail,o=n;for(;o;){const a=o.prevDep;o.version===-1?(o===n&&(n=a),qr(o),Iu(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=a}e.deps=t,e.depsTail=n}function Sr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ts(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ts(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===To))return;e.globalVersion=To;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Sr(e)){e.flags&=-3;return}const n=Be,o=Lt;Be=e,Lt=!0;try{Ns(e);const a=e.fn(e._value);(t.version===0||_t(a,e._value))&&(e._value=a,t.version++)}catch(a){throw t.version++,a}finally{Be=n,Lt=o,As(e),e.flags&=-3}}function qr(e,t=!1){const{dep:n,prevSub:o,nextSub:a}=e;if(o&&(o.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)qr(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Iu(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Lt=!0;const Os=[];function Vn(){Os.push(Lt),Lt=!1}function Dn(){const e=Os.pop();Lt=e===void 0?!0:e}function _l(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Be;Be=void 0;try{t()}finally{Be=n}}}let To=0;class Pu{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ia{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Be||!Lt||Be===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Be)n=this.activeLink=new Pu(Be,this),Be.deps?(n.prevDep=Be.depsTail,Be.depsTail.nextDep=n,Be.depsTail=n):Be.deps=Be.depsTail=n,Fs(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Be.depsTail,n.nextDep=void 0,Be.depsTail.nextDep=n,Be.depsTail=n,Be.deps===n&&(Be.deps=o)}return n}trigger(t){this.version++,To++,this.notify(t)}notify(t){Wr();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Jr()}}}function Fs(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Fs(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const wa=new WeakMap,Tn=Symbol(""),xr=Symbol(""),Oo=Symbol("");function lt(e,t,n){if(Lt&&Be){let o=wa.get(e);o||wa.set(e,o=new Map);let a=o.get(n);a||(o.set(n,a=new Ia),a.map=o,a.key=n),a.track()}}function un(e,t,n,o,a,r){const l=wa.get(e);if(!l){To++;return}const s=i=>{i&&i.trigger()};if(Wr(),t==="clear")l.forEach(s);else{const i=ye(e),u=i&&Ur(n);if(i&&n==="length"){const c=Number(o);l.forEach((m,h)=>{(h==="length"||h===Oo||!Wt(h)&&h>=c)&&s(m)})}else switch((n!==void 0||l.has(void 0))&&s(l.get(n)),u&&s(l.get(Oo)),t){case"add":i?u&&s(l.get("length")):(s(l.get(Tn)),Wn(e)&&s(l.get(xr)));break;case"delete":i||(s(l.get(Tn)),Wn(e)&&s(l.get(xr)));break;case"set":Wn(e)&&s(l.get(Tn));break}}Jr()}function Ru(e,t){const n=wa.get(e);return n&&n.get(t)}function Rn(e){const t=Te(e);return t===e?t:(lt(t,"iterate",Oo),It(e)?t:t.map(st))}function Pa(e){return lt(e=Te(e),"iterate",Oo),e}const Bu={__proto__:null,[Symbol.iterator](){return ir(this,Symbol.iterator,st)},concat(...e){return Rn(this).concat(...e.map(t=>ye(t)?Rn(t):t))},entries(){return ir(this,"entries",e=>(e[1]=st(e[1]),e))},every(e,t){return an(this,"every",e,t,void 0,arguments)},filter(e,t){return an(this,"filter",e,t,n=>n.map(st),arguments)},find(e,t){return an(this,"find",e,t,st,arguments)},findIndex(e,t){return an(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return an(this,"findLast",e,t,st,arguments)},findLastIndex(e,t){return an(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return an(this,"forEach",e,t,void 0,arguments)},includes(...e){return ur(this,"includes",e)},indexOf(...e){return ur(this,"indexOf",e)},join(e){return Rn(this).join(e)},lastIndexOf(...e){return ur(this,"lastIndexOf",e)},map(e,t){return an(this,"map",e,t,void 0,arguments)},pop(){return po(this,"pop")},push(...e){return po(this,"push",e)},reduce(e,...t){return Cl(this,"reduce",e,t)},reduceRight(e,...t){return Cl(this,"reduceRight",e,t)},shift(){return po(this,"shift")},some(e,t){return an(this,"some",e,t,void 0,arguments)},splice(...e){return po(this,"splice",e)},toReversed(){return Rn(this).toReversed()},toSorted(e){return Rn(this).toSorted(e)},toSpliced(...e){return Rn(this).toSpliced(...e)},unshift(...e){return po(this,"unshift",e)},values(){return ir(this,"values",st)}};function ir(e,t,n){const o=Pa(e),a=o[t]();return o!==e&&!It(e)&&(a._next=a.next,a.next=()=>{const r=a._next();return r.value&&(r.value=n(r.value)),r}),a}const Yu=Array.prototype;function an(e,t,n,o,a,r){const l=Pa(e),s=l!==e&&!It(e),i=l[t];if(i!==Yu[t]){const m=i.apply(e,r);return s?st(m):m}let u=n;l!==e&&(s?u=function(m,h){return n.call(this,st(m),h,e)}:n.length>2&&(u=function(m,h){return n.call(this,m,h,e)}));const c=i.call(l,u,o);return s&&a?a(c):c}function Cl(e,t,n,o){const a=Pa(e);let r=n;return a!==e&&(It(e)?n.length>3&&(r=function(l,s,i){return n.call(this,l,s,i,e)}):r=function(l,s,i){return n.call(this,l,st(s),i,e)}),a[t](r,...o)}function ur(e,t,n){const o=Te(e);lt(o,"iterate",Oo);const a=o[t](...n);return(a===-1||a===!1)&&Gr(n[0])?(n[0]=Te(n[0]),o[t](...n)):a}function po(e,t,n=[]){Vn(),Wr();const o=Te(e)[t].apply(e,n);return Jr(),Dn(),o}const Uu=Rr("__proto__,__v_isRef,__isVue"),Es=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Wt));function Lu(e){Wt(e)||(e=String(e));const t=Te(this);return lt(t,"has",e),t.hasOwnProperty(e)}class Is{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const a=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return r;if(n==="__v_raw")return o===(a?r?Zu:Ys:r?Bs:Rs).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const l=ye(t);if(!a){let i;if(l&&(i=Bu[n]))return i;if(n==="hasOwnProperty")return Lu}const s=Reflect.get(t,n,de(t)?t:o);return(Wt(n)?Es.has(n):Uu(n))||(a||lt(t,"get",n),r)?s:de(s)?l&&Ur(n)?s:s.value:Ye(s)?a?zr(s):pn(s):s}}class Ps extends Is{constructor(t=!1){super(!1,t)}set(t,n,o,a){let r=t[n];if(!this._isShallow){const i=On(r);if(!It(o)&&!On(o)&&(r=Te(r),o=Te(o)),!ye(t)&&de(r)&&!de(o))return i?!1:(r.value=o,!0)}const l=ye(t)&&Ur(n)?Number(n)<t.length:Fe(t,n),s=Reflect.set(t,n,o,de(t)?t:a);return t===Te(a)&&(l?_t(o,r)&&un(t,"set",n,o):un(t,"add",n,o)),s}deleteProperty(t,n){const o=Fe(t,n);t[n];const a=Reflect.deleteProperty(t,n);return a&&o&&un(t,"delete",n,void 0),a}has(t,n){const o=Reflect.has(t,n);return(!Wt(n)||!Es.has(n))&&lt(t,"has",n),o}ownKeys(t){return lt(t,"iterate",ye(t)?"length":Tn),Reflect.ownKeys(t)}}class Wu extends Is{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Ju=new Ps,qu=new Wu,Hu=new Ps(!0);const Vr=e=>e,ea=e=>Reflect.getPrototypeOf(e);function zu(e,t,n){return function(...o){const a=this.__v_raw,r=Te(a),l=Wn(r),s=e==="entries"||e===Symbol.iterator&&l,i=e==="keys"&&l,u=a[e](...o),c=n?Vr:t?Dr:st;return!t&&lt(r,"iterate",i?xr:Tn),{next(){const{value:m,done:h}=u.next();return h?{value:m,done:h}:{value:s?[c(m[0]),c(m[1])]:c(m),done:h}},[Symbol.iterator](){return this}}}}function ta(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ku(e,t){const n={get(a){const r=this.__v_raw,l=Te(r),s=Te(a);e||(_t(a,s)&&lt(l,"get",a),lt(l,"get",s));const{has:i}=ea(l),u=t?Vr:e?Dr:st;if(i.call(l,a))return u(r.get(a));if(i.call(l,s))return u(r.get(s));r!==l&&r.get(a)},get size(){const a=this.__v_raw;return!e&&lt(Te(a),"iterate",Tn),Reflect.get(a,"size",a)},has(a){const r=this.__v_raw,l=Te(r),s=Te(a);return e||(_t(a,s)&&lt(l,"has",a),lt(l,"has",s)),a===s?r.has(a):r.has(a)||r.has(s)},forEach(a,r){const l=this,s=l.__v_raw,i=Te(s),u=t?Vr:e?Dr:st;return!e&&lt(i,"iterate",Tn),s.forEach((c,m)=>a.call(r,u(c),u(m),l))}};return ot(n,e?{add:ta("add"),set:ta("set"),delete:ta("delete"),clear:ta("clear")}:{add(a){!t&&!It(a)&&!On(a)&&(a=Te(a));const r=Te(this);return ea(r).has.call(r,a)||(r.add(a),un(r,"add",a,a)),this},set(a,r){!t&&!It(r)&&!On(r)&&(r=Te(r));const l=Te(this),{has:s,get:i}=ea(l);let u=s.call(l,a);u||(a=Te(a),u=s.call(l,a));const c=i.call(l,a);return l.set(a,r),u?_t(r,c)&&un(l,"set",a,r):un(l,"add",a,r),this},delete(a){const r=Te(this),{has:l,get:s}=ea(r);let i=l.call(r,a);i||(a=Te(a),i=l.call(r,a)),s&&s.call(r,a);const u=r.delete(a);return i&&un(r,"delete",a,void 0),u},clear(){const a=Te(this),r=a.size!==0,l=a.clear();return r&&un(a,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=zu(a,e,t)}),n}function Hr(e,t){const n=Ku(e,t);return(o,a,r)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?o:Reflect.get(Fe(n,a)&&a in o?n:o,a,r)}const Gu={get:Hr(!1,!1)},Qu={get:Hr(!1,!0)},Xu={get:Hr(!0,!1)};const Rs=new WeakMap,Bs=new WeakMap,Ys=new WeakMap,Zu=new WeakMap;function ed(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function td(e){return e.__v_skip||!Object.isExtensible(e)?0:ed(xu(e))}function pn(e){return On(e)?e:Kr(e,!1,Ju,Gu,Rs)}function nd(e){return Kr(e,!1,Hu,Qu,Bs)}function zr(e){return Kr(e,!0,qu,Xu,Ys)}function Kr(e,t,n,o,a){if(!Ye(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=a.get(e);if(r)return r;const l=td(e);if(l===0)return e;const s=new Proxy(e,l===2?o:n);return a.set(e,s),s}function Jn(e){return On(e)?Jn(e.__v_raw):!!(e&&e.__v_isReactive)}function On(e){return!!(e&&e.__v_isReadonly)}function It(e){return!!(e&&e.__v_isShallow)}function Gr(e){return e?!!e.__v_raw:!1}function Te(e){const t=e&&e.__v_raw;return t?Te(t):e}function od(e){return!Fe(e,"__v_skip")&&Object.isExtensible(e)&&Cs(e,"__v_skip",!0),e}const st=e=>Ye(e)?pn(e):e,Dr=e=>Ye(e)?zr(e):e;function de(e){return e?e.__v_isRef===!0:!1}function ce(e){return Us(e,!1)}function Qr(e){return Us(e,!0)}function Us(e,t){return de(e)?e:new ad(e,t)}class ad{constructor(t,n){this.dep=new Ia,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Te(t),this._value=n?t:st(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||It(t)||On(t);t=o?t:Te(t),_t(t,n)&&(this._rawValue=t,this._value=o?t:st(t),this.dep.trigger())}}function b(e){return de(e)?e.value:e}function We(e){return Ce(e)?e():b(e)}const rd={get:(e,t,n)=>t==="__v_raw"?e:b(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const a=e[t];return de(a)&&!de(n)?(a.value=n,!0):Reflect.set(e,t,n,o)}};function Ls(e){return Jn(e)?e:new Proxy(e,rd)}class ld{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Ia,{get:o,set:a}=t(n.track.bind(n),n.trigger.bind(n));this._get=o,this._set=a}get value(){return this._value=this._get()}set value(t){this._set(t)}}function sd(e){return new ld(e)}class id{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Ru(Te(this._object),this._key)}}class ud{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Xt(e,t,n){return de(e)?e:Ce(e)?new ud(e):Ye(e)&&arguments.length>1?dd(e,t,n):ce(e)}function dd(e,t,n){const o=e[t];return de(o)?o:new id(e,t,n)}class cd{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ia(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=To-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Be!==this)return Ms(this,!0),!0}get value(){const t=this.dep.track();return Ts(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function fd(e,t,n=!1){let o,a;return Ce(e)?o=e:(o=e.get,a=e.set),new cd(o,a,n)}const na={},ba=new WeakMap;let An;function md(e,t=!1,n=An){if(n){let o=ba.get(n);o||ba.set(n,o=[]),o.push(e)}}function pd(e,t,n=Oe){const{immediate:o,deep:a,once:r,scheduler:l,augmentJob:s,call:i}=n,u=N=>a?N:It(N)||a===!1||a===0?dn(N,1):dn(N);let c,m,h,p,_=!1,y=!1;if(de(e)?(m=()=>e.value,_=It(e)):Jn(e)?(m=()=>u(e),_=!0):ye(e)?(y=!0,_=e.some(N=>Jn(N)||It(N)),m=()=>e.map(N=>{if(de(N))return N.value;if(Jn(N))return u(N);if(Ce(N))return i?i(N,2):N()})):Ce(e)?t?m=i?()=>i(e,2):e:m=()=>{if(h){Vn();try{h()}finally{Dn()}}const N=An;An=c;try{return i?i(e,3,[p]):e(p)}finally{An=N}}:m=Ut,t&&a){const N=m,A=a===!0?1/0:a;m=()=>dn(N(),A)}const x=Ds(),T=()=>{c.stop(),x&&x.active&&Yr(x.effects,c)};if(r&&t){const N=t;t=(...A)=>{N(...A),T()}}let O=y?new Array(e.length).fill(na):na;const ee=N=>{if(!(!(c.flags&1)||!c.dirty&&!N))if(t){const A=c.run();if(a||_||(y?A.some((re,le)=>_t(re,O[le])):_t(A,O))){h&&h();const re=An;An=c;try{const le=[A,O===na?void 0:y&&O[0]===na?[]:O,p];i?i(t,3,le):t(...le),O=A}finally{An=re}}}else c.run()};return s&&s(ee),c=new js(m),c.scheduler=l?()=>l(ee,!1):ee,p=N=>md(N,!1,c),h=c.onStop=()=>{const N=ba.get(c);if(N){if(i)i(N,4);else for(const A of N)A();ba.delete(c)}},t?o?ee(!0):O=c.run():l?l(ee.bind(null,!0),!0):c.run(),T.pause=c.pause.bind(c),T.resume=c.resume.bind(c),T.stop=T,T}function dn(e,t=1/0,n){if(t<=0||!Ye(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,de(e))dn(e.value,t,n);else if(ye(e))for(let o=0;o<e.length;o++)dn(e[o],t,n);else if(oo(e)||Wn(e))e.forEach(o=>{dn(o,t,n)});else if(_s(e)){for(const o in e)dn(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&dn(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wo(e,t,n,o){try{return o?e(...o):e()}catch(a){Ra(a,t,n)}}function nn(e,t,n,o){if(Ce(e)){const a=Wo(e,t,n,o);return a&&bs(a)&&a.catch(r=>{Ra(r,t,n)}),a}if(ye(e)){const a=[];for(let r=0;r<e.length;r++)a.push(nn(e[r],t,n,o));return a}}function Ra(e,t,n,o=!0){const a=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Oe;if(t){let s=t.parent;const i=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let m=0;m<c.length;m++)if(c[m](e,i,u)===!1)return}s=s.parent}if(r){Vn(),Wo(r,null,10,[e,i,u]),Dn();return}}vd(e,n,a,o,l)}function vd(e,t,n,o=!0,a=!1){if(a)throw e;console.error(e)}const vt=[];let Gt=-1;const qn=[];let wn=null,Un=0;const Ws=Promise.resolve();let ka=null;function $t(e){const t=ka||Ws;return e?t.then(this?e.bind(this):e):t}function hd(e){let t=Gt+1,n=vt.length;for(;t<n;){const o=t+n>>>1,a=vt[o],r=Fo(a);r<e||r===e&&a.flags&2?t=o+1:n=o}return t}function Xr(e){if(!(e.flags&1)){const t=Fo(e),n=vt[vt.length-1];!n||!(e.flags&2)&&t>=Fo(n)?vt.push(e):vt.splice(hd(t),0,e),e.flags|=1,Js()}}function Js(){ka||(ka=Ws.then(zs))}function qs(e){ye(e)?qn.push(...e):wn&&e.id===-1?wn.splice(Un+1,0,e):e.flags&1||(qn.push(e),e.flags|=1),Js()}function Sl(e,t,n=Gt+1){for(;n<vt.length;n++){const o=vt[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;vt.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Hs(e){if(qn.length){const t=[...new Set(qn)].sort((n,o)=>Fo(n)-Fo(o));if(qn.length=0,wn){wn.push(...t);return}for(wn=t,Un=0;Un<wn.length;Un++){const n=wn[Un];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}wn=null,Un=0}}const Fo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function zs(e){try{for(Gt=0;Gt<vt.length;Gt++){const t=vt[Gt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Wo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Gt<vt.length;Gt++){const t=vt[Gt];t&&(t.flags&=-2)}Gt=-1,vt.length=0,Hs(),ka=null,(vt.length||qn.length)&&zs()}}let Ze=null,Ks=null;function _a(e){const t=Ze;return Ze=e,Ks=e&&e.type.__scopeId||null,t}function f(e,t=Ze,n){if(!t||e._n)return e;const o=(...a)=>{o._d&&El(-1);const r=_a(t);let l;try{l=e(...a)}finally{_a(r),o._d&&El(1)}return l};return o._n=!0,o._c=!0,o._d=!0,o}function Fn(e,t){if(Ze===null)return e;const n=Ja(Ze),o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[r,l,s,i=Oe]=t[a];r&&(Ce(r)&&(r={mounted:r,updated:r}),r.deep&&dn(l),o.push({dir:r,instance:n,value:l,oldValue:void 0,arg:s,modifiers:i}))}return e}function $n(e,t,n,o){const a=e.dirs,r=t&&t.dirs;for(let l=0;l<a.length;l++){const s=a[l];r&&(s.oldValue=r[l].value);let i=s.dir[o];i&&(Vn(),nn(i,n,8,[e.el,s,e,t]),Dn())}}const Gs=Symbol("_vte"),gd=e=>e.__isTeleport,Do=e=>e&&(e.disabled||e.disabled===""),xl=e=>e&&(e.defer||e.defer===""),Vl=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Dl=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,jr=(e,t)=>{const n=e&&e.to;return ze(n)?t?t(n):null:n},Qs={name:"Teleport",__isTeleport:!0,process(e,t,n,o,a,r,l,s,i,u){const{mc:c,pc:m,pbc:h,o:{insert:p,querySelector:_,createText:y,createComment:x}}=u,T=Do(t.props);let{shapeFlag:O,children:ee,dynamicChildren:N}=t;if(e==null){const A=t.el=y(""),re=t.anchor=y("");p(A,n,o),p(re,n,o);const le=(se,De)=>{O&16&&(a&&a.isCE&&(a.ce._teleportTarget=se),c(ee,se,De,a,r,l,s,i))},U=()=>{const se=t.target=jr(t.props,_),De=Xs(se,t,y,p);se&&(l!=="svg"&&Vl(se)?l="svg":l!=="mathml"&&Dl(se)&&(l="mathml"),T||(le(se,De),ca(t,!1)))};T&&(le(n,re),ca(t,!0)),xl(t.props)?mt(()=>{U(),t.el.__isMounted=!0},r):U()}else{if(xl(t.props)&&!e.el.__isMounted){mt(()=>{Qs.process(e,t,n,o,a,r,l,s,i,u),delete e.el.__isMounted},r);return}t.el=e.el,t.targetStart=e.targetStart;const A=t.anchor=e.anchor,re=t.target=e.target,le=t.targetAnchor=e.targetAnchor,U=Do(e.props),se=U?n:re,De=U?A:le;if(l==="svg"||Vl(re)?l="svg":(l==="mathml"||Dl(re))&&(l="mathml"),N?(h(e.dynamicChildren,N,se,a,r,l,s),ol(e,t,!0)):i||m(e,t,se,De,a,r,l,s,!1),T)U?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):oa(t,n,A,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const Ee=t.target=jr(t.props,_);Ee&&oa(t,Ee,null,u,0)}else U&&oa(t,re,le,u,1);ca(t,T)}},remove(e,t,n,{um:o,o:{remove:a}},r){const{shapeFlag:l,children:s,anchor:i,targetStart:u,targetAnchor:c,target:m,props:h}=e;if(m&&(a(u),a(c)),r&&a(i),l&16){const p=r||!Do(h);for(let _=0;_<s.length;_++){const y=s[_];o(y,t,n,p,!!y.dynamicChildren)}}},move:oa,hydrate:yd};function oa(e,t,n,{o:{insert:o},m:a},r=2){r===0&&o(e.targetAnchor,t,n);const{el:l,anchor:s,shapeFlag:i,children:u,props:c}=e,m=r===2;if(m&&o(l,t,n),(!m||Do(c))&&i&16)for(let h=0;h<u.length;h++)a(u[h],t,n,2);m&&o(s,t,n)}function yd(e,t,n,o,a,r,{o:{nextSibling:l,parentNode:s,querySelector:i,insert:u,createText:c}},m){const h=t.target=jr(t.props,i);if(h){const p=Do(t.props),_=h._lpa||h.firstChild;if(t.shapeFlag&16)if(p)t.anchor=m(l(e),t,s(e),n,o,a,r),t.targetStart=_,t.targetAnchor=_&&l(_);else{t.anchor=l(e);let y=_;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")t.targetStart=y;else if(y.data==="teleport anchor"){t.targetAnchor=y,h._lpa=t.targetAnchor&&l(t.targetAnchor);break}}y=l(y)}t.targetAnchor||Xs(h,t,c,u),m(_&&l(_),t,h,n,o,a,r)}ca(t,p)}return t.anchor&&l(t.anchor)}const wd=Qs;function ca(e,t){const n=e.ctx;if(n&&n.ut){let o,a;for(t?(o=e.el,a=e.anchor):(o=e.targetStart,a=e.targetAnchor);o&&o!==a;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function Xs(e,t,n,o){const a=t.targetStart=n(""),r=t.targetAnchor=n("");return a[Gs]=r,e&&(o(a,e),o(r,e)),r}function Zr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Zr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function B(e,t){return Ce(e)?ot({name:e.name},t,{setup:e}):e}function Zs(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ca(e,t,n,o,a=!1){if(ye(e)){e.forEach((_,y)=>Ca(_,t&&(ye(t)?t[y]:t),n,o,a));return}if(Hn(o)&&!a){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Ca(e,t,n,o.component.subTree);return}const r=o.shapeFlag&4?Ja(o.component):o.el,l=a?null:r,{i:s,r:i}=e,u=t&&t.r,c=s.refs===Oe?s.refs={}:s.refs,m=s.setupState,h=Te(m),p=m===Oe?()=>!1:_=>Fe(h,_);if(u!=null&&u!==i&&(ze(u)?(c[u]=null,p(u)&&(m[u]=null)):de(u)&&(u.value=null)),Ce(i))Wo(i,s,12,[l,c]);else{const _=ze(i),y=de(i);if(_||y){const x=()=>{if(e.f){const T=_?p(i)?m[i]:c[i]:i.value;a?ye(T)&&Yr(T,r):ye(T)?T.includes(r)||T.push(r):_?(c[i]=[r],p(i)&&(m[i]=c[i])):(i.value=[r],e.k&&(c[e.k]=i.value))}else _?(c[i]=l,p(i)&&(m[i]=l)):y&&(i.value=l,e.k&&(c[e.k]=l))};l?(x.id=-1,mt(x,n)):x()}}}Ea().requestIdleCallback;Ea().cancelIdleCallback;const Hn=e=>!!e.type.__asyncLoader,ei=e=>e.type.__isKeepAlive;function bd(e,t){ti(e,"a",t)}function kd(e,t){ti(e,"da",t)}function ti(e,t,n=tt){const o=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(Ba(t,o,n),n){let a=n.parent;for(;a&&a.parent;)ei(a.parent.vnode)&&_d(o,t,n,a),a=a.parent}}function _d(e,t,n,o){const a=Ba(t,e,o,!0);Ya(()=>{Yr(o[t],a)},n)}function Ba(e,t,n=tt,o=!1){if(n){const a=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...l)=>{Vn();const s=qo(n),i=nn(t,n,e,l);return s(),Dn(),i});return o?a.unshift(r):a.push(r),r}}const vn=e=>(t,n=tt)=>{(!Io||e==="sp")&&Ba(e,(...o)=>t(...o),n)},Cd=vn("bm"),yt=vn("m"),ni=vn("bu"),Sd=vn("u"),el=vn("bum"),Ya=vn("um"),xd=vn("sp"),Vd=vn("rtg"),Dd=vn("rtc");function jd(e,t=tt){Ba("ec",e,t)}const oi="components";function $d(e,t){return ri(oi,e,!0,t)||e}const ai=Symbol.for("v-ndc");function Jo(e){return ze(e)?ri(oi,e,!1)||e:e||ai}function ri(e,t,n=!0,o=!1){const a=Ze||tt;if(a){const r=a.type;{const s=pc(r,!1);if(s&&(s===t||s===At(t)||s===Fa(At(t))))return r}const l=jl(a[e]||r[e],t)||jl(a.appContext[e],t);return!l&&o?r:l}}function jl(e,t){return e&&(e[t]||e[At(t)]||e[Fa(At(t))])}function _e(e,t,n,o){let a;const r=n,l=ye(e);if(l||ze(e)){const s=l&&Jn(e);let i=!1;s&&(i=!It(e),e=Pa(e)),a=new Array(e.length);for(let u=0,c=e.length;u<c;u++)a[u]=t(i?st(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){a=new Array(e);for(let s=0;s<e;s++)a[s]=t(s+1,s,void 0,r)}else if(Ye(e))if(e[Symbol.iterator])a=Array.from(e,(s,i)=>t(s,i,void 0,r));else{const s=Object.keys(e);a=new Array(s.length);for(let i=0,u=s.length;i<u;i++){const c=s[i];a[i]=t(e[c],c,i,r)}}else a=[];return a}function Ke(e,t,n={},o,a){if(Ze.ce||Ze.parent&&Hn(Ze.parent)&&Ze.parent.ce)return t!=="default"&&(n.name=t),v(),I(W,null,[d("slot",n,o&&o())],64);let r=e[t];r&&r._c&&(r._d=!1),v();const l=r&&li(r(n)),s=n.key||l&&l.key,i=I(W,{key:(s&&!Wt(s)?s:`_${t}`)+(!l&&o?"_fb":"")},l||(o?o():[]),l&&e._===1?64:-2);return!a&&i.scopeId&&(i.slotScopeIds=[i.scopeId+"-s"]),r&&r._c&&(r._d=!0),i}function li(e){return e.some(t=>al(t)?!(t.type===Sn||t.type===W&&!li(t.children)):!0)?e:null}const $r=e=>e?Di(e)?Ja(e):$r(e.parent):null,jo=ot(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$r(e.parent),$root:e=>$r(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ii(e),$forceUpdate:e=>e.f||(e.f=()=>{Xr(e.update)}),$nextTick:e=>e.n||(e.n=$t.bind(e.proxy)),$watch:e=>Qd.bind(e)}),dr=(e,t)=>e!==Oe&&!e.__isScriptSetup&&Fe(e,t),Md={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:a,props:r,accessCache:l,type:s,appContext:i}=e;let u;if(t[0]!=="$"){const p=l[t];if(p!==void 0)switch(p){case 1:return o[t];case 2:return a[t];case 4:return n[t];case 3:return r[t]}else{if(dr(o,t))return l[t]=1,o[t];if(a!==Oe&&Fe(a,t))return l[t]=2,a[t];if((u=e.propsOptions[0])&&Fe(u,t))return l[t]=3,r[t];if(n!==Oe&&Fe(n,t))return l[t]=4,n[t];Mr&&(l[t]=0)}}const c=jo[t];let m,h;if(c)return t==="$attrs"&&lt(e.attrs,"get",""),c(e);if((m=s.__cssModules)&&(m=m[t]))return m;if(n!==Oe&&Fe(n,t))return l[t]=4,n[t];if(h=i.config.globalProperties,Fe(h,t))return h[t]},set({_:e},t,n){const{data:o,setupState:a,ctx:r}=e;return dr(a,t)?(a[t]=n,!0):o!==Oe&&Fe(o,t)?(o[t]=n,!0):Fe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:a,propsOptions:r}},l){let s;return!!n[l]||e!==Oe&&Fe(e,l)||dr(t,l)||(s=r[0])&&Fe(s,l)||Fe(o,l)||Fe(jo,l)||Fe(a.config.globalProperties,l)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Fe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Sa(e){return ye(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function Pt(e,t){return!e||!t?e||t:ye(e)&&ye(t)?e.concat(t):ot({},Sa(e),Sa(t))}let Mr=!0;function Nd(e){const t=ii(e),n=e.proxy,o=e.ctx;Mr=!1,t.beforeCreate&&$l(t.beforeCreate,e,"bc");const{data:a,computed:r,methods:l,watch:s,provide:i,inject:u,created:c,beforeMount:m,mounted:h,beforeUpdate:p,updated:_,activated:y,deactivated:x,beforeDestroy:T,beforeUnmount:O,destroyed:ee,unmounted:N,render:A,renderTracked:re,renderTriggered:le,errorCaptured:U,serverPrefetch:se,expose:De,inheritAttrs:Ee,components:wt,directives:ut,filters:Qe}=t;if(u&&Ad(u,o,null),l)for(const fe in l){const z=l[fe];Ce(z)&&(o[fe]=z.bind(n))}if(a){const fe=a.call(n,n);Ye(fe)&&(e.data=pn(fe))}if(Mr=!0,r)for(const fe in r){const z=r[fe],F=Ce(z)?z.bind(n,n):Ce(z.get)?z.get.bind(n,n):Ut,V=!Ce(z)&&Ce(z.set)?z.set.bind(n):Ut,K=w({get:F,set:V});Object.defineProperty(o,fe,{enumerable:!0,configurable:!0,get:()=>K.value,set:Re=>K.value=Re})}if(s)for(const fe in s)si(s[fe],o,n,fe);if(i){const fe=Ce(i)?i.call(n):i;Reflect.ownKeys(fe).forEach(z=>{tl(z,fe[z])})}c&&$l(c,e,"c");function G(fe,z){ye(z)?z.forEach(F=>fe(F.bind(n))):z&&fe(z.bind(n))}if(G(Cd,m),G(yt,h),G(ni,p),G(Sd,_),G(bd,y),G(kd,x),G(jd,U),G(Dd,re),G(Vd,le),G(el,O),G(Ya,N),G(xd,se),ye(De))if(De.length){const fe=e.exposed||(e.exposed={});De.forEach(z=>{Object.defineProperty(fe,z,{get:()=>n[z],set:F=>n[z]=F})})}else e.exposed||(e.exposed={});A&&e.render===Ut&&(e.render=A),Ee!=null&&(e.inheritAttrs=Ee),wt&&(e.components=wt),ut&&(e.directives=ut),se&&Zs(e)}function Ad(e,t,n=Ut){ye(e)&&(e=Nr(e));for(const o in e){const a=e[o];let r;Ye(a)?"default"in a?r=Kn(a.from||o,a.default,!0):r=Kn(a.from||o):r=Kn(a),de(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:l=>r.value=l}):t[o]=r}}function $l(e,t,n){nn(ye(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function si(e,t,n,o){let a=o.includes(".")?bi(n,o):()=>n[o];if(ze(e)){const r=t[e];Ce(r)&&nt(a,r)}else if(Ce(e))nt(a,e.bind(n));else if(Ye(e))if(ye(e))e.forEach(r=>si(r,t,n,o));else{const r=Ce(e.handler)?e.handler.bind(n):t[e.handler];Ce(r)&&nt(a,r,e)}}function ii(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:a,optionsCache:r,config:{optionMergeStrategies:l}}=e.appContext,s=r.get(t);let i;return s?i=s:!a.length&&!n&&!o?i=t:(i={},a.length&&a.forEach(u=>xa(i,u,l,!0)),xa(i,t,l)),Ye(t)&&r.set(t,i),i}function xa(e,t,n,o=!1){const{mixins:a,extends:r}=t;r&&xa(e,r,n,!0),a&&a.forEach(l=>xa(e,l,n,!0));for(const l in t)if(!(o&&l==="expose")){const s=Td[l]||n&&n[l];e[l]=s?s(e[l],t[l]):t[l]}return e}const Td={data:Ml,props:Nl,emits:Nl,methods:ko,computed:ko,beforeCreate:ft,created:ft,beforeMount:ft,mounted:ft,beforeUpdate:ft,updated:ft,beforeDestroy:ft,beforeUnmount:ft,destroyed:ft,unmounted:ft,activated:ft,deactivated:ft,errorCaptured:ft,serverPrefetch:ft,components:ko,directives:ko,watch:Fd,provide:Ml,inject:Od};function Ml(e,t){return t?e?function(){return ot(Ce(e)?e.call(this,this):e,Ce(t)?t.call(this,this):t)}:t:e}function Od(e,t){return ko(Nr(e),Nr(t))}function Nr(e){if(ye(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ft(e,t){return e?[...new Set([].concat(e,t))]:t}function ko(e,t){return e?ot(Object.create(null),e,t):t}function Nl(e,t){return e?ye(e)&&ye(t)?[...new Set([...e,...t])]:ot(Object.create(null),Sa(e),Sa(t??{})):t}function Fd(e,t){if(!e)return t;if(!t)return e;const n=ot(Object.create(null),e);for(const o in t)n[o]=ft(e[o],t[o]);return n}function ui(){return{app:null,config:{isNativeTag:Cu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ed=0;function Id(e,t){return function(o,a=null){Ce(o)||(o=ot({},o)),a!=null&&!Ye(a)&&(a=null);const r=ui(),l=new WeakSet,s=[];let i=!1;const u=r.app={_uid:Ed++,_component:o,_props:a,_container:null,_context:r,_instance:null,version:hc,get config(){return r.config},set config(c){},use(c,...m){return l.has(c)||(c&&Ce(c.install)?(l.add(c),c.install(u,...m)):Ce(c)&&(l.add(c),c(u,...m))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,m){return m?(r.components[c]=m,u):r.components[c]},directive(c,m){return m?(r.directives[c]=m,u):r.directives[c]},mount(c,m,h){if(!i){const p=u._ceVNode||d(o,a);return p.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),e(p,c,h),i=!0,u._container=c,c.__vue_app__=u,Ja(p.component)}},onUnmount(c){s.push(c)},unmount(){i&&(nn(s,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,m){return r.provides[c]=m,u},runWithContext(c){const m=zn;zn=u;try{return c()}finally{zn=m}}};return u}}let zn=null;function tl(e,t){if(tt){let n=tt.provides;const o=tt.parent&&tt.parent.provides;o===n&&(n=tt.provides=Object.create(o)),n[e]=t}}function Kn(e,t,n=!1){const o=tt||Ze;if(o||zn){const a=zn?zn._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&Ce(t)?t.call(o&&o.proxy):t}}const di={},ci=()=>Object.create(di),fi=e=>Object.getPrototypeOf(e)===di;function Pd(e,t,n,o=!1){const a={},r=ci();e.propsDefaults=Object.create(null),mi(e,t,a,r);for(const l in e.propsOptions[0])l in a||(a[l]=void 0);n?e.props=o?a:nd(a):e.type.props?e.props=a:e.props=r,e.attrs=r}function Rd(e,t,n,o){const{props:a,attrs:r,vnode:{patchFlag:l}}=e,s=Te(a),[i]=e.propsOptions;let u=!1;if((o||l>0)&&!(l&16)){if(l&8){const c=e.vnode.dynamicProps;for(let m=0;m<c.length;m++){let h=c[m];if(La(e.emitsOptions,h))continue;const p=t[h];if(i)if(Fe(r,h))p!==r[h]&&(r[h]=p,u=!0);else{const _=At(h);a[_]=Ar(i,s,_,p,e,!1)}else p!==r[h]&&(r[h]=p,u=!0)}}}else{mi(e,t,a,r)&&(u=!0);let c;for(const m in s)(!t||!Fe(t,m)&&((c=xn(m))===m||!Fe(t,c)))&&(i?n&&(n[m]!==void 0||n[c]!==void 0)&&(a[m]=Ar(i,s,m,void 0,e,!0)):delete a[m]);if(r!==s)for(const m in r)(!t||!Fe(t,m))&&(delete r[m],u=!0)}u&&un(e.attrs,"set","")}function mi(e,t,n,o){const[a,r]=e.propsOptions;let l=!1,s;if(t)for(let i in t){if(So(i))continue;const u=t[i];let c;a&&Fe(a,c=At(i))?!r||!r.includes(c)?n[c]=u:(s||(s={}))[c]=u:La(e.emitsOptions,i)||(!(i in o)||u!==o[i])&&(o[i]=u,l=!0)}if(r){const i=Te(n),u=s||Oe;for(let c=0;c<r.length;c++){const m=r[c];n[m]=Ar(a,i,m,u[m],e,!Fe(u,m))}}return l}function Ar(e,t,n,o,a,r){const l=e[n];if(l!=null){const s=Fe(l,"default");if(s&&o===void 0){const i=l.default;if(l.type!==Function&&!l.skipFactory&&Ce(i)){const{propsDefaults:u}=a;if(n in u)o=u[n];else{const c=qo(a);o=u[n]=i.call(null,t),c()}}else o=i;a.ce&&a.ce._setProp(n,o)}l[0]&&(r&&!s?o=!1:l[1]&&(o===""||o===xn(n))&&(o=!0))}return o}const Bd=new WeakMap;function pi(e,t,n=!1){const o=n?Bd:t.propsCache,a=o.get(e);if(a)return a;const r=e.props,l={},s=[];let i=!1;if(!Ce(e)){const c=m=>{i=!0;const[h,p]=pi(m,t,!0);ot(l,h),p&&s.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!i)return Ye(e)&&o.set(e,Ln),Ln;if(ye(r))for(let c=0;c<r.length;c++){const m=At(r[c]);Al(m)&&(l[m]=Oe)}else if(r)for(const c in r){const m=At(c);if(Al(m)){const h=r[c],p=l[m]=ye(h)||Ce(h)?{type:h}:ot({},h),_=p.type;let y=!1,x=!0;if(ye(_))for(let T=0;T<_.length;++T){const O=_[T],ee=Ce(O)&&O.name;if(ee==="Boolean"){y=!0;break}else ee==="String"&&(x=!1)}else y=Ce(_)&&_.name==="Boolean";p[0]=y,p[1]=x,(y||Fe(p,"default"))&&s.push(m)}}const u=[l,s];return Ye(e)&&o.set(e,u),u}function Al(e){return e[0]!=="$"&&!So(e)}const vi=e=>e[0]==="_"||e==="$stable",nl=e=>ye(e)?e.map(Qt):[Qt(e)],Yd=(e,t,n)=>{if(t._n)return t;const o=f((...a)=>nl(t(...a)),n);return o._c=!1,o},hi=(e,t,n)=>{const o=e._ctx;for(const a in e){if(vi(a))continue;const r=e[a];if(Ce(r))t[a]=Yd(a,r,o);else if(r!=null){const l=nl(r);t[a]=()=>l}}},gi=(e,t)=>{const n=nl(t);e.slots.default=()=>n},yi=(e,t,n)=>{for(const o in t)(n||o!=="_")&&(e[o]=t[o])},Ud=(e,t,n)=>{const o=e.slots=ci();if(e.vnode.shapeFlag&32){const a=t._;a?(yi(o,t,n),n&&Cs(o,"_",a,!0)):hi(t,o)}else t&&gi(e,t)},Ld=(e,t,n)=>{const{vnode:o,slots:a}=e;let r=!0,l=Oe;if(o.shapeFlag&32){const s=t._;s?n&&s===1?r=!1:yi(a,t,n):(r=!t.$stable,hi(t,a)),l=t}else t&&(gi(e,t),l={default:1});if(r)for(const s in a)!vi(s)&&l[s]==null&&delete a[s]},mt=oc;function Wd(e){return Jd(e)}function Jd(e,t){const n=Ea();n.__VUE__=!0;const{insert:o,remove:a,patchProp:r,createElement:l,createText:s,createComment:i,setText:u,setElementText:c,parentNode:m,nextSibling:h,setScopeId:p=Ut,insertStaticContent:_}=e,y=(S,D,E,q=null,L=null,J=null,ne=void 0,Q=null,Z=!!D.dynamicChildren)=>{if(S===D)return;S&&!vo(S,D)&&(q=jt(S),Re(S,L,J,!0),S=null),D.patchFlag===-2&&(Z=!1,D.dynamicChildren=null);const{type:H,ref:ve,shapeFlag:ae}=D;switch(H){case Wa:x(S,D,E,q);break;case Sn:T(S,D,E,q);break;case $o:S==null&&O(D,E,q,ne);break;case W:wt(S,D,E,q,L,J,ne,Q,Z);break;default:ae&1?A(S,D,E,q,L,J,ne,Q,Z):ae&6?ut(S,D,E,q,L,J,ne,Q,Z):(ae&64||ae&128)&&H.process(S,D,E,q,L,J,ne,Q,Z,on)}ve!=null&&L&&Ca(ve,S&&S.ref,J,D||S,!D)},x=(S,D,E,q)=>{if(S==null)o(D.el=s(D.children),E,q);else{const L=D.el=S.el;D.children!==S.children&&u(L,D.children)}},T=(S,D,E,q)=>{S==null?o(D.el=i(D.children||""),E,q):D.el=S.el},O=(S,D,E,q)=>{[S.el,S.anchor]=_(S.children,D,E,q,S.el,S.anchor)},ee=({el:S,anchor:D},E,q)=>{let L;for(;S&&S!==D;)L=h(S),o(S,E,q),S=L;o(D,E,q)},N=({el:S,anchor:D})=>{let E;for(;S&&S!==D;)E=h(S),a(S),S=E;a(D)},A=(S,D,E,q,L,J,ne,Q,Z)=>{D.type==="svg"?ne="svg":D.type==="math"&&(ne="mathml"),S==null?re(D,E,q,L,J,ne,Q,Z):se(S,D,L,J,ne,Q,Z)},re=(S,D,E,q,L,J,ne,Q)=>{let Z,H;const{props:ve,shapeFlag:ae,transition:pe,dirs:ke}=S;if(Z=S.el=l(S.type,J,ve&&ve.is,ve),ae&8?c(Z,S.children):ae&16&&U(S.children,Z,null,q,L,cr(S,J),ne,Q),ke&&$n(S,null,q,"created"),le(Z,S,S.scopeId,ne,q),ve){for(const Pe in ve)Pe!=="value"&&!So(Pe)&&r(Z,Pe,null,ve[Pe],J,q);"value"in ve&&r(Z,"value",null,ve.value,J),(H=ve.onVnodeBeforeMount)&&zt(H,q,S)}ke&&$n(S,null,q,"beforeMount");const je=qd(L,pe);je&&pe.beforeEnter(Z),o(Z,D,E),((H=ve&&ve.onVnodeMounted)||je||ke)&&mt(()=>{H&&zt(H,q,S),je&&pe.enter(Z),ke&&$n(S,null,q,"mounted")},L)},le=(S,D,E,q,L)=>{if(E&&p(S,E),q)for(let J=0;J<q.length;J++)p(S,q[J]);if(L){let J=L.subTree;if(D===J||Ci(J.type)&&(J.ssContent===D||J.ssFallback===D)){const ne=L.vnode;le(S,ne,ne.scopeId,ne.slotScopeIds,L.parent)}}},U=(S,D,E,q,L,J,ne,Q,Z=0)=>{for(let H=Z;H<S.length;H++){const ve=S[H]=Q?bn(S[H]):Qt(S[H]);y(null,ve,D,E,q,L,J,ne,Q)}},se=(S,D,E,q,L,J,ne)=>{const Q=D.el=S.el;let{patchFlag:Z,dynamicChildren:H,dirs:ve}=D;Z|=S.patchFlag&16;const ae=S.props||Oe,pe=D.props||Oe;let ke;if(E&&Mn(E,!1),(ke=pe.onVnodeBeforeUpdate)&&zt(ke,E,D,S),ve&&$n(D,S,E,"beforeUpdate"),E&&Mn(E,!0),(ae.innerHTML&&pe.innerHTML==null||ae.textContent&&pe.textContent==null)&&c(Q,""),H?De(S.dynamicChildren,H,Q,E,q,cr(D,L),J):ne||z(S,D,Q,null,E,q,cr(D,L),J,!1),Z>0){if(Z&16)Ee(Q,ae,pe,E,L);else if(Z&2&&ae.class!==pe.class&&r(Q,"class",null,pe.class,L),Z&4&&r(Q,"style",ae.style,pe.style,L),Z&8){const je=D.dynamicProps;for(let Pe=0;Pe<je.length;Pe++){const Ae=je[Pe],$=ae[Ae],j=pe[Ae];(j!==$||Ae==="value")&&r(Q,Ae,$,j,L,E)}}Z&1&&S.children!==D.children&&c(Q,D.children)}else!ne&&H==null&&Ee(Q,ae,pe,E,L);((ke=pe.onVnodeUpdated)||ve)&&mt(()=>{ke&&zt(ke,E,D,S),ve&&$n(D,S,E,"updated")},q)},De=(S,D,E,q,L,J,ne)=>{for(let Q=0;Q<D.length;Q++){const Z=S[Q],H=D[Q],ve=Z.el&&(Z.type===W||!vo(Z,H)||Z.shapeFlag&70)?m(Z.el):E;y(Z,H,ve,null,q,L,J,ne,!0)}},Ee=(S,D,E,q,L)=>{if(D!==E){if(D!==Oe)for(const J in D)!So(J)&&!(J in E)&&r(S,J,D[J],null,L,q);for(const J in E){if(So(J))continue;const ne=E[J],Q=D[J];ne!==Q&&J!=="value"&&r(S,J,Q,ne,L,q)}"value"in E&&r(S,"value",D.value,E.value,L)}},wt=(S,D,E,q,L,J,ne,Q,Z)=>{const H=D.el=S?S.el:s(""),ve=D.anchor=S?S.anchor:s("");let{patchFlag:ae,dynamicChildren:pe,slotScopeIds:ke}=D;ke&&(Q=Q?Q.concat(ke):ke),S==null?(o(H,E,q),o(ve,E,q),U(D.children||[],E,ve,L,J,ne,Q,Z)):ae>0&&ae&64&&pe&&S.dynamicChildren?(De(S.dynamicChildren,pe,E,L,J,ne,Q),(D.key!=null||L&&D===L.subTree)&&ol(S,D,!0)):z(S,D,E,ve,L,J,ne,Q,Z)},ut=(S,D,E,q,L,J,ne,Q,Z)=>{D.slotScopeIds=Q,S==null?D.shapeFlag&512?L.ctx.activate(D,E,q,ne,Z):Qe(D,E,q,L,J,ne,Z):Ie(S,D,Z)},Qe=(S,D,E,q,L,J,ne)=>{const Q=S.component=uc(S,q,L);if(ei(S)&&(Q.ctx.renderer=on),dc(Q,!1,ne),Q.asyncDep){if(L&&L.registerDep(Q,G,ne),!S.el){const Z=Q.subTree=d(Sn);T(null,Z,D,E)}}else G(Q,S,D,E,L,J,ne)},Ie=(S,D,E)=>{const q=D.component=S.component;if(tc(S,D,E))if(q.asyncDep&&!q.asyncResolved){fe(q,D,E);return}else q.next=D,q.update();else D.el=S.el,q.vnode=D},G=(S,D,E,q,L,J,ne)=>{const Q=()=>{if(S.isMounted){let{next:ae,bu:pe,u:ke,parent:je,vnode:Pe}=S;{const oe=wi(S);if(oe){ae&&(ae.el=Pe.el,fe(S,ae,ne)),oe.asyncDep.then(()=>{S.isUnmounted||Q()});return}}let Ae=ae,$;Mn(S,!1),ae?(ae.el=Pe.el,fe(S,ae,ne)):ae=Pe,pe&&da(pe),($=ae.props&&ae.props.onVnodeBeforeUpdate)&&zt($,je,ae,Pe),Mn(S,!0);const j=Ol(S),R=S.subTree;S.subTree=j,y(R,j,m(R.el),jt(R),S,L,J),ae.el=j.el,Ae===null&&nc(S,j.el),ke&&mt(ke,L),($=ae.props&&ae.props.onVnodeUpdated)&&mt(()=>zt($,je,ae,Pe),L)}else{let ae;const{el:pe,props:ke}=D,{bm:je,m:Pe,parent:Ae,root:$,type:j}=S,R=Hn(D);Mn(S,!1),je&&da(je),!R&&(ae=ke&&ke.onVnodeBeforeMount)&&zt(ae,Ae,D),Mn(S,!0);{$.ce&&$.ce._injectChildStyle(j);const oe=S.subTree=Ol(S);y(null,oe,E,q,S,L,J),D.el=oe.el}if(Pe&&mt(Pe,L),!R&&(ae=ke&&ke.onVnodeMounted)){const oe=D;mt(()=>zt(ae,Ae,oe),L)}(D.shapeFlag&256||Ae&&Hn(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&S.a&&mt(S.a,L),S.isMounted=!0,D=E=q=null}};S.scope.on();const Z=S.effect=new js(Q);S.scope.off();const H=S.update=Z.run.bind(Z),ve=S.job=Z.runIfDirty.bind(Z);ve.i=S,ve.id=S.uid,Z.scheduler=()=>Xr(ve),Mn(S,!0),H()},fe=(S,D,E)=>{D.component=S;const q=S.vnode.props;S.vnode=D,S.next=null,Rd(S,D.props,q,E),Ld(S,D.children,E),Vn(),Sl(S),Dn()},z=(S,D,E,q,L,J,ne,Q,Z=!1)=>{const H=S&&S.children,ve=S?S.shapeFlag:0,ae=D.children,{patchFlag:pe,shapeFlag:ke}=D;if(pe>0){if(pe&128){V(H,ae,E,q,L,J,ne,Q,Z);return}else if(pe&256){F(H,ae,E,q,L,J,ne,Q,Z);return}}ke&8?(ve&16&&ct(H,L,J),ae!==H&&c(E,ae)):ve&16?ke&16?V(H,ae,E,q,L,J,ne,Q,Z):ct(H,L,J,!0):(ve&8&&c(E,""),ke&16&&U(ae,E,q,L,J,ne,Q,Z))},F=(S,D,E,q,L,J,ne,Q,Z)=>{S=S||Ln,D=D||Ln;const H=S.length,ve=D.length,ae=Math.min(H,ve);let pe;for(pe=0;pe<ae;pe++){const ke=D[pe]=Z?bn(D[pe]):Qt(D[pe]);y(S[pe],ke,E,null,L,J,ne,Q,Z)}H>ve?ct(S,L,J,!0,!1,ae):U(D,E,q,L,J,ne,Q,Z,ae)},V=(S,D,E,q,L,J,ne,Q,Z)=>{let H=0;const ve=D.length;let ae=S.length-1,pe=ve-1;for(;H<=ae&&H<=pe;){const ke=S[H],je=D[H]=Z?bn(D[H]):Qt(D[H]);if(vo(ke,je))y(ke,je,E,null,L,J,ne,Q,Z);else break;H++}for(;H<=ae&&H<=pe;){const ke=S[ae],je=D[pe]=Z?bn(D[pe]):Qt(D[pe]);if(vo(ke,je))y(ke,je,E,null,L,J,ne,Q,Z);else break;ae--,pe--}if(H>ae){if(H<=pe){const ke=pe+1,je=ke<ve?D[ke].el:q;for(;H<=pe;)y(null,D[H]=Z?bn(D[H]):Qt(D[H]),E,je,L,J,ne,Q,Z),H++}}else if(H>pe)for(;H<=ae;)Re(S[H],L,J,!0),H++;else{const ke=H,je=H,Pe=new Map;for(H=je;H<=pe;H++){const ue=D[H]=Z?bn(D[H]):Qt(D[H]);ue.key!=null&&Pe.set(ue.key,H)}let Ae,$=0;const j=pe-je+1;let R=!1,oe=0;const me=new Array(j);for(H=0;H<j;H++)me[H]=0;for(H=ke;H<=ae;H++){const ue=S[H];if($>=j){Re(ue,L,J,!0);continue}let $e;if(ue.key!=null)$e=Pe.get(ue.key);else for(Ae=je;Ae<=pe;Ae++)if(me[Ae-je]===0&&vo(ue,D[Ae])){$e=Ae;break}$e===void 0?Re(ue,L,J,!0):(me[$e-je]=H+1,$e>=oe?oe=$e:R=!0,y(ue,D[$e],E,null,L,J,ne,Q,Z),$++)}const Ve=R?Hd(me):Ln;for(Ae=Ve.length-1,H=j-1;H>=0;H--){const ue=je+H,$e=D[ue],Je=ue+1<ve?D[ue+1].el:q;me[H]===0?y(null,$e,E,Je,L,J,ne,Q,Z):R&&(Ae<0||H!==Ve[Ae]?K($e,E,Je,2):Ae--)}}},K=(S,D,E,q,L=null)=>{const{el:J,type:ne,transition:Q,children:Z,shapeFlag:H}=S;if(H&6){K(S.component.subTree,D,E,q);return}if(H&128){S.suspense.move(D,E,q);return}if(H&64){ne.move(S,D,E,on);return}if(ne===W){o(J,D,E);for(let ae=0;ae<Z.length;ae++)K(Z[ae],D,E,q);o(S.anchor,D,E);return}if(ne===$o){ee(S,D,E);return}if(q!==2&&H&1&&Q)if(q===0)Q.beforeEnter(J),o(J,D,E),mt(()=>Q.enter(J),L);else{const{leave:ae,delayLeave:pe,afterLeave:ke}=Q,je=()=>o(J,D,E),Pe=()=>{ae(J,()=>{je(),ke&&ke()})};pe?pe(J,je,Pe):Pe()}else o(J,D,E)},Re=(S,D,E,q=!1,L=!1)=>{const{type:J,props:ne,ref:Q,children:Z,dynamicChildren:H,shapeFlag:ve,patchFlag:ae,dirs:pe,cacheIndex:ke}=S;if(ae===-2&&(L=!1),Q!=null&&Ca(Q,null,E,S,!0),ke!=null&&(D.renderCache[ke]=void 0),ve&256){D.ctx.deactivate(S);return}const je=ve&1&&pe,Pe=!Hn(S);let Ae;if(Pe&&(Ae=ne&&ne.onVnodeBeforeUnmount)&&zt(Ae,D,S),ve&6)er(S.component,E,q);else{if(ve&128){S.suspense.unmount(E,q);return}je&&$n(S,null,D,"beforeUnmount"),ve&64?S.type.remove(S,D,E,on,q):H&&!H.hasOnce&&(J!==W||ae>0&&ae&64)?ct(H,D,E,!1,!0):(J===W&&ae&384||!L&&ve&16)&&ct(Z,D,E),q&&dt(S)}(Pe&&(Ae=ne&&ne.onVnodeUnmounted)||je)&&mt(()=>{Ae&&zt(Ae,D,S),je&&$n(S,null,D,"unmounted")},E)},dt=S=>{const{type:D,el:E,anchor:q,transition:L}=S;if(D===W){In(E,q);return}if(D===$o){N(S);return}const J=()=>{a(E),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(S.shapeFlag&1&&L&&!L.persisted){const{leave:ne,delayLeave:Q}=L,Z=()=>ne(E,J);Q?Q(S.el,J,Z):Z()}else J()},In=(S,D)=>{let E;for(;S!==D;)E=h(S),a(S),S=E;a(D)},er=(S,D,E)=>{const{bum:q,scope:L,job:J,subTree:ne,um:Q,m:Z,a:H}=S;Tl(Z),Tl(H),q&&da(q),L.stop(),J&&(J.flags|=8,Re(ne,S,D,E)),Q&&mt(Q,D),mt(()=>{S.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},ct=(S,D,E,q=!1,L=!1,J=0)=>{for(let ne=J;ne<S.length;ne++)Re(S[ne],D,E,q,L)},jt=S=>{if(S.shapeFlag&6)return jt(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const D=h(S.anchor||S.el),E=D&&D[Gs];return E?h(E):D};let co=!1;const Pn=(S,D,E)=>{S==null?D._vnode&&Re(D._vnode,null,null,!0):y(D._vnode||null,S,D,null,null,null,E),D._vnode=S,co||(co=!0,Sl(),Hs(),co=!1)},on={p:y,um:Re,m:K,r:dt,mt:Qe,mc:U,pc:z,pbc:De,n:jt,o:e};return{render:Pn,hydrate:void 0,createApp:Id(Pn)}}function cr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Mn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function qd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ol(e,t,n=!1){const o=e.children,a=t.children;if(ye(o)&&ye(a))for(let r=0;r<o.length;r++){const l=o[r];let s=a[r];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[r]=bn(a[r]),s.el=l.el),!n&&s.patchFlag!==-2&&ol(l,s)),s.type===Wa&&(s.el=l.el)}}function Hd(e){const t=e.slice(),n=[0];let o,a,r,l,s;const i=e.length;for(o=0;o<i;o++){const u=e[o];if(u!==0){if(a=n[n.length-1],e[a]<u){t[o]=a,n.push(o);continue}for(r=0,l=n.length-1;r<l;)s=r+l>>1,e[n[s]]<u?r=s+1:l=s;u<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(r=n.length,l=n[r-1];r-- >0;)n[r]=l,l=t[l];return n}function wi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:wi(t)}function Tl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const zd=Symbol.for("v-scx"),Kd=()=>Kn(zd);function ro(e,t){return Ua(e,null,t)}function Gd(e,t){return Ua(e,null,{flush:"sync"})}function nt(e,t,n){return Ua(e,t,n)}function Ua(e,t,n=Oe){const{immediate:o,deep:a,flush:r,once:l}=n,s=ot({},n),i=t&&o||!t&&r!=="post";let u;if(Io){if(r==="sync"){const p=Kd();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!i){const p=()=>{};return p.stop=Ut,p.resume=Ut,p.pause=Ut,p}}const c=tt;s.call=(p,_,y)=>nn(p,c,_,y);let m=!1;r==="post"?s.scheduler=p=>{mt(p,c&&c.suspense)}:r!=="sync"&&(m=!0,s.scheduler=(p,_)=>{_?p():Xr(p)}),s.augmentJob=p=>{t&&(p.flags|=4),m&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const h=pd(e,t,s);return Io&&(u?u.push(h):i&&h()),h}function Qd(e,t,n){const o=this.proxy,a=ze(e)?e.includes(".")?bi(o,e):()=>o[e]:e.bind(o,o);let r;Ce(t)?r=t:(r=t.handler,n=t);const l=qo(this),s=Ua(a,r.bind(o),n);return l(),s}function bi(e,t){const n=t.split(".");return()=>{let o=e;for(let a=0;a<n.length&&o;a++)o=o[n[a]];return o}}function Rt(e,t,n=Oe){const o=Vi(),a=At(t),r=xn(t),l=ki(e,a),s=sd((i,u)=>{let c,m=Oe,h;return Gd(()=>{const p=e[a];_t(c,p)&&(c=p,u())}),{get(){return i(),n.get?n.get(c):c},set(p){const _=n.set?n.set(p):p;if(!_t(_,c)&&!(m!==Oe&&_t(p,m)))return;const y=o.vnode.props;y&&(t in y||a in y||r in y)&&(`onUpdate:${t}`in y||`onUpdate:${a}`in y||`onUpdate:${r}`in y)||(c=p,u()),o.emit(`update:${t}`,_),_t(p,_)&&_t(p,m)&&!_t(_,h)&&u(),m=p,h=_}}});return s[Symbol.iterator]=()=>{let i=0;return{next(){return i<2?{value:i++?l||Oe:s,done:!1}:{done:!0}}}},s}const ki=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${At(t)}Modifiers`]||e[`${xn(t)}Modifiers`];function Xd(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||Oe;let a=n;const r=t.startsWith("update:"),l=r&&ki(o,t.slice(7));l&&(l.trim&&(a=n.map(c=>ze(c)?c.trim():c)),l.number&&(a=n.map(ya)));let s,i=o[s=rr(t)]||o[s=rr(At(t))];!i&&r&&(i=o[s=rr(xn(t))]),i&&nn(i,e,6,a);const u=o[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,nn(u,e,6,a)}}function _i(e,t,n=!1){const o=t.emitsCache,a=o.get(e);if(a!==void 0)return a;const r=e.emits;let l={},s=!1;if(!Ce(e)){const i=u=>{const c=_i(u,t,!0);c&&(s=!0,ot(l,c))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return!r&&!s?(Ye(e)&&o.set(e,null),null):(ye(r)?r.forEach(i=>l[i]=null):ot(l,r),Ye(e)&&o.set(e,l),l)}function La(e,t){return!e||!Ta(t)?!1:(t=t.slice(2).replace(/Once$/,""),Fe(e,t[0].toLowerCase()+t.slice(1))||Fe(e,xn(t))||Fe(e,t))}function Ol(e){const{type:t,vnode:n,proxy:o,withProxy:a,propsOptions:[r],slots:l,attrs:s,emit:i,render:u,renderCache:c,props:m,data:h,setupState:p,ctx:_,inheritAttrs:y}=e,x=_a(e);let T,O;try{if(n.shapeFlag&4){const N=a||o,A=N;T=Qt(u.call(A,N,c,m,p,h,_)),O=s}else{const N=t;T=Qt(N.length>1?N(m,{attrs:s,slots:l,emit:i}):N(m,null)),O=t.props?s:Zd(s)}}catch(N){Mo.length=0,Ra(N,e,1),T=d(Sn)}let ee=T;if(O&&y!==!1){const N=Object.keys(O),{shapeFlag:A}=ee;N.length&&A&7&&(r&&N.some(Br)&&(O=ec(O,r)),ee=Gn(ee,O,!1,!0))}return n.dirs&&(ee=Gn(ee,null,!1,!0),ee.dirs=ee.dirs?ee.dirs.concat(n.dirs):n.dirs),n.transition&&Zr(ee,n.transition),T=ee,_a(x),T}const Zd=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ta(n))&&((t||(t={}))[n]=e[n]);return t},ec=(e,t)=>{const n={};for(const o in e)(!Br(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function tc(e,t,n){const{props:o,children:a,component:r}=e,{props:l,children:s,patchFlag:i}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&i>=0){if(i&1024)return!0;if(i&16)return o?Fl(o,l,u):!!l;if(i&8){const c=t.dynamicProps;for(let m=0;m<c.length;m++){const h=c[m];if(l[h]!==o[h]&&!La(u,h))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:o===l?!1:o?l?Fl(o,l,u):!0:!!l;return!1}function Fl(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let a=0;a<o.length;a++){const r=o[a];if(t[r]!==e[r]&&!La(n,r))return!0}return!1}function nc({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const Ci=e=>e.__isSuspense;function oc(e,t){t&&t.pendingBranch?ye(e)?t.effects.push(...e):t.effects.push(e):qs(e)}const W=Symbol.for("v-fgt"),Wa=Symbol.for("v-txt"),Sn=Symbol.for("v-cmt"),$o=Symbol.for("v-stc"),Mo=[];let Mt=null;function v(e=!1){Mo.push(Mt=e?null:[])}function ac(){Mo.pop(),Mt=Mo[Mo.length-1]||null}let Eo=1;function El(e,t=!1){Eo+=e,e<0&&Mt&&t&&(Mt.hasOnce=!0)}function Si(e){return e.dynamicChildren=Eo>0?Mt||Ln:null,ac(),Eo>0&&Mt&&Mt.push(e),e}function C(e,t,n,o,a,r){return Si(g(e,t,n,o,a,r,!0))}function I(e,t,n,o,a){return Si(d(e,t,n,o,a,!0))}function al(e){return e?e.__v_isVNode===!0:!1}function vo(e,t){return e.type===t.type&&e.key===t.key}const xi=({key:e})=>e??null,fa=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ze(e)||de(e)||Ce(e)?{i:Ze,r:e,k:t,f:!!n}:e:null);function g(e,t=null,n=null,o=0,a=null,r=e===W?0:1,l=!1,s=!1){const i={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&xi(t),ref:t&&fa(t),scopeId:Ks,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Ze};return s?(ll(i,n),r&128&&e.normalize(i)):n&&(i.shapeFlag|=ze(n)?8:16),Eo>0&&!l&&Mt&&(i.patchFlag>0||r&6)&&i.patchFlag!==32&&Mt.push(i),i}const d=rc;function rc(e,t=null,n=null,o=0,a=null,r=!1){if((!e||e===ai)&&(e=Sn),al(e)){const s=Gn(e,t,!0);return n&&ll(s,n),Eo>0&&!r&&Mt&&(s.shapeFlag&6?Mt[Mt.indexOf(e)]=s:Mt.push(s)),s.patchFlag=-2,s}if(vc(e)&&(e=e.__vccOpts),t){t=lc(t);let{class:s,style:i}=t;s&&!ze(s)&&(t.class=Dt(s)),Ye(i)&&(Gr(i)&&!ye(i)&&(i=ot({},i)),t.style=ao(i))}const l=ze(e)?1:Ci(e)?128:gd(e)?64:Ye(e)?4:Ce(e)?2:0;return g(e,t,n,o,a,l,r,!0)}function lc(e){return e?Gr(e)||fi(e)?ot({},e):e:null}function Gn(e,t,n=!1,o=!1){const{props:a,ref:r,patchFlag:l,children:s,transition:i}=e,u=t?Se(a||{},t):a,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&xi(u),ref:t&&t.ref?n&&r?ye(r)?r.concat(fa(t)):[r,fa(t)]:fa(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:i,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gn(e.ssContent),ssFallback:e.ssFallback&&Gn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return i&&o&&Zr(c,i.clone(c)),c}function k(e=" ",t=0){return d(Wa,null,e,t)}function rl(e,t){const n=d($o,null,e);return n.staticCount=t,n}function Y(e="",t=!1){return t?(v(),I(Sn,null,e)):d(Sn,null,e)}function Qt(e){return e==null||typeof e=="boolean"?d(Sn):ye(e)?d(W,null,e.slice()):al(e)?bn(e):d(Wa,null,String(e))}function bn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gn(e)}function ll(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(ye(t))n=16;else if(typeof t=="object")if(o&65){const a=t.default;a&&(a._c&&(a._d=!1),ll(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!fi(t)?t._ctx=Ze:a===3&&Ze&&(Ze.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ce(t)?(t={default:t,_ctx:Ze},n=32):(t=String(t),o&64?(n=16,t=[k(t)]):n=8);e.children=t,e.shapeFlag|=n}function Se(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const a in o)if(a==="class")t.class!==o.class&&(t.class=Dt([t.class,o.class]));else if(a==="style")t.style=ao([t.style,o.style]);else if(Ta(a)){const r=t[a],l=o[a];l&&r!==l&&!(ye(r)&&r.includes(l))&&(t[a]=r?[].concat(r,l):l)}else a!==""&&(t[a]=o[a])}return t}function zt(e,t,n,o=null){nn(e,t,7,[n,o])}const sc=ui();let ic=0;function uc(e,t,n){const o=e.type,a=(t?t.appContext:e.appContext)||sc,r={uid:ic++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Fu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pi(o,a),emitsOptions:_i(o,a),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:o.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Xd.bind(null,r),e.ce&&e.ce(r),r}let tt=null;const Vi=()=>tt||Ze;let Va,Tr;{const e=Ea(),t=(n,o)=>{let a;return(a=e[n])||(a=e[n]=[]),a.push(o),r=>{a.length>1?a.forEach(l=>l(r)):a[0](r)}};Va=t("__VUE_INSTANCE_SETTERS__",n=>tt=n),Tr=t("__VUE_SSR_SETTERS__",n=>Io=n)}const qo=e=>{const t=tt;return Va(e),e.scope.on(),()=>{e.scope.off(),Va(t)}},Il=()=>{tt&&tt.scope.off(),Va(null)};function Di(e){return e.vnode.shapeFlag&4}let Io=!1;function dc(e,t=!1,n=!1){t&&Tr(t);const{props:o,children:a}=e.vnode,r=Di(e);Pd(e,o,r,t),Ud(e,a,n);const l=r?cc(e,t):void 0;return t&&Tr(!1),l}function cc(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Md);const{setup:o}=n;if(o){Vn();const a=e.setupContext=o.length>1?mc(e):null,r=qo(e),l=Wo(o,e,0,[e.props,a]),s=bs(l);if(Dn(),r(),(s||e.sp)&&!Hn(e)&&Zs(e),s){if(l.then(Il,Il),t)return l.then(i=>{Pl(e,i)}).catch(i=>{Ra(i,e,0)});e.asyncDep=l}else Pl(e,l)}else ji(e)}function Pl(e,t,n){Ce(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ye(t)&&(e.setupState=Ls(t)),ji(e)}function ji(e,t,n){const o=e.type;e.render||(e.render=o.render||Ut);{const a=qo(e);Vn();try{Nd(e)}finally{Dn(),a()}}}const fc={get(e,t){return lt(e,"get",""),e[t]}};function mc(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,fc),slots:e.slots,emit:e.emit,expose:t}}function Ja(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ls(od(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in jo)return jo[n](e)},has(t,n){return n in t||n in jo}})):e.proxy}function pc(e,t=!0){return Ce(e)?e.displayName||e.name:e.name||t&&e.__name}function vc(e){return Ce(e)&&"__vccOpts"in e}const w=(e,t)=>fd(e,t,Io),hc="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Or;const Rl=typeof window<"u"&&window.trustedTypes;if(Rl)try{Or=Rl.createPolicy("vue",{createHTML:e=>e})}catch{}const $i=Or?e=>Or.createHTML(e):e=>e,gc="http://www.w3.org/2000/svg",yc="http://www.w3.org/1998/Math/MathML",sn=typeof document<"u"?document:null,Bl=sn&&sn.createElement("template"),wc={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const a=t==="svg"?sn.createElementNS(gc,e):t==="mathml"?sn.createElementNS(yc,e):n?sn.createElement(e,{is:n}):sn.createElement(e);return e==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:e=>sn.createTextNode(e),createComment:e=>sn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>sn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,a,r){const l=n?n.previousSibling:t.lastChild;if(a&&(a===r||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===r||!(a=a.nextSibling)););else{Bl.innerHTML=$i(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const s=Bl.content;if(o==="svg"||o==="mathml"){const i=s.firstChild;for(;i.firstChild;)s.appendChild(i.firstChild);s.removeChild(i)}t.insertBefore(s,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},bc=Symbol("_vtc");function kc(e,t,n){const o=e[bc];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Yl=Symbol("_vod"),_c=Symbol("_vsh"),Mi=Symbol("");function jn(e){const t=Vi();if(!t)return;const n=t.ut=(a=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(r=>Da(r,a))},o=()=>{const a=e(t.proxy);t.ce?Da(t.ce,a):Fr(t.subTree,a),n(a)};ni(()=>{qs(o)}),yt(()=>{nt(o,Ut,{flush:"post"});const a=new MutationObserver(o);a.observe(t.subTree.el.parentNode,{childList:!0}),Ya(()=>a.disconnect())})}function Fr(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Fr(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Da(e.el,t);else if(e.type===W)e.children.forEach(n=>Fr(n,t));else if(e.type===$o){let{el:n,anchor:o}=e;for(;n&&(Da(n,t),n!==o);)n=n.nextSibling}}function Da(e,t){if(e.nodeType===1){const n=e.style;let o="";for(const a in t)n.setProperty(`--${a}`,t[a]),o+=`--${a}: ${t[a]};`;n[Mi]=o}}const Cc=/(^|;)\s*display\s*:/;function Sc(e,t,n){const o=e.style,a=ze(n);let r=!1;if(n&&!a){if(t)if(ze(t))for(const l of t.split(";")){const s=l.slice(0,l.indexOf(":")).trim();n[s]==null&&ma(o,s,"")}else for(const l in t)n[l]==null&&ma(o,l,"");for(const l in n)l==="display"&&(r=!0),ma(o,l,n[l])}else if(a){if(t!==n){const l=o[Mi];l&&(n+=";"+l),o.cssText=n,r=Cc.test(n)}}else t&&e.removeAttribute("style");Yl in e&&(e[Yl]=r?o.display:"",e[_c]&&(o.display="none"))}const Ul=/\s*!important$/;function ma(e,t,n){if(ye(n))n.forEach(o=>ma(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=xc(e,t);Ul.test(n)?e.setProperty(xn(o),n.replace(Ul,""),"important"):e[o]=n}}const Ll=["Webkit","Moz","ms"],fr={};function xc(e,t){const n=fr[t];if(n)return n;let o=At(t);if(o!=="filter"&&o in e)return fr[t]=o;o=Fa(o);for(let a=0;a<Ll.length;a++){const r=Ll[a]+o;if(r in e)return fr[t]=r}return t}const Wl="http://www.w3.org/1999/xlink";function Jl(e,t,n,o,a,r=Tu(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Wl,t.slice(6,t.length)):e.setAttributeNS(Wl,t,n):n==null||r&&!Ss(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Wt(n)?String(n):n)}function ql(e,t,n,o,a){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?$i(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const s=r==="OPTION"?e.getAttribute("value")||"":e.value,i=n==null?e.type==="checkbox"?"on":"":String(n);(s!==i||!("_value"in e))&&(e.value=i),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const s=typeof e[t];s==="boolean"?n=Ss(n):n==null&&s==="string"?(n="",l=!0):s==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(a||t)}function kn(e,t,n,o){e.addEventListener(t,n,o)}function Vc(e,t,n,o){e.removeEventListener(t,n,o)}const Hl=Symbol("_vei");function Dc(e,t,n,o,a=null){const r=e[Hl]||(e[Hl]={}),l=r[t];if(o&&l)l.value=o;else{const[s,i]=jc(t);if(o){const u=r[t]=Nc(o,a);kn(e,s,u,i)}else l&&(Vc(e,s,l,i),r[t]=void 0)}}const zl=/(?:Once|Passive|Capture)$/;function jc(e){let t;if(zl.test(e)){t={};let o;for(;o=e.match(zl);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):xn(e.slice(2)),t]}let mr=0;const $c=Promise.resolve(),Mc=()=>mr||($c.then(()=>mr=0),mr=Date.now());function Nc(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;nn(Ac(o,n.value),t,5,[o])};return n.value=e,n.attached=Mc(),n}function Ac(e,t){if(ye(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>a=>!a._stopped&&o&&o(a))}else return t}const Kl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Tc=(e,t,n,o,a,r)=>{const l=a==="svg";t==="class"?kc(e,o,l):t==="style"?Sc(e,n,o):Ta(t)?Br(t)||Dc(e,t,n,o,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Oc(e,t,o,l))?(ql(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Jl(e,t,o,l,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ze(o))?ql(e,At(t),o,r,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Jl(e,t,o,l))};function Oc(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Kl(t)&&Ce(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Kl(t)&&ze(n)?!1:t in e}const Qn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ye(t)?n=>da(t,n):t};function Fc(e){e.target.composing=!0}function Gl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const fn=Symbol("_assign"),Ho={created(e,{modifiers:{lazy:t,trim:n,number:o}},a){e[fn]=Qn(a);const r=o||a.props&&a.props.type==="number";kn(e,t?"change":"input",l=>{if(l.target.composing)return;let s=e.value;n&&(s=s.trim()),r&&(s=ya(s)),e[fn](s)}),n&&kn(e,"change",()=>{e.value=e.value.trim()}),t||(kn(e,"compositionstart",Fc),kn(e,"compositionend",Gl),kn(e,"change",Gl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:a,number:r}},l){if(e[fn]=Qn(l),e.composing)return;const s=(r||e.type==="number")&&!/^0\d/.test(e.value)?ya(e.value):e.value,i=t??"";s!==i&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||a&&e.value.trim()===i)||(e.value=i))}},Ec={deep:!0,created(e,t,n){e[fn]=Qn(n),kn(e,"change",()=>{const o=e._modelValue,a=Po(e),r=e.checked,l=e[fn];if(ye(o)){const s=Lr(o,a),i=s!==-1;if(r&&!i)l(o.concat(a));else if(!r&&i){const u=[...o];u.splice(s,1),l(u)}}else if(oo(o)){const s=new Set(o);r?s.add(a):s.delete(a),l(s)}else l(Ni(e,r))})},mounted:Ql,beforeUpdate(e,t,n){e[fn]=Qn(n),Ql(e,t,n)}};function Ql(e,{value:t,oldValue:n},o){e._modelValue=t;let a;if(ye(t))a=Lr(t,o.props.value)>-1;else if(oo(t))a=t.has(o.props.value);else{if(t===n)return;a=Lo(t,Ni(e,!0))}e.checked!==a&&(e.checked=a)}const Ic={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const a=oo(t);kn(e,"change",()=>{const r=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?ya(Po(l)):Po(l));e[fn](e.multiple?a?new Set(r):r:r[0]),e._assigning=!0,$t(()=>{e._assigning=!1})}),e[fn]=Qn(o)},mounted(e,{value:t}){Xl(e,t)},beforeUpdate(e,t,n){e[fn]=Qn(n)},updated(e,{value:t}){e._assigning||Xl(e,t)}};function Xl(e,t){const n=e.multiple,o=ye(t);if(!(n&&!o&&!oo(t))){for(let a=0,r=e.options.length;a<r;a++){const l=e.options[a],s=Po(l);if(n)if(o){const i=typeof s;i==="string"||i==="number"?l.selected=t.some(u=>String(u)===String(s)):l.selected=Lr(t,s)>-1}else l.selected=t.has(s);else if(Lo(Po(l),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Po(e){return"_value"in e?e._value:e.value}function Ni(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Pc=["ctrl","shift","alt","meta"],Rc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Pc.some(n=>e[`${n}Key`]&&!t.includes(n))},Ht=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=(a,...r)=>{for(let l=0;l<t.length;l++){const s=Rc[t[l]];if(s&&s(a,t))return}return e(a,...r)})},Bc=ot({patchProp:Tc},wc);let Zl;function Yc(){return Zl||(Zl=Wd(Bc))}const lo=(...e)=>{const t=Yc().createApp(...e),{mount:n}=t;return t.mount=o=>{const a=Lc(o);if(!a)return;const r=t._component;!Ce(r)&&!r.render&&!r.template&&(r.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const l=n(a,!1,Uc(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),l},t};function Uc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Lc(e){return ze(e)?document.querySelector(e):e}const Wc={trailing:!0};function Jc(e,t=25,n={}){if(n={...Wc,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let o,a,r=[],l,s;const i=(u,c)=>(l=qc(e,u,c),l.finally(()=>{if(l=null,n.trailing&&s&&!a){const m=i(u,s);return s=null,m}}),l);return function(...u){return l?(n.trailing&&(s=u),l):new Promise(c=>{const m=!a&&n.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const h=n.leading?o:i(this,u);for(const p of r)p(h);r=[]},t),m?(o=i(this,u),c(o)):r.push(c)})}}async function qc(e,t,n){return await e.apply(t,n)}function Hc(){const e=te.moment.localeData();return{...e._config,ordinal:e._config.ordinal,meridiem:e._config.meridiem,meridiemParse:e._config.meridiemParse,dayOfMonthOrdinalParse:e._config.dayOfMonthOrdinalParse,isPM:e._config.isPM}}const Bn=te.moment.localeData(),pr=new Map([["o",String(Bn._config.dayOfMonthOrdinalParse).replace(String.raw`/\d{1,2}`,"").slice(0,-1)],["M","([1-9]|1[0-2])"],["MM","(0[1-9]|1[0-2])"],["MMM","("+Bn.monthsShort().join("|")+")"],["MMMM","("+Bn.months().join("|")+")"],["Q","[1-4]"],["D","[0-9]{1,2}"],["DD","[0-9]{2}"],["DDD","[1-9]{1,3}"],["DDDD","[1-9]{3}"],["d","[0-6]"],["dd","("+Bn.weekdaysMin().join("|")+")"],["ddd","("+Bn.weekdaysShort().join("|")+")"],["dddd","("+Bn.weekdays().join("|")+")"],["w","[0-9]{1,2}"],["ww","[0-9]{2}"],["W","[0-9]{1,2}"],["WW","[0-9]{2}"],["YY","[0-9]{2}"],["YYYY","[0-9]{4}"]]),zc=new Set(["o","M","Q","D","d","w","W","Y"]);function Kc(e){const t=[];let n="",o=0,a=!1,r="";for(const l of e)if(a)l==="]"?(t.push(r),a=!1,r=""):r+=l;else if(l==="[")a=!0;else if(zc.has(l))if(n===l)o++;else{if(o>0){const s=pr.get(n.repeat(o));s&&t.push(s)}o=1,n=l}else{if(o>0){const s=pr.get(n.repeat(o));s&&t.push(s),o=0,n=""}t.push(l)}if(o>0){const l=pr.get(n.repeat(o));l&&t.push(l),o=0,n=""}return new RegExp(t.join(""))}const Xn="custom-journal-locale",Zn={dow:0,doy:0};function Gc(){if(!te.moment.locales().includes(Xn)){const e=te.moment.locale(),t=Hc();Zn.dow=t.week.dow,Zn.doy=t.week.doy,te.moment.defineLocale(Xn,t),te.moment.locale(e)}}function Ai(e,t){return 7+e-t}function Ti(e,t){return 7+e-t}const ja=(e,t,n)=>{const o=te.moment.locale();te.moment.updateLocale(Xn,{week:{dow:e,doy:t}}),te.moment.locale(o),n&&te.moment.updateLocale(o,{week:{dow:e,doy:t}})},$a=e=>{const t=te.moment.locale();te.moment.updateLocale(Xn,Zn),te.moment.locale(t),e&&te.moment.updateLocale(t,Zn)};function X(e,t){const n=e?te.moment(e,t):te.moment();return n.locale(Xn),n}function Ne(){const e=te.moment();return e.locale(Xn),e.startOf("day")}function sl(e,t,n){const o=typeof t=="string"?X(t):t,a=typeof n=="string"?X(n):n;return o.isSame(a,e)}const Qc={day:Xc,week:Zc,month:ef,quarter:tf,year:nf};function Xc(e){const t=X(e);return t.calendar(Ne(),{lastWeek:"[Last] dddd",lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",sameElse:function(){return"["+t.from(Ne())+"]"}})}function Zc(e){const t=Ne(),n=X(e).diff(t,"week");switch(n){case 0:return"This week";case-1:return"Last week";case 1:return"Next week"}return n<0?`${Math.abs(n)} weeks ago`:`${n} weeks from now`}function ef(e){const t=Ne().startOf("month"),n=X(e).diff(t,"month");switch(n){case 0:return"This month";case-1:return"Last month";case 1:return"Next month"}return n<0?`${Math.abs(n)} months ago`:`${n} months from now`}function tf(e){const t=Ne().startOf("quarter"),n=X(e).diff(t,"quarter");switch(n){case 0:return"This quarter";case-1:return"Last quarter";case 1:return"Next quarter"}return n<0?`${Math.abs(n)} quarters ago`:`${n} quarters from now`}function nf(e){const t=Ne().startOf("year"),n=X(e).diff(t,"year");switch(n){case 0:return"This year";case-1:return"Last year";case 1:return"Next year"}return n<0?`${Math.abs(n)} years ago`:`${n} years from now`}function Oi(e,t){return Qc[e](t)}const Fi=[{name:"ISO 8601",description:`Week starts on Monday.
First week of year includes 1st Thursday (Jan 4th)`,used:"EU (exc. Portugal) and most of other European countries, most of Asia and Oceania",dow:1,doy:4},{name:"Western traditional",description:`Week starts on Sunday.
First week of year includes 1st Saturday (Jan 1st)`,used:"Canada, United States, Iceland, Portugal, Japan, Taiwan, Thailand, Hong Kong, Macau, Israel, Egypt, South Africa, the Philippines, and most of Latin America",dow:0,doy:6},{name:"Middle Eastern",description:`Week starts on Saturday.
First week of year includes 1st Friday (Jan 1st)`,used:"Much of the Middle East",dow:6,doy:12}];function Ei(e){let{dow:t,doy:n}=e;t===-1&&(t=te.moment().localeData().firstDayOfWeek(),n=te.moment().localeData().firstDayOfYear());const o=Fi.find(l=>l.dow===t&&l.doy===n);if(o)return o;const a=te.moment().locale("en").localeData().weekdays()[t],r=Ti(t,n);return{name:"custom",description:`Week starts on ${a}.
First week of year includes Jan ${r}`,used:"",dow:t,doy:n}}const of={key:0,class:"setting-item-info"},af={class:"setting-item-name"},rf={class:"setting-item-description"},lf={key:1,class:"setting-item-control"},M=B({__name:"ObsidianSetting",props:{name:{},description:{},heading:{type:Boolean},controlsOnly:{type:Boolean},noControls:{type:Boolean}},setup(e){return(t,n)=>(v(),C("div",{class:Dt(["setting-item",{"setting-item--heading":t.heading}])},[t.controlsOnly?Y("",!0):(v(),C("div",of,[g("div",af,[Ke(t.$slots,"name",{},()=>[k(P(t.name??""),1)])]),g("div",rf,[Ke(t.$slots,"description",{},()=>[k(P(t.description??""),1)])])])),t.noControls?Y("",!0):(v(),C("div",lf,[Ke(t.$slots,"default")]))],2))}}),sf=["disabled"],xe=B({__name:"ObsidianDropdown",props:Pt({disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Rt(e,"modelValue");return(n,o)=>Fn((v(),C("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),class:"dropdown",disabled:n.disabled},[Ke(n.$slots,"default")],8,sf)),[[Ic,t.value]])}}),uf=["aria-label"],He=B({__name:"ObsidianToggle",props:Pt({disabled:{type:Boolean},tooltip:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Rt(e,"modelValue");return(n,o)=>(v(),C("div",{class:Dt(["checkbox-container",{"is-enabled":t.value,"is-disabled":n.disabled}]),"aria-label":n.tooltip,onClick:o[0]||(o[0]=a=>t.value=!t.value)},o[1]||(o[1]=[g("input",{type:"checkbox",tabindex:"0"},null,-1)]),10,uf))}}),df=["aria-label"],cf=B({__name:"ObsidianIcon",props:{name:{},tooltip:{}},setup(e){const t=e,n=ce();yt(()=>{nt(()=>t.name,a=>o(a),{immediate:!0})});function o(a){if(n.value?.empty(),!a)return;const r=te.getIcon(a);r&&n.value&&n.value.append(r)}return(a,r)=>(v(),C("span",{ref_key:"element",ref:n,"aria-label":a.tooltip},null,8,df))}}),be=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},hn=be(cf,[["__scopeId","data-v-37c08292"]]),ff=["disabled","type","aria-label"],mf=B({__name:"ObsidianButton",props:{disabled:{type:Boolean},cta:{type:Boolean},warning:{type:Boolean},type:{},tooltip:{},flat:{type:Boolean}},setup(e){return(t,n)=>(v(),C("button",{class:Dt({"mod-cta":t.cta,"mod-warning":t.warning,"clickable-icon":t.flat&&!t.cta}),disabled:t.disabled,type:t.type??"button","aria-label":t.tooltip},[Ke(t.$slots,"default",{},void 0,!0)],10,ff))}}),ie=be(mf,[["__scopeId","data-v-ff188d28"]]),pf=B({__name:"ObsidianIconButton",props:{icon:{},tooltip:{}},setup(e){return(t,n)=>(v(),I(ie,{tooltip:t.tooltip,flat:"",class:"icon-button"},{default:f(()=>[d(hn,{name:t.icon},null,8,["name"])]),_:1},8,["tooltip"]))}}),ge=be(pf,[["__scopeId","data-v-3dd8502b"]]),rn="journal-calendar",we="YYYY-MM-DD",it="journal",qa="journal-date",Zt="journal-start-date",mn="journal-end-date",Ha="journal-index",En=Symbol(),Ii=Symbol(),vf=1*60*60*1e3,Pi={day:"D",week:"[W]w",month:"MMMM",quarter:"[Q]Q",year:"YYYY",custom:""};class Me extends te.Modal{constructor(t,n,o,a={},r){super(t.app),this.plugin=t,this.title=n,this.component=o,this.componentProps=a,this.customWidth=r,t.register(()=>{this.close()})}_vueApp;onOpen(){this.titleEl.setText(this.title),this.customWidth&&this.modalEl.setCssProps({"--dialog-width":`${this.customWidth}px`}),this._vueApp=lo(this.component,{onClose:()=>{this.close()},...this.componentProps}),this._vueApp.provide(En,this.plugin),this._vueApp.mount(this.contentEl)}onClose(){this._vueApp?.unmount(),this.contentEl.empty()}}const hf=B({__name:"RemoveJournal.modal",emits:["close","remove"],setup(e,{emit:t}){const n=t,o=ce("keep");function a(){n("remove",o.value),n("close")}return(r,l)=>(v(),C(W,null,[d(M,{name:"Journal notes",description:"What to do with notes connected to this journal"},{default:f(()=>[d(xe,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=s=>o.value=s)},{default:f(()=>l[2]||(l[2]=[g("option",{value:"keep"},"Keep",-1),g("option",{value:"clear"},"Clear journal data",-1),g("option",{value:"delete"},"Delete",-1)])),_:1},8,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:l[1]||(l[1]=s=>r.$emit("close"))},{default:f(()=>l[3]||(l[3]=[k("Cancel")])),_:1}),d(ie,{cta:"",onClick:a},{default:f(()=>l[4]||(l[4]=[k("Remove")])),_:1})]),_:1})],64))}});function he(){const e=Kn(En);if(!e)throw new Error("Plugin not provided or composable used outside of vue context");return e}const gf={class:"flair"},il=B({__name:"JournalSettingsList",props:{journals:{}},emits:["edit","bulk-add"],setup(e){const t=he();function n(o){new Me(t,`Remove ${o} journal`,hf,{onRemove(a){t.removeJournal(o,a).catch(console.error)}}).open()}return(o,a)=>o.journals.length===0?(v(),I(M,{key:0},{description:f(()=>a[0]||(a[0]=[k(" No journals created yet. ")])),_:1})):(v(!0),C(W,{key:1},_e(o.journals,r=>(v(),I(M,{key:r.name},{name:f(()=>[k(P(r.name)+" ",1),g("span",gf,P(r.type),1)]),default:f(()=>[d(ge,{icon:"import",tooltip:"Add existing notes to "+r.name,onClick:l=>o.$emit("bulk-add",r.name)},null,8,["tooltip","onClick"]),d(ge,{icon:"pencil",tooltip:"Edit "+r.name,onClick:l=>o.$emit("edit",r.name)},null,8,["tooltip","onClick"]),d(ge,{icon:"trash-2",tooltip:"Delete "+r.name,onClick:l=>n(r.name)},null,8,["tooltip","onClick"])]),_:2},1024))),128))}}),yf=["placeholder","disabled"],qe=B({__name:"ObsidianTextInput",props:Pt({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Rt(e,"modelValue");return(n,o)=>Fn((v(),C("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),type:"text",placeholder:n.placeholder,disabled:n.disabled,spellcheck:"false"},null,8,yf)),[[Ho,t.value]])}});/**
  * vee-validate v4.13.2
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function Bt(e){return typeof e=="function"}function Ri(e){return e==null}const eo=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function ul(e){return Number(e)>=0}function wf(e){return typeof e=="object"&&e!==null}function bf(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function es(e){if(!wf(e)||bf(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ro(e,t){return Object.keys(t).forEach(n=>{if(es(t[n])&&es(e[n])){e[n]||(e[n]={}),Ro(e[n],t[n]);return}e[n]=t[n]}),e}function aa(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let o=1;o<t.length;o++){if(ul(t[o])){n+=`[${t[o]}]`;continue}n+=`.${t[o]}`}return n}const kf={};function _f(e){return kf[e]}function ts(e,t,n){typeof n.value=="object"&&(n.value=Le(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Le(e){if(typeof e!="object")return e;var t=0,n,o,a,r=Object.prototype.toString.call(e);if(r==="[object Object]"?a=Object.create(e.__proto__||null):r==="[object Array]"?a=Array(e.length):r==="[object Set]"?(a=new Set,e.forEach(function(l){a.add(Le(l))})):r==="[object Map]"?(a=new Map,e.forEach(function(l,s){a.set(Le(s),Le(l))})):r==="[object Date]"?a=new Date(+e):r==="[object RegExp]"?a=new RegExp(e.source,e.flags):r==="[object DataView]"?a=new e.constructor(Le(e.buffer)):r==="[object ArrayBuffer]"?a=e.slice(0):r.slice(-6)==="Array]"&&(a=new e.constructor(e)),a){for(o=Object.getOwnPropertySymbols(e);t<o.length;t++)ts(a,o[t],Object.getOwnPropertyDescriptor(e,o[t]));for(t=0,o=Object.getOwnPropertyNames(e);t<o.length;t++)Object.hasOwnProperty.call(a,n=o[t])&&a[n]===e[n]||ts(a,n,Object.getOwnPropertyDescriptor(e,n))}return a||e}const Cf=Symbol("vee-validate-form"),Sf=typeof window<"u";function xf(e){return Bt(e)&&!!e.__locatorRef}function _n(e){return!!e&&Bt(e.parse)&&e.__type==="VVTypedSchema"}function Bi(e){return!!e&&Bt(e.validate)}function Vf(e){return e==="checkbox"||e==="radio"}function Df(e){return eo(e)||Array.isArray(e)}function jf(e){return Array.isArray(e)?e.length===0:eo(e)&&Object.keys(e).length===0}function zo(e){return/^\[.+\]$/i.test(e)}function $f(e){return Yi(e)&&e.multiple}function Yi(e){return e.tagName==="SELECT"}function Mf(e){return Ui(e)&&e.target&&"submit"in e.target}function Ui(e){return e?!!(typeof Event<"u"&&Bt(Event)&&e instanceof Event||e&&e.srcElement):!1}function No(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,o,a;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!No(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!No(o[1],t.get(o[0])))return!1;return!0}if(ns(e)&&ns(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();for(a=Object.keys(e),n=a.length,o=n;o--!==0;){var r=a[o];if(!No(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function ns(e){return Sf?e instanceof File:!1}function za(e){return zo(e)?e.replace(/\[|\]/gi,""):e}function cn(e,t,n){return e?zo(t)?e[za(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((a,r)=>Df(a)&&r in a?a[r]:n,e):n}function ln(e,t,n){if(zo(t)){e[za(t)]=n;return}const o=t.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let r=0;r<o.length;r++){if(r===o.length-1){a[o[r]]=n;return}(!(o[r]in a)||Ri(a[o[r]]))&&(a[o[r]]=ul(o[r+1])?[]:{}),a=a[o[r]]}}function vr(e,t){if(Array.isArray(e)&&ul(t)){e.splice(Number(t),1);return}eo(e)&&delete e[t]}function os(e,t){if(zo(t)){delete e[za(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let o=e;for(let r=0;r<n.length;r++){if(r===n.length-1){vr(o,n[r]);break}if(!(n[r]in o)||Ri(o[n[r]]))break;o=o[n[r]]}const a=n.map((r,l)=>cn(e,n.slice(0,l).join(".")));for(let r=a.length-1;r>=0;r--)if(jf(a[r])){if(r===0){vr(e,n[0]);continue}vr(a[r-1],n[r-1])}}function Ft(e){return Object.keys(e)}function as(e,t=0){let n=null,o=[];return function(...a){return n&&clearTimeout(n),n=setTimeout(()=>{const r=e(...a);o.forEach(l=>l(r)),o=[]},t),new Promise(r=>o.push(r))}}function Nf(e,t){let n;return async function(...a){const r=e(...a);n=r;const l=await r;return r!==n?l:(n=void 0,t(l,a))}}function rs(e){return Array.isArray(e)?e:e?[e]:[]}function ra(e,t){const n={};for(const o in e)t.includes(o)||(n[o]=e[o]);return n}function Af(e){let t=null,n=[];return function(...o){const a=$t(()=>{if(t!==a)return;const r=e(...o);n.forEach(l=>l(r)),n=[],t=null});return t=a,new Promise(r=>n.push(r))}}function hr(e){if(Li(e))return e._value}function Li(e){return"_value"in e}function Tf(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function ls(e){if(!Ui(e))return e;const t=e.target;if(Vf(t.type)&&Li(t))return hr(t);if(t.type==="file"&&t.files){const n=Array.from(t.files);return t.multiple?n:n[0]}if($f(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map(hr);if(Yi(t)){const n=Array.from(t.options).find(o=>o.selected);return n?hr(n):t.value}return Tf(t)}function Of(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?eo(e)&&e._$$isNormalized?e:eo(e)?Object.keys(e).reduce((n,o)=>{const a=Ff(e[o]);return e[o]!==!1&&(n[o]=ss(a)),n},t):typeof e!="string"?t:e.split("|").reduce((n,o)=>{const a=Ef(o);return a.name&&(n[a.name]=ss(a.params)),n},t):t}function Ff(e){return e===!0?[]:Array.isArray(e)||eo(e)?e:[e]}function ss(e){const t=n=>typeof n=="string"&&n[0]==="@"?If(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,o)=>(n[o]=t(e[o]),n),{})}const Ef=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function If(e){const t=n=>cn(n,e)||n[e];return t.__locatorRef=e,t}const Pf={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Rf=Object.assign({},Pf);const _o=()=>Rf;async function Bf(e,t,n={}){const o=n?.bails,a={name:n?.name||"{field}",rules:t,label:n?.label,bails:o??!0,formData:n?.values||{}},r=await Yf(a,e);return Object.assign(Object.assign({},r),{valid:!r.errors.length})}async function Yf(e,t){const n=e.rules;if(_n(n)||Bi(n))return Lf(t,Object.assign(Object.assign({},e),{rules:n}));if(Bt(n)||Array.isArray(n)){const s={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},i=Array.isArray(n)?n:[n],u=i.length,c=[];for(let m=0;m<u;m++){const h=i[m],p=await h(t,s);if(!(typeof p!="string"&&!Array.isArray(p)&&p)){if(Array.isArray(p))c.push(...p);else{const y=typeof p=="string"?p:Ji(s);c.push(y)}if(e.bails)return{errors:c}}}return{errors:c}}const o=Object.assign(Object.assign({},e),{rules:Of(n)}),a=[],r=Object.keys(o.rules),l=r.length;for(let s=0;s<l;s++){const i=r[s],u=await Wf(o,t,{name:i,params:o.rules[i]});if(u.error&&(a.push(u.error),e.bails))return{errors:a}}return{errors:a}}function Uf(e){return!!e&&e.name==="ValidationError"}function Wi(e){return{__type:"VVTypedSchema",async parse(n,o){var a;try{return{output:await e.validate(n,{abortEarly:!1,context:o?.formData||{}}),errors:[]}}catch(r){if(!Uf(r))throw r;if(!(!((a=r.inner)===null||a===void 0)&&a.length)&&r.errors.length)return{errors:[{path:r.path,errors:r.errors}]};const l=r.inner.reduce((s,i)=>{const u=i.path||"";return s[u]||(s[u]={errors:[],path:u}),s[u].errors.push(...i.errors),s},{});return{errors:Object.values(l)}}}}}async function Lf(e,t){const o=await(_n(t.rules)?t.rules:Wi(t.rules)).parse(e,{formData:t.formData}),a=[];for(const r of o.errors)r.errors.length&&a.push(...r.errors);return{value:o.value,errors:a}}async function Wf(e,t,n){const o=_f(n.name);if(!o)throw new Error(`No such validator '${n.name}' exists.`);const a=Jf(n.params,e.formData),r={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:a})},l=await o(t,a,r);return typeof l=="string"?{error:l}:{error:l?void 0:Ji(r)}}function Ji(e){const t=_o().generateMessage;return t?t(e):"Field is invalid"}function Jf(e,t){const n=o=>xf(o)?o(t):o;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((o,a)=>(o[a]=n(e[a]),o),{})}async function qf(e,t){const o=await(_n(e)?e:Wi(e)).parse(Le(t)),a={},r={};for(const l of o.errors){const s=l.errors,i=(l.path||"").replace(/\["(\d+)"\]/g,(u,c)=>`[${c}]`);a[i]={valid:!s.length,errors:s},s.length&&(r[i]=s[0])}return{valid:!o.errors.length,results:a,errors:r,values:o.value,source:"schema"}}async function Hf(e,t,n){const a=Ft(e).map(async u=>{var c,m,h;const p=(c=n?.names)===null||c===void 0?void 0:c[u],_=await Bf(cn(t,u),e[u],{name:p?.name||u,label:p?.label,values:t,bails:(h=(m=n?.bailsMap)===null||m===void 0?void 0:m[u])!==null&&h!==void 0?h:!0});return Object.assign(Object.assign({},_),{path:u})});let r=!0;const l=await Promise.all(a),s={},i={};for(const u of l)s[u.path]={valid:u.valid,errors:u.errors},u.valid||(r=!1,i[u.path]=u.errors[0]);return{valid:r,results:s,errors:i,source:"schema"}}let zf=0;const la=["bails","fieldsCount","id","multiple","type","validate"];function qi(e){const t=e?.initialValues||{},n=Object.assign({},We(t)),o=b(e?.validationSchema);return o&&_n(o)&&Bt(o.cast)?Le(o.cast(n)||{}):Le(n)}function gn(e){var t;const n=zf++;let o=0;const a=ce(!1),r=ce(!1),l=ce(0),s=[],i=pn(qi(e)),u=ce([]),c=ce({}),m=ce({}),h=Af(()=>{m.value=u.value.reduce(($,j)=>($[aa(We(j.path))]=j,$),{})});function p($,j){const R=G($);if(!R){typeof $=="string"&&(c.value[aa($)]=rs(j));return}if(typeof $=="string"){const oe=aa($);c.value[oe]&&delete c.value[oe]}R.errors=rs(j),R.valid=!R.errors.length}function _($){Ft($).forEach(j=>{p(j,$[j])})}e?.initialErrors&&_(e.initialErrors);const y=w(()=>{const $=u.value.reduce((j,R)=>(R.errors.length&&(j[R.path]=R.errors),j),{});return Object.assign(Object.assign({},c.value),$)}),x=w(()=>Ft(y.value).reduce(($,j)=>{const R=y.value[j];return R?.length&&($[j]=R[0]),$},{})),T=w(()=>u.value.reduce(($,j)=>($[j.path]={name:j.path||"",label:j.label||""},$),{})),O=w(()=>u.value.reduce(($,j)=>{var R;return $[j.path]=(R=j.bails)!==null&&R!==void 0?R:!0,$},{})),ee=Object.assign({},e?.initialErrors||{}),N=(t=e?.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:A,originalInitialValues:re,setInitialValues:le}=Gf(u,i,e),U=Kf(u,i,re,x),se=w(()=>u.value.reduce(($,j)=>{const R=cn(i,j.path);return ln($,j.path,R),$},{})),De=e?.validationSchema;function Ee($,j){var R,oe;const me=w(()=>cn(A.value,We($))),Ve=m.value[We($)],ue=j?.type==="checkbox"||j?.type==="radio";if(Ve&&ue){Ve.multiple=!0;const Tt=o++;return Array.isArray(Ve.id)?Ve.id.push(Tt):Ve.id=[Ve.id,Tt],Ve.fieldsCount++,Ve.__flags.pendingUnmount[Tt]=!1,Ve}const $e=w(()=>cn(i,We($))),Je=We($),at=z.findIndex(Tt=>Tt===Je);at!==-1&&z.splice(at,1);const Ue=w(()=>{var Tt,mo,tr,nr;const or=We(De);if(_n(or))return(mo=(Tt=or.describe)===null||Tt===void 0?void 0:Tt.call(or,We($)).required)!==null&&mo!==void 0?mo:!1;const ar=We(j?.schema);return _n(ar)&&(nr=(tr=ar.describe)===null||tr===void 0?void 0:tr.call(ar).required)!==null&&nr!==void 0?nr:!1}),rt=o++,bt=pn({id:rt,path:$,touched:!1,pending:!1,valid:!0,validated:!!(!((R=ee[Je])===null||R===void 0)&&R.length),required:Ue,initialValue:me,errors:Qr([]),bails:(oe=j?.bails)!==null&&oe!==void 0?oe:!1,label:j?.label,type:j?.type||"default",value:$e,multiple:!1,__flags:{pendingUnmount:{[rt]:!1},pendingReset:!1},fieldsCount:1,validate:j?.validate,dirty:w(()=>!No(b($e),b(me)))});return u.value.push(bt),m.value[Je]=bt,h(),x.value[Je]&&!ee[Je]&&$t(()=>{Q(Je,{mode:"silent"})}),de($)&&nt($,Tt=>{h();const mo=Le($e.value);m.value[Tt]=bt,$t(()=>{ln(i,Tt,mo)})}),bt}const wt=as(ae,5),ut=as(ae,5),Qe=Nf(async $=>await($==="silent"?wt():ut()),($,[j])=>{const R=Ft(ct.errorBag.value),me=[...new Set([...Ft($.results),...u.value.map(Ve=>Ve.path),...R])].sort().reduce((Ve,ue)=>{var $e;const Je=ue,at=G(Je)||fe(Je),Ue=(($e=$.results[Je])===null||$e===void 0?void 0:$e.errors)||[],rt=We(at?.path)||Je,bt=Qf({errors:Ue,valid:!Ue.length},Ve.results[rt]);return Ve.results[rt]=bt,bt.valid||(Ve.errors[rt]=bt.errors[0]),at&&c.value[rt]&&delete c.value[rt],at?(at.valid=bt.valid,j==="silent"||j==="validated-only"&&!at.validated||p(at,bt.errors),Ve):(p(rt,Ue),Ve)},{valid:$.valid,results:{},errors:{},source:$.source});return $.values&&(me.values=$.values,me.source=$.source),Ft(me.results).forEach(Ve=>{var ue;const $e=G(Ve);$e&&j!=="silent"&&(j==="validated-only"&&!$e.validated||p($e,(ue=me.results[Ve])===null||ue===void 0?void 0:ue.errors))}),me});function Ie($){u.value.forEach($)}function G($){const j=typeof $=="string"?aa($):$;return typeof j=="string"?m.value[j]:j}function fe($){return u.value.filter(R=>$.startsWith(R.path)).reduce((R,oe)=>R?oe.path.length>R.path.length?oe:R:oe,void 0)}let z=[],F;function V($){return z.push($),F||(F=$t(()=>{[...z].sort().reverse().forEach(R=>{os(i,R)}),z=[],F=null})),F}function K($){return function(R,oe){return function(Ve){return Ve instanceof Event&&(Ve.preventDefault(),Ve.stopPropagation()),Ie(ue=>ue.touched=!0),a.value=!0,l.value++,ne().then(ue=>{const $e=Le(i);if(ue.valid&&typeof R=="function"){const Je=Le(se.value);let at=$?Je:$e;return ue.values&&(at=ue.source==="schema"?ue.values:Object.assign({},at,ue.values)),R(at,{evt:Ve,controlledValues:Je,setErrors:_,setFieldError:p,setTouched:q,setFieldTouched:fo,setValues:Pn,setFieldValue:jt,resetForm:J,resetField:L})}!ue.valid&&typeof oe=="function"&&oe({values:$e,evt:Ve,errors:ue.errors,results:ue.results})}).then(ue=>(a.value=!1,ue),ue=>{throw a.value=!1,ue})}}}const dt=K(!1);dt.withControlled=K(!0);function In($,j){const R=u.value.findIndex(me=>me.path===$&&(Array.isArray(me.id)?me.id.includes(j):me.id===j)),oe=u.value[R];if(!(R===-1||!oe)){if($t(()=>{Q($,{mode:"silent",warn:!1})}),oe.multiple&&oe.fieldsCount&&oe.fieldsCount--,Array.isArray(oe.id)){const me=oe.id.indexOf(j);me>=0&&oe.id.splice(me,1),delete oe.__flags.pendingUnmount[j]}(!oe.multiple||oe.fieldsCount<=0)&&(u.value.splice(R,1),Z($),h(),delete m.value[$])}}function er($){Ft(m.value).forEach(j=>{j.startsWith($)&&delete m.value[j]}),u.value=u.value.filter(j=>!j.path.startsWith($)),$t(()=>{h()})}const ct={formId:n,values:i,controlledValues:se,errorBag:y,errors:x,schema:De,submitCount:l,meta:U,isSubmitting:a,isValidating:r,fieldArrays:s,keepValuesOnUnmount:N,validateSchema:b(De)?Qe:void 0,validate:ne,setFieldError:p,validateField:Q,setFieldValue:jt,setValues:Pn,setErrors:_,setFieldTouched:fo,setTouched:q,resetForm:J,resetField:L,handleSubmit:dt,useFieldModel:je,defineInputBinds:Pe,defineComponentBinds:Ae,defineField:ke,stageInitialValue:H,unsetInitialValue:Z,setFieldInitialValue:ve,createPathState:Ee,getPathState:G,unsetPathValue:V,removePathState:In,initialValues:A,getAllPathStates:()=>u.value,destroyPath:er,isFieldTouched:S,isFieldDirty:D,isFieldValid:E};function jt($,j,R=!0){const oe=Le(j),me=typeof $=="string"?$:$.path;G(me)||Ee(me),ln(i,me,oe),R&&Q(me)}function co($,j=!0){Ft(i).forEach(R=>{delete i[R]}),Ft($).forEach(R=>{jt(R,$[R],!1)}),j&&ne()}function Pn($,j=!0){Ro(i,$),s.forEach(R=>R&&R.reset()),j&&ne()}function on($,j){const R=G(We($))||Ee($);return w({get(){return R.value},set(oe){var me;const Ve=We($);jt(Ve,oe,(me=We(j))!==null&&me!==void 0?me:!1)}})}function fo($,j){const R=G($);R&&(R.touched=j)}function S($){const j=G($);return j?j.touched:u.value.filter(R=>R.path.startsWith($)).some(R=>R.touched)}function D($){const j=G($);return j?j.dirty:u.value.filter(R=>R.path.startsWith($)).some(R=>R.dirty)}function E($){const j=G($);return j?j.valid:u.value.filter(R=>R.path.startsWith($)).every(R=>R.valid)}function q($){if(typeof $=="boolean"){Ie(j=>{j.touched=$});return}Ft($).forEach(j=>{fo(j,!!$[j])})}function L($,j){var R;const oe=j&&"value"in j?j.value:cn(A.value,$),me=G($);me&&(me.__flags.pendingReset=!0),ve($,Le(oe),!0),jt($,oe,!1),fo($,(R=j?.touched)!==null&&R!==void 0?R:!1),p($,j?.errors||[]),$t(()=>{me&&(me.__flags.pendingReset=!1)})}function J($,j){let R=Le($?.values?$.values:re.value);R=j?.force?R:Ro(re.value,R),R=_n(De)&&Bt(De.cast)?De.cast(R):R,le(R,{force:j?.force}),Ie(oe=>{var me;oe.__flags.pendingReset=!0,oe.validated=!1,oe.touched=((me=$?.touched)===null||me===void 0?void 0:me[oe.path])||!1,jt(oe.path,cn(R,oe.path),!1),p(oe.path,void 0)}),j?.force?co(R,!1):Pn(R,!1),_($?.errors||{}),l.value=$?.submitCount||0,$t(()=>{ne({mode:"silent"}),Ie(oe=>{oe.__flags.pendingReset=!1})})}async function ne($){const j=$?.mode||"force";if(j==="force"&&Ie(ue=>ue.validated=!0),ct.validateSchema)return ct.validateSchema(j);r.value=!0;const R=await Promise.all(u.value.map(ue=>ue.validate?ue.validate($).then($e=>({key:ue.path,valid:$e.valid,errors:$e.errors,value:$e.value})):Promise.resolve({key:ue.path,valid:!0,errors:[],value:void 0})));r.value=!1;const oe={},me={},Ve={};for(const ue of R)oe[ue.key]={valid:ue.valid,errors:ue.errors},ue.value&&ln(Ve,ue.key,ue.value),ue.errors.length&&(me[ue.key]=ue.errors[0]);return{valid:R.every(ue=>ue.valid),results:oe,errors:me,values:Ve,source:"fields"}}async function Q($,j){var R;const oe=G($);if(oe&&j?.mode!=="silent"&&(oe.validated=!0),De){const{results:me}=await Qe(j?.mode||"validated-only");return me[$]||{errors:[],valid:!0}}return oe?.validate?oe.validate(j):(!oe&&(R=j?.warn),Promise.resolve({errors:[],valid:!0}))}function Z($){os(A.value,$)}function H($,j,R=!1){ve($,j),ln(i,$,j),R&&!e?.initialValues&&ln(re.value,$,Le(j))}function ve($,j,R=!1){ln(A.value,$,Le(j)),R&&ln(re.value,$,Le(j))}async function ae(){const $=b(De);if(!$)return{valid:!0,results:{},errors:{},source:"none"};r.value=!0;const j=Bi($)||_n($)?await qf($,i):await Hf($,i,{names:T.value,bailsMap:O.value});return r.value=!1,j}const pe=dt(($,{evt:j})=>{Mf(j)&&j.target.submit()});yt(()=>{if(e?.initialErrors&&_(e.initialErrors),e?.initialTouched&&q(e.initialTouched),e?.validateOnMount){ne();return}ct.validateSchema&&ct.validateSchema("silent")}),de(De)&&nt(De,()=>{var $;($=ct.validateSchema)===null||$===void 0||$.call(ct,"validated-only")}),tl(Cf,ct);function ke($,j){const R=Bt(j)?void 0:j?.label,oe=G(We($))||Ee($,{label:R}),me=()=>Bt(j)?j(ra(oe,la)):j||{};function Ve(){var Ue;oe.touched=!0,((Ue=me().validateOnBlur)!==null&&Ue!==void 0?Ue:_o().validateOnBlur)&&Q(oe.path)}function ue(){var Ue;((Ue=me().validateOnInput)!==null&&Ue!==void 0?Ue:_o().validateOnInput)&&$t(()=>{Q(oe.path)})}function $e(){var Ue;((Ue=me().validateOnChange)!==null&&Ue!==void 0?Ue:_o().validateOnChange)&&$t(()=>{Q(oe.path)})}const Je=w(()=>{const Ue={onChange:$e,onInput:ue,onBlur:Ve};return Bt(j)?Object.assign(Object.assign({},Ue),j(ra(oe,la)).props||{}):j?.props?Object.assign(Object.assign({},Ue),j.props(ra(oe,la))):Ue});return[on($,()=>{var Ue,rt,bt;return(bt=(Ue=me().validateOnModelUpdate)!==null&&Ue!==void 0?Ue:(rt=_o())===null||rt===void 0?void 0:rt.validateOnModelUpdate)!==null&&bt!==void 0?bt:!0}),Je]}function je($){return Array.isArray($)?$.map(j=>on(j,!0)):on($)}function Pe($,j){const[R,oe]=ke($,j);function me(){oe.value.onBlur()}function Ve($e){const Je=ls($e);jt(We($),Je,!1),oe.value.onInput()}function ue($e){const Je=ls($e);jt(We($),Je,!1),oe.value.onChange()}return w(()=>Object.assign(Object.assign({},oe.value),{onBlur:me,onInput:Ve,onChange:ue,value:R.value}))}function Ae($,j){const[R,oe]=ke($,j),me=G(We($));function Ve(ue){R.value=ue}return w(()=>{const ue=Bt(j)?j(ra(me,la)):j||{};return Object.assign({[ue.model||"modelValue"]:R.value,[`onUpdate:${ue.model||"modelValue"}`]:Ve},oe.value)})}return Object.assign(Object.assign({},ct),{values:zr(i),handleReset:()=>J(),submitForm:pe})}function Kf(e,t,n,o){const a={touched:"some",pending:"some",valid:"every"},r=w(()=>!No(t,b(n)));function l(){const i=e.value;return Ft(a).reduce((u,c)=>{const m=a[c];return u[c]=i[m](h=>h[c]),u},{})}const s=pn(l());return ro(()=>{const i=l();s.touched=i.touched,s.valid=i.valid,s.pending=i.pending}),w(()=>Object.assign(Object.assign({initialValues:b(n)},s),{valid:s.valid&&!Ft(o.value).length,dirty:r.value}))}function Gf(e,t,n){const o=qi(n),a=ce(o),r=ce(Le(o));function l(s,i){i?.force?(a.value=Le(s),r.value=Le(s)):(a.value=Ro(Le(a.value)||{},Le(s)),r.value=Ro(Le(r.value)||{},Le(s))),i?.updateFields&&e.value.forEach(u=>{if(u.touched)return;const m=cn(a.value,u.path);ln(t,u.path,Le(m))})}return{initialValues:a,originalInitialValues:r,setInitialValues:l}}function Qf(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}var gr;function Hi(e){return{lang:e?.lang??gr?.lang,message:e?.message,abortEarly:e?.abortEarly??gr?.abortEarly,abortPipeEarly:e?.abortPipeEarly??gr?.abortPipeEarly}}function Xf(e){if(e.path){let t="";for(const n of e.path)if("key"in n&&(typeof n.key=="string"||typeof n.key=="number"))t?t+=`.${n.key}`:t+=n.key;else return null;return t}return null}function zi(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Ki(e,...t){const n={kind:"schema",type:"optional",reference:Ki,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(o,a){return o.value===void 0&&("default"in this&&(o.value=zi(this,o,a)),o.value===void 0)?(o.typed=!0,o):this.wrapped._run(o,a)}};return 0 in t&&(n.default=t[0]),n}function Zf(e,t,n){const o=e._run({typed:!1,value:t},Hi(n));return{typed:o.typed,success:!o.issues,output:o.value,issues:o.issues}}async function em(e,t,n){const o=await e._run({typed:!1,value:t},Hi(n));return{typed:o.typed,success:!o.issues,output:o.value,issues:o.issues}}/**
  * vee-validate v4.13.2
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */const Ma=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Gi(e){return Number(e)>=0}function tm(e){return typeof e=="object"&&e!==null}function nm(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function is(e){if(!tm(e)||nm(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Qi(e,t){return Object.keys(t).forEach(n=>{if(is(t[n])&&is(e[n])){e[n]||(e[n]={}),Qi(e[n],t[n]);return}e[n]=t[n]}),e}function om(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let o=1;o<t.length;o++){if(Gi(t[o])){n+=`[${t[o]}]`;continue}n+=`.${t[o]}`}return n}function yn(e){return{__type:"VVTypedSchema",async parse(n){const o=await em(e,n);if(o.success)return{value:o.output,errors:[]};const a={};return Xi(o.issues,a),{errors:Object.values(a)}},cast(n){if(e.async)return n;const o=Zf(e,n);if(o.success)return o.output;const a=zi(Ki(e));return Ma(a)&&Ma(n)?Qi(a,n):n},describe(n){try{if(!n)return{required:!us(e),exists:!0};const o=am(n,e);return o?{required:!us(o),exists:!0}:{required:!1,exists:!1}}catch{return{required:!1,exists:!1}}}}}function Xi(e,t){e.forEach(n=>{const o=om(Xf(n)||"");n.issues&&(Xi(n.issues.flatMap(a=>a.issues||[]),t),!o)||(t[o]||(t[o]={errors:[],path:o}),t[o].errors.push(n.message))})}function am(e,t){if(!ds(t))return null;if(zo(e))return t.entries[za(e)];const n=(e||"").split(/\.|\[(\d+)\]/).filter(Boolean);let o=t;for(let a=0;a<=n.length;a++){const r=n[a];if(!r||!o)return o;if(ds(o)){o=o.entries[r]||null;continue}Gi(r)&&rm(o)&&(o=o.item)}return null}function us(e){return e.type==="optional"}function rm(e){return Ma(e)&&"item"in e}function ds(e){return Ma(e)&&"entries"in e}var lm;function sm(e){return lm?.get(e)}var im;function um(e){return im?.get(e)}var dm;function cm(e,t){return dm?.get(e)?.get(t)}function dl(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function Jt(e,t,n,o,a){const r=a&&"input"in a?a.input:n.value,l=a?.expected??e.expects??null,s=a?.received??dl(r),i={kind:e.kind,type:e.type,input:r,expected:l,received:s,message:`Invalid ${t}: ${l?`Expected ${l} but r`:"R"}eceived ${s}`,requirement:e.requirement,path:a?.path,issues:a?.issues,lang:o.lang,abortEarly:o.abortEarly,abortPipeEarly:o.abortPipeEarly},u=e.kind==="schema",c=a?.message??e.message??cm(e.reference,i.lang)??(u?um(i.lang):null)??o.message??sm(i.lang);c&&(i.message=typeof c=="function"?c(i):c),u&&(n.typed=!1),n.issues?n.issues.push(i):n.issues=[i]}function Zi(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}function so(e,t){return{kind:"validation",type:"check",reference:so,async:!1,expects:null,requirement:e,message:t,_run(n,o){return n.typed&&!this.requirement(n.value)&&Jt(this,"input",n,o),n}}}function qt(e){return{kind:"validation",type:"non_empty",reference:qt,async:!1,expects:"!0",message:e,_run(t,n){return t.typed&&t.value.length===0&&Jt(this,"length",t,n,{received:"0"}),t}}}function fm(e,t){if(e.issues)for(const n of t)for(const o of e.issues){let a=!1;const r=Math.min(n.length,o.path?.length??0);for(let l=0;l<r;l++)if(n[l]!==o.path[l].key){a=!0;break}if(!a)return!1}return!0}function io(e,t,n){return{kind:"validation",type:"partial_check",reference:io,async:!1,expects:null,requirement:t,message:n,_run(o,a){return fm(o,e)&&!this.requirement(o.value)&&Jt(this,"input",o,a),o}}}function Ko(e,t){return{...e,_run(n,o){const a=n.issues&&[...n.issues];if(e._run(n,o),n.issues){for(const r of n.issues)if(!a?.includes(r)){let l=n.value;for(const s of t){const i=l[s],u={type:"unknown",origin:"value",input:l,key:s,value:i};if(r.path?r.path.push(u):r.path=[u],!i)break;l=i}}}return n}}}function en(e){return{kind:"schema",type:"boolean",reference:en,expects:"boolean",async:!1,message:e,_run(t,n){return typeof t.value=="boolean"?t.typed=!0:Jt(this,"type",t,n),t}}}function pa(e,t){return{kind:"schema",type:"literal",reference:pa,expects:dl(e),async:!1,literal:e,message:t,_run(n,o){return n.value===this.literal?n.typed=!0:Jt(this,"type",n,o),n}}}function cl(e){return{kind:"schema",type:"number",reference:cl,expects:"number",async:!1,message:e,_run(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:Jt(this,"type",t,n),t}}}function Nt(e,t){return{kind:"schema",type:"object",reference:Nt,expects:"Object",async:!1,entries:e,message:t,_run(n,o){const a=n.value;if(a&&typeof a=="object"){n.typed=!0,n.value={};for(const r in this.entries){const l=a[r],s=this.entries[r]._run({typed:!1,value:l},o);if(s.issues){const i={type:"object",origin:"value",input:a,key:r,value:l};for(const u of s.issues)u.path?u.path.unshift(i):u.path=[i],n.issues?.push(u);if(n.issues||(n.issues=s.issues),o.abortEarly){n.typed=!1;break}}s.typed||(n.typed=!1),(s.value!==void 0||r in a)&&(n.value[r]=s.value)}}else Jt(this,"type",n,o);return n}}}function ht(e,t){return{kind:"schema",type:"picklist",reference:ht,expects:Zi(e.map(dl),"|"),async:!1,options:e,message:t,_run(n,o){return this.options.includes(n.value)?n.typed=!0:Jt(this,"type",n,o),n}}}function Ge(e){return{kind:"schema",type:"string",reference:Ge,expects:"string",async:!1,message:e,_run(t,n){return typeof t.value=="string"?t.typed=!0:Jt(this,"type",t,n),t}}}function eu(e,t,n){return{kind:"schema",type:"variant",reference:eu,expects:"Object",async:!1,key:e,options:t,message:n,_run(o,a){const r=o.value;if(r&&typeof r=="object"){let l,s=0,i=this.key,u=[];const c=(m,h)=>{for(const p of m.options){if(p.type==="variant")c(p,new Set(h).add(p.key));else{let _=!0,y=0;for(const x of h){if(p.entries[x]._run({typed:!1,value:r[x]},a).issues){_=!1,i!==x&&(s<y||s===y&&x in r&&!(i in r))&&(s=y,i=x,u=[]),i===x&&u.push(p.entries[x].expects);break}y++}if(_){const x=p._run({typed:!1,value:r},a);(!l||!l.typed&&x.typed)&&(l=x)}}if(l&&!l.issues)break}};if(c(this,new Set([this.key])),l)return l;Jt(this,"type",o,a,{input:r[i],expected:Zi(u,"|"),path:[{type:"object",origin:"value",input:r,key:i,value:r[i]}]})}else Jt(this,"type",o,a);return o}}}function gt(...e){return{...e[0],pipe:e,_run(t,n){for(const o of e)if(o.kind!=="metadata"){if(t.issues&&(o.kind==="schema"||o.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=o._run(t,n))}return t}}}const mm=["placeholder","disabled","min","max"],pm=B({__name:"ObsidianNumberInput",props:Pt({placeholder:{},disabled:{type:Boolean},min:{},max:{},narrow:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Rt(e,"modelValue");return(n,o)=>Fn((v(),C("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),type:"number",class:Dt({"narrow-input":n.narrow}),placeholder:n.placeholder,disabled:n.disabled,min:n.min,max:n.max,spellcheck:"false"},null,10,mm)),[[Ho,t.value]])}}),tn=be(pm,[["__scopeId","data-v-d49aaf69"]]);function tu(e,t,n){const o=ce([]),a=he();return ro(()=>{const r=X(e.value);if(!r.isValid())return;const l=Ne(),s=r.clone().startOf("month").startOf("week"),i=r.clone().endOf("month").endOf("week"),u=a.calendarViewSettings.weeks||"left",c=t?.value?X(t.value):null,m=n?.value?X(n.value):null,h=[],p=s.clone();for(;p.isSameOrBefore(i);)u==="left"&&p.isSame(p.clone().startOf("week"),"day")&&h.push({date:p.format("[W]w"),key:p.format(we),outside:!1,isWeekNumber:!0,disabled:!!c&&p.clone().endOf("week").isBefore(c,"day")||!!m&&p.clone().startOf("week").isAfter(m,"day")}),h.push({date:p.format("D"),key:p.format(we),today:p.isSame(l,"day"),outside:!r.isSame(p,"month"),isWeekNumber:!1,disabled:!!c&&p.isBefore(c,"day")||!!m&&p.isAfter(m,"day")}),u==="right"&&p.isSame(p.clone().endOf("week"),"day")&&h.push({date:p.format("[W]w"),key:p.format(we),outside:!1,isWeekNumber:!0,disabled:!!c&&p.clone().endOf("week").isBefore(c,"day")||!!m&&p.clone().startOf("week").isAfter(m,"day")}),p.add(1,"day");o.value=h}),{grid:o}}const to=B({__name:"FormattedDate",props:{date:{},format:{}},setup(e){const t=w(()=>typeof e.date=="string"?X(e.date):e.date);return(n,o)=>(v(),C("span",null,P(t.value.format(n.format)),1))}}),cs=eu("type",[Nt({type:pa("transparent")}),Nt({type:pa("theme"),name:Ge()}),Nt({type:pa("custom"),color:Ge()})]);function xt(e){switch(e.type){case"transparent":return"transparent";case"theme":return`var(--${e.name})`;case"custom":return e.color}}const vm={class:"calendar"},hm={class:"calendar-header"},gm={class:"calendar-grid"},ym=B({__name:"CalendarGrid",props:{columns:{},compactFirstLine:{type:Boolean}},setup(e){jn(s=>({"7c1126c8":s.columns,"44a90168":l.value,"8c32f452":n.value,"5270e73a":o.value,"1eb75568":a.value,bb8fab6e:r.value}));const t=he(),n=w(()=>xt(t.calendarViewSettings.todayStyle.color)),o=w(()=>xt(t.calendarViewSettings.todayStyle.background)),a=w(()=>xt(t.calendarViewSettings.activeStyle.color)),r=w(()=>xt(t.calendarViewSettings.activeStyle.background)),l=w(()=>e.compactFirstLine?"1.2em repeat(auto-fill, 28px)":"repeat(auto-fill, 28px)");return(s,i)=>(v(),C("div",vm,[g("div",hm,[Ke(s.$slots,"header",{},void 0,!0)]),g("div",gm,[Ke(s.$slots,"default",{},void 0,!0)])]))}}),uo=be(ym,[["__scopeId","data-v-4a0e5640"]]),wm=["disabled"],bm=B({__name:"CalendarButton",props:{disabled:{type:Boolean},clickable:{type:Boolean}},setup(e){return(t,n)=>(v(),C("button",{disabled:t.disabled,class:Dt({clickable:t.clickable})},[Ke(t.$slots,"default",{},void 0,!0)],10,wm))}}),Go=be(bm,[["__scopeId","data-v-1f1e7904"]]);function km(){const e=ce([]),t=he();return nt(()=>t.calendarSettings.dow,()=>{const n=Ne().startOf("week"),o=n.clone().endOf("week"),a=[];for(;n.isSameOrBefore(o);)a.push(n.format("ddd")),n.add(1,"day");e.value=a},{immediate:!0}),e}const _m={key:0},Cm={key:1},Sm=B({__name:"CalendarWeekdays",setup(e){const t=he(),n=km();return(o,a)=>(v(),C(W,null,[b(t).calendarViewSettings.weeks==="left"?(v(),C("div",_m)):Y("",!0),(v(!0),C(W,null,_e(b(n),r=>(v(),C("div",{key:r,class:"week-day"},[g("span",null,P(r),1)]))),128)),b(t).calendarViewSettings.weeks==="right"?(v(),C("div",Cm)):Y("",!0)],64))}}),fl=be(Sm,[["__scopeId","data-v-aa55b3de"]]),xm=B({__name:"CalendarMonthView",props:{refDate:{},selectedDate:{},min:{},max:{}},emits:["select"],setup(e){const t=he(),n=w(()=>t.calendarViewSettings.weeks==="none"?7:8),{grid:o}=tu(w(()=>e.refDate),w(()=>e.min),w(()=>e.max));return(a,r)=>(v(),I(uo,{columns:n.value,"compact-first-line":""},{header:f(()=>[Ke(a.$slots,"header",{},()=>[d(to,{date:a.refDate,format:"MMMM YYYY"},null,8,["date"])])]),default:f(()=>[d(fl),(v(!0),C(W,null,_e(b(o),l=>(v(),I(Go,{key:l.key+(l.isWeekNumber?"week":"day"),clickable:!l.disabled,disabled:l.disabled,"data-outside":l.outside||null,"data-today":l.today||null,"data-selected":a.selectedDate===l.key||null,onClick:s=>a.$emit("select",l.key,s)},{default:f(()=>[k(P(l.date),1)]),_:2},1032,["clickable","disabled","data-outside","data-today","data-selected","onClick"]))),128))]),_:3},8,["columns"]))}});function Vm(e,t,n){const o=ce([]),a=w(()=>X(e.value));return ro(()=>{if(!a.value.isValid())return;const r=[],l=t?.value?X(t.value):null,s=n?.value?X(n.value):null;for(let i=0;i<4;i++){const u=a.value.clone().quarter(i);r.push({date:u.format(Pi.quarter),key:u.format(we),disabled:!!l&&u.clone().endOf("quarter").isBefore(l)||!!s&&u.isAfter(s)})}o.value=r}),{grid:o}}const Dm={class:"calendar-quarter-grid"},jm=B({__name:"CalendarQuarterView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t}=Vm(w(()=>e.refDate),w(()=>e.min),w(()=>e.max));return(n,o)=>(v(),I(uo,{columns:2},{header:f(()=>[Ke(n.$slots,"header",{},()=>[d(to,{date:n.refDate,format:"YYYY"},null,8,["date"])])]),default:f(()=>[g("div",Dm,[(v(!0),C(W,null,_e(b(t),a=>(v(),I(Go,{key:a.key,clickable:"","data-selected":b(sl)("quarter",a.date,n.refDate)||null,onClick:r=>n.$emit("select",a.key)},{default:f(()=>[k(P(a.date),1)]),_:2},1032,["data-selected","onClick"]))),128))])]),_:3}))}});function $m(e,t,n){const o=ce([]);return ro(()=>{const a=X(e.value);if(!a.isValid())return;const r=a.clone().startOf("year"),l=a.clone().endOf("year"),s=t?.value?X(t.value):void 0,i=n?.value?X(n.value):void 0,u=[],c=r.clone();for(;c.isSameOrBefore(l);)u.push({date:c.format("MMMM"),key:c.format(we),disabled:!!s&&c.clone().endOf("year").isBefore(s)||!!i&&c.clone().startOf("year").isAfter(i)}),c.add(1,"month");o.value=u}),{grid:o}}const Mm=B({__name:"CalendarYearView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t}=$m(w(()=>e.refDate),w(()=>e.min),w(()=>e.max));return(n,o)=>(v(),I(uo,{columns:3},{header:f(()=>[Ke(n.$slots,"header",{},()=>[d(to,{date:n.refDate,format:"YYYY"},null,8,["date"])])]),default:f(()=>[(v(!0),C(W,null,_e(b(t),a=>(v(),I(Go,{key:a.key,clickable:"","data-selected":b(sl)("month",a.date,n.refDate)||null,onClick:r=>n.$emit("select",a.key)},{default:f(()=>[k(P(a.date),1)]),_:2},1032,["data-selected","onClick"]))),128))]),_:3}))}});function Nm(e,t,n){const o=ce([]),a=w(()=>X(e.value)),r=w(()=>a.value.year()-a.value.year()%10),l=w(()=>r.value+9);return ro(()=>{if(!a.value.isValid())return;const s=[];for(let i=r.value-1;i<=l.value+1;i++){const u=a.value.clone().year(i);s.push({date:u.format("YYYY"),key:u.format(we),outside:i<r.value||i>l.value,disabled:!1})}o.value=s}),{grid:o,startYear:r,endYear:l}}const Am=B({__name:"CalendarDecadeView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t,startYear:n,endYear:o}=Nm(w(()=>e.refDate));return(a,r)=>(v(),I(uo,{columns:4},{header:f(()=>[Ke(a.$slots,"header",{startYear:b(n),endYear:b(o)},()=>[g("div",null,P(b(n))+" - "+P(b(o)),1)])]),default:f(()=>[(v(!0),C(W,null,_e(b(t),l=>(v(),I(Go,{key:l.key,clickable:"","data-selected":b(sl)("year",l.date,a.refDate)||null,"data-outside":l.outside||null,onClick:s=>a.$emit("select",l.key)},{default:f(()=>[k(P(l.date),1)]),_:2},1032,["data-selected","data-outside","onClick"]))),128))]),_:3}))}}),nu=B({__name:"DatePicker.modal",props:{selectedDate:{},picking:{},min:{},max:{}},emits:["select","close"],setup(e,{emit:t}){const n=e,o=t,a=ce("month");switch(n.picking){case"day":{a.value="month";break}case"week":{a.value="month";break}case"month":{a.value="month";break}case"quarter":{a.value="quarter";break}case"year":{a.value="decade";break}}const r=ce(n.selectedDate??Ne().format("YYYY-MM-DD")),l=w(()=>X(r.value).startOf("month"));function s(y="month"){r.value=y==="decade"?l.value.subtract(10,"year").format("YYYY-MM-DD"):l.value.subtract(1,y).format("YYYY-MM-DD")}function i(y="month"){if(!n.min)return!0;const x=X(n.min);return y==="decade"?l.value.clone().subtract(10,"year").isAfter(x,"year"):l.value.clone().subtract(1,y).endOf(y).isAfter(x)}function u(y="month"){r.value=y==="decade"?l.value.add(10,"year").format("YYYY-MM-DD"):l.value.add(1,y).format("YYYY-MM-DD")}function c(y="month"){if(!n.max)return!0;const x=X(n.max);return y==="decade"?l.value.clone().add(10,"year").isBefore(x,"year"):l.value.clone().add(1,y).startOf(y).isBefore(x)}function m(y){n.picking==="week"?o("select",X(r.value).startOf("week").format("YYYY-MM-DD")):o("select",y),o("close")}function h(y){n.picking==="month"?(o("select",y),o("close")):(r.value=y,a.value="month")}function p(y){n.picking==="quarter"?(o("select",y),o("close")):(r.value=y,a.value="month")}function _(y){n.picking==="year"?(o("select",y),o("close")):(r.value=y,a.value=n.picking==="quarter"?"quarter":"year")}return(y,x)=>a.value==="decade"?(v(),I(Am,{key:0,"ref-date":r.value,min:y.min,max:y.max,onSelect:_},{header:f(({startYear:T,endYear:O})=>[d(ge,{icon:"arrow-left",tooltip:"Previous decade",onClick:x[0]||(x[0]=ee=>s("decade"))}),k(" "+P(T)+" - "+P(O)+" ",1),d(ge,{icon:"arrow-right",tooltip:"Next decade",onClick:x[1]||(x[1]=ee=>u("decade"))})]),_:1},8,["ref-date","min","max"])):a.value==="year"?(v(),I(Mm,{key:1,"ref-date":r.value,min:y.min,max:y.max,onSelect:h},{header:f(()=>[i("year")?(v(),I(ge,{key:0,icon:"arrow-left",tooltip:"Previous year",onClick:x[2]||(x[2]=T=>s("year"))})):Y("",!0),d(ie,{onClick:x[3]||(x[3]=T=>a.value="decade")},{default:f(()=>[k(P(l.value.format("YYYY")),1)]),_:1}),c("year")?(v(),I(ge,{key:1,icon:"arrow-right",tooltip:"Next year",onClick:x[4]||(x[4]=T=>u("year"))})):Y("",!0)]),_:1},8,["ref-date","min","max"])):a.value==="quarter"?(v(),I(jm,{key:2,"ref-date":r.value,min:y.min,max:y.max,onSelect:p},{header:f(()=>[i("quarter")?(v(),I(ge,{key:0,icon:"arrow-left",tooltip:"Previous quarter",onClick:x[5]||(x[5]=T=>s("quarter"))})):Y("",!0),d(ie,{onClick:x[6]||(x[6]=T=>a.value="year")},{default:f(()=>[d(to,{date:r.value,format:"YYYY"},null,8,["date"])]),_:1}),c("quarter")?(v(),I(ge,{key:1,icon:"arrow-right",tooltip:"Next quarter",onClick:x[7]||(x[7]=T=>u("quarter"))})):Y("",!0)]),_:1},8,["ref-date","min","max"])):(v(),I(xm,{key:3,"ref-date":r.value,"selected-date":y.selectedDate,min:y.min,max:y.max,onSelect:m},{header:f(()=>[i("month")?(v(),I(ge,{key:0,icon:"arrow-left",tooltip:"Previous month",onClick:x[8]||(x[8]=T=>s("month"))})):Y("",!0),d(ie,{onClick:x[9]||(x[9]=T=>a.value="year")},{default:f(()=>[d(to,{date:r.value,format:"MMMM YYYY"},null,8,["date"])]),_:1}),c("month")?(v(),I(ge,{key:1,icon:"arrow-right",tooltip:"Next month",onClick:x[10]||(x[10]=T=>u("month"))})):Y("",!0)]),_:1},8,["ref-date","selected-date","min","max"]))}}),Tm=B({__name:"DatePicker",props:Pt({picking:{default:"day"},placeholder:{default:"Pick a date"},previewFormat:{default:"YYYY-MM-DD"},disabled:{type:Boolean},tooltip:{default:"Pick a date"},min:{default:""},max:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=he(),o=Rt(e,"modelValue"),a=w(()=>o.value?X(o.value):null),r=w(()=>a.value?a.value.format(t.previewFormat):t.placeholder);function l(){new Me(n,"Pick a date",nu,{selectedDate:o.value,picking:t.picking,min:t.min,max:t.max,onSelect(s){o.value=s}},400).open()}return(s,i)=>(v(),I(ie,{class:"date-picker",disabled:s.disabled,tooltip:s.tooltip,onClick:l},{default:f(()=>[d(hn,{name:"calendar"}),i[0]||(i[0]=k()),g("span",null,P(r.value),1)]),_:1},8,["disabled","tooltip"]))}}),Ao=be(Tm,[["__scopeId","data-v-a9348bd1"]]),Om={key:0,class:"journal-errors"},Fm=B({__name:"FormErrors",props:{errors:{}},setup(e){return(t,n)=>t.errors?(v(),C("ul",Om,[(v(!0),C(W,null,_e(t.errors,o=>(v(),C("li",{key:o},P(o),1))),128))])):Y("",!0)}}),et=be(Fm,[["__scopeId","data-v-c3a13f6e"]]);const ml=B({__name:"CreateJournal.modal",emits:["create","close"],setup(e,{emit:t}){const n=t,o=he();function a(ee){return!o.hasJournal(ee)}const{defineField:r,errorBag:l,handleSubmit:s}=gn({initialValues:{journalName:"",write:"day",every:"day",duration:1,anchorDate:""},validationSchema:yn(gt(Nt({journalName:gt(Ge(),qt("Journal name is required"),so(a,"Journal name should be unique")),write:ht(["day","week","month","quarter","year","custom"]),every:ht(["day","week","month","quarter","year"]),duration:cl(),anchorDate:Ge()}),Ko(io([["write"],["anchorDate"]],ee=>ee.write==="custom"?!!ee.anchorDate:!0,"Please select an anchor date."),["anchorDate"])))}),[i,u]=r("journalName"),[c,m]=r("write"),[h,p]=r("every"),[_,y]=r("duration"),[x,T]=r("anchorDate"),O=s(ee=>{n("create",ee.journalName,ee.write==="custom"?{type:"custom",every:ee.every,duration:ee.duration,anchorDate:ee.anchorDate}:{type:ee.write}),n("close")});return(ee,N)=>(v(),C("form",{onSubmit:N[6]||(N[6]=Ht((...A)=>b(O)&&b(O)(...A),["prevent"]))},[d(M,{name:"Journal name"},{description:f(()=>[d(et,{errors:b(l).journalName},null,8,["errors"])]),default:f(()=>[d(qe,Se({modelValue:b(i),"onUpdate:modelValue":N[0]||(N[0]=A=>de(i)?i.value=A:null),placeholder:"ex. Work"},b(u)),null,16,["modelValue"])]),_:1}),d(M,{name:"I'll be writing"},{default:f(()=>[d(xe,Se({modelValue:b(c),"onUpdate:modelValue":N[1]||(N[1]=A=>de(c)?c.value=A:null)},b(m)),{default:f(()=>N[7]||(N[7]=[g("option",{value:"day"},"Daily",-1),g("option",{value:"week"},"Weekly",-1),g("option",{value:"month"},"Monthly",-1),g("option",{value:"quarter"},"Quarterly",-1),g("option",{value:"year"},"Annually",-1),g("option",{value:"custom"},"In custom intervals",-1)])),_:1},16,["modelValue"])]),_:1}),b(c)==="custom"?(v(),I(M,{key:0,name:"Every"},{default:f(()=>[d(tn,Se({modelValue:b(_),"onUpdate:modelValue":N[2]||(N[2]=A=>de(_)?_.value=A:null)},b(y),{min:1}),null,16,["modelValue"]),d(xe,Se({modelValue:b(h),"onUpdate:modelValue":N[3]||(N[3]=A=>de(h)?h.value=A:null)},b(p)),{default:f(()=>N[8]||(N[8]=[g("option",{value:"day"},"days",-1),g("option",{value:"week"},"weeks",-1),g("option",{value:"month"},"months",-1),g("option",{value:"quarter"},"quarters",-1),g("option",{value:"year"},"years",-1)])),_:1},16,["modelValue"])]),_:1})):Y("",!0),b(c)==="custom"?(v(),I(M,{key:1,name:"Start date"},{description:f(()=>[N[9]||(N[9]=k(" This date will be used to start counting intervals. It cannot be changed after creating journal. ")),d(et,{errors:b(l).anchorDate},null,8,["errors"])]),default:f(()=>[d(Ao,Se({modelValue:b(x),"onUpdate:modelValue":N[4]||(N[4]=A=>de(x)?x.value=A:null)},b(T)),null,16,["modelValue"])]),_:1})):Y("",!0),d(M,null,{default:f(()=>[d(ie,{onClick:N[5]||(N[5]=A=>n("close"))},{default:f(()=>N[10]||(N[10]=[k("Close")])),_:1}),d(ie,{cta:"",type:"submit",onClick:b(O)},{default:f(()=>N[11]||(N[11]=[k("Add")])),_:1},8,["onClick"])]),_:1})],32))}}),Em=["data-open"],Im={class:"collapsible-trigger-text"},Pm=B({__name:"CollapsibleBlock",props:Pt({defaultExpanded:{type:Boolean}},{expanded:{type:Boolean},expandedModifiers:{}}),emits:["update:expanded"],setup(e){const t=Rt(e,"expanded");e.defaultExpanded&&(t.value=!0);const o=w(()=>t.value?"chevron-down":"chevron-right");function a(){t.value=!t.value}return(r,l)=>(v(),C("div",{class:"collapsible-root","data-open":t.value||null},[g("div",{class:"collapsible-trigger",onClick:a},[d(hn,{name:o.value},null,8,["name"]),g("span",Im,[Ke(r.$slots,"trigger",{},void 0,!0)]),g("span",{class:"collapsible-trigger-controls",onClick:l[0]||(l[0]=Ht(()=>{},["stop"]))},[Ke(r.$slots,"controls",{},void 0,!0)])]),t.value?Ke(r.$slots,"default",{key:0},void 0,!0):Y("",!0)],8,Em))}}),Ct=be(Pm,[["__scopeId","data-v-d5749829"]]),Rm={class:"iconed-row"},Bm=B({__name:"IconedRow",props:{icon:{}},setup(e){return(t,n)=>(v(),C("div",Rm,[d(hn,{name:t.icon},null,8,["name"]),g("div",null,[Ke(t.$slots,"default",{},void 0,!0)])]))}}),St=be(Bm,[["__scopeId","data-v-faf0e4b0"]]),Ym={class:"flair"},Um=B({__name:"JournalSettingsWithoutShelves",emits:["edit","bulk-add"],setup(e,{emit:t}){const n=t,o=he(),a=w(()=>o.journals);function r(){new Me(o,"Add Journal",ml,{onCreate(l,s){o.createJournal(l,s),n("edit",l)}}).open()}return(l,s)=>(v(),I(Ct,{"default-expanded":a.value.length>0},{trigger:f(()=>[d(St,{icon:"book-open"},{default:f(()=>[s[2]||(s[2]=k(" Journals ")),g("span",Ym,P(a.value.length),1)]),_:1})]),controls:f(()=>[d(ge,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:r})]),default:f(()=>[d(il,{journals:a.value,onEdit:s[0]||(s[0]=i=>l.$emit("edit",i)),onBulkAdd:s[1]||(s[1]=i=>l.$emit("bulk-add",i))},null,8,["journals"])]),_:1},8,["default-expanded"]))}}),Lm=B({__name:"CreateShelf.modal",emits:["create","close"],setup(e,{emit:t}){const n=t,o=he();function a(m){return!o.hasShelf(m)}const{defineField:r,errorBag:l,handleSubmit:s}=gn({initialValues:{name:""},validationSchema:yn(Nt({name:gt(Ge(),qt("Shelf name is required"),so(a,"Shelf name should be unique"))}))}),[i,u]=r("name"),c=s(m=>{n("create",m.name),n("close")});return(m,h)=>(v(),C("form",{onSubmit:h[2]||(h[2]=Ht((...p)=>b(c)&&b(c)(...p),["prevent"]))},[d(M,{name:"Shelf name"},{description:f(()=>[d(et,{errors:b(l).name},null,8,["errors"])]),default:f(()=>[d(qe,Se({modelValue:b(i),"onUpdate:modelValue":h[0]||(h[0]=p=>de(i)?i.value=p:null),placeholder:"ex. Work"},b(u)),null,16,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:h[1]||(h[1]=p=>n("close"))},{default:f(()=>h[3]||(h[3]=[k("Close")])),_:1}),d(ie,{cta:"",type:"submit",onClick:b(c)},{default:f(()=>h[4]||(h[4]=[k("Add")])),_:1},8,["onClick"])]),_:1})],32))}}),Wm=["value"],Jm={key:1},qm=B({__name:"RemoveShelf.modal",props:{shelfName:{}},emits:["close","remove"],setup(e,{emit:t}){const n=t,o=he(),a=ce(""),r=w(()=>Object.values(o.shelves).filter(s=>s.name!==e.shelfName));function l(){n("remove",a.value),n("close")}return(s,i)=>(v(),C(W,null,[r.value.length>0?(v(),I(M,{key:0,name:"Move journals to"},{default:f(()=>[d(xe,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=u=>a.value=u)},{default:f(()=>[i[2]||(i[2]=g("option",{value:""},"None",-1)),(v(!0),C(W,null,_e(r.value,u=>(v(),C("option",{key:u.name,value:u.name},P(u.name),9,Wm))),128))]),_:1},8,["modelValue"])]),_:1})):(v(),C("p",Jm,"Journals will be moved out")),d(M,null,{default:f(()=>[d(ie,{onClick:i[1]||(i[1]=u=>s.$emit("close"))},{default:f(()=>i[3]||(i[3]=[k("Cancel")])),_:1}),d(ie,{cta:"",onClick:l},{default:f(()=>i[4]||(i[4]=[k("Remove")])),_:1})]),_:1})],64))}}),Hm={class:"flair"},zm={class:"flair"},Km=B({__name:"JournalSettingsWithShelves",emits:["organize","edit","bulk-add"],setup(e,{emit:t}){const n=t,o=he(),a=w(()=>o.journals.filter(i=>!i.isOnShelf));function r(){new Me(o,"Add Journal Shelf",Lm,{onCreate(i){o.createShelf(i),n("organize",i)}}).open()}function l(i){new Me(o,`Remove ${i} shelf`,qm,{shelfName:i,onRemove(u){o.removeShelf(i,u)}}).open()}function s(){new Me(o,"Add Journal",ml,{onCreate(i,u){o.createJournal(i,u),n("edit",i)}}).open()}return(i,u)=>(v(),C(W,null,[d(Ct,{"default-expanded":b(o).shelves.length>0},{trigger:f(()=>[d(St,{icon:"library"},{default:f(()=>[u[2]||(u[2]=k(" Journal shelves ")),g("span",Hm,P(b(o).shelves.length),1)]),_:1})]),controls:f(()=>[d(ge,{icon:"plus",cta:"",tooltip:"Create new shelf",onClick:r})]),default:f(()=>[b(o).shelves.length===0?(v(),I(M,{key:0},{description:f(()=>u[3]||(u[3]=[k(" No shelves configured yet. ")])),_:1})):(v(!0),C(W,{key:1},_e(b(o).shelves,c=>(v(),I(M,{key:c.name},{name:f(()=>[g("b",null,P(c.name),1),u[4]||(u[4]=g("br",null,null,-1)),k(" "+P(c.journals.length)+" journals ",1)]),default:f(()=>[d(ge,{icon:"library",tooltip:"Organize "+c.name,onClick:m=>i.$emit("organize",c.name)},null,8,["tooltip","onClick"]),d(ge,{icon:"trash-2",tooltip:"Delete "+c.name,onClick:m=>l(c.name)},null,8,["tooltip","onClick"])]),_:2},1024))),128))]),_:1},8,["default-expanded"]),d(Ct,{"default-expanded":a.value.length>0},{trigger:f(()=>[d(St,{icon:"book-open"},{default:f(()=>[u[5]||(u[5]=k(" Journals not on shelf ")),g("span",zm,P(a.value.length),1)]),_:1})]),controls:f(()=>[d(ge,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:s})]),default:f(()=>[d(il,{journals:a.value,onEdit:u[0]||(u[0]=c=>i.$emit("edit",c)),onBulkAdd:u[1]||(u[1]=c=>i.$emit("bulk-add",c))},null,8,["journals"])]),_:1},8,["default-expanded"])],64))}}),Gm=["disabled"],Qm=B({__name:"ObsidianColorPicker",props:Pt({disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Rt(e,"modelValue");return(n,o)=>Fn((v(),C("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),type:"color",disabled:n.disabled,spellcheck:"false"},null,8,Gm)),[[Ho,t.value]])}}),Xm={title:"Check title",tag:"Check tags",property:"Check frontmatter property",date:"Check date",weekday:"Check weekday",offset:"Check interval offset","has-note":"Check if note exists","has-open-task":"Check if note has open tasks","all-tasks-completed":"Check if all tasks are completed"},Zm={"background-primary":"Primary background","background-primary-alt":"Background for surfaces on top of primary background","background-secondary":"Secondary background","background-secondary-alt":"Background for surfaces on top of secondary background","background-modifier-hover":"Hovered elements","background-modifier-active-hover":"Active hovered elements","background-modifier-border":"Border color","background-modifier-border-hover":"Border color (hover)","background-modifier-border-focus":"Border color (focus)","background-modifier-error-rgb":"Error background, RGB value","background-modifier-error":"Error background","background-modifier-error-hover":"Error background (hover)","background-modifier-success-rgb":"Success background, RGB value","background-modifier-success":"Success background","background-modifier-message":"Messages background","interactive-normal":"Background for standard interactive elements","interactive-hover":"Background for standard interactive elements (hover)","interactive-accent":"Background for accented interactive elements","interactive-accent-hover":"Background for accented interactive elements (hover)","text-normal":"Normal text","text-muted":"Muted text","text-faint":"Faint text","text-on-accent":"Text on accent background when accent is dark","text-on-accent-inverted":"Text on accent background when accent is light","text-success":"Success text","text-warning":"Warning text","text-error":"Error text","text-accent":"Accent text","text-accent-hover":"Accent text (hover)","text-selection":"Selected text background","text-highlight-bg":"Highlighted text background","caret-color":"Caret color"},ep={class:"color-picker"},tp=["value"],np=B({__name:"ColorPicker",props:{modelValue:{default:()=>({type:"transparent"})},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Rt(e,"modelValue"),n=w({get:()=>t.value.type,set(l){switch(l){case"transparent":{t.value={type:"transparent"};break}case"custom":{t.value={type:"custom",color:"#000000"};break}case"theme":{t.value={type:"theme",name:"text-normal"};break}}}}),o=w({get:()=>t.value.type==="theme"?t.value.name:"",set(l){t.value.type==="theme"&&(t.value={type:"theme",name:l})}}),a=w({get:()=>t.value.type==="custom"?t.value.color:"",set(l){t.value.type==="custom"&&(t.value={type:"custom",color:l})}}),r=w(()=>t.value.type==="theme"?{background:`var(--${t.value.name})`}:{});return(l,s)=>(v(),C("div",ep,[d(xe,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=i=>n.value=i)},{default:f(()=>s[3]||(s[3]=[g("option",{value:"transparent"},"Transparent",-1),g("option",{value:"theme"},"Theme",-1),g("option",{value:"custom"},"Custom",-1)])),_:1},8,["modelValue"]),n.value==="theme"?(v(),I(xe,{key:0,modelValue:o.value,"onUpdate:modelValue":s[1]||(s[1]=i=>o.value=i),class:"theme-dropdown"},{default:f(()=>[(v(!0),C(W,null,_e(b(Zm),(i,u)=>(v(),C("option",{key:u,value:u},P(i),9,tp))),128))]),_:1},8,["modelValue"])):Y("",!0),n.value==="theme"?(v(),C("div",{key:1,class:"theme-preview",style:ao(r.value)},null,4)):Y("",!0),n.value==="custom"?(v(),I(Qm,{key:2,modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=i=>a.value=i)},null,8,["modelValue"])):Y("",!0)]))}}),Et=be(np,[["__scopeId","data-v-67b2b8ef"]]);function Vt(e){return JSON.parse(JSON.stringify(e))}function op(e){return new Promise(t=>setTimeout(t,e))}function Ka(e){throw new Error("Unexpected value")}function ap(e){if(e.type==="custom")return`every ${e.duration} ${e.every}s`;switch(e.type){case"day":return"daily";case"week":return"weekly";case"month":return"monthly";case"quarter":return"quarterly";case"year":return"annually"}return""}function rp(e){switch(e.type){case"title":return`title ${e.condition} ${e.value}`;case"tag":return`tag ${e.condition} ${e.value}`;case"property":return`property ${e.name} ${e.condition} ${e.value}`;case"date":return`date is ${e.day}-${e.month}-${e.year??"any year"}`;case"weekday":return`weekday is any of ${e.weekdays.map(t=>te.moment().localeData().weekdaysShort()[t]).join(", ")}`;case"offset":return`date is ${e.offset<0?-e.offset:e.offset} days away from interval ${e.offset<0?"end":"start"}`;case"has-note":return"there is a note connected to a date";case"has-open-task":return"note connected to a date has an open task";case"all-tasks-completed":return"all tasks in note connected to date are completed";default:return Ka(),""}}async function lp(e,t){for(const[n,o]of t){const a=e.getJournal(n);if(a)for(const{year:r,weeks:l,path:s}of o){const i=Ne().year(r).week(l).format("YYYY-MM-DD"),u=a.resolveAnchorDate(i);u&&await e.notesManager.updateNoteFrontmatter(s,c=>{c[a.frontmatterDate]=u,a.config.value.frontmatter.addStartDate&&(c[a.frontmatterStartDate]=a.resolveStartDate(u)),a.config.value.frontmatter.addEndDate&&(c[a.frontmatterEndDate]=a.resolveEndDate(u))})}}}const sp={key:0},ip={class:"whitespace"},up={key:0},dp=B({__name:"CalendarWeekSettings.modal",emits:["close"],setup(e,{emit:t}){const n=t,o=he(),a=ce(),r=ce("0"),l=ce(1);yt(()=>{s(Ei(o.calendarSettings))});function s(c){a.value=Vt(c),r.value=String(c.dow),l.value=Ti(c.dow,c.doy)}function i(){a.value&&(a.value.name="custom")}async function u(){if(!a.value)return;const c=o.journals.filter(x=>x.type==="week"),m=new Map;for(const x of c){const T=[];for(const[O,ee]of o.index.getJournalIndex(x.name)){const N=X(O);T.push({year:N.year(),weeks:N.week(),path:ee})}m.set(x.name,T)}a.value.name==="custom"&&(a.value.dow=Number.parseInt(r.value,10),a.value.doy=Ai(a.value.dow,l.value));const{dow:h,doy:p}=a.value,_=o.calendarSettings.global?Zn.dow:te.moment().localeData().firstDayOfWeek(),y=o.calendarSettings.global?Zn.doy:te.moment().localeData().firstDayOfYear();h===_&&p===y?(o.calendarSettings.dow=-1,$a(o.calendarSettings.global)):(o.calendarSettings.dow=h,o.calendarSettings.doy=p,ja(h,p,o.calendarSettings.global)),await lp(o,m),n("close")}return(c,m)=>a.value?(v(),C("div",sp,[(v(!0),C(W,null,_e(b(Fi),h=>(v(),I(M,{key:h.name},{name:f(()=>[k(P(h.name),1)]),description:f(()=>[g("div",ip,P(h.description),1),g("div",null,"Used in: "+P(h.used),1)]),default:f(()=>[h.name===a.value.name?(v(),C("div",up,"Currently used")):(v(),I(ie,{key:1,onClick:p=>s(h)},{default:f(()=>m[3]||(m[3]=[k("Use")])),_:2},1032,["onClick"]))]),_:2},1024))),128)),d(M,{name:"Custom settings"},{description:f(()=>m[4]||(m[4]=[g("div",null,[k(" Here you can define what day of week should be used"),g("br"),k(" as first and how first week of year should be defined"),g("br"),k(" if none of standard presets suits your needs. ")],-1)])),default:f(()=>[a.value.name!=="custom"?(v(),I(ie,{key:0,onClick:m[0]||(m[0]=h=>i())},{default:f(()=>m[5]||(m[5]=[k("Use")])),_:1})):Y("",!0)]),_:1}),a.value.name==="custom"?(v(),C(W,{key:0},[d(M,{name:"Start week on",description:"Which day to consider as first day of week."},{default:f(()=>[d(xe,{modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=h=>r.value=h)},{default:f(()=>m[6]||(m[6]=[g("option",{value:"0"},"Sunday",-1),g("option",{value:"1"},"Monday",-1),g("option",{value:"2"},"Tuesday",-1),g("option",{value:"3"},"Wednesday",-1),g("option",{value:"4"},"Thursday",-1),g("option",{value:"5"},"Friday",-1),g("option",{value:"6"},"Saturday",-1)])),_:1},8,["modelValue"])]),_:1}),d(M,{name:"First week of year",description:"Define what date in January a week should contain to be considered first week of a year."},{default:f(()=>[d(tn,{modelValue:l.value,"onUpdate:modelValue":m[2]||(m[2]=h=>l.value=h)},null,8,["modelValue"])]),_:1})],64)):Y("",!0),d(M,null,{description:f(()=>m[7]||(m[7]=[k(" This will update all weekly notes to use current settings - week number of notes will be kept but dates will be updated. ")])),default:f(()=>[d(ie,{onClick:u},{default:f(()=>m[8]||(m[8]=[k("Update")])),_:1})]),_:1})])):Y("",!0)}}),cp={class:"column"},fp={class:"whitespace"},mp=B({__name:"CalendarWeekSettings",setup(e){const t=he(),n=w(()=>Ei(t.calendarSettings));nt(()=>t.calendarSettings.global,a=>{a?t.calendarSettings.dow===-1?$a(!0):ja(t.calendarSettings.dow,t.calendarSettings.doy,!0):($a(!0),t.calendarSettings.dow!==-1&&ja(t.calendarSettings.dow,t.calendarSettings.doy,!1))});function o(){new Me(t,"Week configuration",dp,{}).open()}return(a,r)=>(v(),C(W,null,[d(M,{heading:"",name:"Week configuration"},{description:f(()=>r[1]||(r[1]=[k(" Here you can define what day of week should be used"),g("br",null,null,-1),k(" as first and how first week of year should be defined"),g("br",null,null,-1),k(" (influences week numbers). ")])),default:f(()=>[g("div",cp,[g("div",fp,P(n.value.description),1),d(ie,{class:"self-end",onClick:o},{default:f(()=>r[2]||(r[2]=[k("Change")])),_:1})])]),_:1}),d(M,{name:"Apply week configuration for all dates in vault?"},{description:f(()=>r[3]||(r[3]=[g("div",null," If disabled weak configuration settings are apply only to date within current journals and does not affect any dates created by other plugins or obsidian itself. ",-1),g("div",{class:"journal-hint"},"You might need to restart Obsidian for changes to take effect.",-1)])),default:f(()=>[d(He,{modelValue:b(t).calendarSettings.global,"onUpdate:modelValue":r[0]||(r[0]=l=>b(t).calendarSettings.global=l)},null,8,["modelValue"])]),_:1})],64))}}),pp=be(mp,[["__scopeId","data-v-1e68a6d9"]]),vp=B({__name:"ShelfDecision",emits:["next"],setup(e,{emit:t}){const n=t,o=he(),a=ce(!1);function r(){a.value&&(o.usesShelves=!0),n("next")}return(l,s)=>(v(),C("div",null,[d(M,{heading:"",name:"Use shelves?"}),d(M,{"no-controls":""},{description:f(()=>s[1]||(s[1]=[k(" Shelves can be used to organize several journals into one logical group (like work or personal)."),g("br",null,null,-1),k(" Enabling shelves before migration will convert all calendar journals that have more than one section enabled into a shelf."),g("br",null,null,-1),k(" You can always change this decision later. ")])),_:1}),d(M,{name:"Enable shelves?"},{default:f(()=>[d(He,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},null,8,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:r},{default:f(()=>s[2]||(s[2]=[k("Next")])),_:1})]),_:1})]))}}),ou=3,pl={version:ou,ui:{calendarShelf:null},pendingMigrations:[],dismissedNotifications:[],useShelves:!1,showReloadHint:!1,openOnStartup:"",journals:{},shelves:{},commands:[{name:"Open today's note",writeType:"day",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open weekly note",writeType:"week",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open monthly note",writeType:"month",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open quarterly note",writeType:"quarter",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open yearly note",writeType:"year",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open tomorrow's note",writeType:"day",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next week note",writeType:"week",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next month note",writeType:"month",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next quarter note",writeType:"quarter",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next year note",writeType:"year",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open yesterday's note",writeType:"day",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last week note",writeType:"week",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last month note",writeType:"month",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last quarter note",writeType:"quarter",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last year note",writeType:"year",type:"previous",openMode:"tab",showInRibbon:!1,icon:""}],calendar:{dow:-1,doy:1,global:!1},calendarView:{display:"month",leaf:"right",weeks:"left",todayMode:"navigate",pickMode:"create",todayStyle:{color:{type:"theme",name:"text-accent"},background:{type:"transparent"}},activeStyle:{color:{type:"theme",name:"text-on-accent"},background:{type:"theme",name:"interactive-accent"}}}},vl={name:"",shelves:[],write:{type:"day"},confirmCreation:!1,nameTemplate:"",dateFormat:"",folder:"",templates:[],start:"",end:{type:"never"},index:{enabled:!1,anchorDate:"",anchorIndex:1,allowBefore:!1,type:"increment",resetAfter:2},autoCreate:!1,commands:[],decorations:[{mode:"and",conditions:[{type:"has-note"}],styles:[{type:"shape",size:.4,shape:"circle",color:{type:"theme",name:"interactive-accent"},placement_x:"center",placement_y:"bottom"}]}],navBlock:{type:"create",rows:[],decorateWholeBlock:!1},calendarViewBlock:{rows:[],decorateWholeBlock:!1},frontmatter:{dateField:"",addStartDate:!1,startDateField:"",addEndDate:!1,endDateField:"",indexField:""}},hp={dateField:qa,indexField:Ha,startDateField:Zt,endDateField:mn},gp={icon:"",name:"",writeType:"day",type:"same",showInRibbon:!1,openMode:"active"},yp={icon:"",name:"",type:"same",context:"today",showInRibbon:!1,openMode:"active"},au={date:{type:"date",day:-1,month:-1,year:null},title:{type:"title",condition:"contains",value:""},tag:{type:"tag",condition:"contains",value:""},property:{type:"property",name:"",condition:"contains",value:""},weekday:{type:"weekday",weekdays:[]},offset:{type:"offset",offset:0},"has-note":{type:"has-note"},"has-open-task":{type:"has-open-task"},"all-tasks-completed":{type:"all-tasks-completed"}},wp={background:{type:"background",color:{type:"transparent"}},color:{type:"color",color:{type:"theme",name:"text-normal"}},border:{type:"border",border:"uniform",left:{show:!0,width:1,color:{type:"transparent"},style:"solid"},right:{show:!1,width:1,color:{type:"transparent"},style:"solid"},top:{show:!1,width:1,color:{type:"transparent"},style:"solid"},bottom:{show:!1,width:1,color:{type:"transparent"},style:"solid"}},shape:{type:"shape",size:.4,shape:"circle",color:{type:"transparent"},placement_x:"center",placement_y:"bottom"},corner:{type:"corner",placement:"top-left",color:{type:"transparent"}},icon:{type:"icon",icon:"",size:.5,color:{type:"transparent"},placement_x:"center",placement_y:"top"}},bp={day:"{{date}}",week:"{{date}}",month:"{{date}}",quarter:"{{date}}",year:"{{date}}",custom:"{{journal_name}} {{index}}"},ru={day:"YYYY-MM-DD",week:"YYYY-[W]w",month:"YYYY-MM",quarter:"YYYY-[Q]Q",year:"YYYY",custom:"YYYY-MM-DD"},Xe={template:"",fontSize:1,bold:!1,italic:!1,link:"none",journal:"",color:{type:"theme",name:"text-normal"},background:{type:"transparent"},addDecorations:!1},fs={...Xe,template:"{{date:[W]w}}",link:"week"},yr={...Xe,template:"{{date:MMMM}}",link:"month"},ho={...Xe,template:"{{date:YYYY}}",link:"year"},go={...Xe,template:"{{relative_date}}",fontSize:.7},kp={day:{type:"create",decorateWholeBlock:!1,rows:[{...Xe,template:"{{date:ddd}}"},{...Xe,template:"{{date:D}}",fontSize:3,bold:!0,link:"self",addDecorations:!0},go,fs,yr,ho]},week:{type:"create",decorateWholeBlock:!1,rows:[{...fs,fontSize:3,bold:!0,link:"self",addDecorations:!0},go,yr,ho]},month:{type:"create",decorateWholeBlock:!1,rows:[{...yr,fontSize:3,bold:!0,link:"self",addDecorations:!0},go,ho]},quarter:{type:"create",decorateWholeBlock:!1,rows:[{...Xe,template:"{{date:[Q]Q}}",fontSize:3,bold:!0,link:"self",addDecorations:!0},go,ho]},year:{type:"create",decorateWholeBlock:!1,rows:[{...ho,fontSize:3,bold:!0,link:"self",addDecorations:!0},go]},custom:{type:"create",decorateWholeBlock:!1,rows:[{...Xe,template:"{{journal_name}} {{index}}",link:"self",fontSize:3,bold:!0,addDecorations:!0},{...Xe,template:"{{start_date}}"},{...Xe,template:"to"},{...Xe,template:"{{end_date}}"}]}};function hl(e){const t={nameTemplate:bp[e.type],dateFormat:ru[e.type],navBlock:kp[e.type]};return e.type==="custom"&&(t.start=e.anchorDate,t.index={enabled:!0,anchorDate:e.anchorDate,anchorIndex:1,allowBefore:!1,type:"increment",resetAfter:1},t.calendarViewBlock={decorateWholeBlock:!0,rows:[{...Xe,template:"{{journal_name}} {{index}}",link:"self",fontSize:1.2,bold:!0},{...Xe,template:"{{start_date}} to {{end_date}}"}]},t.decorations=[{mode:"and",conditions:[{type:"has-note"}],styles:[{type:"border",border:"different",left:{show:!0,width:2,color:{type:"theme",name:"interactive-accent"},style:"solid"},right:{show:!1,width:1,color:{type:"transparent"},style:"solid"},top:{show:!1,width:1,color:{type:"transparent"},style:"solid"},bottom:{show:!1,width:1,color:{type:"transparent"},style:"solid"}}]}]),t}const wr="journal-section",va="journal-interval-index",_p={day:"Open today's note",week:"Open this week's note",month:"Open this month's note",quarter:"Open this quarter's note",year:"Open this year's note"};function lu(e){let t=0;return e.day.enabled&&t++,e.week.enabled&&t++,e.month.enabled&&t++,e.quarter.enabled&&t++,e.year.enabled&&t++,t}function Cp(e){const t=Vt(pl);return t.calendar.dow=e.calendar.firstDayOfWeek,t.calendar.doy=e.calendar.firstDayOfWeek===-1?1:Ai(e.calendar.firstDayOfWeek,e.calendar.firstWeekOfYear),t.calendarView.leaf=e.calendar_view.leaf,t.calendarView.weeks=e.calendar_view.weeks,t.pendingMigrations.push({type:"v1-v2",shelfDecided:!1,frontmatterDecided:!1,journals:Object.values(e.journals)}),t}function Sp(e,t){const n={type:"custom",anchorDate:e.start_date,every:e.granularity,duration:e.duration},o=Vt({...vl,...hl(n),write:n});if(o.name=e.name,o.autoCreate=e.createOnStartup,o.nameTemplate=e.nameTemplate||"{{journal_name}} {{index}}",o.dateFormat=e.dateFormat||"YYYY-MM-DD",o.folder=e.folder,e.template&&o.templates.push(e.template),o.start=e.start_date,e.end_type==="date"?o.end={type:"date",date:e.end_date}:e.end_type==="repeats"&&(o.end={type:"repeats",repeats:e.repeats}),o.index={enabled:!0,anchorDate:e.start_date,anchorIndex:e.start_index,allowBefore:!1,type:"increment",resetAfter:0},e.numeration_type==="year"){o.index.type="reset_after";const a=e.duration;switch(e.granularity){case"month":{o.index.resetAfter=Math.floor(12/a);break}case"week":{o.index.resetAfter=Math.floor(52/a);break}case"day":{o.index.resetAfter=Math.floor(365/a);break}}}if(e.navNameTemplate||e.navDatesTemplate)if(o.navBlock.rows=[{...Xe,template:e.navNameTemplate||"{{journal_name}} {{index}}",link:"self",fontSize:3,bold:!0,addDecorations:!0}],e.navDatesTemplate)for(const a of e.navDatesTemplate.split("|"))o.navBlock.rows.push({...Xe,template:a});else o.navBlock.rows.push({...Xe,template:"{{start_date}}"},{...Xe,template:"to"},{...Xe,template:"{{end_date}}"});return t&&(o.frontmatter.addStartDate=!0,o.frontmatter.addEndDate=!0),e.ribbon.show&&o.commands.push({icon:e.ribbon.icon||"calendar-range",name:e.ribbon.tooltip||`Open current ${e.name} note`,type:"same",context:"today",showInRibbon:!0,openMode:e.openMode}),o}async function xp(e,t,n){const o=Sp(t,n),a=e.registerJournal(o);await Vp(e.notesManager,a,t)}async function Vp(e,t,n){const o=e.getMarkdownFiles();for(const a of o){const r=e.getNoteMetadata(a.path);if(!r)continue;const{frontmatter:l}=r;!l||!(it in l)||l[it]!==n.id||await e.updateNoteFrontmatter(a.path,i=>{const u=i[Zt],c=i[mn],m=t.resolveAnchorDate(u);m?(i[it]=t.name,i[t.frontmatterDate]=u,t.config.value.frontmatter.addStartDate?i[t.frontmatterStartDate]=t.resolveStartDate(m):delete i[Zt],t.config.value.frontmatter.addEndDate||c!==t.resolveEndDate(m)?i[t.frontmatterEndDate]=c:delete i[mn],i[t.frontmatterIndex]=i[va],delete i[va]):(delete i[it],delete i[Zt],delete i[mn],delete i[va])})}}async function Dp(e,t,n,o){t.day.enabled&&await yo(e,t,"day",n,o),t.week.enabled&&await yo(e,t,"week",n,o),t.month.enabled&&await yo(e,t,"month",n,o),t.quarter.enabled&&await yo(e,t,"quarter",n,o),t.year.enabled&&await yo(e,t,"year",n,o)}function jp(e,t,n,o,a){const r={type:t},l=Vt({...vl,...hl(r),write:r}),s=e[t];return l.name=n[t],l.autoCreate=s.createOnStartup,o&&n.shelf&&(l.shelves=[n.shelf]),l.nameTemplate=s.nameTemplate||"{{date}}",l.dateFormat=s.dateFormat||ru[t],l.folder=e.rootFolder?e.rootFolder+"/"+s.folder:s.folder,s.template&&l.templates.push(s.template),s.ribbon.show&&l.commands.push({icon:s.ribbon.icon||"calendar-days",name:s.ribbon.tooltip||_p[t],type:"same",context:"today",showInRibbon:!0,openMode:s.openMode}),a&&(l.frontmatter.addStartDate=!0,l.frontmatter.addEndDate=!0),l}async function yo(e,t,n,o,a){const r=jp(t,n,o,e.usesShelves,a),l=e.registerJournal(r);await $p(e.notesManager,l,n,t)}async function $p(e,t,n,o){const a=e.getMarkdownFiles();for(const r of a){const l=e.getNoteMetadata(r.path);if(!l)continue;const{frontmatter:s}=l;!s||!(it in s)||s[it]!==o.id||s[wr]!==n||await e.updateNoteFrontmatter(r.path,c=>{const m=c[Zt],h=t.resolveAnchorDate(m);h?(c[it]=t.name,c[t.frontmatterDate]=m,t.config.value.frontmatter.addStartDate?c[t.frontmatterStartDate]=t.resolveStartDate(h):delete c[Zt],t.config.value.frontmatter.addEndDate?c[t.frontmatterEndDate]=t.resolveEndDate(h):delete c[mn],delete c[wr]):(delete c[it],delete c[wr],delete c[Zt],delete c[mn],delete c[va])})}}const Mp={key:1,class:"loader-container"},Np=B({__name:"MigrateCalendar",props:{journal:{},keepFrontmatter:{type:Boolean}},emits:["next","finished"],setup(e,{emit:t}){const n=t,o=he(),a=ce("names"),r=lu(e.journal),l=ce(""),s=ce(""),i=ce(""),u=ce(""),c=ce(""),m=ce("");async function h(){a.value="processing",o.usesShelves&&l.value&&!o.hasShelf(l.value)&&o.createShelf(l.value),await Dp(o,e.journal,{shelf:l.value,day:s.value,week:u.value,month:i.value,quarter:c.value,year:m.value},e.keepFrontmatter),o.reprocessNotes(),n("finished"),a.value="done"}return yt(async()=>{if(r===0){n("finished"),$t(()=>{n("next")});return}r===1?(s.value=e.journal.name,u.value=e.journal.name,i.value=e.journal.name,c.value=e.journal.name,m.value=e.journal.name,await h()):(a.value="names",l.value=e.journal.name,s.value=`${e.journal.name} daily`,u.value=`${e.journal.name} weekly`,i.value=`${e.journal.name} monthly`,c.value=`${e.journal.name} quarterly`,m.value=`${e.journal.name} yearly`)}),(p,_)=>(v(),C("div",null,[d(M,{heading:""},{name:f(()=>[k("Migrating "+P(p.journal.name),1)]),_:1}),a.value==="names"?(v(),C(W,{key:0},[b(o).usesShelves?(v(),I(M,{key:0,name:"Shelf name"},{default:f(()=>[d(qe,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=y=>l.value=y)},null,8,["modelValue"])]),_:1})):Y("",!0),p.journal.day.enabled?(v(),I(M,{key:1,name:"Daily journal name"},{default:f(()=>[d(qe,{modelValue:s.value,"onUpdate:modelValue":_[1]||(_[1]=y=>s.value=y)},null,8,["modelValue"])]),_:1})):Y("",!0),p.journal.week.enabled?(v(),I(M,{key:2,name:"Weekly journal name"},{default:f(()=>[d(qe,{modelValue:u.value,"onUpdate:modelValue":_[2]||(_[2]=y=>u.value=y)},null,8,["modelValue"])]),_:1})):Y("",!0),p.journal.month.enabled?(v(),I(M,{key:3,name:"Monthly journal name"},{default:f(()=>[d(qe,{modelValue:i.value,"onUpdate:modelValue":_[3]||(_[3]=y=>i.value=y)},null,8,["modelValue"])]),_:1})):Y("",!0),p.journal.quarter.enabled?(v(),I(M,{key:4,name:"Quarterly journal name"},{default:f(()=>[d(qe,{modelValue:c.value,"onUpdate:modelValue":_[4]||(_[4]=y=>c.value=y)},null,8,["modelValue"])]),_:1})):Y("",!0),p.journal.year.enabled?(v(),I(M,{key:5,name:"Yearly journal name"},{default:f(()=>[d(qe,{modelValue:m.value,"onUpdate:modelValue":_[5]||(_[5]=y=>m.value=y)},null,8,["modelValue"])]),_:1})):Y("",!0),d(M,null,{default:f(()=>[d(ie,{cta:"",onClick:h},{default:f(()=>_[7]||(_[7]=[k("Migrate")])),_:1})]),_:1})],64)):a.value==="processing"?(v(),C("div",Mp,[d(hn,{name:"loader"})])):(v(),I(M,{key:2,name:"Done!"},{default:f(()=>[d(ie,{cta:"",onClick:_[6]||(_[6]=y=>p.$emit("next"))},{default:f(()=>_[8]||(_[8]=[k("Next")])),_:1})]),_:1}))]))}}),Ap=be(Np,[["__scopeId","data-v-7e294ea2"]]),Tp={key:0,class:"loader-container"},Op=B({__name:"MigrateInterval",props:{journal:{},keepFrontmatter:{type:Boolean}},emits:["next","finished"],setup(e,{emit:t}){const n=t,o=he(),a=ce(!0);return yt(async()=>{a.value=!0,await xp(o,e.journal,e.keepFrontmatter),o.reprocessNotes(),n("finished"),a.value=!1}),(r,l)=>(v(),C("div",null,[d(M,{heading:""},{name:f(()=>[k(" Migrating "+P(r.journal.name),1)]),_:1}),a.value?(v(),C("div",Tp,[d(hn,{name:"loader"})])):(v(),I(M,{key:1,name:"Done!"},{default:f(()=>[d(ie,{cta:"",onClick:l[0]||(l[0]=s=>r.$emit("next"))},{default:f(()=>l[1]||(l[1]=[k("Next")])),_:1})]),_:1}))]))}}),Fp=be(Op,[["__scopeId","data-v-c1f36a5c"]]),Ep=B({__name:"FrontMatterDecision",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:Pt(["next"],["update:modelValue"]),setup(e){const t=Rt(e,"modelValue");return(n,o)=>(v(),C("div",null,[d(M,{name:"Frontmatter data",heading:""}),d(M,{"no-controls":""},{description:f(()=>o[2]||(o[2]=[k(" New plugin version by default reduces frontmatter data."),g("br",null,null,-1),k(" Instead of having start and end dates in frontmatter there is only 1 date (usually first day of month or year for example)."),g("br",null,null,-1),k(" If you used start or end dates from frontmatter in some other plugins (like Dataview) you can configure plugin to keep start and end dates in frontmatter."),g("br",null,null,-1),k(" You can always change this decision later. ")])),_:1}),d(M,{name:"Keep start and end dates in frontmatter?"},{default:f(()=>[d(He,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a)},null,8,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:o[1]||(o[1]=a=>n.$emit("next"))},{default:f(()=>o[3]||(o[3]=[k("Next")])),_:1})]),_:1})]))}}),Ip={key:2},Pp=B({__name:"v2-migration",props:{migration:{}},emits:["finished"],setup(e,{emit:t}){const n=t;let o=ce(!1),a=ce("decideFrontmatter"),r=ce();yt(()=>{e.migration.journals.length===0?n("finished"):e.migration.frontmatterDecided&&(e.migration.shelfDecided?(a.value="journal",r.value=e.migration.journals[0]):a.value="decideShelf")});function l(){if(r.value){const{journals:i}=e.migration;i.shift()}}function s(){if(a.value==="decideFrontmatter"&&(e.migration.frontmatterDecided=!0),a.value==="decideShelf"&&(e.migration.shelfDecided=!0),!e.migration.shelfDecided)if(e.migration.journals.some(u=>u.type==="calendar"?lu(u)>1:!1)){a.value="decideShelf";return}else e.migration.shelfDecided=!0;r.value&&(r.value=null),e.migration.journals.length>0?(a.value="journal",r.value=e.migration.journals[0]):n("finished")}return(i,u)=>(v(),C("div",null,[b(a)==="decideFrontmatter"?(v(),I(Ep,{key:0,modelValue:b(o),"onUpdate:modelValue":u[0]||(u[0]=c=>de(o)?o.value=c:o=c),onNext:s},null,8,["modelValue"])):Y("",!0),b(a)==="decideShelf"?(v(),I(vp,{key:1,onNext:s})):b(a)==="journal"&&b(r)?(v(),C("div",Ip,[b(r).type==="calendar"?(v(),I(Ap,{key:b(r).id+"calendar",journal:b(r),"keep-frontmatter":b(o),onFinished:l,onNext:s},null,8,["journal","keep-frontmatter"])):b(r).type==="interval"?(v(),I(Fp,{key:b(r).id+"interval",journal:b(r),"keep-frontmatter":b(o),onFinished:l,onNext:s},null,8,["journal","keep-frontmatter"])):Y("",!0)])):Y("",!0)]))}}),Rp={key:0},su=B({__name:"MigrationModal",emits:["close"],setup(e,{emit:t}){const n=t,o=he(),a=ce(null),r=w(()=>{if(!a.value)return null;switch(a.value.type){case"v1-v2":return Pp}return null});function l(){a.value=null,o.pendingMigrations.shift(),o.pendingMigrations.length===0?n("close"):a.value=o.pendingMigrations[0]}return yt(()=>{o.pendingMigrations.length===0?n("close"):a.value=o.pendingMigrations[0]}),(s,i)=>a.value?(v(),C("div",Rp,[(v(),I(Jo(r.value),{migration:a.value,onFinished:l},null,40,["migration"]))])):Y("",!0)}}),Bp={day:["same","next","previous","same_next_week","same_previous_week","same_next_month","same_previous_month","same_next_year","same_previous_year"],week:["same","next","previous"],month:["same","next","previous","same_next_year","same_previous_year"],quarter:["same","next","previous","same_next_year","same_previous_year"],year:["same","next","previous"],custom:["same","next","previous"]},Yp=e=>Bp[e],Ga=(e,t,n)=>{switch(t){case"same":return e==="day"?"Open today's note":`Open current ${e}'s note`;case"previous":return e==="day"&&n==="today"?"Open yesterday's note":`Open last ${e}'s note`;case"next":return e==="day"&&n==="today"?"Open tomorrow's note":`Open next ${e}'s note`;case"same_next_week":return`Open same ${e} next week`;case"same_previous_week":return`Open same ${e} last week`;case"same_next_month":return`Open same ${e} next month`;case"same_previous_month":return`Open same ${e} last month`;case"same_next_year":return`Open same ${e} next year`;case"same_previous_year":return`Open same ${e} last year`}};function Up(e,t,n){return t==="same"?"":n==="only_open_note"?"(using date of currently opened note)":n==="open_note"?"(using date of currently opened note or today's date)":""}class Lp extends te.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=te.getIconIds(),o=t.toLocaleLowerCase();return n.filter(a=>a.toLocaleLowerCase().includes(o)).sort()}renderSuggestion(t,n){const o=te.getIcon(t);if(o){o.classList.add("suggestion-icon"),n.classList.add("mod-complex"),n.classList.add("journal-suggestion-icon"),n.append(o);const a=n.createSpan();a.classList.add("journal-suggestion-name"),a.style.marginLeft="8px",a.appendText(t)}}selectSuggestion(t){this.textInputElement.value=t,this.textInputElement.trigger("input"),this.close()}}function gl(){return he().app}const Wp={class:"icon-selector"},Jp=B({__name:"IconSelector",props:Pt({placeholder:{}},{modelValue:{},modelModifiers:{}}),emits:Pt(["blur","change"],["update:modelValue"]),setup(e){const t=Rt(e,"modelValue"),n=ce(),o=gl();return yt(()=>{n.value&&new Lp(o,n.value.$el)}),(a,r)=>(v(),C("div",Wp,[d(hn,{name:t.value??""},null,8,["name"]),d(qe,{ref_key:"inputCmp",ref:n,modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=l=>t.value=l),placeholder:a.placeholder,onBlur:r[1]||(r[1]=l=>a.$emit("blur")),onChange:r[2]||(r[2]=l=>a.$emit("change",l))},null,8,["modelValue","placeholder"])]))}}),yl=be(Jp,[["__scopeId","data-v-6d210595"]]),qp={value:"same"},Hp={value:"next"},zp={value:"previous"},Na=B({__name:"EditPluginCommand.modal",props:{index:{},command:{},commands:{}},emits:["close","submit"],setup(e,{emit:t}){const n=t,o=new Set(te.getIconIds());function a(le){return le?!e.commands.some((U,se)=>U.name===le&&se!==e.index):!0}const{defineField:r,errorBag:l,handleSubmit:s}=gn({initialValues:e.command?{...e.command}:{...gp},validationSchema:yn(gt(Nt({icon:Ge(),name:gt(Ge(),qt("Command name is required"),so(a,"Command name should be unique")),type:ht(["same","next","previous"]),writeType:ht(["day","week","month","quarter","year"]),showInRibbon:en(),openMode:ht(["active","tab","split","window"])}),Ko(io([["showInRibbon"],["icon"]],le=>le.showInRibbon?o.has(le.icon):!0,"Icon is required if command is added to ribbon."),["icon"])))}),[i,u]=r("name"),[c,m]=r("icon"),[h,p]=r("writeType"),[_,y]=r("type"),[x,T]=r("showInRibbon"),[O,ee]=r("openMode"),N={day:"Today's note",week:"This week's note",month:"This month's note",quarter:"This quarter's note",year:"This year's note"},A=w(()=>N[h.value??"day"]),re=s(le=>{n("submit",le,e.index),n("close")});return(le,U)=>(v(),C("form",{onSubmit:U[7]||(U[7]=(...se)=>b(re)&&b(re)(...se))},[d(M,{name:"Name"},{description:f(()=>[U[8]||(U[8]=k(" Journal name will be added to command name automatically. ")),d(et,{errors:b(l).name},null,8,["errors"])]),default:f(()=>[d(qe,Se({modelValue:b(i),"onUpdate:modelValue":U[0]||(U[0]=se=>de(i)?i.value=se:null)},b(u)),null,16,["modelValue"])]),_:1}),d(M,{name:"Show in ribbon?"},{default:f(()=>[d(He,Se({modelValue:b(x),"onUpdate:modelValue":U[1]||(U[1]=se=>de(x)?x.value=se:null)},b(T)),null,16,["modelValue"])]),_:1}),b(x)?(v(),I(M,{key:0,name:"Icon"},{description:f(()=>[d(et,{errors:b(l).icon},null,8,["errors"])]),default:f(()=>[d(yl,Se({modelValue:b(c),"onUpdate:modelValue":U[2]||(U[2]=se=>de(c)?c.value=se:null)},b(m)),null,16,["modelValue"])]),_:1})):Y("",!0),d(M,{name:"Note type"},{default:f(()=>[d(xe,Se({modelValue:b(h),"onUpdate:modelValue":U[3]||(U[3]=se=>de(h)?h.value=se:null)},b(p)),{default:f(()=>U[9]||(U[9]=[g("option",{value:"day"},"Daily note",-1),g("option",{value:"week"},"Weekly note",-1),g("option",{value:"month"},"Monthly note",-1),g("option",{value:"quarter"},"Quarterly note",-1),g("option",{value:"year"},"Yearly note",-1)])),_:1},16,["modelValue"])]),_:1}),d(M,{name:"Open"},{default:f(()=>[d(xe,Se({modelValue:b(_),"onUpdate:modelValue":U[4]||(U[4]=se=>de(_)?_.value=se:null)},b(y)),{default:f(()=>[g("option",qp,P(A.value),1),g("option",Hp,"Next "+P(A.value)+" note",1),g("option",zp,"Last "+P(A.value)+" note",1)]),_:1},16,["modelValue"])]),_:1}),d(M,{name:"Open note"},{default:f(()=>[d(xe,Se({modelValue:b(O),"onUpdate:modelValue":U[5]||(U[5]=se=>de(O)?O.value=se:null)},b(ee)),{default:f(()=>U[10]||(U[10]=[g("option",{value:"active"},"Replacing active note",-1),g("option",{value:"tab"},"In new tab",-1),g("option",{value:"split"},"Adjacent to active note",-1),g("option",{value:"window"},"In popout window",-1)])),_:1},16,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:U[6]||(U[6]=se=>le.$emit("close"))},{default:f(()=>U[11]||(U[11]=[k("Cancel")])),_:1}),d(ie,{cta:"",type:"submit"},{default:f(()=>U[12]||(U[12]=[k("Save")])),_:1})]),_:1})],32))}});class iu extends te.SuggestModal{constructor(t,n,o){super(t),this.journals=n,this.callback=o}getSuggestions(t){return t=t.toLocaleLowerCase(),this.journals.filter(n=>n.toLocaleLowerCase().contains(t))}renderSuggestion(t,n){n.setText(t)}onChooseSuggestion(t){this.callback(t)}}async function Bo(e,t,n,o=!1,a,r){const l=n.filter(s=>{const i=e.getJournal(s);if(!i)return!1;const u=i.get(t);return!(!u||o&&!("path"in u))});if(l.length!==0){if(l.length===1){const[s]=l;await Cn(e,t,s,a);return}if(r){const s=new te.Menu;for(const i of l)s.addItem(u=>{u.setTitle(i).onClick(()=>{Cn(e,t,i,a).catch(console.error)})});s.showAtMouseEvent(r)}else new iu(e.app,l,s=>{Cn(e,t,s,a).catch(console.error)}).open()}}async function Cn(e,t,n,o){const a=e.getJournal(n);if(!a)return;const r=a.get(t);r&&await a.open(r,o)}function br(e,t){let n=null;const o=Ne().format(we);switch(t){case"same":{n=e.get(o);break}case"next":{n=e.next(o);break}case"previous":{n=e.previous(o);break}}return n?.date??null}function no(e,t,n,o){e.appManager.addCommand(n,t,a=>{const r=o().filter(l=>br(l,t.type)!==null);if(a)return r.length>0;if(r.length===1){const[l]=r,s=br(l,t.type);if(!s)return!1;Cn(e,s,l.name,t.openMode).catch(console.error)}else new iu(e.app,r.map(l=>l.name),l=>{const s=e.getJournal(l);if(!s)return;const i=br(s,t.type);i&&Cn(e,i,l,t.openMode).catch(console.error)}).open();return!0})}function Aa(e,t,n){e.appManager.removeCommand(n,t),e.appManager.removeRibbonIcon(n,t.name)}const Kp=[{id:"v2-commands-change",icon:"lucide-alert-triangle",message:`Commands were considerably changed in v2 resulting in them having different ids compared to v1. 
        So if you have used command ids in other plugins, you may need to adjust them.`}],Gp={key:0,class:"journal-warning"},Qp={key:1,class:"journal-warning"},Xp=["value"],Zp={class:"flair"},ev=B({__name:"JournalSettingsDashboard",emits:["edit","organize","bulk-add"],setup(e,{emit:t}){const n=t,o=he(),a=pn({commands:!1}),r=w(()=>Kp.filter(m=>!o.dismissedNotifications.includes(m.id))),l=w(()=>{const m=new Map;for(const h of o.journals){const p=`${h.config.value.nameTemplate.replaceAll("{{journal_name}}",h.name)}-${h.config.value.folder}-${h.config.value.dateFormat}`,_=m.get(p)??[];_.push(h),m.set(p,_)}return[...m.values()].filter(h=>h.length>1)});function s(){new Me(o,"Migrate plugin data",su).open()}function i(){new Me(o,"Add command",Na,{index:o.commands.length,commands:o.commands,onSubmit:m=>{o.commands.push(m),no(o,m,"global",()=>o.journals.filter(h=>h.type===m.writeType)),a.commands||(a.commands=!0)}}).open()}function u(m,h){new Me(o,"Edit command",Na,{index:h,command:m,commands:o.commands,onSubmit:p=>{Aa(o,m,""),no(o,p,"",()=>o.journals.filter(_=>_.type===p.writeType))}}).open()}function c(m){const[h]=o.commands.splice(m,1);h&&Aa(o,h,"")}return(m,h)=>(v(),C(W,null,[b(o).hasMigrations?(v(),C("div",Gp,[d(M,{name:"Some data is pending migration",heading:""},{default:f(()=>[d(ie,{cta:"",onClick:s},{default:f(()=>h[16]||(h[16]=[k("Migrate")])),_:1})]),_:1})])):Y("",!0),(v(!0),C(W,null,_e(r.value,p=>(v(),C("div",{key:p.id,class:"journal-notification"},[d(hn,{name:p.icon},null,8,["name"]),k(" "+P(p.message)+" ",1),d(ge,{icon:"cross",tooltip:"Dismiss",onClick:_=>b(o).dismissNotification(p.id)},null,8,["onClick"])]))),128)),d(M,{name:"Use shelves?"},{description:f(()=>h[17]||(h[17]=[k(" Shelves can be used to organize several journals into one logical group (like work or personal)."),g("br",null,null,-1),k(" With shelves enabled: "),g("br",null,null,-1),g("ul",null,[g("li",null,"Calendar View can bi limited to display just one shelf"),g("li",null,"Navigation code block will show decorations from journals on current shelf only")],-1)])),default:f(()=>[d(He,{modelValue:b(o).usesShelves,"onUpdate:modelValue":h[0]||(h[0]=p=>b(o).usesShelves=p)},null,8,["modelValue"])]),_:1}),l.value.length>0?(v(),C("div",Qp,[d(M,{name:"Colliding journal settings",heading:""}),(v(!0),C(W,null,_e(l.value,(p,_)=>(v(),C("div",{key:_}," Journals "+P(p.map(y=>y.name).join(" and "))+" has colliding configurations so that notes will be overriding each other. Consider changing folder or name template in one of that journals. ",1))),128))])):Y("",!0),b(o).usesShelves?(v(),I(Km,{key:2,onOrganize:h[1]||(h[1]=p=>n("organize",p)),onEdit:h[2]||(h[2]=p=>n("edit",p)),onBulkAdd:h[3]||(h[3]=p=>n("bulk-add",p))})):(v(),I(Um,{key:3,onEdit:h[4]||(h[4]=p=>n("edit",p)),onBulkAdd:h[5]||(h[5]=p=>n("bulk-add",p))})),d(M,{name:"Open on startup",description:"Open a note whenever you open this vault?"},{default:f(()=>[d(xe,{modelValue:b(o).openOnStartup,"onUpdate:modelValue":h[6]||(h[6]=p=>b(o).openOnStartup=p)},{default:f(()=>[h[18]||(h[18]=g("option",{value:""},"Don't open",-1)),(v(!0),C(W,null,_e(b(o).journals,p=>(v(),C("option",{key:p.name,value:p.name},P(p.name),9,Xp))),128))]),_:1},8,["modelValue"])]),_:1}),d(Ct,{expanded:a.commands,"onUpdate:expanded":h[7]||(h[7]=p=>a.commands=p)},{trigger:f(()=>[d(St,{icon:"terminal"},{default:f(()=>[h[19]||(h[19]=k(" Commands ")),g("span",Zp,P(b(o).commands.length),1)]),_:1})]),controls:f(()=>[d(ie,{onClick:i},{default:f(()=>h[20]||(h[20]=[k("Add command")])),_:1})]),default:f(()=>[b(o).commands.length===0?(v(),I(M,{key:0},{description:f(()=>h[21]||(h[21]=[k(" No commands configured yet. ")])),_:1})):(v(!0),C(W,{key:1},_e(b(o).commands,(p,_)=>(v(),I(M,{key:_},{name:f(()=>[k(P(p.name),1)]),description:f(()=>[k(P(b(Ga)(p.writeType,p.type)),1)]),default:f(()=>[d(ge,{icon:"pencil",tooltip:"Edit",onClick:y=>u(p,_)},null,8,["onClick"]),d(ge,{icon:"trash-2",tooltip:"Delete",onClick:y=>c(_)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"]),d(Ct,null,{trigger:f(()=>[d(St,{icon:"calendar"},{default:f(()=>h[22]||(h[22]=[k(" Calendar view ")])),_:1})]),default:f(()=>[d(pp),d(M,{name:"Show calendar in"},{default:f(()=>[d(xe,{modelValue:b(o).calendarViewSettings.leaf,"onUpdate:modelValue":h[8]||(h[8]=p=>b(o).calendarViewSettings.leaf=p)},{default:f(()=>h[23]||(h[23]=[g("option",{value:"left"},"Left sidebar",-1),g("option",{value:"right"},"Right sidebar",-1)])),_:1},8,["modelValue"])]),_:1}),d(M,{name:"Show weeks"},{default:f(()=>[d(xe,{modelValue:b(o).calendarViewSettings.weeks,"onUpdate:modelValue":h[9]||(h[9]=p=>b(o).calendarViewSettings.weeks=p)},{default:f(()=>h[24]||(h[24]=[g("option",{value:"none"},"Don't show",-1),g("option",{value:"left"},"Before weekdays",-1),g("option",{value:"right"},"After weekdays",-1)])),_:1},8,["modelValue"])]),_:1}),d(M,{name:"Today button"},{default:f(()=>[d(xe,{modelValue:b(o).calendarViewSettings.todayMode,"onUpdate:modelValue":h[10]||(h[10]=p=>b(o).calendarViewSettings.todayMode=p)},{default:f(()=>h[25]||(h[25]=[g("option",{value:"create"},"Creates today's note if doesn't exist",-1),g("option",{value:"navigate"},"Opens today's note if it exists",-1),g("option",{value:"switch_date"},"Just switch calendar view to current month",-1)])),_:1},8,["modelValue"])]),_:1}),d(M,{name:"Pick date button"},{default:f(()=>[d(xe,{modelValue:b(o).calendarViewSettings.pickMode,"onUpdate:modelValue":h[11]||(h[11]=p=>b(o).calendarViewSettings.pickMode=p)},{default:f(()=>h[26]||(h[26]=[g("option",{value:"create"},"Creates note for picked date if doesn't exist",-1),g("option",{value:"navigate"},"Opens note for picked date if it exists",-1),g("option",{value:"switch_date"},"Just switch calendar view to month containing corresponding date",-1)])),_:1},8,["modelValue"])]),_:1}),d(M,{name:"Highlighting today",header:""}),d(M,{name:"Text color"},{default:f(()=>[d(Et,{modelValue:b(o).calendarViewSettings.todayStyle.color,"onUpdate:modelValue":h[12]||(h[12]=p=>b(o).calendarViewSettings.todayStyle.color=p)},null,8,["modelValue"])]),_:1}),d(M,{name:"Background color"},{default:f(()=>[d(Et,{modelValue:b(o).calendarViewSettings.todayStyle.background,"onUpdate:modelValue":h[13]||(h[13]=p=>b(o).calendarViewSettings.todayStyle.background=p)},null,8,["modelValue"])]),_:1}),d(M,{name:"Highlighting active note",header:""}),d(M,{name:"Text color"},{default:f(()=>[d(Et,{modelValue:b(o).calendarViewSettings.activeStyle.color,"onUpdate:modelValue":h[14]||(h[14]=p=>b(o).calendarViewSettings.activeStyle.color=p)},null,8,["modelValue"])]),_:1}),d(M,{name:"Background color"},{default:f(()=>[d(Et,{modelValue:b(o).calendarViewSettings.activeStyle.background,"onUpdate:modelValue":h[15]||(h[15]=p=>b(o).calendarViewSettings.activeStyle.background=p)},null,8,["modelValue"])]),_:1})]),_:1})],64))}}),tv=be(ev,[["__scopeId","data-v-c75e971d"]]);class nv extends te.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=this.app.vault.getAllLoadedFiles(),o=t.toLocaleLowerCase();return n.filter(a=>{if(!(a instanceof te.TFolder))return!1;const r=a.path.toLocaleLowerCase();return r==="/"?!1:r.includes(o)})}renderSuggestion(t,n){n.setText(t.path)}selectSuggestion(t){this.textInputElement.value=t.path,this.textInputElement.trigger("input"),this.close()}}const ov=["placeholder","disabled"],uu=B({__name:"FolderInput",props:Pt({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Rt(e,"modelValue"),n=ce(),o=gl();let a;return yt(()=>{n.value&&(a=new nv(o,n.value))}),el(()=>{a&&a.close()}),(r,l)=>Fn((v(),C("input",{ref_key:"element",ref:n,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),type:"text",placeholder:r.placeholder,disabled:r.disabled,spellcheck:"false"},null,8,ov)),[[Ho,t.value]])}}),av={},rv={class:"warn"};function lv(e,t){return v(),C("div",rv,t[0]||(t[0]=[k(" You use `W` to format weeks which does not respect custom week settings. This might show week number different from what is displayed in Calendar view."),g("br",null,null,-1),k(" It is recommended to use `w` instaed (and change start of week using plugin settings if needed). ")]))}const du=be(av,[["render",lv],["__scopeId","data-v-65f300b9"]]),sv={class:"u-pop"},cu=B({__name:"DateFormatPreview",props:{format:{}},setup(e){const t=e,n=w(()=>Ne().format(t.format)),o=w(()=>t.format.replaceAll(/\[.*?\]/gi,"").includes("W"));return(a,r)=>(v(),C("div",null,[r[0]||(r[0]=k(" Your current syntax looks like this: ")),g("b",sv,P(n.value),1),o.value?(v(),I(du,{key:0})):Y("",!0)]))}}),iv=B({__name:"DisplayVariable",props:{name:{}},setup(e){const t=e,n=w(()=>`{{${t.name}}}`);async function o(a){const r=a.target.textContent;if(r)try{await navigator.clipboard.writeText(r),new te.Notice("Copied to clipboard")}catch(l){console.error(l)}}return(a,r)=>(v(),C("span",{class:"variable",onClick:o},P(n.value),1))}}),kt=be(iv,[["__scopeId","data-v-bca8a59a"]]),uv=B({__name:"DateVariableReference.modal",setup(e){return(t,n)=>(v(),C(W,null,[n[9]||(n[9]=g("div",null,"Date variables support additional modifications.",-1)),n[10]||(n[10]=g("h4",null,"Changing date format",-1)),n[11]||(n[11]=g("p",null," By default date variables are formatted using Default date format defined in journal settings. However you can override it on variable level by adding colon and putting format definition after it. ",-1)),g("p",null,[n[0]||(n[0]=k("For example ")),d(kt,{name:"date:YYYY"}),n[1]||(n[1]=k(" will output only year."))]),n[12]||(n[12]=g("p",null,[g("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Formatting reference.")],-1)),n[13]||(n[13]=g("h4",null,"Date manipulation",-1)),n[14]||(n[14]=g("p",null,[k(" You can add or subtract some number of days, weeks, months, quarters or years to date variable by adding "),g("code",null,"+"),k(" or "),g("code",null,"-"),k(" and unit after name variable. ")],-1)),g("p",null,[n[2]||(n[2]=k("For example ")),d(kt,{name:"date+1w"}),n[3]||(n[3]=k(" will add 1 week to date."))]),n[15]||(n[15]=rl("<p>Supported units are:</p><ul><li><code>d</code>: days</li><li><code>w</code>: weeks</li><li><code>m</code>: month</li><li><code>q</code>: quarters</li><li><code>y</code>: years</li></ul><h4>Changing date to start or end of period</h4><p> Date can be changed to start or end of period by using <code>&lt;startOf=period&gt;</code> or <code>&lt;endOf=period&gt;</code></p>",4)),g("p",null,[n[4]||(n[4]=k("For example ")),d(kt,{name:"date<startOf=year>"}),n[5]||(n[5]=k(" will change date to January 1st"))]),n[16]||(n[16]=g("p",null,"Supported periods are:",-1)),n[17]||(n[17]=g("ul",null,[g("li",null,"week"),g("li",null,"month"),g("li",null,"quarter"),g("li",null,"year"),g("li",null,"decade")],-1)),n[18]||(n[18]=g("hr",null,null,-1)),n[19]||(n[19]=g("p",null,"All modifications can be used simultaneously",-1)),g("p",null,[n[6]||(n[6]=k(" For example ")),d(kt,{name:"date+1w<startOf=week>:MMM DD, YYYY"}),n[7]||(n[7]=k(" will modify date to first date of next week and format it using ")),n[8]||(n[8]=g("code",null,"MMM DD, YYYY",-1))])],64))}}),dv={class:"grid"},cv=B({__name:"VariableReference.modal",props:{type:{},dateFormat:{}},emits:["close"],setup(e){const t=he(),n=w(()=>e.type==="custom"?"interval":e.type);function o(){new Me(t,"Date variable modifications",uv,{}).open()}return(a,r)=>(v(),C(W,null,[r[27]||(r[27]=g("p",{class:"hint"},"Clicking on variable will copy it to clipboard.",-1)),g("div",dv,[g("div",null,[d(kt,{name:"journal_name"})]),r[24]||(r[24]=g("div",null,"Name of corresponding journal",-1)),g("div",null,[d(kt,{name:"note_name"})]),r[25]||(r[25]=g("div",null,"Name of current note",-1)),g("div",null,[d(kt,{name:"title"})]),r[26]||(r[26]=g("div",null,"Name of current note (to support core template variable)",-1)),g("div",null,[d(kt,{name:"date"})]),g("div",null,[k(" Note reference date formatted using default format settings ("+P(a.dateFormat)+").",1),r[3]||(r[3]=g("br",null,null,-1)),a.type==="week"?(v(),C(W,{key:0},[r[0]||(r[0]=k(" Is usually the first day of the week. But for weeks that are considered part of next year but have several day of previous year it will be the last day of week")),r[1]||(r[1]=g("br",null,null,-1))],64)):a.type!=="day"?(v(),C(W,{key:1},[k(" Is same as first day of "+P(n.value)+". ",1),r[2]||(r[2]=g("br",null,null,-1))],64)):Y("",!0),r[4]||(r[4]=k(" Variable supports ")),g("a",{href:"#",onClick:o},"additional modifications"),r[5]||(r[5]=k(". "))]),a.type!=="day"?(v(),C(W,{key:0},[g("div",null,[d(kt,{name:"start_date"})]),g("div",null,[k(" First day of "+P(n.value)+" formatted using default format settings ("+P(a.dateFormat)+").",1),r[6]||(r[6]=g("br",null,null,-1)),r[7]||(r[7]=k(" Variable supports ")),g("a",{href:"#",onClick:o},"additional modifications"),r[8]||(r[8]=k(". "))]),g("div",null,[d(kt,{name:"end_date"})]),g("div",null,[k(" Last day of "+P(n.value)+" formatted using default format settings ("+P(a.dateFormat)+").",1),r[9]||(r[9]=g("br",null,null,-1)),r[10]||(r[10]=k(" Variable supports ")),g("a",{href:"#",onClick:o},"additional modifications"),r[11]||(r[11]=k(". "))])],64)):Y("",!0),g("div",null,[d(kt,{name:"index"})]),g("div",null,"Index of current "+P(a.type==="custom"?"interval":a.type)+" if enabled.",1),g("div",null,[d(kt,{name:"current_date"})]),g("div",null,[r[12]||(r[12]=k(" Current date (in YYYY-MM-DD format)")),r[13]||(r[13]=g("br",null,null,-1)),r[14]||(r[14]=k(" Variable supports ")),g("a",{href:"#",onClick:o},"additional modifications"),r[15]||(r[15]=k(". "))]),g("div",null,[d(kt,{name:"time"})]),g("div",null,[r[16]||(r[16]=k(" Current time (in HH:mm format) ")),r[17]||(r[17]=g("br",null,null,-1)),r[18]||(r[18]=k(" Variable supports ")),g("a",{href:"#",onClick:o},"additional modifications"),r[19]||(r[19]=k(". "))]),g("div",null,[d(kt,{name:"current_time"})]),g("div",null,[r[20]||(r[20]=k(" Current time (in HH:mm format) ")),r[21]||(r[21]=g("br",null,null,-1)),r[22]||(r[22]=k(" Variable supports ")),g("a",{href:"#",onClick:o},"additional modifications"),r[23]||(r[23]=k(". "))])])],64))}}),fv=be(cv,[["__scopeId","data-v-aaa55dd0"]]),ha=B({__name:"VariableReferenceHint",props:{type:{},dateFormat:{}},setup(e){const t=e,n=he();function o(){new Me(n,"Variable reference",fv,{type:t.type,dateFormat:t.dateFormat}).open()}return(a,r)=>(v(),C("a",{href:"#",onClick:Ht(o,["prevent"])},"Supported variables."))}}),mv=["value"],pv={key:0},vv={key:1},ms=B({__name:"EditCommand.modal",props:{index:{},writeType:{},command:{},commands:{}},emits:["close","submit"],setup(e,{emit:t}){const n=t,o=new Set(te.getIconIds()),a=w(()=>Yp(e.writeType));function r(le){return le?!e.commands.some((U,se)=>U.name===le&&se!==e.index):!0}const{defineField:l,errorBag:s,handleSubmit:i}=gn({initialValues:e.command?{...e.command}:{...yp},validationSchema:yn(gt(Nt({icon:Ge(),name:gt(Ge(),qt("Command name is required"),so(r,"Command name should be unique in journal")),type:ht(["same","next","previous","same_next_week","same_previous_week","same_next_month","same_previous_month","same_next_year","same_previous_year"]),context:ht(["today","open_note","only_open_note"]),showInRibbon:en(),openMode:ht(["active","tab","split","window"])}),Ko(io([["showInRibbon"],["icon"]],le=>le.showInRibbon?o.has(le.icon):!0,"Icon is required if command is added to ribbon."),["icon"])))}),[u,c]=l("name"),[m,h]=l("icon"),[p,_]=l("type"),[y,x]=l("context"),[T,O]=l("showInRibbon"),[ee,N]=l("openMode"),A=w(()=>a.value.map(le=>({value:le,label:Ga(e.writeType,le,y.value)}))),re=i(le=>{n("submit",le,e.index),n("close")});return(le,U)=>(v(),C("form",{onSubmit:U[7]||(U[7]=(...se)=>b(re)&&b(re)(...se))},[d(M,{name:"Name"},{description:f(()=>[U[8]||(U[8]=k(" Journal name will be added to command name automatically. ")),d(et,{errors:b(s).name},null,8,["errors"])]),default:f(()=>[d(qe,Se({modelValue:b(u),"onUpdate:modelValue":U[0]||(U[0]=se=>de(u)?u.value=se:null)},b(c)),null,16,["modelValue"])]),_:1}),d(M,{name:"Show in ribbon?"},{default:f(()=>[d(He,Se({modelValue:b(T),"onUpdate:modelValue":U[1]||(U[1]=se=>de(T)?T.value=se:null)},b(O)),null,16,["modelValue"])]),_:1}),b(T)?(v(),I(M,{key:0,name:"Icon"},{description:f(()=>[d(et,{errors:b(s).icon},null,8,["errors"])]),default:f(()=>[d(yl,Se({modelValue:b(m),"onUpdate:modelValue":U[2]||(U[2]=se=>de(m)?m.value=se:null)},b(h)),null,16,["modelValue"])]),_:1})):Y("",!0),d(M,{name:"When command runs"},{default:f(()=>[d(xe,Se({modelValue:b(p),"onUpdate:modelValue":U[3]||(U[3]=se=>de(p)?p.value=se:null)},b(_)),{default:f(()=>[(v(!0),C(W,null,_e(A.value,se=>(v(),C("option",{key:se.value,value:se.value},P(se.label),9,mv))),128))]),_:1},16,["modelValue"])]),_:1}),b(p)!=="same"?(v(),I(M,{key:1,name:"Context"},{description:f(()=>[U[9]||(U[9]=k(" Allows to run command only in specific context.")),U[10]||(U[10]=g("br",null,null,-1)),b(y)=="open_note"?(v(),C("div",pv," If there is an open journal note - its date will be takes as current, otherwise command will run relative to today. ")):Y("",!0),b(y)=="only_open_note"?(v(),C("div",vv," Will only run when there is an open journal note using its date as current. ")):Y("",!0)]),default:f(()=>[d(xe,Se({modelValue:b(y),"onUpdate:modelValue":U[4]||(U[4]=se=>de(y)?y.value=se:null)},b(x)),{default:f(()=>U[11]||(U[11]=[g("option",{value:"today"},"Today",-1),g("option",{value:"open_note"},"Currently opened note",-1),g("option",{value:"only_open_note"},"Only currently opened note",-1)])),_:1},16,["modelValue"])]),_:1})):Y("",!0),d(M,{name:"Open note"},{default:f(()=>[d(xe,Se({modelValue:b(ee),"onUpdate:modelValue":U[5]||(U[5]=se=>de(ee)?ee.value=se:null)},b(N)),{default:f(()=>U[12]||(U[12]=[g("option",{value:"active"},"Replacing active note",-1),g("option",{value:"tab"},"In new tab",-1),g("option",{value:"split"},"Adjacent to active note",-1),g("option",{value:"window"},"In popout window",-1)])),_:1},16,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:U[6]||(U[6]=se=>le.$emit("close"))},{default:f(()=>U[13]||(U[13]=[k("Cancel")])),_:1}),d(ie,{cta:"",type:"submit"},{default:f(()=>U[14]||(U[14]=[k("Save")])),_:1})]),_:1})],32))}}),hv=B({__name:"DecorationShape",props:{decoration:{}},setup(e){jn(a=>({"2bb4d278":o.value,"4a068bcc":n.value}));const t=e,n=w(()=>xt(t.decoration.color)),o=w(()=>`${t.decoration.size??.4}em`);return(a,r)=>(v(),C("div",{class:Dt(["shape-decoration",[`shape-${a.decoration.shape}`]])},null,2))}}),gv=be(hv,[["__scopeId","data-v-19bc1d49"]]),yv=B({__name:"DecorationCorner",props:{decoration:{}},setup(e){jn(o=>({"2da80fea":n.value}));const t=e,n=w(()=>xt(t.decoration.color));return(o,a)=>(v(),C("div",{class:Dt(["decoration-corner",[o.decoration.placement]])},null,2))}}),wv=be(yv,[["__scopeId","data-v-a31b2a0a"]]),bv=B({__name:"DecorationIcon",props:{decoration:{}},setup(e){jn(a=>({"3aca967e":n.value,"7dcba986":o.value}));const t=e,n=w(()=>xt(t.decoration.color)),o=w(()=>`${t.decoration.size??.5}em`);return(a,r)=>(v(),I(hn,{name:a.decoration.icon,class:"icon-decoration"},null,8,["name"]))}}),kv=be(bv,[["__scopeId","data-v-365c9744"]]),_v={class:"calendar-decoration"},Cv={class:"decoration-holder"},Sv={class:"decoration-content"},xv=B({__name:"CalendarDecoration",props:{styles:{}},setup(e){jn(c=>({"11d4f683":i.value,"6e15a508":n.value,"1c3b1428":o.value}));const t=e,n=w(()=>{const c=t.styles.find(m=>m.type==="background");return c?xt(c.color):"inherit"}),o=w(()=>{const c=t.styles.find(m=>m.type==="color");return c?xt(c.color):"inherit"}),a=w(()=>t.styles.filter(c=>c.type==="corner")),r=w(()=>{const c={left_top:[],left_middle:[],left_bottom:[],center_top:[],center_middle:[],center_bottom:[],right_top:[],right_middle:[],right_bottom:[]};for(const m of t.styles)(m.type==="shape"||m.type==="icon")&&c[`${m.placement_x}_${m.placement_y}`].push(m);return c}),l=w(()=>t.styles.filter(c=>c.type==="border")),s=w(()=>{const c={borderTop:"none",borderBottom:"none",borderLeft:"none",borderRight:"none"};for(const m of l.value)if(m.border==="uniform"){const h=u(m.left);h!=="none"&&(c.borderTop=h,c.borderBottom=h,c.borderLeft=h,c.borderRight=h)}else{const h=u(m.left);h!=="none"&&(c.borderLeft=h);const p=u(m.right);p!=="none"&&(c.borderRight=p);const _=u(m.top);_!=="none"&&(c.borderTop=_);const y=u(m.bottom);y!=="none"&&(c.borderBottom=y)}return c}),i=w(()=>{let c=0,m=0,h=0,p=0,_=0,y=0,x=0,T=0;for(const O of t.styles)if(!(O.type==="background"||O.type==="color")){if(O.type==="border")O.border==="uniform"?(_=Math.max(_,O.left.width),y=Math.max(y,O.left.width),x=Math.max(x,O.right.width),T=Math.max(T,O.bottom.width)):(_=Math.max(_,O.top.width),y=Math.max(y,O.left.width),x=Math.max(x,O.right.width),T=Math.max(T,O.bottom.width));else if(O.type==="shape"||O.type==="icon"){const ee=O.type==="shape"?.4:.5;switch(O.placement_y){case"top":{c=Math.max(c,O.size??ee);break}case"bottom":{p=Math.max(p,O.size??ee);break}}switch(O.placement_x){case"left":{m=Math.max(m,O.size??ee);break}case"right":{h=Math.max(h,O.size??ee);break}}}}return`max(${c+.1}em, ${_+2}px) max(${h+.1}em, ${x+2}px) max(${p+.1}em, ${T+2}px) max(${m+.1}em, ${y+2}px)`});function u(c){return c.show?`${c.width}px ${c.style} ${xt(c.color)}`:"none"}return(c,m)=>(v(),C("span",_v,[g("span",{class:"decoration-border",style:ao(s.value)},null,4),(v(!0),C(W,null,_e(a.value,(h,p)=>(v(),I(wv,{key:p,decoration:h},null,8,["decoration"]))),128)),g("span",Cv,[(v(!0),C(W,null,_e(r.value,(h,p)=>(v(),C(W,{key:p},[h.length>0?(v(),C("span",{key:0,class:Dt(`place place-${p}`)},[(v(!0),C(W,null,_e(h,(_,y)=>(v(),C(W,{key:y},[_.type==="icon"?(v(),I(kv,{key:0,decoration:_},null,8,["decoration"])):_.type==="shape"?(v(),I(gv,{key:1,decoration:_},null,8,["decoration"])):Y("",!0)],64))),128))],2)):Y("",!0)],64))),128))]),g("span",Sv,[Ke(c.$slots,"default",{},void 0,!0)])]))}}),Qo=be(xv,[["__scopeId","data-v-eeaba3af"]]);function Vv(e){return Ds()?(Eu(e),!0):!1}const fu=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Dv=Object.prototype.toString,jv=e=>Dv.call(e)==="[object Object]",Yn=()=>{},$v=Mv();function Mv(){var e,t;return fu&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function kr(e){return Array.isArray(e)?e:[e]}function Nv(e,t,n){return nt(e,t,{...n,immediate:!0})}const mu=fu?window:void 0;function Co(e){var t;const n=We(e);return(t=n?.$el)!=null?t:n}function wo(...e){const t=[],n=()=>{t.forEach(s=>s()),t.length=0},o=(s,i,u,c)=>(s.addEventListener(i,u,c),()=>s.removeEventListener(i,u,c)),a=w(()=>{const s=kr(We(e[0])).filter(i=>i!=null);return s.every(i=>typeof i!="string")?s:void 0}),r=Nv(()=>{var s,i;return[(i=(s=a.value)==null?void 0:s.map(u=>Co(u)))!=null?i:[mu].filter(u=>u!=null),kr(We(a.value?e[1]:e[0])),kr(b(a.value?e[2]:e[1])),We(a.value?e[3]:e[2])]},([s,i,u,c])=>{if(n(),!s?.length||!i?.length||!u?.length)return;const m=jv(c)?{...c}:c;t.push(...s.flatMap(h=>i.flatMap(p=>u.map(_=>o(h,p,_,m)))))},{flush:"post"}),l=()=>{r(),n()};return Vv(n),l}let ps=!1;function Av(e,t,n={}){const{window:o=mu,ignore:a=[],capture:r=!0,detectIframe:l=!1,controls:s=!1}=n;if(!o)return s?{stop:Yn,cancel:Yn,trigger:Yn}:Yn;if($v&&!ps){ps=!0;const x={passive:!0};Array.from(o.document.body.children).forEach(T=>wo(T,"click",Yn,x)),wo(o.document.documentElement,"click",Yn,x)}let i=!0;const u=x=>We(a).some(T=>{if(typeof T=="string")return Array.from(o.document.querySelectorAll(T)).some(O=>O===x.target||x.composedPath().includes(O));{const O=Co(T);return O&&(x.target===O||x.composedPath().includes(O))}});function c(x){const T=We(x);return T&&T.$.subTree.shapeFlag===16}function m(x,T){const O=We(x),ee=O.$.subTree&&O.$.subTree.children;return ee==null||!Array.isArray(ee)?!1:ee.some(N=>N.el===T.target||T.composedPath().includes(N.el))}const h=x=>{const T=Co(e);if(x.target!=null&&!(!(T instanceof Element)&&c(e)&&m(e,x))&&!(!T||T===x.target||x.composedPath().includes(T))){if("detail"in x&&x.detail===0&&(i=!u(x)),!i){i=!0;return}t(x)}};let p=!1;const _=[wo(o,"click",x=>{p||(p=!0,setTimeout(()=>{p=!1},0),h(x))},{passive:!0,capture:r}),wo(o,"pointerdown",x=>{const T=Co(e);i=!u(x)&&!!(T&&!x.composedPath().includes(T))},{passive:!0}),l&&wo(o,"blur",x=>{setTimeout(()=>{var T;const O=Co(e);((T=o.document.activeElement)==null?void 0:T.tagName)==="IFRAME"&&!O?.contains(o.document.activeElement)&&t(x)},0)},{passive:!0})].filter(Boolean),y=()=>_.forEach(x=>x());return s?{stop:y,cancel:()=>{i=!1},trigger:x=>{i=!0,h(x),i=!1}}:y}const Tv={class:"button-dropdown"},Ov=B({__name:"ButtonDropdown",props:{options:{}},emits:["select"],setup(e,{emit:t}){const n=t,o=ce(!1),a=ce(),r=ce(),l=ce({});Av(r,()=>{o.value=!1});function s(){if(!a.value)return;const u=a.value.$el.getBoundingClientRect();l.value={top:`${u.top+u.height}px`,left:`${u.left}px`},o.value=!0}function i(u){o.value=!1,n("select",u)}return(u,c)=>(v(),C("div",Tv,[d(ie,{ref_key:"buttonRef",ref:a,onClick:s},{default:f(()=>[Ke(u.$slots,"default",{},void 0,!0)]),_:3},512),(v(),I(wd,{to:"body"},[o.value?(v(),C("div",{key:0,ref_key:"popoutRef",ref:r,class:"button-dropdown-popout",style:ao(l.value)},[(v(!0),C(W,null,_e(u.options,m=>(v(),I(ie,{key:m.value,flat:"",class:"button-dropdown-option",onClick:h=>i(m.value)},{default:f(()=>[k(P(m.label),1)]),_:2},1032,["onClick"]))),128))],4)):Y("",!0)]))]))}}),Er=be(Ov,[["__scopeId","data-v-9329b5b0"]]),Fv={class:"condition-type"},Ev=B({__name:"ConditionNoteName",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.condition},set(l){o("change",{prop:"condition",value:l})}}),r=w({get(){return n.condition.value},set(l){o("change",{prop:"value",value:l})}});return(l,s)=>(v(),C(W,null,[g("span",Fv,P(l.condition.type),1),d(xe,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>s[2]||(s[2]=[g("option",{value:"contains"},"contains",-1),g("option",{value:"starts-with"},"starts with",-1),g("option",{value:"ends-with"},"ends with",-1)])),_:1},8,["modelValue"]),d(qe,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"])],64))}}),pu=be(Ev,[["__scopeId","data-v-2b66f529"]]),Iv={class:"condition-type"},Pv=B({__name:"ConditionTag",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.condition},set(l){o("change",{prop:"condition",value:l})}}),r=w({get(){return n.condition.value},set(l){o("change",{prop:"value",value:l})}});return(l,s)=>(v(),C(W,null,[g("span",Iv,P(l.condition.type),1),d(xe,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>s[2]||(s[2]=[g("option",{value:"contains"},"contains",-1),g("option",{value:"starts-with"},"starts with",-1),g("option",{value:"ends-with"},"ends with",-1)])),_:1},8,["modelValue"]),d(qe,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"])],64))}}),vu=be(Pv,[["__scopeId","data-v-bb471cda"]]),hu=B({__name:"ConditionProperty",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.name},set(i){o("change",{prop:"name",value:i})}}),r=w({get(){return n.condition.condition},set(i){o("change",{prop:"condition",value:i})}}),l=w({get(){return n.condition.value},set(i){o("change",{prop:"value",value:i})}}),s=w(()=>n.condition.condition!=="exists"&&n.condition.condition!=="does-not-exist");return(i,u)=>(v(),C(W,null,[u[4]||(u[4]=k(" Property ")),d(qe,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=c=>a.value=c)},null,8,["modelValue"]),d(xe,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=c=>r.value=c)},{default:f(()=>u[3]||(u[3]=[g("option",{value:"exists"},"exists",-1),g("option",{value:"does-not-exist"},"does not exist",-1),g("option",{value:"eq"},"equals",-1),g("option",{value:"neq"},"does not equal",-1),g("option",{value:"contains"},"contains",-1),g("option",{value:"does-not-contain"},"does not contain",-1),g("option",{value:"starts-with"},"starts with",-1),g("option",{value:"ends-with"},"ends with",-1)])),_:1},8,["modelValue"]),s.value?(v(),I(qe,{key:0,modelValue:l.value,"onUpdate:modelValue":u[2]||(u[2]=c=>l.value=c)},null,8,["modelValue"])):Y("",!0)],64))}}),Rv=["value"],Bv=["value"],Yv=B({__name:"ConditionDate",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return String(n.condition.day)},set(i){o("change",{prop:"day",value:Number.parseInt(i,10)})}}),r=w({get(){return String(n.condition.month)},set(i){o("change",{prop:"month",value:Number.parseInt(i,10)})}}),l=w({get(){return n.condition.year??void 0},set(i){o("change",{prop:"year",value:i??null})}}),s=te.moment().localeData().months();return(i,u)=>(v(),C(W,null,[d(xe,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=c=>a.value=c)},{default:f(()=>[u[3]||(u[3]=g("option",{value:-1},"Any day",-1)),(v(),C(W,null,_e(31,c=>g("option",{key:c,value:c},P(c),9,Rv)),64))]),_:1},8,["modelValue"]),d(xe,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=c=>r.value=c)},{default:f(()=>[u[4]||(u[4]=g("option",{value:-1},"Any month",-1)),(v(!0),C(W,null,_e(b(s),(c,m)=>(v(),C("option",{key:m,value:m},P(c),9,Bv))),128))]),_:1},8,["modelValue"]),d(tn,{modelValue:l.value,"onUpdate:modelValue":u[2]||(u[2]=c=>l.value=c),placeholder:"Any year"},null,8,["modelValue"])],64))}}),Uv={class:"wrapper"},Lv=["value"],Wv=B({__name:"ConditionWeekday",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=he(),r=a.calendarSettings.dow===-1?te.moment().localeData().firstDayOfWeek():a.calendarSettings.dow,l=[];for(let u=r;u<7;++u)l.push(u);for(let u=0;u<r;++u)l.push(u);const s=l.map(u=>({label:te.moment().localeData().weekdaysShort()[u],value:u})),i=ce([...n.condition.weekdays]);return nt(()=>i.value.length,()=>{o("change",{prop:"weekdays",value:[...i.value]})}),(u,c)=>(v(),C("div",Uv,[(v(!0),C(W,null,_e(b(s),({label:m,value:h})=>(v(),C("label",{key:h},[k(P(m)+" ",1),Fn(g("input",{"onUpdate:modelValue":c[0]||(c[0]=p=>i.value=p),type:"checkbox",value:h},null,8,Lv),[[Ec,i.value]])]))),128))]))}}),Jv=be(Wv,[["__scopeId","data-v-250c50b8"]]),qv=B({__name:"ConditionOffset",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.offset},set(r){o("change",{prop:"offset",value:r})}});return(r,l)=>(v(),C("div",null,[d(tn,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s)},null,8,["modelValue"]),k(" days from interval "+P(a.value>=0?"start":"end"),1)]))}}),Hv=B({__name:"ConditionTypeOnly",props:{condition:{}},setup(e){const t={"has-note":"There is a note connected to date","has-open-task":"There is no completed task in a note connected to date","all-tasks-completed":"All tasks in the note connected to date have been completed"};return(n,o)=>(v(),C("div",null,P(t[n.condition.type]),1))}}),zv=B({__name:"ConditionItem",props:{condition:{}},emits:["change"],setup(e){const t=w(()=>{switch(e.condition.type){case"title":return pu;case"tag":return vu;case"property":return hu;case"date":return Yv;case"weekday":return Jv;case"offset":return qv;case"all-tasks-completed":case"has-note":case"has-open-task":return Hv}return null});return(n,o)=>t.value?(v(),I(Jo(t.value),{key:0,condition:n.condition,onChange:o[0]||(o[0]=a=>n.$emit("change",a))},null,40,["condition"])):Y("",!0)}}),Kv=B({__name:"DecorationBackground",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.color},set(r){o("change",{prop:"color",value:r})}});return(r,l)=>(v(),I(M,{name:"Background color"},{default:f(()=>[d(Et,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s)},null,8,["modelValue"])]),_:1}))}}),Gv=B({__name:"DecorationColor",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.color},set(r){o("change",{prop:"color",value:r})}});return(r,l)=>(v(),I(M,{name:"Text color"},{default:f(()=>[d(Et,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s)},null,8,["modelValue"])]),_:1}))}}),Qv=B({__name:"DecorationShape",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.shape},set(u){o("change",{prop:"shape",value:u})}}),r=w({get(){return n.decoration.color},set(u){o("change",{prop:"color",value:u})}}),l=w({get(){return n.decoration.placement_x},set(u){o("change",{prop:"placement_x",value:u})}}),s=w({get(){return n.decoration.placement_y},set(u){o("change",{prop:"placement_y",value:u})}}),i=w({get(){return n.decoration.size??.4},set(u){o("change",{prop:"size",value:u})}});return(u,c)=>{const m=$d("ObsidianNumberInput");return v(),C(W,null,[d(M,{name:"Shape"},{default:f(()=>[d(xe,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=h=>a.value=h)},{default:f(()=>c[5]||(c[5]=[g("option",{value:"circle"},"Circle",-1),g("option",{value:"square"},"Square",-1),g("option",{value:"triangle-up"},"Triangle Up",-1),g("option",{value:"triangle-down"},"Triangle Down",-1),g("option",{value:"triangle-left"},"Triangle Left",-1),g("option",{value:"triangle-right"},"Triangle Right",-1)])),_:1},8,["modelValue"])]),_:1}),d(M,{name:"Color"},{default:f(()=>[d(Et,{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=h=>r.value=h)},null,8,["modelValue"])]),_:1}),d(M,{name:"Size"},{description:f(()=>c[6]||(c[6]=[k(" Shape size is relative to font size where 1 means that a figure is same size as a letter ")])),default:f(()=>[d(m,{modelValue:i.value,"onUpdate:modelValue":c[2]||(c[2]=h=>i.value=h),min:.1,step:.1},null,8,["modelValue"])]),_:1}),d(M,{name:"Placement"},{default:f(()=>[d(xe,{modelValue:l.value,"onUpdate:modelValue":c[3]||(c[3]=h=>l.value=h)},{default:f(()=>c[7]||(c[7]=[g("option",{value:"left"},"Left",-1),g("option",{value:"center"},"Center",-1),g("option",{value:"right"},"Right",-1)])),_:1},8,["modelValue"]),d(xe,{modelValue:s.value,"onUpdate:modelValue":c[4]||(c[4]=h=>s.value=h)},{default:f(()=>c[8]||(c[8]=[g("option",{value:"top"},"Top",-1),g("option",{value:"middle"},"Middle",-1),g("option",{value:"bottom"},"Bottom",-1)])),_:1},8,["modelValue"])]),_:1})],64)}}}),Xv=B({__name:"DecorationCorner",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.placement},set(l){o("change",{prop:"placement",value:l})}}),r=w({get(){return n.decoration.color},set(l){o("change",{prop:"color",value:l})}});return(l,s)=>(v(),C(W,null,[d(M,{name:"Placement"},{default:f(()=>[d(xe,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>s[2]||(s[2]=[g("option",{value:"top-left"},"Top Left",-1),g("option",{value:"top-right"},"Top Right",-1),g("option",{value:"bottom-left"},"Bottom Left",-1),g("option",{value:"bottom-right"},"Bottom Right",-1)])),_:1},8,["modelValue"])]),_:1}),d(M,{name:"Color"},{default:f(()=>[d(Et,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"])]),_:1})],64))}}),Zv=B({__name:"DecorationIcon",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.icon},set(u){o("change",{prop:"icon",value:u})}}),r=w({get(){return n.decoration.color},set(u){o("change",{prop:"color",value:u})}}),l=w({get(){return n.decoration.placement_x},set(u){o("change",{prop:"placement_x",value:u})}}),s=w({get(){return n.decoration.placement_y},set(u){o("change",{prop:"placement_y",value:u})}}),i=w({get(){return n.decoration.size??.5},set(u){o("change",{prop:"size",value:u})}});return(u,c)=>(v(),C(W,null,[d(M,{name:"Icon"},{default:f(()=>[d(yl,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=m=>a.value=m)},null,8,["modelValue"])]),_:1}),d(M,{name:"Color"},{default:f(()=>[d(Et,{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=m=>r.value=m)},null,8,["modelValue"])]),_:1}),d(M,{name:"Size"},{description:f(()=>c[5]||(c[5]=[k(" Icon size is relative to font size where 1 means that an icon is same size as a letter ")])),default:f(()=>[d(tn,{modelValue:i.value,"onUpdate:modelValue":c[2]||(c[2]=m=>i.value=m),min:.1,step:.1},null,8,["modelValue"])]),_:1}),d(M,{name:"Placement"},{default:f(()=>[d(xe,{modelValue:l.value,"onUpdate:modelValue":c[3]||(c[3]=m=>l.value=m)},{default:f(()=>c[6]||(c[6]=[g("option",{value:"left"},"Left",-1),g("option",{value:"center"},"Center",-1),g("option",{value:"right"},"Right",-1)])),_:1},8,["modelValue"]),d(xe,{modelValue:s.value,"onUpdate:modelValue":c[4]||(c[4]=m=>s.value=m)},{default:f(()=>c[7]||(c[7]=[g("option",{value:"top"},"Top",-1),g("option",{value:"middle"},"Middle",-1),g("option",{value:"bottom"},"Bottom",-1)])),_:1},8,["modelValue"])]),_:1})],64))}}),sa=B({__name:"DecorationBorderSide",props:{border:{},label:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.border.show},set(i){o("change",{prop:"show",value:i})}}),r=w({get(){return n.border.width},set(i){o("change",{prop:"width",value:i})}}),l=w({get(){return n.border.color},set(i){o("change",{prop:"color",value:i})}}),s=w({get(){return n.border.style},set(i){o("change",{prop:"style",value:i})}});return(i,u)=>(v(),I(M,{name:i.label},{default:f(()=>[d(He,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=c=>a.value=c)},null,8,["modelValue"]),a.value?(v(),C(W,{key:0},[d(tn,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=c=>r.value=c),narrow:"",min:1},null,8,["modelValue"]),d(xe,{modelValue:s.value,"onUpdate:modelValue":u[2]||(u[2]=c=>s.value=c)},{default:f(()=>u[4]||(u[4]=[g("option",{value:"solid"},"Solid",-1),g("option",{value:"dotted"},"Dotted",-1),g("option",{value:"dashed"},"Dashed",-1),g("option",{value:"groove"},"groove",-1),g("option",{value:"groove"},"ridge",-1)])),_:1},8,["modelValue"]),d(Et,{modelValue:l.value,"onUpdate:modelValue":u[3]||(u[3]=c=>l.value=c)},null,8,["modelValue"])],64)):Y("",!0)]),_:1},8,["name"]))}}),eh=B({__name:"DecorationBorder",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.border},set(l){o("change",{prop:"border",value:l})}});function r(l,s){o("change",{prop:l,value:{...n.decoration[l],[s.prop]:s.value}})}return(l,s)=>(v(),C(W,null,[d(M,{name:"Border appearance"},{default:f(()=>[d(xe,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>s[5]||(s[5]=[g("option",{value:"uniform"},"Uniform",-1),g("option",{value:"different"},"Per side setup",-1)])),_:1},8,["modelValue"])]),_:1}),d(sa,{label:a.value==="uniform"?"":"Left",border:l.decoration.left,onChange:s[1]||(s[1]=i=>r("left",i))},null,8,["label","border"]),a.value!=="uniform"?(v(),C(W,{key:0},[d(sa,{label:"Top",border:l.decoration.top,onChange:s[2]||(s[2]=i=>r("top",i))},null,8,["border"]),d(sa,{label:"Right",border:l.decoration.right,onChange:s[3]||(s[3]=i=>r("right",i))},null,8,["border"]),d(sa,{label:"Bottom",border:l.decoration.bottom,onChange:s[4]||(s[4]=i=>r("bottom",i))},null,8,["border"])],64)):Y("",!0)],64))}}),th=B({__name:"DecorationItem",props:{decoration:{}},emits:["change"],setup(e){const t=w(()=>{switch(e.decoration.type){case"background":return Kv;case"color":return Gv;case"shape":return Qv;case"corner":return Xv;case"icon":return Zv;case"border":return eh}return null});return(n,o)=>(v(),I(Jo(t.value),{decoration:n.decoration,onChange:o[0]||(o[0]=a=>n.$emit("change",a))},null,40,["decoration"]))}}),nh={key:0,class:"mode-hint"},oh={key:0,class:"journal-hint"},ah={class:"preview-container"},rh={class:"preview-decoration-block"},lh={key:0,class:"journal-hint"},sh={key:0,class:"separator"},ih=B({__name:"EditDecoration.modal",props:{index:{},writeType:{},decoration:{}},emits:["close","submit"],setup(e,{emit:t}){const n=e,o=t,a=Ne().day(),r=ce(n.decoration?.mode??"and"),l=w(()=>{const N=["title","tag","property","has-note","has-open-task","all-tasks-completed"];return n.writeType==="day"?[...N,"date","weekday"]:n.writeType==="custom"?[...N,"offset"]:N}),s=ce(n.decoration?Vt(n.decoration.conditions):[]),i=w(()=>{const N=new Set(s.value.map(({type:A})=>A));return l.value.filter(A=>!N.has(A)).map(A=>({value:A,label:Xm[A]}))});function u(N){s.value.push(Vt(au[N]))}function c(N){s.value.splice(N,1)}function m(N,A){N[A.prop]=A.value}const h=["background","color","shape","corner","icon","border"],p=ce(n.decoration?Vt(n.decoration.styles):[]),_=w(()=>{const N=new Set(p.value.map(({type:A})=>A));return h.filter(A=>!N.has(A)).map(A=>({value:A,label:A}))});function y(N){p.value.push(Vt(wp[N]))}function x(N){p.value.splice(N,1)}function T(N,A){N[A.prop]=A.value}const O=w(()=>p.value.length>0&&s.value.length>0);function ee(){o("submit",{mode:r.value,conditions:s.value,styles:p.value}),o("close")}return(N,A)=>(v(),C("div",null,[d(M,null,{default:f(()=>[A[3]||(A[3]=k(" Decorate elements in calendar when ")),d(xe,{modelValue:r.value,"onUpdate:modelValue":A[0]||(A[0]=re=>r.value=re)},{default:f(()=>A[2]||(A[2]=[g("option",{value:"and"},"all conditions are",-1),g("option",{value:"or"},"any conditions is",-1)])),_:1},8,["modelValue"]),A[4]||(A[4]=k(" fulfilled "))]),_:1}),d(M,null,{default:f(()=>[d(Er,{options:i.value,onSelect:u},{default:f(()=>A[5]||(A[5]=[k("Add condition")])),_:1},8,["options"])]),_:1}),(v(!0),C(W,null,_e(s.value,(re,le)=>(v(),I(M,{key:le,class:"condition-wrapper"},{default:f(()=>[le>0?(v(),C("span",nh,P(r.value),1)):Y("",!0),d(zv,{condition:re,onChange:U=>m(re,U)},null,8,["condition","onChange"]),d(ge,{icon:"trash",onClick:U=>c(le)},null,8,["onClick"])]),_:2},1024))),128)),s.value.length===0?(v(),C("p",oh,"No conditions defined yet")):Y("",!0),A[9]||(A[9]=g("div",{class:"separator"},null,-1)),g("div",ah,[g("div",null,[g("div",rh,[d(Qo,{class:"preview-decoration",styles:p.value},{default:f(()=>[g("span",null,P(b(a)),1)]),_:1},8,["styles"])])]),g("div",null,[d(M,null,{default:f(()=>[d(Er,{options:_.value,onSelect:y},{default:f(()=>A[6]||(A[6]=[k("Add style")])),_:1},8,["options"])]),_:1}),p.value.length===0?(v(),C("p",lh,"No styles defined yet")):Y("",!0),(v(!0),C(W,null,_e(p.value,(re,le)=>(v(),C("div",{key:le},[le>0?(v(),C("div",sh)):Y("",!0),d(M,null,{name:f(()=>[k("Decorating "+P(re.type),1)]),default:f(()=>[d(ge,{icon:"trash",onClick:U=>x(le)},null,8,["onClick"])]),_:2},1024),d(th,{decoration:re,onChange:U=>T(re,U)},null,8,["decoration","onChange"])]))),128))])]),d(M,{heading:""},{default:f(()=>[d(ie,{onClick:A[1]||(A[1]=re=>N.$emit("close"))},{default:f(()=>A[7]||(A[7]=[k("Cancel")])),_:1}),d(ie,{cta:"",disabled:!O.value,onClick:ee},{default:f(()=>A[8]||(A[8]=[k("Save")])),_:1},8,["disabled"])]),_:1})]))}}),vs=be(ih,[["__scopeId","data-v-8284eb68"]]),uh=B({__name:"RenameJournal.modal",props:{name:{}},emits:["save","close"],setup(e,{emit:t}){const n=e,o=t,a=he();function r(h){return h===n.name||h!==n.name&&!a.hasJournal(h)}const{defineField:l,errorBag:s,handleSubmit:i}=gn({initialValues:{journalName:n.name},validationSchema:yn(Nt({journalName:gt(Ge(),qt("Journal name is required"),so(r,"Journal name should be unique"))}))}),[u,c]=l("journalName"),m=i(h=>{h.journalName!==n.name&&o("save",h.journalName),o("close")});return(h,p)=>(v(),C("form",{onSubmit:p[2]||(p[2]=Ht((..._)=>b(m)&&b(m)(..._),["prevent"]))},[d(M,{name:"New name"},{description:f(()=>[p[3]||(p[3]=k(" Renaming journal will require restart if you have ribbon icons and/or commands configured. ")),d(et,{errors:b(s).journalName},null,8,["errors"])]),default:f(()=>[d(qe,Se({modelValue:b(u),"onUpdate:modelValue":p[0]||(p[0]=_=>de(u)?u.value=_:null)},b(c)),null,16,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:p[1]||(p[1]=_=>h.$emit("close"))},{default:f(()=>p[4]||(p[4]=[k("Cancel")])),_:1}),d(ie,{cta:"",type:"submit"},{default:f(()=>p[5]||(p[5]=[k("Save")])),_:1})]),_:1})],32))}}),dh={d:"day",m:"month",q:"quarter",w:"week",y:"year",h:"hour"};function _r(e,t,n){if(t.math&&t.unit&&e.add(Number.parseInt(t.math,10),dh[t.unit]),t.shift&&t.shiftTo)if(t.shiftTo==="decade"){const o=t.shift==="start"?e.year()-e.year()%10:e.year()+(9-e.year()%10);e.year(o),t.shift==="start"?e.startOf("year"):e.endOf("year")}else e[t.shift==="start"?"startOf":"endOf"](t.shiftTo);return e.format(t.format??n)}function Ot(e,t){let n=e??"";for(const[l,s]of Object.entries(t))switch(s.type){case"string":case"number":{n=n.replaceAll(`{{${l}}}`,(s.value??"").toString());break}case"date":{const i=new RegExp(`{{\\s*(${l})\\s*((?<math>[+-]\\d+)(?<unit>[yqmwd]))?\\s*(<(?<shift>start|end)Of=(?<shiftTo>.*?)>)?\\s*(:(?<format>.*?))?}}`,"gi");n=n.replaceAll(i,(...u)=>{const c=u.at(-1),m=X(s.value);return _r(m,c,s.defaultFormat)});break}}const o=te.moment(),a="HH:mm";n=n.replaceAll(/{{\s*(time|current_time)\s*((?<math>[+-]\d+)(?<unit>[yqmwd]))?\s*(<(?<shift>start|end)Of=(?<shiftTo>.*?)>)?\s*(:(?<format>.*?))?}}/gi,(...l)=>{const s=l.at(-1),i=o.clone();return _r(i,s,a)});const r="YYYY-MM-DD";return n=n.replaceAll(/{{\s*(current_date)\s*((?<math>[+-]\d+)(?<unit>[yqmwd]))?\s*(<(?<shift>start|end)Of=(?<shiftTo>.*?)>)?\s*(:(?<format>.*?))?}}/gi,(...l)=>{const s=l.at(-1),i=o.clone();return _r(i,s,r)}),n}function gu(e,t){if(!t.includes("<%")&&!t.includes("%>"))return!1;const n=e.plugins.getPlugin("templater-obsidian");return!(!n||!("templater"in n)||!("create_running_config"in n.templater)||!("parse_template"in n.templater))}function ch(e){const t=e.plugins.getPlugin("templater-obsidian");return!(!t||!("editor_handler"in t)||!("jump_to_next_cursor_location"in t.editor_handler))}async function fh(e,t){if(!ch(e))return!1;const n=e.plugins.getPlugin("templater-obsidian");return n?(await n.editor_handler.jump_to_next_cursor_location(t,!0),!0):!1}async function mh(e,t,n,o){if(!gu(e,o))return o;const a=e.plugins.getPlugin("templater-obsidian");if(!a)return o;try{const r=a.templater.create_running_config(t,n,0);return await a.templater.parse_template(r,o)}catch(r){console.error("Error applying templater",r)}return o}function Xo(e){const t=Xt(e),n=he(),o=w(()=>{const T=t.value;return n.usesShelves&&T?n.journals.filter(O=>O.shelfName===T):n.journals}),a=w(()=>o.value.filter(T=>T.type==="day")),r=w(()=>o.value.filter(T=>T.type==="week")),l=w(()=>o.value.filter(T=>T.type==="month")),s=w(()=>o.value.filter(T=>T.type==="quarter")),i=w(()=>o.value.filter(T=>T.type==="year")),u=w(()=>o.value.filter(T=>T.type==="custom")),c=w(()=>[...Nn(a.value),...Nn(u.value,T=>T.conditions.some(O=>O.type==="offset"))]),m=w(()=>Nn(r.value)),h=w(()=>Nn(l.value)),p=w(()=>Nn(s.value)),_=w(()=>Nn(i.value)),y=w(()=>Nn(u.value,T=>!T.conditions.some(O=>O.type==="offset"))),x={journals:{all:o,day:a,week:r,month:l,quarter:s,year:i,custom:u},decorations:{day:c,week:m,month:h,quarter:p,year:_,custom:y}};return tl(Ii,x),x}function Nn(e,t=()=>!0){return e.flatMap(n=>n.decorations.filter(o=>t(o)).map(o=>({journalName:n.name,decoration:o})))}function Zo(){const e=Kn(Ii);if(!e)throw new Error("Shelf data not provided or composable used outside of vue context");return e}function yu(e,t){const n=Xt(t);return w(()=>e.getJournal(n.value))}function ph(e,t,n){const o=Xt(t),a=Xt(n),r=yu(e,a),l=w(()=>o.value&&r.value?r.value.resolveAnchorDate(o.value):null);return{anchorDate:l,noteData:w(()=>!r.value||!l.value?null:e.index.get(r.value.name,l.value))}}function wl(e,t,n){const o=Xt(n);return w(()=>{const a=b(t);return a?o.value.flatMap(({journalName:r,decoration:l})=>vh(e,a,r,l).value):[]})}function vh(e,t,n,o){const a=Xt(t),r=Xt(n),l=Xt(o);return w(()=>{if(!a.value)return[];const{noteData:s}=ph(e,a,r);return hh(e,a.value,r.value,s.value,l.value.mode,l.value.conditions)?l.value.styles:[]})}function hh(e,t,n,o,a,r){return r.length===0?!1:a==="or"?r.some(l=>hs(e,t,n,o,l)):r.every(l=>hs(e,t,n,o,l))}function hs(e,t,n,o,a){switch(a.type){case"title":return gh(o,a);case"tag":return yh(o,a);case"date":return wh(t,a);case"property":return bh(o,a);case"weekday":return kh(t,a);case"offset":return _h(e,t,n,a);case"all-tasks-completed":return Ch(o);case"has-note":return xh(o);case"has-open-task":return Sh(o)}return!1}function gh(e,t){if(!e)return!1;const n=e.title.toLowerCase(),o=t.value.toLowerCase();switch(t.condition){case"contains":return n.includes(o);case"starts-with":return n.startsWith(o);case"ends-with":return n.endsWith(o)}return!1}function yh(e,t){if(!e)return!1;const n=e.tags;if(n.length===0)return!1;const o=t.value.toLowerCase();switch(t.condition){case"contains":return n.some(a=>a.toLowerCase().includes(o));case"starts-with":return n.some(a=>a.toLowerCase().startsWith(o));case"ends-with":return n.some(a=>a.toLowerCase().endsWith(o))}}function wh(e,t){const n=X(e);return!(t.day!==-1&&n.date()!==t.day||t.month!==-1&&n.month()!==t.month||t.year&&n.year()!==t.year)}function bh(e,t){if(!e)return!1;const n=e.properties,o=t.name;switch(t.condition){case"exists":return o in n;case"does-not-exist":return!(o in n);case"eq":return n[o]==t.value;case"neq":return n[o]!=t.value;case"contains":return Array.isArray(n[o])?n[o].some(a=>typeof a=="string"&&a.toLowerCase().includes(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().includes(t.value.toLowerCase()):!1;case"does-not-contain":return Array.isArray(n[o])?!n[o].some(a=>typeof a=="string"&&a.toLowerCase().includes(t.value.toLowerCase())):typeof n[o]=="string"?!n[o].toLowerCase().includes(t.value.toLowerCase()):!1;case"starts-with":return Array.isArray(n[o])?n[o].some(a=>typeof a=="string"&&a.toLowerCase().startsWith(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().startsWith(t.value.toLowerCase()):!1;case"ends-with":return Array.isArray(n[o])?n[o].some(a=>typeof a=="string"&&a.toLowerCase().endsWith(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().endsWith(t.value.toLowerCase()):!1}return!1}function kh(e,t){const n=X(e);return t.weekdays.includes(n.day())}function _h(e,t,n,o){const[a,r]=yu(e,n).value?.calculateOffset(t)??[0,0];return o.offset<0?r===o.offset:a===o.offset}function Ch(e){if(!e)return!1;const t=e.tasks;return t.length===0?!1:t.every(n=>n.completed)}function Sh(e){if(!e)return!1;const t=e.tasks;return t.length===0?!1:t.filter(o=>!o.completed).length>0}function xh(e){return!!e}function wu(e){return te.Platform.isMacOS?e.metaKey:e.ctrlKey}const Vh=B({__name:"NavigationBlockRow",props:{row:{},refDate:{},defaultFormat:{},journal:{}},emits:["navigate","contextmenu","preview"],setup(e,{emit:t}){jn(N=>({"95d8dac2":l.value,"75e674d4":s.value,"2538825a":i.value,"6a7da4c5":y.value,"5c3f97d8":u.value,bd28d1c6:c.value}));const n=t,o=w(()=>e.journal.resolveAnchorDate(e.refDate)),a=w(()=>e.journal.get(e.refDate)),r=w(()=>Ot(e.row.template,{date:{type:"date",value:e.refDate,defaultFormat:e.defaultFormat},start_date:{type:"date",value:o.value?e.journal.resolveStartDate(o.value):"",defaultFormat:e.defaultFormat},end_date:{type:"date",value:o.value?e.journal.resolveEndDate(o.value):"",defaultFormat:e.defaultFormat},relative_date:{type:"string",value:o.value?e.journal.resolveRelativeDate(o.value):""},journal_name:{type:"string",value:e.journal.name},index:{type:"number",value:a.value?.index}})),l=w(()=>`${e.row.fontSize}em`),s=w(()=>e.row.bold?"bold":"normal"),i=w(()=>e.row.italic?"italic":"normal"),u=w(()=>xt(e.row.color)),c=w(()=>xt(e.row.background)),m=he(),{journals:h,decorations:p}=Zo(),_=w(()=>e.row.link==="none"?!1:e.row.link==="self"?!0:e.row.link==="journal"?!!e.row.journal:h[e.row.link].value.length>0),y=w(()=>_.value?"pointer":"default"),x=wl(m,o,p[e.journal.type]);function T(N){e.row.link!=="none"&&(e.row.link==="journal"?n("navigate","journal",e.refDate,N,e.journal.name):n("navigate",e.row.link,e.refDate,N))}function O(N){e.row.link!=="none"&&(e.row.link==="journal"?n("contextmenu","journal",e.refDate,N,e.journal.name):n("contextmenu",e.row.link,e.refDate,N))}function ee(N){wu(N)&&e.row.link!=="none"&&(e.row.link==="journal"?n("preview","journal",e.refDate,N,e.journal.name):n("preview",e.row.link,e.refDate,N))}return(N,A)=>o.value?(v(),C("div",{key:0,class:"row",onClick:Ht(T,["prevent"]),onContextmenu:O,onPointerenter:ee},[N.row.addDecorations?(v(),I(Qo,{key:0,styles:b(x)},{default:f(()=>[k(P(r.value),1)]),_:1},8,["styles"])):(v(),C(W,{key:1},[k(P(r.value),1)],64))],32)):Y("",!0)}}),Ir=be(Vh,[["__scopeId","data-v-7f6cc67a"]]),Dh={key:0},jh={class:"nav-row-wrapper"},$h={class:"controls"},Mh=B({__name:"NavigationBlockEditPreview",props:{refDate:{},journalName:{},rows:{}},emits:["move-up","move-down","edit","remove"],setup(e){const t=e,n=he(),o=w(()=>n.getJournal(t.journalName)),a=w(()=>o.value?.shelfName??null);return Xo(a),(r,l)=>o.value?(v(),C("div",Dh,[l[0]||(l[0]=g("div",{class:"setting-item-description"},"Hover a row to see controls",-1)),(v(!0),C(W,null,_e(r.rows,(s,i)=>(v(),C("div",{key:i,class:"nav-row"},[g("div",jh,[d(Ir,{journal:o.value,row:s,"ref-date":r.refDate,"default-format":o.value.dateFormat},null,8,["journal","row","ref-date","default-format"])]),g("div",$h,[i>0?(v(),I(ge,{key:0,icon:"arrow-up",tooltip:"Move up",onClick:u=>r.$emit("move-up",i)},null,8,["onClick"])):Y("",!0),i<r.rows.length-1?(v(),I(ge,{key:1,icon:"arrow-down",tooltip:"Move down",onClick:u=>r.$emit("move-down",i)},null,8,["onClick"])):Y("",!0),d(ge,{icon:"pencil",tooltip:"Edit",onClick:u=>r.$emit("edit",i)},null,8,["onClick"]),d(ge,{icon:"trash-2",tooltip:"Delete",onClick:u=>r.$emit("remove",i)},null,8,["onClick"])])]))),128))])):Y("",!0)}}),gs=be(Mh,[["__scopeId","data-v-eca349a0"]]),Nh={class:"u-pop"},Ah=["value"],ia=B({__name:"EditNavBlockRow.modal",props:{row:{},currentJournal:{}},emits:["close","submit"],setup(e,{emit:t}){const n=t,o=he(),a=w(()=>o.getJournal(e.currentJournal)),r=w(()=>a.value?.shelfName??null),{journals:l}=Xo(r),s=w(()=>l.all.value.map(({name:z})=>z).filter(z=>z!==e.currentJournal)),{defineField:i,errorBag:u,handleSubmit:c}=gn({initialValues:e.row?{template:e.row.template,fontSize:e.row.fontSize,bold:e.row.bold,italic:e.row.italic,link:e.row.link,journal:e.row.journal,color:Vt(e.row.color),background:Vt(e.row.background),addDecorations:e.row.addDecorations}:{template:"",fontSize:1,bold:!1,italic:!1,link:"none",journal:"",color:{type:"theme",name:"text-normal"},background:{type:"transparent"},addDecorations:!1},validationSchema:yn(gt(Nt({template:gt(Ge(),qt("Template is required")),fontSize:cl(),bold:en(),italic:en(),color:cs,background:cs,link:ht(["none","self","journal","day","week","month","quarter","year"]),journal:Ge(),addDecorations:en()}),Ko(io([["link"],["journal"]],z=>z.link==="journal"?!!z.journal:!0,"Please select a journal."),["journal"])))}),[m,h]=i("template"),[p,_]=i("fontSize"),[y,x]=i("bold"),[T,O]=i("italic"),[ee,N]=i("color"),[A,re]=i("background"),[le,U]=i("link"),[se,De]=i("journal"),[Ee,wt]=i("addDecorations"),ut=w({get(){return ee.value??{type:"transparent"}},set(z){ee.value=z}}),Qe=w({get(){return A.value??{type:"transparent"}},set(z){A.value=z}}),Ie=w(()=>{if(!a.value)return"";const z=Ne().format(we),F=a.value.resolveAnchorDate(z),V=a.value?.dateFormat??we;return Ot(m.value??"",{date:{type:"date",value:z,defaultFormat:V},start_date:{type:"date",value:F?a.value.resolveStartDate(F):"",defaultFormat:V},end_date:{type:"date",value:F?a.value.resolveEndDate(F):"",defaultFormat:V},relative_date:{type:"string",value:F?a.value.resolveRelativeDate(F):""},journal_name:{type:"string",value:a.value?.name??""},index:{type:"number",value:a.value?.config.value.index.enabled?1:void 0}})}),G=w(()=>m.value?[...m.value.matchAll(/{{(.*?):(.*?)}}/gi)].some(([,,F])=>F.replaceAll(/\[.*?\]/gi,"").includes("W")):!1),fe=c(z=>{n("submit",z),n("close")});return(z,F)=>(v(),C("form",{onSubmit:F[10]||(F[10]=(...V)=>b(fe)&&b(fe)(...V))},[d(M,{name:"Row template"},{description:f(()=>[g("div",null,[a.value?(v(),I(ha,{key:0,type:a.value.type,"date-format":a.value.dateFormat},null,8,["type","date-format"])):Y("",!0),F[11]||(F[11]=g("br",null,null,-1)),F[12]||(F[12]=k(" With resolved variables: ")),g("b",Nh,P(Ie.value),1)]),G.value?(v(),I(du,{key:0})):Y("",!0),d(et,{errors:b(u).template},null,8,["errors"])]),default:f(()=>[d(qe,Se({modelValue:b(m),"onUpdate:modelValue":F[0]||(F[0]=V=>de(m)?m.value=V:null)},b(h)),null,16,["modelValue"])]),_:1}),d(M,{name:"Font size"},{description:f(()=>[d(et,{errors:b(u).fontSize},null,8,["errors"])]),default:f(()=>[d(tn,Se({modelValue:b(p),"onUpdate:modelValue":F[1]||(F[1]=V=>de(p)?p.value=V:null)},b(_),{min:.5,step:.1}),null,16,["modelValue"])]),_:1}),d(M,{name:"Bold"},{default:f(()=>[d(He,Se({modelValue:b(y),"onUpdate:modelValue":F[2]||(F[2]=V=>de(y)?y.value=V:null)},b(x)),null,16,["modelValue"])]),_:1}),d(M,{name:"Italic"},{default:f(()=>[d(He,Se({modelValue:b(T),"onUpdate:modelValue":F[3]||(F[3]=V=>de(T)?T.value=V:null)},b(O)),null,16,["modelValue"])]),_:1}),d(M,{name:"Text color"},{description:f(()=>[d(et,{errors:b(u).color},null,8,["errors"])]),default:f(()=>[d(Et,Se({modelValue:ut.value,"onUpdate:modelValue":F[4]||(F[4]=V=>ut.value=V)},b(N)),null,16,["modelValue"])]),_:1}),d(M,{name:"Background color"},{default:f(()=>[d(Et,Se({modelValue:Qe.value,"onUpdate:modelValue":F[5]||(F[5]=V=>Qe.value=V)},b(re)),null,16,["modelValue"])]),_:1}),d(M,{name:"Link"},{default:f(()=>[d(xe,Se({modelValue:b(le),"onUpdate:modelValue":F[6]||(F[6]=V=>de(le)?le.value=V:null)},b(U)),{default:f(()=>F[13]||(F[13]=[g("option",{value:"none"},"None",-1),g("option",{value:"self"},"Self",-1),g("option",{value:"journal"},"Journal",-1),g("option",{value:"day"},"Day",-1),g("option",{value:"week"},"Week",-1),g("option",{value:"month"},"Month",-1),g("option",{value:"quarter"},"Quarter",-1),g("option",{value:"year"},"Year",-1)])),_:1},16,["modelValue"])]),_:1}),b(le)==="journal"?(v(),I(M,{key:0,name:"Journal"},{description:f(()=>[d(et,{errors:b(u).journal},null,8,["errors"])]),default:f(()=>[d(xe,Se({modelValue:b(se),"onUpdate:modelValue":F[7]||(F[7]=V=>de(se)?se.value=V:null)},b(De)),{default:f(()=>[(v(!0),C(W,null,_e(s.value,V=>(v(),C("option",{key:V,value:V},P(V),9,Ah))),128))]),_:1},16,["modelValue"])]),_:1})):Y("",!0),d(M,{name:"Add decorations"},{default:f(()=>[d(He,Se({modelValue:b(Ee),"onUpdate:modelValue":F[8]||(F[8]=V=>de(Ee)?Ee.value=V:null)},b(wt)),null,16,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:F[9]||(F[9]=V=>z.$emit("close"))},{default:f(()=>F[14]||(F[14]=[k("Cancel")])),_:1}),d(ie,{cta:"",type:"submit"},{default:f(()=>F[15]||(F[15]=[k("Save")])),_:1})]),_:1})],32))}}),Th=["value"],Oh=B({__name:"JournalShelf.modal",props:{currentShelf:{}},emits:["close","save"],setup(e,{emit:t}){const n=t,o=he(),a=ce(e.currentShelf);function r(){a.value!==e.currentShelf&&n("save",a.value),n("close")}return(l,s)=>(v(),C(W,null,[d(M,{name:"Shelf"},{default:f(()=>[d(xe,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>[s[2]||(s[2]=g("option",{value:""},"Not on a shelf",-1)),(v(!0),C(W,null,_e(b(o).shelves,i=>(v(),C("option",{key:i.name,value:i.name},P(i.name),9,Th))),128))]),_:1},8,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:s[1]||(s[1]=i=>l.$emit("close"))},{default:f(()=>s[3]||(s[3]=[k("Cancel")])),_:1}),d(ie,{cta:"",onClick:r},{default:f(()=>s[4]||(s[4]=[k("Save")])),_:1})]),_:1})],64))}}),Fh={class:"u-pop"},Eh=B({__name:"PathPreview",props:{journalName:{}},setup(e){const t=he(),n=w(()=>t.getJournal(e.journalName)),o=w(()=>({journal:e.journalName,date:Ne().format("YYYY-MM-DD")})),a=w(()=>n.value?n.value.getConfiguredPathData(o.value)[0]:"");return(r,l)=>(v(),C("div",null,[l[0]||(l[0]=k(" Folder with resolved variables: ")),g("b",Fh,P(a.value),1)]))}}),Ih=B({__name:"DisplayCodeBlock",props:{name:{}},setup(e){async function t(n){const o=n.target.innerText;if(o)try{await navigator.clipboard.writeText(o),new te.Notice("Copied to clipboard")}catch(a){console.error(a)}}return(n,o)=>(v(),C("div",{class:"code-block-sample",onClick:t},[k(" ```"+P(n.name),1),o[1]||(o[1]=g("br",null,null,-1)),n.$slots.default?(v(),C(W,{key:0},[Ke(n.$slots,"default",{},void 0,!0),o[0]||(o[0]=g("br",null,null,-1))],64)):Y("",!0),o[2]||(o[2]=k("``` "))]))}}),bo=be(Ih,[["__scopeId","data-v-2c805b7f"]]);function Qa(e){const t=Xt(e),n=he();return w(()=>{const o=t.value;return o?n.index.getForPathComputed(o).value:null})}function Yo(e){return te.Keymap.isModifier(e,"Mod")||e.button===1?"tab":"active"}const Ph={key:0,class:"nav-block"},Rh=B({__name:"NavigationBlock",props:{refDate:{},journalName:{},rows:{},preventNavigation:{type:Boolean},decorateBlock:{type:Boolean}},emits:["move-up","move-down","edit","remove"],setup(e){const t=he(),n=w(()=>t.getJournal(e.journalName)),o=w(()=>n.value?.shelfName??null),{journals:a,decorations:r}=Xo(o),l=w(()=>n.value?r[n.value.type].value.filter(m=>m.journalName===e.journalName):[]),s=wl(t,e.refDate,l);async function i(m,h,p,_){if(!e.preventNavigation&&m!=="none")if(m==="self"){const y=n.value?.get(e.refDate);y&&await n.value?.open(y)}else if(m==="journal"){if(!_)return;await Cn(t,h,_)}else{const y=a[m].value.map(x=>x.name);await Bo(t,h,y,!1,p&&Yo(p),p)}}function u(m,h,p,_){if(!e.preventNavigation&&m!=="none")if(m==="self"){const y=n.value?.get(e.refDate);y&&"path"in y&&t.appManager.showContextMenu(y.path,p)}else if(m==="journal"){if(!_)return;const y=t.getJournal(_);if(!y)return;const x=y.get(h);x&&"path"in x&&t.appManager.showContextMenu(x.path,p)}else{const y=a[m].value.map(x=>x.get(h)).filter(x=>!!x&&"path"in x);if(y.length===0)return;if(y.length===1)t.appManager.showContextMenu(y[0].path,p);else{const x=new te.Menu;for(const T of y)x.addItem(O=>{O.setTitle(T.path).onClick(()=>{t.appManager.showContextMenu(T.path,p)})});x.showAtMouseEvent(p)}}}function c(m,h,p,_){if(!e.preventNavigation&&m!=="none")if(m==="self"){const y=n.value?.get(e.refDate);y&&"path"in y&&t.appManager.showPreview(y.path,p)}else if(m==="journal"){if(!_)return;const y=t.getJournal(_);if(!y)return;const x=y.get(h);x&&"path"in x&&t.appManager.showPreview(x.path,p)}else{const y=a[m].value.map(x=>x.get(h)).find(x=>!!x&&"path"in x);if(!y)return;t.appManager.showPreview(y.path,p)}}return(m,h)=>n.value?(v(),C("div",Ph,[m.decorateBlock?(v(),I(Qo,{key:0,styles:b(s),class:"nav-block"},{default:f(()=>[(v(!0),C(W,null,_e(m.rows,(p,_)=>(v(),C("div",{key:_},[d(Ir,{journal:n.value,row:p,"ref-date":m.refDate,"default-format":n.value.dateFormat,onNavigate:i,onContextmenu:u,onPreview:c},null,8,["journal","row","ref-date","default-format"])]))),128))]),_:1},8,["styles"])):(v(!0),C(W,{key:1},_e(m.rows,(p,_)=>(v(),C("div",{key:_},[d(Ir,{journal:n.value,row:p,"ref-date":m.refDate,"default-format":n.value.dateFormat,onNavigate:i,onContextmenu:u,onPreview:c},null,8,["journal","row","ref-date","default-format"])]))),128))])):Y("",!0)}}),ga=be(Rh,[["__scopeId","data-v-cfdddb2d"]]),Bh={key:0,class:"nav-view"},Yh={key:0,class:"nav-block-relative"},Uh={key:1,class:"nav-block-relative"},Lh={key:2,class:"nav-block-relative"},Wh={key:3,class:"nav-block-relative"},Jh={key:1},qh=B({__name:"NavigationCodeBlock",props:{path:{},preventNavigation:{type:Boolean}},setup(e){const t=e,n=he(),o=Qa(t.path),a=w(()=>o.value?n.getJournal(o.value.journal):null),r=w(()=>{if(!o.value||!a.value)return null;const i=a.value.navBlock.type==="existing";return a.value.next(o.value.date,i)}),l=w(()=>{if(!o.value||!a.value)return null;const i=a.value.navBlock.type==="existing";return a.value.previous(o.value.date,i)});function s(i){t.preventNavigation||Cn(n,i.date,i.journal).catch(console.error)}return(i,u)=>b(o)&&a.value?(v(),C("div",Bh,[l.value?(v(),C("div",Yh,[d(ga,{rows:a.value.navBlock.rows,"ref-date":l.value.date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":a.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"]),d(ge,{icon:"arrow-left",class:"nav-prev",onClick:u[0]||(u[0]=c=>s(l.value))})])):(v(),C("div",Uh)),d(ga,{rows:a.value.navBlock.rows,class:"nav-block","ref-date":b(o).date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":a.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"]),r.value?(v(),C("div",Lh,[d(ge,{icon:"arrow-right",class:"nav-next",onClick:u[1]||(u[1]=c=>s(r.value))}),d(ga,{rows:a.value.navBlock.rows,"ref-date":r.value.date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":a.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"])])):(v(),C("div",Wh))])):(v(),C("div",Jh,"Note is not connected to a journal"))}}),bu=be(qh,[["__scopeId","data-v-3fb7392e"]]),ku=["week","month","quarter","calendar"];function Hh(e){const t=ce([]),n=he();return ro(()=>{const o=X(e.value);if(!o.isValid())return;const a=Ne(),r=o.clone().startOf("week"),l=o.clone().endOf("week"),s=n.calendarViewSettings.weeks||"left",i=[];s==="left"&&i.push({date:r.format("[W]w"),key:r.format(we),outside:!1,isWeekNumber:!0,disabled:!1});const u=r.clone();for(;u.isSameOrBefore(l);)i.push({date:u.format("D"),key:u.format(we),today:u.isSame(a,"day"),outside:!o.isSame(u,"month"),isWeekNumber:!1,disabled:!1}),u.add(1,"day");s==="right"&&i.push({date:r.format("[W]w"),key:r.format(we),outside:!1,isWeekNumber:!0,disabled:!1}),t.value=i}),{grid:t}}function Xa(e){return w(()=>e.activeNote?e.index.getForPathComputed(e.activeNote).value:null)}const zh=B({__name:"NotesCalendarButton",props:{date:{},type:{},inactive:{type:Boolean}},setup(e){const t=he(),{journals:n,decorations:o}=Zo(),a=w(()=>!e.inactive&&n[e.type].value.length>0),r=w(()=>Pi[e.type]),l=w(()=>e.date),s=wl(t,l,o[e.type]);function i(m){a.value&&Bo(t,e.date,n[e.type].value.map(h=>h.name),!1,Yo(m),m).catch(console.error)}function u(m){const h=[];for(const p of n[e.type].value){const _=p.get(e.date);_&&"path"in _&&h.push(_)}if(h.length!==0)if(h.length===1)t.appManager.showContextMenu(h[0].path,m);else{const p=new te.Menu;for(const _ of h)p.addItem(y=>{y.setTitle(_.path).onClick(()=>{t.appManager.showContextMenu(_.path,m)})});p.showAtMouseEvent(m)}}function c(m){if(!wu(m)||!a.value)return;const h=[];for(const _ of n[e.type].value){const y=_.get(e.date);y&&"path"in y&&h.push(y)}const[p]=h;p&&t.appManager.showPreview(p.path,m)}return(m,h)=>(v(),I(Go,{class:"calendar-button",clickable:a.value,onClick:i,onContextmenu:u,onPointerenter:c},{default:f(()=>[m.inactive?Y("",!0):(v(),I(Qo,{key:0,styles:b(s)},{default:f(()=>[d(to,{date:m.date,format:r.value},null,8,["date","format"])]),_:1},8,["styles"]))]),_:1},8,["clickable"]))}}),Yt=be(zh,[["__scopeId","data-v-a95a7182"]]),Kh=B({__name:"NotesWeekView",props:{refDate:{}},setup(e){const t=he(),n=w(()=>t.calendarViewSettings.weeks==="none"?7:8),{journals:o}=Zo(),a=w(()=>o.quarter.value.length>0),{grid:r}=Hh(w(()=>e.refDate)),l=w(()=>X(e.refDate).startOf("month").format(we)),s=w(()=>X(e.refDate).startOf("quarter").format(we)),i=w(()=>X(e.refDate).startOf("year").format(we)),u=Xa(t),c=w(()=>u.value?t.getJournal(u.value.journal):null),m=w(()=>c.value?.type==="day"),h=w(()=>c.value?.type==="week"),p=w(()=>c.value?.type==="month"&&u.value?.date===l.value),_=w(()=>c.value?.type==="quarter"&&u.value?.date===s.value),y=w(()=>c.value?.type==="year"&&u.value?.date===i.value);return(x,T)=>(v(),I(uo,{columns:n.value},{header:f(()=>[Ke(x.$slots,"header",{},()=>[d(Yt,{date:x.refDate,type:"month","data-selected":p.value?"":null},null,8,["date","data-selected"]),a.value?(v(),I(Yt,{key:0,date:x.refDate,type:"quarter","data-selected":_.value?"":null},null,8,["date","data-selected"])):Y("",!0),d(Yt,{date:x.refDate,type:"year","data-selected":y.value?"":null},null,8,["date","data-selected"])],!0)]),default:f(()=>[d(fl),(v(!0),C(W,null,_e(b(r),O=>(v(),I(Yt,{key:O.key+(O.isWeekNumber?"week":"day"),class:Dt({"week-number":O.isWeekNumber}),date:O.key,type:O.isWeekNumber?"week":"day","data-outside":O.outside||null,"data-today":O.today||null,"data-selected":b(u)&&(O.isWeekNumber&&h.value||!O.isWeekNumber&&m.value)&&b(u)?.date===O.key?"":null},null,8,["class","date","type","data-outside","data-today","data-selected"]))),128))]),_:3},8,["columns"]))}}),Gh=be(Kh,[["__scopeId","data-v-307b41ae"]]),Qh={class:"timeline-week"},Xh=B({__name:"TimelineWeek",props:{noteData:{}},setup(e){const t=e,n=w(()=>t.noteData?t.noteData.date:Ne().format("YYYY-MM-DD"));return(o,a)=>(v(),C("div",Qh,[d(Gh,{"ref-date":n.value},null,8,["ref-date"])]))}}),Zh=be(Xh,[["__scopeId","data-v-1d4774b6"]]),eg=B({__name:"NotesMonthView",props:{refDate:{},hideOutsideDates:{type:Boolean}},emits:["select","selectWeek"],setup(e){const t=he(),n=w(()=>t.calendarViewSettings.weeks==="none"?7:8),{journals:o}=Zo(),a=w(()=>o.quarter.value.length>0),{grid:r}=tu(w(()=>e.refDate)),l=w(()=>X(e.refDate).startOf("month").format(we)),s=w(()=>X(e.refDate).startOf("quarter").format(we)),i=w(()=>X(e.refDate).startOf("year").format(we)),u=Xa(t),c=w(()=>u.value?t.getJournal(u.value.journal):null),m=w(()=>c.value?.type==="day"),h=w(()=>c.value?.type==="week"),p=w(()=>c.value?.type==="month"&&u.value?.date===l.value),_=w(()=>c.value?.type==="quarter"&&u.value?.date===s.value),y=w(()=>c.value?.type==="year"&&u.value?.date===i.value);return(x,T)=>(v(),I(uo,{class:"month-grid",columns:n.value,"compact-first-line":""},{header:f(()=>[Ke(x.$slots,"header",{},()=>[d(Yt,{date:x.refDate,type:"month","data-selected":p.value?"":null},null,8,["date","data-selected"]),a.value?(v(),I(Yt,{key:0,date:x.refDate,type:"quarter","data-selected":_.value?"":null},null,8,["date","data-selected"])):Y("",!0),d(Yt,{date:x.refDate,type:"year","data-selected":y.value?"":null},null,8,["date","data-selected"])],!0)]),default:f(()=>[d(fl),(v(!0),C(W,null,_e(b(r),O=>(v(),I(Yt,{key:O.key+(O.isWeekNumber?"week":"day"),class:Dt({"week-number":O.isWeekNumber}),date:O.key,type:O.isWeekNumber?"week":"day","data-outside":O.outside||null,"data-today":O.today||null,inactive:x.hideOutsideDates&&O.outside,"data-selected":b(u)&&(O.isWeekNumber&&h.value||!O.isWeekNumber&&m.value)&&b(u)?.date===O.key?"":null},null,8,["class","date","type","data-outside","data-today","inactive","data-selected"]))),128))]),_:3},8,["columns"]))}}),Za=be(eg,[["__scopeId","data-v-34fdf9ce"]]),tg={class:"timeline-month"},ng=B({__name:"TimelineMonth",props:{noteData:{}},setup(e){const t=w(()=>e.noteData?e.noteData.date:Ne().format("YYYY-MM-DD"));return(n,o)=>(v(),C("div",tg,[d(Za,{"ref-date":t.value},null,8,["ref-date"])]))}}),og=be(ng,[["__scopeId","data-v-889faf70"]]),ag={class:"timeline-quarter-container"},rg={class:"timeline-quarter"},lg=B({__name:"TimelineQuarter",props:{noteData:{}},setup(e){const t=e,n=w(()=>t.noteData?t.noteData.date:Ne().format("YYYY-MM-DD")),o=w(()=>X(n.value)),a=w(()=>{const r=o.value.clone().startOf("quarter");return[r.clone(),r.clone().add(1,"month"),r.clone().add(2,"month")]});return(r,l)=>(v(),C("div",ag,[g("div",rg,[(v(!0),C(W,null,_e(a.value,s=>(v(),I(Za,{key:s.format("YYYY-MM-DD"),"ref-date":s.format("YYYY-MM-DD"),"hide-outside-dates":""},null,8,["ref-date"]))),128))])]))}}),sg=be(lg,[["__scopeId","data-v-d9d5c81f"]]),ig={class:"timeline-calendar-container"},ug={class:"timeline-calendar"},dg=B({__name:"TimelineCalendar",props:{noteData:{}},setup(e){const t=e,n=w(()=>t.noteData?t.noteData.date:Ne().format("YYYY-MM-DD")),o=w(()=>X(n.value)),a=w(()=>{const r=o.value.clone().startOf("year");return Array.from({length:12}).map((l,s)=>r.clone().add(s,"month"))});return(r,l)=>(v(),C("div",ig,[g("div",ug,[(v(!0),C(W,null,_e(a.value,s=>(v(),I(Za,{key:s.format("YYYY-MM-DD"),"ref-date":s.format("YYYY-MM-DD"),"hide-outside-dates":""},null,8,["ref-date"]))),128))])]))}}),cg=be(dg,[["__scopeId","data-v-b317befd"]]),fg={key:1},_u=B({__name:"TimelineCodeBlock",props:{mode:{},path:{}},setup(e){const t=e,n=he(),o=Qa(t.path),a=w(()=>o.value?n.getJournal(o.value.journal):null),r=w(()=>a.value?.shelfName??null);Xo(r);const l=w(()=>{if(t.mode&&ku.includes(t.mode))return t.mode;if(a.value)switch(a.value.type){case"day":case"week":return"week";case"month":return"month";case"quarter":return"quarter";case"year":return"calendar"}return"week"}),s=w(()=>{switch(l.value){case"week":return Zh;case"month":return og;case"quarter":return sg;case"calendar":return cg}return null});return(i,u)=>(v(),C("div",null,[s.value?(v(),I(Jo(s.value),{key:0,"note-data":b(o)},null,8,["note-data"])):(v(),C("div",fg,"No component"))]))}}),mg={class:"home-code-block"},pg={key:0},vg=["onClick"],hg=B({__name:"HomeCodeBlock",props:{path:{},config:{}},setup(e){jn(u=>({"8c1763ac":t.value}));const t=w(()=>e.config.scale??1),n=Qa(e.path),o=he(),a=w(()=>n.value?o.getJournal(n.value.journal):null),r=w(()=>e.config.shelf||a.value?.shelfName),l=w(()=>o.journals),s=w(()=>{const u=[],c=Ne().format(we);for(const m of e.config.show){const h=l.value.filter(p=>p.type===m&&(!r.value||p.shelfName===r.value));if(h.length!==0)if(m==="custom")for(const p of h)u.push({type:m,text:p.getNoteNameForDate(c),journalNames:[p.name]});else u.push({type:m,text:Oi(m,Ne().format("YYYY-MM-DD")),journalNames:h.map(p=>p.name)})}return u});function i(u,c,m){const h=Ne().format("YYYY-MM-DD");u!=="custom"&&u===a.value?.type?Bo(o,h,[a.value.name],!1,Yo(m),m).catch(console.error):Bo(o,h,c,!1,Yo(m),m).catch(console.error)}return(u,c)=>(v(),C("div",mg,[(v(!0),C(W,null,_e(s.value,(m,h)=>(v(),C(W,{key:m.text},[h>0?(v(),C("span",pg,P(u.config.separator),1)):Y("",!0),g("a",{href:"#",onClick:Ht(p=>i(m.type,m.journalNames,p),["stop","prevent"])},P(m.text),9,vg)],64))),128))]))}}),Pr=be(hg,[["__scopeId","data-v-db98ec2a"]]),gg={},yg={class:"journal-divider"};function wg(e,t){return v(),C("div",yg)}const Kt=be(gg,[["render",wg],["__scopeId","data-v-f48008b5"]]);function bg(e){const t=he(),n=`@fake@/${Date.now()}-${Math.random()}`,o=Xt(e),a=w(()=>t.getJournal(o.value)),r=Ne().format("YYYY-MM-DD");return t.index.registerPathData(n,{path:n,title:"Fake Note",journal:o.value,date:a.value?.resolveAnchorDate(r)??r,tags:[],properties:{},tasks:[]}),Ya(()=>{t.index.unregisterPathData(n)}),n}const kg=`show: 
  - day 
  - month
scale: 2
separator: " | "`,_g=B({__name:"CodeBlockReference.modal",props:{type:{},journalName:{}},setup(e){const t=bg(e.journalName);return(n,o)=>(v(),C("div",null,[o[3]||(o[3]=g("p",{class:"hint"},"Click on a code block to copy it to your clipboard.",-1)),d(bo,{name:"journal-nav"}),o[4]||(o[4]=g("p",null,"Navigation code block helps navigating relative to current note.",-1)),g("p",null,[o[0]||(o[0]=k(" It is fully customizable on journal level.")),o[1]||(o[1]=g("br",null,null,-1)),k(" Current configuration for "+P(n.journalName)+" journal looks like this: ",1)]),d(Kt),d(bu,{path:b(t)},null,8,["path"]),d(Kt),o[5]||(o[5]=g("p",null,[k(" Plugin still supports older code blocks "),g("code",null,"calendar-nav"),k(" and "),g("code",null,"journal-nav"),k(" that function just as aliases to "),g("code",null,"journal-nav"),k(". ")],-1)),d(Kt),d(bo,{name:"calendar-timeline"}),o[6]||(o[6]=g("p",null,"Timeline code block helps navigating within bigger time periods.",-1)),g("p",null,"Default timeline for "+P(n.journalName)+" journal looks like this:",1),d(Kt),d(_u,{path:b(t)},null,8,["path"]),d(Kt),o[7]||(o[7]=g("p",null,"You can change default timeline mode by adding mode prop to code block.",-1)),d(bo,{name:"calendar-timeline"},{default:f(()=>o[2]||(o[2]=[k("mode: month")])),_:1}),o[8]||(o[8]=g("p",null,"Supported modes are:",-1)),g("ul",null,[(v(!0),C(W,null,_e(b(ku),a=>(v(),C("li",{key:a},P(a),1))),128))]),d(Kt),d(bo,{name:"journals-home"}),o[9]||(o[9]=g("p",null,"Home block displays links to current notes in journals.",-1)),o[10]||(o[10]=g("p",null,"It looks like this by default:",-1)),d(Kt),d(Pr,{path:b(t),config:{show:["day"],separator:"  ",scale:1}},null,8,["path"]),d(Kt),o[11]||(o[11]=rl("<p data-v-30e980f3>Supported settings:</p><ul data-v-30e980f3><li data-v-30e980f3><code data-v-30e980f3>show</code> - controls what journals are displayed (by default only Today link is displayed). Supported values are - <code data-v-30e980f3>day</code>, <code data-v-30e980f3>week</code>, <code data-v-30e980f3>month</code>, <code data-v-30e980f3>quarter</code>, <code data-v-30e980f3>year</code>, <code data-v-30e980f3>custom</code>. </li><li data-v-30e980f3><code data-v-30e980f3>separator</code> - used to separate multiple links. Default - <code data-v-30e980f3>  </code>.</li><li data-v-30e980f3><code data-v-30e980f3>scale</code> - allows to increase size of links. Used as multiplier of text size - so to have links twice as large use <code data-v-30e980f3>scale: 2</code>. </li><li data-v-30e980f3><code data-v-30e980f3>shelf</code> - allows to limit journal displayed in block to some specific shelf.</li></ul>",2)),d(Kt),d(bo,{name:"journals-home"},{default:f(()=>[k(P(kg))]),_:1}),d(Kt),d(Pr,{path:b(t),config:{show:["day","month"],separator:" | ",scale:2}},null,8,["path"])]))}}),Cg=be(_g,[["__scopeId","data-v-30e980f3"]]),Sg=B({__name:"CodeBlockReferenceHint",props:{type:{},journalName:{}},setup(e){const t=he();function n(){new Me(t,"Supported code blocks",Cg,{type:e.type,journalName:e.journalName},780).open()}return(o,a)=>(v(),C("a",{href:"#",onClick:Ht(n,["prevent"])},"Supported code blocks."))}}),xg={class:"path-hint"},Vg={class:"u-pop"},Dg=B({__name:"TemplatePathPreview",props:{path:{},journalName:{}},setup(e){const t=he(),n=w(()=>t.getJournal(e.journalName)),o=w(()=>({journal:e.journalName,date:Ne().format("YYYY-MM-DD")})),a=w(()=>n.value?n.value.getResolvedTemplatePath(e.path,o.value):"");return(r,l)=>(v(),C("div",xg,[l[0]||(l[0]=k(" Template path with resolved variables: ")),g("b",Vg,P(a.value),1)]))}}),jg=be(Dg,[["__scopeId","data-v-baa25805"]]);class $g extends te.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=t.toLocaleLowerCase();return n?this.app.vault.getAllLoadedFiles().filter(a=>a instanceof te.TFolder?!1:a.path.toLocaleLowerCase().includes(n)):[]}renderSuggestion(t,n){n.setText(t.path)}selectSuggestion(t){this.textInputElement.value=t.path,this.textInputElement.trigger("input"),this.close()}}const Mg=["placeholder","disabled"],Ng=B({__name:"TemplateInput",props:Pt({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Rt(e,"modelValue"),n=ce(),o=gl();let a;return yt(()=>{n.value&&(a=new $g(o,n.value))}),el(()=>{a&&a.close()}),(r,l)=>Fn((v(),C("input",{ref_key:"element",ref:n,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),type:"text",placeholder:r.placeholder,disabled:r.disabled,spellcheck:"false"},null,8,Mg)),[[Ho,t.value]])}}),Ag=B({__name:"EditFrontmatterFieldName",props:{journalName:{},fieldName:{}},emits:["close"],setup(e,{emit:t}){const n=t,{defineField:o,errorBag:a,handleSubmit:r}=gn({initialValues:{name:""},validationSchema:yn(Nt({name:gt(Ge(),qt("Property name is required"))}))}),[l,s]=o("name"),i=he(),u=w(()=>i.getJournal(e.journalName)),c=w(()=>u.value?.config.value.frontmatter[e.fieldName]||hp[e.fieldName]),m=r(async h=>{u.value&&(await u.value.renameFrontmatterField(e.fieldName,c.value,h.name),n("close"))});return yt(()=>{l.value=c.value}),(h,p)=>(v(),C("form",{onSubmit:p[2]||(p[2]=Ht((..._)=>b(m)&&b(m)(..._),["prevent"]))},[d(M,{name:"Current name"},{default:f(()=>[k(P(c.value),1)]),_:1}),d(M,{name:"New name"},{description:f(()=>[d(et,{errors:b(a).name},null,8,["errors"])]),default:f(()=>[d(qe,Se({modelValue:b(l),"onUpdate:modelValue":p[0]||(p[0]=_=>de(l)?l.value=_:null)},b(s)),null,16,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:p[1]||(p[1]=_=>h.$emit("close"))},{default:f(()=>p[3]||(p[3]=[k("Cancel")])),_:1}),d(ie,{cta:"",type:"submit"},{default:f(()=>p[4]||(p[4]=[k("Update")])),_:1})]),_:1})],32))}}),Tg=B({__name:"TemplaterSupport.modal",emits:["close"],setup(e){return(t,n)=>(v(),C("div",null,n[0]||(n[0]=[rl("<p> There can be cases when Templater is interfering with plugin actions resulting in partially broken note or journal related data removed from frontmatter. </p><p>The best setup to avoid such problems would be:</p><ul><li>template configured in journal plugin settings</li><li><code>Trigger Templater on new file creation</code> is disabled</li><li> OR <code>Trigger Templater on new file creation</code> is enabled, <code>Enable Folder Templates</code> is enabled, <b>NO</b> Folder template is configured </li></ul><p> This ensures that only journal plugin is processing note template thus avoiding conflicts with templater plugin (journal plugin will use templater itself under the hood to process templater commands). </p>",4)])))}}),Og=B({__name:"TemplaterSupportHint",setup(e){const t=he(),n=gu(t.app,"<% $>");function o(){new Me(t,"Templater caveats",Tg,{}).open()}return(a,r)=>b(n)?(v(),C(W,{key:0},[r[0]||(r[0]=g("br",null,null,-1)),r[1]||(r[1]=k("Templater syntax is ")),g("a",{href:"#",onClick:Ht(o,["stop"])},"supported"),r[2]||(r[2]=k(". "))],64)):Y("",!0)}}),Fg={key:0},Eg={key:0,class:"journal-important"},Ig={key:1,class:"journal-important"},Pg={key:0},Rg={key:0},Bg={key:1},Yg=["aria-label"],Ug={key:0},Lg={key:0},Wg={key:0,class:"journal-important"},Jg={class:"flair"},qg={class:"flair"},Hg={class:"flair"},zg={class:"decoration-preview-container"},Kg={class:"decoration-preview-block"},Gg={key:0},ys=800,Qg=B({__name:"JournalSettingsEdit",props:{journalName:{}},emits:["back","edit"],setup(e,{emit:t}){const n=t,o=he(),a=w(()=>o.getJournal(e.journalName)),r=w(()=>a.value?.config.value),l=Ne().day(),s=Ne().format("YYYY-MM-DD"),i=pn({templates:!1,commands:!1,decorations:!1,navBlock:!1,calendarViewBlock:!1,frontmatter:!1}),u=w(()=>a.value?ap(a.value.config.value.write):""),c=w(()=>a.value?.config.value.dateFormat.includes("/"));function m(){if(!a.value)return;const F=a.value.config.value.dateFormat.split("/");a.value.config.value.dateFormat=F.pop()??"";const V=F.map(Re=>`{{date:${Re}}}`).join("/");let K=a.value.config.value.folder;K&&!K.endsWith("/")&&(K+="/"),K+=V,a.value.config.value.folder=K}function h(){a.value&&new Me(o,"Rename journal",uh,{name:a.value.name,async onSave(F){a.value&&(await o.renameJournal(a.value.name,F),n("edit",F))}}).open()}function p(){a.value&&new Me(o,"Place journal",Oh,{currentShelf:a.value.shelfName,onSave(F){o.moveJournal(e.journalName,F)}}).open()}function _(){r.value?.templates.push(""),i.templates||(i.templates=!0)}function y(){a.value&&new Me(o,"Add command",ms,{index:a.value.commands.length,writeType:a.value.type,commands:a.value.commands,onSubmit:F=>{a.value&&(a.value.addCommand(F),i.commands||(i.commands=!0))}}).open()}function x(F,V){a.value&&new Me(o,"Edit command",ms,{index:V,writeType:a.value.type,command:F,commands:a.value.commands,onSubmit:K=>{a.value&&a.value.updateCommand(V,K)}}).open()}function T(F){a.value&&a.value.deleteCommand(F)}function O(){a.value&&new Me(o,"Add calendar decoration",vs,{index:a.value.decorations.length,writeType:a.value.type,onSubmit:F=>{a.value&&(a.value.addDecoration(F),i.decorations||(i.decorations=!0))}},ys).open()}function ee(F,V){a.value&&new Me(o,"Add calendar decoration",vs,{index:a.value.decorations.length,writeType:a.value.type,decoration:F,onSubmit:K=>{a.value&&a.value.editDecoration(V,K)}},ys).open()}function N(F){a.value&&a.value.deleteDecoration(F)}function A(){a.value&&new Me(o,"Add row to nav block",ia,{currentJournal:a.value.name,onSubmit:F=>{a.value&&(a.value.addNavRow(F),i.navBlock||(i.navBlock=!0))}}).open()}function re(F){a.value&&new Me(o,"Edit nav block row",ia,{currentJournal:e.journalName,row:a.value.navBlock.rows[F],onSubmit:V=>{a.value&&a.value.editNavRow(F,V)}}).open()}function le(F){a.value&&a.value.deleteNavRow(F)}function U(F){a.value&&a.value.moveNavRowUp(F)}function se(F){a.value&&a.value.moveNavRowDown(F)}function De(){a.value&&new Me(o,"Add row to calendar view block",ia,{currentJournal:a.value.name,onSubmit:F=>{a.value&&(a.value.addCalendarViewRow(F),i.calendarViewBlock||(i.calendarViewBlock=!0))}}).open()}function Ee(F){a.value&&new Me(o,"Edit calendar view block row",ia,{currentJournal:e.journalName,row:a.value.calendarViewBlock.rows[F],onSubmit:V=>{a.value&&a.value.editCalendarViewRow(F,V)}}).open()}function wt(F){a.value&&a.value.deleteCalendarViewRow(F)}function ut(F){a.value&&a.value.moveNavRowUp(F)}function Qe(F){a.value&&a.value.moveNavRowDown(F)}function Ie(F){a.value&&new Me(o,"Edit frontmatter field",Ag,{journalName:a.value.name,fieldName:F}).open()}async function G(){a.value&&await a.value.toggleFrontmatterStartDate()}async function fe(){a.value&&await a.value.toggleFrontmatterEndDate()}async function z(F){F&&await a.value?.autoCreate()}return nt(()=>a.value?.config.value.start,F=>{a.value&&F&&(a.value.config.value.index.anchorDate=F)}),nt(()=>a.value?.config.value.end.type,()=>{a.value?.config.value.end.type==="repeats"&&!a.value.config.value.end.repeats&&(a.value.config.value.end.repeats=1)}),(F,V)=>a.value&&r.value?(v(),C("div",Fg,[d(M,{heading:""},{name:f(()=>[k(" Configuring "+P(a.value.name)+" (writing "+P(u.value)+") ",1)]),default:f(()=>[d(ge,{icon:"pencil",tooltip:"Rename journal",onClick:h}),d(ge,{icon:"chevron-left",tooltip:"Back to list",onClick:V[0]||(V[0]=K=>F.$emit("back"))})]),_:1}),b(o).usesShelves?(v(),I(M,{key:0,name:"Shelf"},{default:f(()=>[k(P(a.value.shelfName||"Not on a shelf")+" ",1),d(ge,{icon:"pencil",tooltip:"Change shelf",onClick:p})]),_:1})):Y("",!0),d(M,{name:"Start writing on"},{description:f(()=>[V[30]||(V[30]=k(" New notes prior to this date won't be created. ")),r.value.end.type==="repeats"&&!r.value.start?(v(),C("div",Eg," Start date should be defined for journal that ends after some number of repeats. ")):Y("",!0),r.value.write.type==="custom"?(v(),C("div",Ig," Start date for custom intervals cannot be changes as it is used to calculate interval ")):Y("",!0)]),default:f(()=>[r.value.write.type==="custom"?(v(),C("span",Pg,P(r.value.write.anchorDate),1)):(v(),I(Ao,{key:1,modelValue:r.value.start,"onUpdate:modelValue":V[1]||(V[1]=K=>r.value.start=K)},null,8,["modelValue"])),r.value.start&&r.value.write.type!=="custom"?(v(),I(ge,{key:2,icon:"trash",tooltip:"Clear start date",onClick:V[2]||(V[2]=K=>r.value.start="")})):Y("",!0)]),_:1}),d(M,{name:"End writing"},{description:f(()=>[r.value.end.type==="repeats"?(v(),C("div",Rg,"After creating this many notes, new notes won't be created.")):Y("",!0),r.value.end.type==="date"?(v(),C("div",Bg,"New notes after this date won't be created.")):Y("",!0)]),default:f(()=>[d(xe,{modelValue:r.value.end.type,"onUpdate:modelValue":V[3]||(V[3]=K=>r.value.end.type=K)},{default:f(()=>V[31]||(V[31]=[g("option",{value:"never"},"Never",-1),g("option",{value:"date"},"After date",-1),g("option",{value:"repeats"},"After repeating",-1)])),_:1},8,["modelValue"]),r.value.end.type==="date"?(v(),I(Ao,{key:0,modelValue:r.value.end.date,"onUpdate:modelValue":V[4]||(V[4]=K=>r.value.end.date=K)},null,8,["modelValue"])):Y("",!0),r.value.end.type==="repeats"?(v(),C(W,{key:1},[d(tn,{modelValue:r.value.end.repeats,"onUpdate:modelValue":V[5]||(V[5]=K=>r.value.end.repeats=K),min:1},null,8,["modelValue"]),V[32]||(V[32]=k(" times "))],64)):Y("",!0)]),_:1}),d(M,{name:"Index notes"},{description:f(()=>V[33]||(V[33]=[k(" Allows to assign numbers to notes (ex. Day 1, Day 2, etc.). ")])),default:f(()=>[d(He,{modelValue:r.value.index.enabled,"onUpdate:modelValue":V[6]||(V[6]=K=>r.value.index.enabled=K)},null,8,["modelValue"])]),_:1}),r.value.index.enabled?(v(),C(W,{key:1},[d(M,{name:"Anchor date"},{description:f(()=>V[34]||(V[34]=[k(" This date is used to connect some number to it for further calculations."),g("br",null,null,-1),k(" Start date is used as anchor date if defined. ")])),default:f(()=>[g("div",{"aria-label":r.value.start?"Start date is used":""},[r.value.start?(v(),C("span",Ug,P(r.value.start),1)):(v(),I(Ao,{key:1,modelValue:r.value.index.anchorDate,"onUpdate:modelValue":V[7]||(V[7]=K=>r.value.index.anchorDate=K)},null,8,["modelValue"]))],8,Yg)]),_:1}),d(M,{name:"Start number"},{description:f(()=>V[35]||(V[35]=[k(" This number is used to start numbering notes at anchor date. ")])),default:f(()=>[d(tn,{modelValue:r.value.index.anchorIndex,"onUpdate:modelValue":V[8]||(V[8]=K=>r.value.index.anchorIndex=K),min:1},null,8,["modelValue"])]),_:1}),d(M,{name:"Index change"},{description:f(()=>V[36]||(V[36]=[k(" Define how index number will change with time. ")])),default:f(()=>[d(xe,{modelValue:r.value.index.type,"onUpdate:modelValue":V[9]||(V[9]=K=>r.value.index.type=K)},{default:f(()=>V[37]||(V[37]=[g("option",{value:"increment"},"Constantly increasing",-1),g("option",{value:"reset_after"},"Resets after",-1)])),_:1},8,["modelValue"]),r.value.index.type==="reset_after"?(v(),C(W,{key:0},[d(tn,{modelValue:r.value.index.resetAfter,"onUpdate:modelValue":V[10]||(V[10]=K=>r.value.index.resetAfter=K),min:2,narrow:""},null,8,["modelValue"]),V[38]||(V[38]=k(" repeats "))],64)):Y("",!0)]),_:1}),!r.value.start&&r.value.index.type==="increment"?(v(),I(M,{key:0,name:"Allow before"},{description:f(()=>V[39]||(V[39]=[k(" Enabled to index before anchor date. Might result in negative numbers. ")])),default:f(()=>[d(He,{modelValue:r.value.index.allowBefore,"onUpdate:modelValue":V[11]||(V[11]=K=>r.value.index.allowBefore=K)},null,8,["modelValue"])]),_:1})):Y("",!0)],64)):Y("",!0),d(M,{name:"Confirm creating new note?"},{description:f(()=>V[40]||(V[40]=[k(" When turned on will show confirmation dialog any time you try navigating to a date that does not have a note yet. ")])),default:f(()=>[d(He,{modelValue:r.value.confirmCreation,"onUpdate:modelValue":V[12]||(V[12]=K=>r.value.confirmCreation=K)},null,8,["modelValue"])]),_:1}),d(M,{name:"Auto-create current notes"},{description:f(()=>[V[41]||(V[41]=k(" When turned on will automatically create notes for current date if they don't exist yet. ")),V[42]||(V[42]=g("br",null,null,-1)),r.value.confirmCreation?(v(),C("div",Lg,"Confirmation dialog won't be shown for autocreated notes.")):Y("",!0)]),default:f(()=>[d(He,{modelValue:r.value.autoCreate,"onUpdate:modelValue":[V[13]||(V[13]=K=>r.value.autoCreate=K),z]},null,8,["modelValue"])]),_:1}),d(M,{name:"Note name template"},{description:f(()=>[V[43]||(V[43]=k(" Template used to generate new note name.")),V[44]||(V[44]=g("br",null,null,-1)),d(ha,{type:r.value.write.type,"date-format":a.value.dateFormat},null,8,["type","date-format"])]),default:f(()=>[d(qe,{modelValue:r.value.nameTemplate,"onUpdate:modelValue":V[14]||(V[14]=K=>r.value.nameTemplate=K)},null,8,["modelValue"])]),_:1}),d(M,{name:"Default date format"},{description:f(()=>[V[46]||(V[46]=k(" Used to format dates if not defined in variable.")),V[47]||(V[47]=g("br",null,null,-1)),V[48]||(V[48]=g("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Syntax reference",-1)),V[49]||(V[49]=g("br",null,null,-1)),d(cu,{format:r.value.dateFormat},null,8,["format"]),c.value?(v(),C("div",Wg,[V[45]||(V[45]=k(' Looks like you are using date format to create folders. Recommended way to this is to use variables in "Folder" field. ')),g("a",{href:"#",onClick:m},"Apply recommendation")])):Y("",!0)]),default:f(()=>[d(qe,{modelValue:r.value.dateFormat,"onUpdate:modelValue":V[15]||(V[15]=K=>r.value.dateFormat=K)},null,8,["modelValue"])]),_:1}),d(M,{name:"Folder"},{description:f(()=>[V[50]||(V[50]=k(" New notes will be created in this folder. ")),V[51]||(V[51]=g("br",null,null,-1)),d(ha,{type:r.value.write.type,"date-format":a.value.dateFormat},null,8,["type","date-format"]),V[52]||(V[52]=k()),V[53]||(V[53]=g("br",null,null,-1)),r.value.folder&&r.value.folder.includes("{")?(v(),I(Eh,{key:0,"journal-name":F.journalName},null,8,["journal-name"])):Y("",!0)]),default:f(()=>[d(uu,{modelValue:r.value.folder,"onUpdate:modelValue":V[16]||(V[16]=K=>r.value.folder=K)},null,8,["modelValue"])]),_:1}),d(Ct,{expanded:i.templates,"onUpdate:expanded":V[17]||(V[17]=K=>i.templates=K)},{trigger:f(()=>[d(St,{icon:"notepad-text-dashed"},{default:f(()=>[V[54]||(V[54]=k(" Templates ")),g("span",Jg,P(r.value.templates.length),1)]),_:1})]),controls:f(()=>[d(ie,{onClick:_},{default:f(()=>V[55]||(V[55]=[k(" Add template ")])),_:1})]),default:f(()=>[d(M,{"no-controls":""},{description:f(()=>[V[56]||(V[56]=k(" Path to note that will be used as template when creating new notes. ")),V[57]||(V[57]=g("br",null,null,-1)),V[58]||(V[58]=k(" When multiple templates are configured - first existing will be used. ")),V[59]||(V[59]=g("br",null,null,-1)),d(ha,{type:a.value.type,"date-format":a.value.dateFormat},null,8,["type","date-format"]),V[60]||(V[60]=g("br",null,null,-1)),d(Sg,{type:a.value.type,"journal-name":F.journalName},null,8,["type","journal-name"]),d(Og)]),_:1}),(v(!0),C(W,null,_e(r.value.templates,(K,Re)=>(v(),C(W,{key:Re},[d(M,{"controls-only":""},{default:f(()=>[d(Ng,{modelValue:r.value.templates[Re],"onUpdate:modelValue":dt=>r.value.templates[Re]=dt,class:"grow"},null,8,["modelValue","onUpdate:modelValue"]),d(ge,{icon:"trash",tooltip:"Remove template",onClick:dt=>r.value.templates.splice(Re,1)},null,8,["onClick"])]),_:2},1024),K.includes("{")?(v(),I(jg,{key:0,"journal-name":F.journalName,path:K},null,8,["journal-name","path"])):Y("",!0)],64))),128))]),_:1},8,["expanded"]),d(Ct,{expanded:i.commands,"onUpdate:expanded":V[18]||(V[18]=K=>i.commands=K)},{trigger:f(()=>[d(St,{icon:"terminal"},{default:f(()=>[V[61]||(V[61]=k(" Commands ")),g("span",qg,P(a.value.commands.length),1)]),_:1})]),controls:f(()=>[d(ie,{onClick:y},{default:f(()=>V[62]||(V[62]=[k("Add command")])),_:1})]),default:f(()=>[a.value.commands.length===0?(v(),I(M,{key:0},{description:f(()=>V[63]||(V[63]=[k(" No commands configured yet. ")])),_:1})):(v(!0),C(W,{key:1},_e(a.value.commands,(K,Re)=>(v(),I(M,{key:Re},{name:f(()=>[k(P(K.name),1)]),description:f(()=>[k(P(b(Ga)(a.value.type,K.type))+" "+P(b(Up)(a.value.type,K.type,K.context)),1)]),default:f(()=>[d(ge,{icon:"pencil",tooltip:"Edit",onClick:dt=>x(K,Re)},null,8,["onClick"]),d(ge,{icon:"trash-2",tooltip:"Delete",onClick:dt=>T(Re)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"]),d(Ct,{expanded:i.decorations,"onUpdate:expanded":V[19]||(V[19]=K=>i.decorations=K)},{trigger:f(()=>[d(St,{icon:"paintbrush"},{default:f(()=>[V[64]||(V[64]=k(" Calendar decorations ")),g("span",Hg,P(a.value.decorations.length),1)]),_:1})]),controls:f(()=>[d(ie,{onClick:O},{default:f(()=>V[65]||(V[65]=[k("Add decoration")])),_:1})]),default:f(()=>[d(M,{"no-controls":""},{description:f(()=>V[66]||(V[66]=[k(" Use decorations to highlight dates in calendar that meet certain conditions. ")])),_:1}),a.value.decorations.length===0?(v(),I(M,{key:0},{description:f(()=>V[67]||(V[67]=[k(" No calendar decorations configured yet. ")])),_:1})):(v(!0),C(W,{key:1},_e(a.value.decorations,(K,Re)=>(v(),I(M,{key:Re},{description:f(()=>[g("div",zg,[g("div",Kg,[d(Qo,{class:"decoration-preview",styles:K.styles},{default:f(()=>[g("span",null,P(b(l)),1)]),_:2},1032,["styles"])]),V[68]||(V[68]=k(" when ")),(v(!0),C(W,null,_e(K.conditions,(dt,In)=>(v(),C(W,{key:In},[k(P(b(rp)(dt))+" ",1),In>0?(v(),C("span",Gg,P(K.mode),1)):Y("",!0)],64))),128))])]),default:f(()=>[d(ge,{icon:"pencil",tooltip:"Edit",onClick:dt=>ee(K,Re)},null,8,["onClick"]),d(ge,{icon:"trash-2",tooltip:"Delete",onClick:dt=>N(Re)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"]),d(Ct,{expanded:i.navBlock,"onUpdate:expanded":V[22]||(V[22]=K=>i.navBlock=K)},{trigger:f(()=>[d(St,{icon:"signpost-big"},{default:f(()=>V[69]||(V[69]=[k(" Navigation block ")])),_:1})]),controls:f(()=>[d(ie,{onClick:A},{default:f(()=>V[70]||(V[70]=[k("Add row")])),_:1})]),default:f(()=>[d(gs,{class:"nav-block-preview",rows:a.value.navBlock.rows,"journal-name":F.journalName,"ref-date":b(s),onMoveUp:U,onMoveDown:se,onEdit:re,onRemove:le},null,8,["rows","journal-name","ref-date"]),d(M,{name:"Navigation block mode"},{default:f(()=>[d(xe,{modelValue:a.value.navBlock.type,"onUpdate:modelValue":V[20]||(V[20]=K=>a.value.navBlock.type=K)},{default:f(()=>V[71]||(V[71]=[g("option",{value:"create"},"Create new note",-1),g("option",{value:"existing"},"Open existing note",-1)])),_:1},8,["modelValue"])]),_:1}),d(M,{name:"Decorate whole navigation block"},{default:f(()=>[d(He,{modelValue:a.value.navBlock.decorateWholeBlock,"onUpdate:modelValue":V[21]||(V[21]=K=>a.value.navBlock.decorateWholeBlock=K)},null,8,["modelValue"])]),_:1})]),_:1},8,["expanded"]),a.value.type==="custom"?(v(),I(Ct,{key:2,expanded:i.calendarViewBlock,"onUpdate:expanded":V[24]||(V[24]=K=>i.calendarViewBlock=K)},{trigger:f(()=>[d(St,{icon:"signpost-big"},{default:f(()=>V[72]||(V[72]=[k(" Calendar View block ")])),_:1})]),controls:f(()=>[d(ie,{onClick:De},{default:f(()=>V[73]||(V[73]=[k("Add row")])),_:1})]),default:f(()=>[d(gs,{class:"nav-block-preview",rows:a.value.calendarViewBlock.rows,"journal-name":F.journalName,"ref-date":b(s),onMoveUp:ut,onMoveDown:Qe,onEdit:Ee,onRemove:wt},null,8,["rows","journal-name","ref-date"]),d(M,{name:"Decorate whole navigation block"},{default:f(()=>[d(He,{modelValue:a.value.calendarViewBlock.decorateWholeBlock,"onUpdate:modelValue":V[23]||(V[23]=K=>a.value.calendarViewBlock.decorateWholeBlock=K)},null,8,["modelValue"])]),_:1})]),_:1},8,["expanded"])):Y("",!0),d(Ct,{expanded:i.frontmatter,"onUpdate:expanded":V[29]||(V[29]=K=>i.frontmatter=K)},{trigger:f(()=>[d(St,{icon:"table-properties"},{default:f(()=>V[74]||(V[74]=[k(" Frontmatter ")])),_:1})]),default:f(()=>[d(M,{name:"Date property name"},{default:f(()=>[k(P(r.value.frontmatter.dateField||b(qa))+" ",1),d(ge,{icon:"pencil",tooltip:"Edit",onClick:V[25]||(V[25]=K=>Ie("dateField"))})]),_:1}),r.value.index.enabled?(v(),I(M,{key:0,name:"Index property name"},{default:f(()=>[k(P(r.value.frontmatter.indexField||b(Ha))+" ",1),d(ge,{icon:"pencil",tooltip:"Edit",onClick:V[26]||(V[26]=K=>Ie("indexField"))})]),_:1})):Y("",!0),d(M,{name:"Add start date property?"},{description:f(()=>V[75]||(V[75]=[k(" In most cases start date is equal to date property. But for weeks journals it might be different for weeks that start one year and end in other - in this case date is equals to end date. ")])),default:f(()=>[d(He,{"model-value":r.value.frontmatter.addStartDate,"onUpdate:modelValue":G},null,8,["model-value"])]),_:1}),r.value.frontmatter.addStartDate?(v(),I(M,{key:1,name:"Start date property name"},{default:f(()=>[k(P(r.value.frontmatter.startDateField||b(Zt))+" ",1),d(ge,{icon:"pencil",tooltip:"Edit",onClick:V[27]||(V[27]=K=>Ie("startDateField"))})]),_:1})):Y("",!0),d(M,{name:"Add end date property?"},{default:f(()=>[d(He,{"model-value":r.value.frontmatter.addEndDate,"onUpdate:modelValue":fe},null,8,["model-value"])]),_:1}),r.value.frontmatter.addEndDate?(v(),I(M,{key:2,name:"End date property name"},{default:f(()=>[k(P(r.value.frontmatter.endDateField||b(mn))+" ",1),d(ge,{icon:"pencil",tooltip:"Edit",onClick:V[28]||(V[28]=K=>Ie("endDateField"))})]),_:1})):Y("",!0)]),_:1},8,["expanded"])])):Y("",!0)}}),Xg=be(Qg,[["__scopeId","data-v-0af11ab5"]]),Zg={key:0,class:"journal-important"},ey=B({__name:"RenameShelf.modal",props:{name:{}},emits:["save","close"],setup(e,{emit:t}){const n=e,o=t,a=he(),r=ce(n.name),l=w(()=>r.value.length>0&&r.value!==n.name&&!a.hasShelf(r.value)),s=w(()=>r.value&&r.value!==n.name&&a.hasShelf(r.value));function i(){o("save",r.value),o("close")}return(u,c)=>(v(),C(W,null,[d(M,{name:"New name"},{description:f(()=>[s.value?(v(),C("span",Zg,"This name is already used.")):Y("",!0)]),default:f(()=>[d(qe,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=m=>r.value=m)},null,8,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:c[1]||(c[1]=m=>u.$emit("close"))},{default:f(()=>c[2]||(c[2]=[k("Cancel")])),_:1}),d(ie,{cta:"",disabled:!l.value,onClick:i},{default:f(()=>c[3]||(c[3]=[k("Save")])),_:1},8,["disabled"])]),_:1})],64))}}),ty={key:0},ny={class:"flair"},oy={class:"flair"},ay=B({__name:"JournalSettingsShelfDetails",props:{shelfName:{}},emits:["back","edit","organize","bulk-add"],setup(e,{emit:t}){const n=t,o=he(),a=w(()=>`Shelf: ${e.shelfName}`),r=pn({commands:!1}),l=w(()=>o.getShelf(e.shelfName)),s=w(()=>l.value?o.getShelfJournals(e.shelfName):[]);function i(){l.value&&new Me(o,"Rename shelf",ey,{name:l.value.name,onSave(p){o.renameShelf(e.shelfName,p),n("organize",p)}}).open()}function u(){new Me(o,"Add Journal",ml,{onCreate(p,_){if(!l.value)return;const y=o.createJournal(p,_);l.value.journals.push(p),y.shelves.push(e.shelfName),n("edit",p)}}).open()}function c(){l.value&&new Me(o,"Add command",Na,{index:l.value.commands.length,commands:l.value.commands,onSubmit:p=>{l.value&&(l.value.commands.push(p),no(o,p,a.value,()=>o.getShelfJournals(e.shelfName).filter(_=>_.type===p.writeType)),r.commands||(r.commands=!0))}}).open()}function m(p,_){l.value&&new Me(o,"Edit command",Na,{index:_,command:p,commands:l.value.commands,onSubmit:y=>{l.value&&(Aa(o,p,a.value),no(o,y,a.value,()=>o.getShelfJournals(e.shelfName).filter(x=>x.type===y.writeType)))}}).open()}function h(p){if(!l.value)return;const[_]=l.value.commands.splice(p,1);_&&Aa(o,_,a.value)}return yt(()=>{l.value&&!l.value.commands&&(l.value.commands=[])}),(p,_)=>l.value?(v(),C("div",ty,[d(M,{heading:""},{name:f(()=>[d(St,{icon:"library"},{default:f(()=>[k(" Configuring "+P(l.value.name),1)]),_:1})]),default:f(()=>[d(ge,{icon:"pencil",tooltip:"Rename shelf",onClick:i}),d(ge,{icon:"chevron-left",tooltip:"Back to list",onClick:_[0]||(_[0]=y=>p.$emit("back"))})]),_:1}),d(Ct,{"default-expanded":s.value.length>0},{trigger:f(()=>[d(St,{icon:"book-open"},{default:f(()=>[_[4]||(_[4]=k(" Journals ")),g("span",ny,P(s.value.length),1)]),_:1})]),controls:f(()=>[d(ge,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:u})]),default:f(()=>[d(il,{journals:s.value,onEdit:_[1]||(_[1]=y=>p.$emit("edit",y)),onBulkAdd:_[2]||(_[2]=y=>p.$emit("bulk-add",y))},null,8,["journals"])]),_:1},8,["default-expanded"]),d(Ct,{expanded:r.commands,"onUpdate:expanded":_[3]||(_[3]=y=>r.commands=y)},{trigger:f(()=>[d(St,{icon:"terminal"},{default:f(()=>[_[5]||(_[5]=k(" Commands ")),g("span",oy,P(l.value.commands.length),1)]),_:1})]),controls:f(()=>[d(ie,{onClick:c},{default:f(()=>_[6]||(_[6]=[k("Add command")])),_:1})]),default:f(()=>[l.value.commands.length===0?(v(),I(M,{key:0},{description:f(()=>_[7]||(_[7]=[k(" No commands configured yet. ")])),_:1})):(v(!0),C(W,{key:1},_e(l.value.commands,(y,x)=>(v(),I(M,{key:x},{name:f(()=>[k(P(y.name),1)]),description:f(()=>[k(P(b(Ga)(y.writeType,y.type)),1)]),default:f(()=>[d(ge,{icon:"pencil",tooltip:"Edit",onClick:T=>m(y,x)},null,8,["onClick"]),d(ge,{icon:"trash-2",tooltip:"Delete",onClick:T=>h(x)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"])])):Y("",!0)}}),ry=B({__name:"ConditionItem",props:{condition:{}},emits:["change"],setup(e){const t=w(()=>{switch(e.condition.type){case"title":return pu;case"tag":return vu;case"property":return hu}return null});return(n,o)=>t.value?(v(),I(Jo(t.value),{key:0,condition:n.condition,onChange:o[0]||(o[0]=a=>n.$emit("change",a))},null,40,["condition"])):Y("",!0)}}),ly={key:0,class:"mode-hint"},sy={key:0,class:"journal-hint"},iy=B({__name:"ConditionsList",props:{mode:{},conditions:{}},emits:["add-condition","change-condition","remove-condition"],setup(e,{emit:t}){const n=t,o=[{value:"title",label:"Note title"},{value:"tag",label:"Tag"},{value:"property",label:"Property"}];function a(s){n("add-condition",Vt(au[s]))}function r(s){n("remove-condition",s)}function l(s,i){n("change-condition",s,i)}return(s,i)=>(v(),C(W,null,[d(M,null,{default:f(()=>[d(Er,{options:o,onSelect:a},{default:f(()=>i[0]||(i[0]=[k("Add condition")])),_:1})]),_:1}),(v(!0),C(W,null,_e(s.conditions,(u,c)=>(v(),I(M,{key:c,class:"condition-wrapper"},{default:f(()=>[c>0?(v(),C("span",ly,P(s.mode),1)):Y("",!0),d(ry,{condition:u,onChange:m=>l(c,m)},null,8,["condition","onChange"]),d(ge,{icon:"trash",onClick:m=>r(c)},null,8,["onClick"])]),_:2},1024))),128)),s.conditions.length===0?(v(),C("p",sy,"No conditions defined yet")):Y("",!0)],64))}}),uy={key:0},dy=B({__name:"ConfigureBulkAddNotes",props:{journalName:{}},emits:["process","close"],setup(e,{emit:t}){const n=he(),o=w(()=>n.getJournal(e.journalName)),a=t,{defineField:r,errorBag:l,handleSubmit:s}=gn({initialValues:{folder:"",date_place:"title",property_name:"",date_format:o.value?.dateFormat,filter_combinator:"no",existing_note:"skip",other_folder:"keep",other_name:"keep",dry_run:!1},validationSchema:yn(gt(Nt({folder:Ge(),date_place:ht(["title","property"]),property_name:Ge(),date_format:gt(Ge(),qt("Date format is required")),filter_combinator:ht(["no","and","or"]),existing_note:ht(["skip","override","merge","ask"]),other_folder:ht(["keep","move","ask"]),other_name:ht(["keep","rename","ask"]),dry_run:en()}),Ko(io([["date_place"],["property_name"]],Ie=>Ie.date_place==="property"?!!Ie.property_name:!0,"Please enter property name."),["property_name"])))}),[i,u]=r("folder"),[c,m]=r("date_place"),[h,p]=r("property_name"),[_,y]=r("date_format"),[x,T]=r("filter_combinator"),[O,ee]=r("existing_note"),[N,A]=r("other_folder"),[re,le]=r("other_name"),[U,se]=r("dry_run"),De=ce([]);function Ee(Ie){De.value.push(Ie)}function wt(Ie,G){De.value[Ie][G.prop]=G.value}function ut(Ie){De.value.splice(Ie,1)}const Qe=s(()=>{a("process",{folder:i.value??"/",date_place:c.value??"title",property_name:h.value??"",date_format:_.value??o.value?.dateFormat??"",filter_combinator:x.value??"no",filters:De.value,existing_note:O.value??"skip",other_folder:N.value??"keep",other_name:re.value??"keep",dry_run:U.value??!1})});return(Ie,G)=>(v(),C("form",{onSubmit:G[10]||(G[10]=Ht((...fe)=>b(Qe)&&b(Qe)(...fe),["prevent"]))},[d(M,{name:"Folder",description:""},{description:f(()=>[G[11]||(G[11]=g("div",null,"Select folder with existing notes that you want to process",-1)),d(et,{errors:b(l).folder},null,8,["errors"])]),default:f(()=>[d(uu,Se({modelValue:b(i),"onUpdate:modelValue":G[0]||(G[0]=fe=>de(i)?i.value=fe:null)},b(u)),null,16,["modelValue"])]),_:1}),d(M,{name:"Take date from"},{default:f(()=>[d(xe,Se({modelValue:b(c),"onUpdate:modelValue":G[1]||(G[1]=fe=>de(c)?c.value=fe:null)},b(m)),{default:f(()=>G[12]||(G[12]=[g("option",{value:"title"},"Note title",-1),g("option",{value:"property"},"Property",-1)])),_:1},16,["modelValue"])]),_:1}),b(c)==="property"?(v(),I(M,{key:0,name:"Property containing date"},{description:f(()=>[d(et,{errors:b(l).property_name},null,8,["errors"])]),default:f(()=>[d(qe,Se({modelValue:b(h),"onUpdate:modelValue":G[2]||(G[2]=fe=>de(h)?h.value=fe:null)},b(p)),null,16,["modelValue"])]),_:1})):Y("",!0),d(M,{name:"Date format"},{description:f(()=>[G[13]||(G[13]=g("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Syntax reference",-1)),G[14]||(G[14]=g("br",null,null,-1)),G[15]||(G[15]=k(" If your dates have time component in them - please omit it in format. ")),d(cu,{format:b(_)??""},null,8,["format"]),b(c)==="property"?(v(),C("div",uy," Please pay attention that dates might differ from how they are stored. Check format in Source display mode. ")):Y("",!0),d(et,{errors:b(l).date_format},null,8,["errors"])]),default:f(()=>[d(qe,Se({modelValue:b(_),"onUpdate:modelValue":G[3]||(G[3]=fe=>de(_)?_.value=fe:null)},b(y)),null,16,["modelValue"])]),_:1}),d(M,{name:"Process"},{default:f(()=>[d(xe,Se({modelValue:b(x),"onUpdate:modelValue":G[4]||(G[4]=fe=>de(x)?x.value=fe:null)},b(T)),{default:f(()=>G[16]||(G[16]=[g("option",{value:"no"},"All notes",-1),g("option",{value:"or"},"Notes that match any filter",-1),g("option",{value:"and"},"Notes that match all filters",-1)])),_:1},16,["modelValue"])]),_:1}),b(x)&&b(x)!=="no"?(v(),I(iy,{key:1,conditions:De.value,mode:b(x),onAddCondition:Ee,onChangeCondition:wt,onRemoveCondition:ut},null,8,["conditions","mode"])):Y("",!0),d(M,{name:"If other note with same date exists in journal"},{default:f(()=>[d(xe,Se({modelValue:b(O),"onUpdate:modelValue":G[5]||(G[5]=fe=>de(O)?O.value=fe:null)},b(ee)),{default:f(()=>G[17]||(G[17]=[g("option",{value:"skip"},"Skip note",-1),g("option",{value:"override"},"Override date connection",-1),g("option",{value:"merge"},"Merge note content into existing one",-1),g("option",{value:"ask"},"Ask for action for every such note",-1)])),_:1},16,["modelValue"])]),_:1}),d(M,{name:"When note name differs from journal settings"},{default:f(()=>[d(xe,Se({modelValue:b(re),"onUpdate:modelValue":G[6]||(G[6]=fe=>de(re)?re.value=fe:null)},b(le)),{default:f(()=>G[18]||(G[18]=[g("option",{value:"keep"},"Keep as is",-1),g("option",{value:"rename"},"Rename",-1),g("option",{value:"ask"},"Ask for action for every such note",-1)])),_:1},16,["modelValue"])]),_:1}),d(M,{name:"When note is not in folder from journal setting"},{default:f(()=>[d(xe,Se({modelValue:b(N),"onUpdate:modelValue":G[7]||(G[7]=fe=>de(N)?N.value=fe:null)},b(A)),{default:f(()=>G[19]||(G[19]=[g("option",{value:"keep"},"Keep as is",-1),g("option",{value:"move"},"Move to configured folder",-1),g("option",{value:"ask"},"Ask for action for every such note",-1)])),_:1},16,["modelValue"])]),_:1}),d(M,{name:"Dry run?"},{description:f(()=>G[20]||(G[20]=[k(" Don't change notes, just report potential changes ")])),default:f(()=>[d(He,Se({modelValue:b(U),"onUpdate:modelValue":G[8]||(G[8]=fe=>de(U)?U.value=fe:null)},b(se)),null,16,["modelValue"])]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:G[9]||(G[9]=fe=>Ie.$emit("close"))},{default:f(()=>G[21]||(G[21]=[k("Cancel")])),_:1}),d(ie,{cta:"",onClick:b(Qe)},{default:f(()=>G[22]||(G[22]=[k("Start")])),_:1},8,["onClick"])]),_:1})],32))}});class cy{#e;repeats=1;constructor(t){this.#e=t}get duration(){return this.#e.value.type}resolveForDate(t){const n=X(t);return n.isValid()?this.#n(n):null}resolveNext(t){const n=X(t);return n.isValid()?(n.add(1,this.#e.value.type),this.#n(n)):null}resolvePrevious(t){const n=X(t);return n.isValid()?(n.subtract(1,this.#e.value.type),this.#n(n)):null}resolveStartDate(t){const n=this.#e.value.type;return X(t).startOf(n).format(we)}resolveEndDate(t){const n=this.#e.value.type;return X(t).endOf(n).format(we)}resolveRelativeDate(t){const n=this.#e.value.type;return Oi(n,t)}resolveDateForCommand(t,n){switch(n){case"same":return t;case"next":return X(t).add(1,this.#e.value.type).format(we);case"previous":return X(t).subtract(1,this.#e.value.type).format(we);case"same_next_week":return X(t).add(1,"week").format(we);case"same_previous_week":return X(t).subtract(1,"week").format(we);case"same_next_month":return X(t).add(1,"month").format(we);case"same_previous_month":return X(t).subtract(1,"month").format(we);case"same_next_year":return X(t).add(1,"year").format(we);case"same_previous_year":return X(t).subtract(1,"year").format(we)}return null}countRepeats(t,n){const o=X(t),a=X(n);return Math.abs(Math.ceil(o.diff(a,this.#e.value.type)))}calculateOffset(t){const n=X(t),o=this.#n(n);if(!o)return[0,0];const a=this.resolveStartDate(o),r=this.resolveEndDate(o);return n.isBefore(a)||n.isAfter(r)?[0,0]:[n.diff(a,"days")+1,n.diff(r,"days")-1]}#n(t){const n=this.#e.value.type,o=t.clone().startOf(n);if(this.#e.value.type==="week"){const a=t.clone().endOf(n);if(!o.isSame(a,"year")&&o.week()===1)return a.format(we)}return o.format(we)}}class fy{constructor(t,n,o){this.journalName=t,this.index=o,this.#e=n}#e;get repeats(){return this.#e.value.duration}get duration(){return this.#e.value.every}resolveForDate(t){const o=this.index.getJournalIndex(this.journalName).findClosestDate(t);if(o)return o===t?o:o<=t?this.#o(t,o):this.#n(t,o);const a=this.#e.value.anchorDate,r=this.resolveEndDate(a);return t>=a&&t<r?a:t<a?this.#n(t,a):this.#o(t,a)}resolveNext(t){const n=this.resolveForDate(t);if(!n)return null;const o=this.resolveEndDate(n);return X(o).add(1,"day").format(we)}resolvePrevious(t){const n=this.resolveForDate(t);if(!n)return null;const o=this.index.getJournalIndex(this.journalName),a=X(n).subtract(1,"day"),r=o.findClosestDate(a.format(we));if(r){const s=this.index.get(this.journalName,r);if(s?.end_date&&a.isSame(s.end_date,"day"))return r}const l=X(n).subtract(this.#e.value.duration,this.#e.value.every);return l.format(we)}resolveDateForCommand(t,n){const o=this.resolveForDate(t);return o?n==="next"?this.resolveNext(o):n==="previous"?this.resolvePrevious(o):o:null}resolveStartDate(t){return t}resolveEndDate(t){const n=this.index.get(this.journalName,t);return(n?.end_date?X(n.end_date):X(t).add(this.#e.value.duration,this.#e.value.every).subtract(1,"day")).format(we)}resolveRelativeDate(t){const n=this.resolveForDate(Ne().format(we));if(!n)return"";const o=this.countRepeats(n,t);switch(o){case 0:return"This "+this.journalName;case-1:return"Last "+this.journalName;case 1:return"Next "+this.journalName}return t<n?`${Math.abs(o)} ${this.journalName}s ago`:`${o} ${this.journalName}s from now`}calculateOffset(t){const n=this.resolveForDate(t);if(!n)return[0,0];const o=X(t),a=X(n),r=X(this.resolveEndDate(n));return[o.diff(a,"days")+1,o.diff(r,"days")-1]}countRepeats(t,n){const o=this.resolveForDate(t),a=this.resolveForDate(n);if(!o||!a)return 0;let r=X(o),l=X(a);r.isAfter(l)&&([r,l]=[l,r]);let s=0;for(;r.isBefore(l);){++s;const i=this.resolveNext(r.format(we));if(!i)break;r=X(i)}return t>n?-s:s}#n(t,n){const o=this.index.getJournalIndex(this.journalName);let a=X(n),r=!1;for(;!r;){const l=a.clone().subtract(1,"day"),s=o.findClosestDate(l.format(we));let i=a.subtract(this.#e.value.duration,this.#e.value.every);if(s){const u=this.index.get(this.journalName,s);u?.end_date&&l.isSame(u.end_date,"day")&&(i=X(s))}i.isSameOrBefore(t,"day")&&l.isSameOrAfter(t,"day")?r=!0:a=i.clone()}return a.format(we)}#o(t,n){let o=X(n),a=!1;for(;!a;){const r=X(this.resolveEndDate(o.format(we)));o.isSameOrBefore(t,"day")&&r.isSameOrAfter(t,"day")?a=!0:o=r.clone().add(1,"day")}return o.format(we)}}class ua{constructor(t,n,o,a,r,l){this.name=t,this.config=n,this.index=o,this.appManager=a,this.notesManager=r,this.activeNote=l,this.#e=this.config.value.write.type==="custom"?new fy(this.name,w(()=>this.config.value.write),this.index):new cy(w(()=>this.config.value.write))}#e;#n=new Map;get type(){return this.config.value.write.type}get dateFormat(){return this.config.value.dateFormat}get navBlock(){return this.config.value.navBlock}get calendarViewBlock(){return this.config.value.calendarViewBlock}get decorations(){return this.config.value.decorations}get commands(){return this.config.value.commands}get isOnShelf(){return this.config.value.shelves.length>0}get shelfName(){return this.config.value.shelves[0]??""}get startDate(){return this.config.value.start}get endDate(){switch(this.config.value.end.type){case"date":return this.config.value.end.date;case"repeats":{const t=X(this.startDate);return t.isValid()?t.clone().add(this.config.value.end.repeats*this.#e.repeats,this.#e.duration).format(we):""}}return""}calculateOffset(t){return this.#e.calculateOffset(t)}registerCommands(){for(const t of this.config.value.commands)this.#o(t)}get(t){const n=this.#e.resolveForDate(t);if(!n)return null;const o=this.index.get(this.name,n);return o||(this.#d(n)?this.#u(n):null)}next(t,n=!1){const o=this.#e.resolveForDate(t);if(!o)return null;if(n)return this.index.findNext(this.name,o);const a=this.#e.resolveNext(o);if(!a)return null;const r=this.index.get(this.name,a);return r||(this.#d(a)?this.#u(a):null)}previous(t,n=!1){const o=this.#e.resolveForDate(t);if(!o)return null;if(n)return this.index.findPrevious(this.name,o);const a=this.#e.resolvePrevious(o);if(!a)return null;const r=this.index.get(this.name,a);return r||(this.#d(a)?this.#u(a):null)}getNoteNameForDate(t){const n=this.get(t);if(!n)return"";const o=this.#s(n);return Ot(this.config.value.nameTemplate,o)}findAll(t,n){const o=this.#e.resolveForDate(t),a=this.#e.resolveForDate(n);if(!o||!a)return[];const r=[];let l=o;for(;l&&l<=a;){const s=this.get(l);s&&r.push(s);const i=this.next(l);l=i?i.date:null}return r}async open(t,n){const[o,a]=await this.#i(t);o&&await this.#l(o,n,a)}resolveAnchorDate(t){return this.#e.resolveForDate(t)}resolveStartDate(t){return this.#e.resolveStartDate(t)}resolveEndDate(t){return this.#e.resolveEndDate(t)}resolveRelativeDate(t){return this.#e.resolveRelativeDate(t)}addCommand(t){this.config.value.commands.push(t),this.#o(t)}updateCommand(t,n){this.#a(this.config.value.commands[t]),this.config.value.commands[t]=n,this.#o(n)}deleteCommand(t){const[n]=this.config.value.commands.splice(t,1);this.#a(n)}#o(t){this.appManager.addCommand(this.name,t,n=>n?this.#t(t):(this.#r(t).catch(console.error),!0)),t.showInRibbon&&this.appManager.addRibbonIcon(this.name,t.icon,t.name,()=>{this.#t(t)&&this.#r(t).catch(console.error)})}#a(t){this.appManager.removeCommand(this.name,t),this.appManager.removeRibbonIcon(this.name,t.name)}#t(t){if(t.context==="only_open_note"){const n=this.activeNote.value;if(!n)return!1;const o=this.index.getForPath(n);if(!o||o.journal!==this.name)return!1}return!0}async#r(t){const n=this.#p(t);if(!n)return;const o=this.#e.resolveDateForCommand(n,t.type);if(!o)return;const a=this.get(o);a&&await this.open(a,t.openMode)}addDecoration(t){this.config.value.decorations.push(t)}editDecoration(t,n){this.config.value.decorations[t]=n}deleteDecoration(t){this.config.value.decorations.splice(t,1)}addNavRow(t){this.config.value.navBlock.rows.push(t)}editNavRow(t,n){this.config.value.navBlock.rows[t]=n}deleteNavRow(t){this.config.value.navBlock.rows.splice(t,1)}moveNavRowUp(t){if(t>0){const n=this.config.value.navBlock.rows[t];this.config.value.navBlock.rows[t]=this.config.value.navBlock.rows[t-1],this.config.value.navBlock.rows[t-1]=n}}moveNavRowDown(t){if(t<this.config.value.navBlock.rows.length-1){const n=this.config.value.navBlock.rows[t];this.config.value.navBlock.rows[t]=this.config.value.navBlock.rows[t+1],this.config.value.navBlock.rows[t+1]=n}}addCalendarViewRow(t){this.config.value.calendarViewBlock.rows.push(t)}editCalendarViewRow(t,n){this.config.value.calendarViewBlock.rows[t]=n}deleteCalendarViewRow(t){this.config.value.calendarViewBlock.rows.splice(t,1)}moveCalendarViewRowUp(t){if(t>0){const n=this.config.value.calendarViewBlock.rows[t];this.config.value.calendarViewBlock.rows[t]=this.config.value.calendarViewBlock.rows[t-1],this.config.value.calendarViewBlock.rows[t-1]=n}}moveCalendarViewRowDown(t){if(t<this.config.value.calendarViewBlock.rows.length-1){const n=this.config.value.calendarViewBlock.rows[t];this.config.value.calendarViewBlock.rows[t]=this.config.value.calendarViewBlock.rows[t+1],this.config.value.calendarViewBlock.rows[t+1]=n}}async connectNote(t,n,o){const a=this.get(n);if(!a)return!1;if("path"in a){if(!o.override)return!1;await this.disconnectNote(a.path)}if(o.rename||o.move){const[r,l]=this.getConfiguredPathData(a),s=o.move?r:this.notesManager.getNoteFolder(t),i=o.rename?l:this.notesManager.getNoteFilename(t),u=this.notesManager.normalizePath(s?`${s}/${i}`:i);await this.notesManager.renameNote(t,u),t=u}return await this.#c(t,a),!0}async disconnectNote(t){await this.notesManager.updateNoteFrontmatter(t,n=>{delete n[it],delete n[this.frontmatterDate],delete n[this.frontmatterStartDate],delete n[this.frontmatterEndDate],delete n[this.frontmatterIndex]})}async clearNotes(){const t=[],n=this.index.getAllPaths(this.name);for(const o of n)t.push(this.disconnectNote(o));await Promise.allSettled(t)}async deleteNotes(){const t=[],n=this.index.getAllPaths(this.name);for(const o of n)t.push(this.notesManager.deleteNote(o));await Promise.allSettled(t)}get frontmatterDate(){return this.config.value.frontmatter.dateField||qa}get frontmatterIndex(){return this.config.value.frontmatter.indexField||Ha}get frontmatterStartDate(){return this.config.value.frontmatter.startDateField||Zt}get frontmatterEndDate(){return this.config.value.frontmatter.endDateField||mn}async renameFrontmatterField(t,n,o){this.config.value.frontmatter[t]=o;const a=this.index.getJournalIndex(this.name);if(a)for(const[,r]of a)await this.notesManager.updateNoteFrontmatter(r,l=>{String(n)in l&&(l[o]=l[n],delete l[n])})}async toggleFrontmatterStartDate(){this.config.value.frontmatter.addStartDate=!this.config.value.frontmatter.addStartDate;const t=this.index.getJournalIndex(this.name);if(t)for(const[,n]of t)await this.notesManager.updateNoteFrontmatter(n,o=>{const a=this.resolveAnchorDate(o[this.frontmatterDate]);a&&(this.config.value.frontmatter.addStartDate?o[this.frontmatterStartDate]=this.resolveStartDate(a):delete o[this.frontmatterStartDate])})}async toggleFrontmatterEndDate(){this.config.value.frontmatter.addEndDate=!this.config.value.frontmatter.addEndDate;const t=this.index.getJournalIndex(this.name);if(t)for(const[,n]of t)await this.notesManager.updateNoteFrontmatter(n,o=>{const a=this.resolveAnchorDate(o[this.frontmatterDate]);if(!a)return;const r=this.index.getForPath(n);this.config.value.frontmatter.addEndDate?o[this.frontmatterEndDate]=r?.end_date??this.resolveEndDate(a):r?.end_date?this.resolveEndDate(a)===r.end_date&&delete o[this.frontmatterEndDate]:delete o[this.frontmatterEndDate]})}async autoCreate(){if(!this.config.value.autoCreate)return;const t=this.get(Ne().format(we));t&&await this.#i(t)}async#l(t,n="active",o=!1){await this.notesManager.openNote(t,n==="active"?void 0:n),o&&await this.notesManager.tryTemplaterCursorJump(t)}async#i(t){const n=this.getNotePath(t);let o=!1;if(!this.notesManager.nodeExists(n)){const a=this.#s(t),r=Ot(this.config.value.nameTemplate,a);if(this.config.value.confirmCreation&&!await this.notesManager.confirmNoteCreation(this.name,r))return[null,!1];o=!0;try{await this.notesManager.createNote(n,""),a.note_name={type:"string",value:r};const l=await this.#m(n,a);l&&await this.notesManager.updateNote(n,l)}catch(l){throw console.error(l),new Error("Failed to create note")}}return await this.#c(n,t),[n,o]}getConfiguredPathData(t){const n=this.#s(t),o=Ot(this.config.value.nameTemplate,n)+".md";return[Ot(this.config.value.folder,n)||"/",o]}getResolvedTemplatePath(t,n){const o=this.#s(n);return Ot(t,o)}getNotePath(t){if("path"in t)return t.path;const n=this.#s(t),o=Ot(this.config.value.nameTemplate,n)+".md",a=Ot(this.config.value.folder,n);return this.notesManager.normalizePath(a?`${a}/${o}`:o)}#s(t){const n=String(te.moment()),o={date:{type:"date",value:t.date,defaultFormat:this.config.value.dateFormat},start_date:{type:"date",value:this.#e.resolveStartDate(t.date),defaultFormat:this.config.value.dateFormat},end_date:{type:"date",value:t.end_date??this.#e.resolveEndDate(t.date),defaultFormat:this.config.value.dateFormat},journal_name:{type:"string",value:this.config.value.name},index:{type:"number",value:t.index},note_name:{type:"string",value:""},title:{type:"string",value:""},time:{type:"date",value:n,defaultFormat:"HH:mm"},current_time:{type:"date",value:n,defaultFormat:"HH:mm"},current_date:{type:"date",value:n,defaultFormat:"YYYY-MM-DD"}},a=Ot(this.config.value.nameTemplate,o);return a&&(o.title.value=a,o.note_name.value=a),o}async#m(t,n){if(this.config.value.templates.length>0)for(const o of this.config.value.templates){const a=Ot(o.endsWith(".md")?o:o+".md",n),r=await this.notesManager.getNoteContent(a);if(r)return this.notesManager.tryApplyingTemplater(a,t,Ot(r,n))}return""}async#c(t,n){await this.notesManager.updateNoteFrontmatter(t,o=>{o[it]=this.name,o[this.frontmatterDate]=X(n.date).format(we),this.config.value.frontmatter.addStartDate?o[this.frontmatterStartDate]=this.resolveStartDate(n.date):delete o[this.frontmatterStartDate],this.config.value.frontmatter.addEndDate||n.end_date&&n.end_date!==this.resolveStartDate(n.date)?o[this.frontmatterEndDate]=n.end_date?X(n.end_date).format(we):this.resolveEndDate(n.date):delete o[this.frontmatterEndDate],n.index==null?delete o[this.frontmatterIndex]:o[this.frontmatterIndex]=n.index})}#u(t){return{journal:this.name,date:t,index:this.#f(t)}}#p(t){const n=this.activeNote.value,o=n?this.index.getForPath(n):null;return o&&t.context!=="today"?o.date:t.context==="only_open_note"?null:Ne().format(we)}#d(t){if(this.config.value.start){const n=X(this.config.value.start);if(n.isValid()&&X(t).isBefore(n))return!1}if(this.config.value.end.type==="date"&&this.config.value.end.date){const n=X(this.config.value.end.date);if(n.isValid()&&X(t).isAfter(n))return!1}return!(this.config.value.end.type==="repeats"&&this.config.value.end.repeats&&this.config.value.start&&this.#e.countRepeats(this.config.value.start,t)>=this.config.value.end.repeats)}#f(t){if(!this.config.value.index.enabled||!this.config.value.index.anchorDate||!this.config.value.index.anchorIndex)return;if(this.#n.has(t))return this.#n.get(t);const n=this.previous(t,!0);if(n?.index){const s=this.#e.countRepeats(n.date,t);let i=n.index+s;return this.config.value.index.type==="reset_after"&&(i%=this.config.value.index.resetAfter),this.#n.set(t,i),i}const o=this.next(t,!0);if(o?.index){const s=this.#e.countRepeats(t,o.date);let i=o.index-s;return this.config.value.index.type==="reset_after"&&i<0&&(i*=-1),this.#n.set(t,i),i}const a=X(this.config.value.index.anchorDate);if(!a.isValid())return;if(a.isAfter(t)&&this.config.value.index.type==="increment"&&!this.config.value.index.allowBefore){this.#n.set(t,void 0);return}if(a.isBefore(t)){const s=this.#e.countRepeats(this.config.value.index.anchorDate,t);let i=this.config.value.index.anchorIndex+s;return this.config.value.index.type==="reset_after"&&(i%=this.config.value.index.resetAfter),this.#n.set(t,i),i}const r=this.#e.countRepeats(t,this.config.value.index.anchorDate);let l=this.config.value.index.anchorIndex-r;return this.config.value.index.type==="reset_after"&&l<0&&(l*=-1),this.#n.set(t,l),l}dispose(){for(const t of this.commands)this.#a(t)}}function my(e,t,n,o){const a=[],r=Kc(o.date_format);for(const l of n){const s={path:l,operations:[]};a.push(s);const i=e.index.getForPath(l);if(i){s.operations.push({type:"skipping",reason:t.name===i.journal?"already in journal":"already in another journal "+i.journal});continue}if(!py(e,l,o.filter_combinator,o.filters)){s.operations.push({type:"skipping",reason:"does not match filters"});continue}const u=o.date_place==="title"?e.notesManager.getNoteName(l):e.notesManager.getNoteMetadata(l)?.frontmatter?.[o.property_name];if(u===void 0){s.operations.push({type:"skipping",reason:"does not have date containing property "+o.property_name});continue}const c=u.match(r);if(!c){s.operations.push({type:"skipping",reason:"date with configured format not found"});continue}const m=X(c[0],o.date_format);if(!m.isValid()){s.operations.push({type:"skipping",reason:"invalid date "+u});continue}const h=t.get(m.format("YYYY-MM-DD"));if(!h){s.operations.push({type:"skipping",reason:"date is outside of journal boundaries "+m.format("YYYY-MM-DD")});continue}"path"in h&&h.path&&s.operations.push({type:"existing_note",other_file:h.path,decision:o.existing_note});const[p,_]=t.getConfiguredPathData(h);p!==e.notesManager.getNoteFolder(l)&&s.operations.push({type:"other_folder",configured_folder:p,decision:o.other_folder}),_!==e.notesManager.getNoteName(l)&&s.operations.push({type:"other_name",configured_name:_,decision:o.other_name})}return a}function py(e,t,n,o){return n==="no"?!0:n==="and"?o.every(a=>ws(e,t,a)):n==="or"?o.some(a=>ws(e,t,a)):!1}function ws(e,t,n){if(!e.notesManager.getNoteMetadata(t))return!1;switch(n.type){case"title":return vy(e,t,n);case"tag":return hy(e,t,n);case"property":return gy(e,t,n)}return!0}function vy(e,t,n){const o=e.notesManager.getNoteName(t);switch(n.condition){case"contains":return o.contains(n.value);case"starts-with":return o.startsWith(n.value);case"ends-with":return o.endsWith(n.value);default:Ka(n.condition)}}function hy(e,t,n){const o=e.notesManager.getNoteMetadata(t);if(!o||!o.tags)return!1;switch(n.condition){case"contains":return o.tags.some(a=>a.tag.contains(n.value));case"starts-with":return o.tags.some(a=>a.tag.startsWith(n.value));case"ends-with":return o.tags.some(a=>a.tag.endsWith(n.value));default:Ka(n.condition)}}function gy(e,t,n){const o=e.notesManager.getNoteMetadata(t);if(!o)return!1;const a=o.frontmatter?.[n.name];switch(n.condition){case"exists":return!!o.frontmatter&&n.name in o.frontmatter;case"does-not-exist":return!!o.frontmatter&&!(n.name in o.frontmatter);case"eq":return a==n.value;case"neq":return a!=n.value;case"contains":return typeof a=="string"&&a.contains(n.value);case"does-not-contain":return typeof a!="string"||typeof a=="string"&&!a.contains(n.value);case"starts-with":return typeof a=="string"&&a.startsWith(n.value);case"ends-with":return typeof a=="string"&&a.endsWith(n.value);default:Ka(n.condition)}}function yy(e,t){t.actions.push(`Skipped: ${e.reason}`)}async function wy(e,t,n,o,a){a.actions.push(`Note connected to journal as ${o.anchor_date}`),n.dry_run||await e.connectNote(t.path,o.anchor_date,{})}async function by(e,t,n,o,a){switch(o.decision){case"skip":{a.actions.push("Skipped: other note connected to same date already exists in journal");break}case"override":{a.actions.push(`Other note "${o.other_file}" connected to same date disconnected`),n.dry_run||await e.disconnectNote(t.path);break}case"merge":{if(a.actions.push(`Content of note was merged into "${o.other_file}, note deleted"`),!n.dry_run){const r=await e.notesManager.getNoteContent(t.path);await e.notesManager.appendNote(o.other_file,r),await e.notesManager.deleteNote(t.path)}break}}}async function ky(e,t,n,o,a){switch(o.decision){case"keep":{a.actions.push(`Notes folder "${e.notesManager.getNoteFolder(t.path)??"/"}" differs from configured folder "${n.folder||"/"}" - keeping as is`);break}case"move":{if(a.actions.push(`Moved note to "${o.configured_folder??"/"}"`),!n.dry_run){const r=e.notesManager.getNoteFilename(t.path),l=te.normalizePath(o.configured_folder?`${o.configured_folder}/${r}`:r);await e.notesManager.renameNote(t.path,l),t.path=l}break}}}async function _y(e,t,n,o,a){switch(o.decision){case"keep":{a.actions.push(`Note name "${e.notesManager.getNoteName(t.path)}" differs from configured name "${n.property_name}" - keeping as is`);break}case"rename":{if(a.actions.push(`Renamed note to "${o.configured_name}"`),!n.dry_run){const r=e.notesManager.getNoteFolder(t.path),l=te.normalizePath(r?`${r}/${o.configured_name}`:o.configured_name);await e.notesManager.renameNote(t.path,l),t.path=l}break}}}async function Cy(e,t,n,o){const{path:a,operations:r}=n,l={note:e.notesManager.getNoteName(a),folder:e.notesManager.getNoteFolder(a),path:a,actions:[]};try{for(const s of r)switch(s.type){case"skipping":{yy(s,l);break}case"connect":{await wy(t,n,o,s,l);break}case"existing_note":return await by(e,n,o,s,l),l;case"other_folder":{await ky(e,n,o,s,l);break}case"other_name":{await _y(e,n,o,s,l);break}}}catch(s){console.error(s),l.actions.push(`Error: ${s instanceof Error?s.message:String(s)}`)}return l}const Sy={key:0},xy={key:0},Vy={key:1},Dy={key:2},jy={key:1},$y={class:"flair"},My=B({__name:"BulkProcessNotes",props:{journalName:{},parameters:{}},emits:["close"],setup(e){const t=he(),n=w(()=>t.getJournal(e.journalName)),o=ce("Building list..."),a=ce([]),r=ce(null),l=w(()=>r.value?r.value.operations.filter(_=>_.type==="existing_note"&&_.decision==="ask"||_.type==="other_folder"&&_.decision==="ask"||_.type==="other_name"&&_.decision==="ask"):[]),s=w(()=>r.value?t.notesManager.getNoteName(r.value.path):""),i=w(()=>r.value?t.notesManager.getNoteFolder(r.value.path):""),u=ce([]),c=w(()=>l.value.length>0);async function m(){await op(10),a.value.length>0?(r.value=a.value.shift()??null,h().catch(console.error)):o.value="Finished"}async function h(){if(!n.value||!r.value||c.value)return;const _=await Cy(t,n.value,r.value,e.parameters);u.value.push(_),r.value=null,m().catch(console.error)}function p(_,y){_.decision=y,h().catch(console.error)}return yt(()=>{if(!n.value)return;const _=t.notesManager.getNotesInFolder(e.parameters.folder);o.value="Preprocessing notes...",a.value=my(t,n.value,_,e.parameters),o.value="Processing notes...",m().catch(console.error)}),(_,y)=>(v(),C(W,null,[r.value&&c.value?(v(),C("div",Sy,[k(" Note: "+P(s.value),1),y[17]||(y[17]=g("br",null,null,-1)),(v(!0),C(W,null,_e(l.value,(x,T)=>(v(),C("div",{key:T},[x.type==="existing_note"?(v(),C("div",xy,[k(" Other note with same date exists in journal - "+P(b(t).notesManager.getNoteName(x.other_file)),1),y[4]||(y[4]=g("br",null,null,-1)),g("div",null,[d(ie,{onClick:O=>p(x,"skip")},{default:f(()=>y[1]||(y[1]=[k("Skip note")])),_:2},1032,["onClick"]),d(ie,{onClick:O=>p(x,"override")},{default:f(()=>y[2]||(y[2]=[k("Override date connection")])),_:2},1032,["onClick"]),d(ie,{onClick:O=>p(x,"merge")},{default:f(()=>y[3]||(y[3]=[k("Merge note content into existing one")])),_:2},1032,["onClick"])])])):x.type==="other_folder"?(v(),C("div",Vy,[y[7]||(y[7]=k(" Note is not in folder from journal setting")),y[8]||(y[8]=g("br",null,null,-1)),k(" Configured folder: "+P(x.configured_folder),1),y[9]||(y[9]=g("br",null,null,-1)),k(" Note folder: "+P(i.value),1),y[10]||(y[10]=g("br",null,null,-1)),g("div",null,[d(ie,{onClick:O=>p(x,"keep")},{default:f(()=>y[5]||(y[5]=[k("Keep as is")])),_:2},1032,["onClick"]),d(ie,{onClick:O=>p(x,"move")},{default:f(()=>y[6]||(y[6]=[k("Move to configured folder")])),_:2},1032,["onClick"])])])):x.type==="other_name"?(v(),C("div",Dy,[y[13]||(y[13]=k(" Note name differs from journal settings")),y[14]||(y[14]=g("br",null,null,-1)),k(" Configured name: "+P(x.configured_name),1),y[15]||(y[15]=g("br",null,null,-1)),k(" Note name: "+P(s.value),1),y[16]||(y[16]=g("br",null,null,-1)),g("div",null,[d(ie,{onClick:O=>p(x,"keep")},{default:f(()=>y[11]||(y[11]=[k("Keep as is")])),_:2},1032,["onClick"]),d(ie,{onClick:O=>p(x,"rename")},{default:f(()=>y[12]||(y[12]=[k("Rename to configured name")])),_:2},1032,["onClick"])])])):Y("",!0)]))),128))])):(v(),C("div",jy,P(o.value),1)),u.value.length>0?(v(),I(Ct,{key:2},{trigger:f(()=>[k(" Processed notes "+P(_.parameters.dry_run?"(dry run)":"")+" ",1),g("span",$y,P(u.value.length),1)]),default:f(()=>[(v(!0),C(W,null,_e(u.value,x=>(v(),C("div",{key:x.path,class:"log-entry"},[k(P(x.path),1),y[18]||(y[18]=g("br",null,null,-1)),g("ul",null,[(v(!0),C(W,null,_e(x.actions,T=>(v(),C("li",{key:T},P(T),1))),128))])]))),128))]),_:1})):Y("",!0),o.value==="Finished"?(v(),I(M,{key:3},{default:f(()=>[d(ie,{onClick:y[0]||(y[0]=x=>_.$emit("close"))},{default:f(()=>y[19]||(y[19]=[k("Close")])),_:1})]),_:1})):Y("",!0)],64))}}),Ny=be(My,[["__scopeId","data-v-1f86ba38"]]),Ay=B({__name:"BulkAddNotes.modal",props:{journalName:{}},emits:["close"],setup(e){const t=ce();function n(o){t.value=o}return(o,a)=>t.value?(v(),I(Ny,{key:0,"journal-name":o.journalName,parameters:t.value,onClose:a[0]||(a[0]=r=>o.$emit("close"))},null,8,["journal-name","parameters"])):(v(),I(dy,{key:1,"journal-name":o.journalName,onProcess:n,onClose:a[1]||(a[1]=r=>o.$emit("close"))},null,8,["journal-name"]))}}),Ty=B({__name:"JournalSettingsRoot",setup(e){const t=ce(null),n=ce(null),o=he();function a(r){new Me(o,`Add notes to ${r}`,Ay,{journalName:r},700).open()}return(r,l)=>t.value?(v(),I(Xg,{key:0,"journal-name":t.value,onBack:l[0]||(l[0]=s=>t.value=null),onEdit:l[1]||(l[1]=s=>t.value=s)},null,8,["journal-name"])):n.value?(v(),I(ay,{key:1,"shelf-name":n.value,onBack:l[2]||(l[2]=s=>n.value=null),onOrganize:l[3]||(l[3]=s=>n.value=s),onEdit:l[4]||(l[4]=s=>t.value=s),onBulkAdd:l[5]||(l[5]=s=>a(s))},null,8,["shelf-name"])):(v(),I(tv,{key:2,onEdit:l[6]||(l[6]=s=>t.value=s),onOrganize:l[7]||(l[7]=s=>n.value=s),onBulkAdd:l[8]||(l[8]=s=>a(s))}))}});class Oy extends te.PluginSettingTab{#e=null;#n;constructor(t,n){super(t,n),this.#n=n}display(){this.#e=lo(Ty),this.#e.provide(En,this.#n),this.#e.mount(this.containerEl)}hide(){this.#e?.unmount(),this.#e=null,this.containerEl.empty()}}class Fy{#e=ce(new Map);#n=new Map;#o=[];has(t){return this.#e.value.has(t)}get(t){return this.#e.value.get(t)??null}getAll(){return[...this.#e.value.values()]}set(t,n){const o=this.#e.value.has(t);this.#e.value.set(t,n),this.#n.set(n,t),o||this.#a(t)}delete(t){const n=this.#e.value.get(t);this.#e.value.delete(t),n&&this.#n.delete(n),this.#t(t)}deleteForPath(t){const n=this.#n.get(t);n&&this.delete(n)}findNext(t){const n=this.#r(t);return n===-1||n===this.#o.length-1?null:this.#e.value.get(this.#o[n+1])??null}findPrevious(t){const n=this.#r(t);return n===-1||n===0?null:this.#e.value.get(this.#o[n-1])??null}findClosestDate(t){if(this.#e.value.size===0)return;if(this.#e.value.has(t))return t;if(t<=this.#o[0])return this.#o[0];const n=this.#o.at(-1);if(n&&t>=n)return n;const o=this.#r(t);if(o!==-1)return this.#o[o]}*[Symbol.iterator](){yield*this.#e.value}#a(t){const n=this.#r(t);return this.#o.splice(n+1,0,t),n+1}#t(t){const n=this.#r(t);n!==-1&&this.#o.splice(n,1)}#r(t){if(this.#o.length===0)return-1;let n=0,o=this.#o.length;for(;o-n>1;){const a=Math.floor((n+o)/2);if(this.#o[a]===t)return a;this.#o[a]<t?n=a:o=a}return n===0&&this.#o[0]>t?-1:n}}class Ey{#e=ce(new Map);#n=new Map;#o=Qr(new Map);getForPath(t){return this.#e.value.get(t)??null}getForPathComputed(t){let n=this.#n.get(t);return n||(n=w(()=>this.#e.value.get(t)??null),this.#n.set(t,n),n)}get(t,n){const o=this.getJournalIndex(t).get(n);return o?this.getForPath(o):null}getAllPaths(t){return this.getJournalIndex(t).getAll()}findNext(t,n){const o=this.getJournalIndex(t).findNext(n);return o?this.getForPath(o):null}findPrevious(t,n){const o=this.getJournalIndex(t).findPrevious(n);return o?this.getForPath(o):null}getJournalIndex(t){let n=this.#o.value.get(t);return n||(n=new Fy,this.#o.value.set(t,n)),n}registerPathData(t,n){this.#e.value.set(t,n),this.getJournalIndex(n.journal).set(n.date,t)}unregisterPathData(t){const n=this.#e.value.get(t);this.#e.value.delete(t),n&&this.getJournalIndex(n.journal).delete(n.date)}clearForPath(t){const n=this.#e.value.get(t);n&&(this.#e.value.delete(t),this.#n.delete(t),this.#o.value.get(n.journal)?.delete(n.date))}transferPathData(t,n,o){const a=this.#e.value.get(t);if(!a)return;this.#e.value.delete(t),a.path=n,a.title=o,this.#e.value.set(n,a);const r=this.#o.value.get(a.journal);r&&(r.deleteForPath(t),r.set(a.date,n))}updateFromMetadata(t,n,o,a){const{frontmatter:r}=a;if(!r||!(it in r))return;const l=r[t.frontmatterDate],s=r[t.frontmatterEndDate];if(!X(l).isValid()||s&&!X(s).isValid())return;const i={title:n,journal:t.name,date:l,end_date:s,path:o,index:r[t.frontmatterIndex],tags:a.tags?.map(u=>u.tag)??[],tasks:a.listItems?.filter(u=>u.task!=null).map(u=>({completed:u.task!==" "}))??[],properties:r};this.#e.value.set(o,i),this.getJournalIndex(t.name).set(l,o)}onunload(){this.#e.value.clear(),this.#n.clear(),this.#o.value.clear()}}const Iy={class:"calendar-view-interval"},Py=B({__name:"CalendarViewCustomInterval",props:{date:{},journal:{}},setup(e){jn(u=>({cfc2f888:s.value,"01165f16":i.value}));const t=he(),n=w(()=>X(e.date).startOf("month").format("YYYY-MM-DD")),o=w(()=>X(e.date).endOf("month").format("YYYY-MM-DD")),a=w(()=>e.journal.findAll(n.value,o.value)),r=Xa(t),l=w(()=>r.value?.journal===e.journal.name),s=w(()=>xt(t.calendarViewSettings.activeStyle.color)),i=w(()=>xt(t.calendarViewSettings.activeStyle.background));return(u,c)=>(v(),C("div",Iy,[(v(!0),C(W,null,_e(a.value,m=>(v(),I(ga,{key:m.date,rows:u.journal.calendarViewBlock.rows,"ref-date":m.date,"journal-name":u.journal.name,class:Dt({"is-active":l.value&&m.date===b(r)?.date}),"decorate-block":u.journal.calendarViewBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","class","decorate-block"]))),128))]))}}),Ry=be(Py,[["__scopeId","data-v-6fda8589"]]),By={class:"custom-intervals-journals"},Yy=B({__name:"CalendarViewCustomIntervals",props:{date:{}},setup(e){const{journals:{custom:t}}=Zo();return(n,o)=>(v(),C("div",By,[(v(!0),C(W,null,_e(b(t),a=>(v(),I(Ry,{key:a.name,date:n.date,journal:a},null,8,["date","journal"]))),128))]))}}),Uy=be(Yy,[["__scopeId","data-v-1db5074f"]]),Ly={class:"calendar-view-header"},Wy={class:"month-header"},Jy=B({__name:"CalendarView",setup(e){const t=he(),n=ce(Ne()),o=w(()=>n.value.format("YYYY-MM-DD")),a=w({get(){return t.uiSettings.calendarShelf},set(N){t.uiSettings.calendarShelf=N}}),r=w(()=>t.usesShelves&&Object.values(t.shelves).length>0||t.journals.some(N=>!N.isOnShelf)),{journals:l}=Xo(a),s=w(()=>n.value.clone().startOf("month").format(we)),i=w(()=>n.value.clone().startOf("quarter").format(we)),u=w(()=>n.value.clone().startOf("year").format(we)),c=Xa(t),m=w(()=>c.value?t.getJournal(c.value.journal):null),h=w(()=>m.value?.type==="month"&&c.value?.date===s.value),p=w(()=>m.value?.type==="quarter"&&c.value?.date===i.value),_=w(()=>m.value?.type==="year"&&c.value?.date===u.value);function y(N){const A=new te.Menu;A.addItem(re=>{re.setTitle("All journals").onClick(()=>{a.value=null})});for(const re of t.shelves)A.addItem(le=>{le.setTitle(re.name).onClick(()=>{a.value=re.name})});A.showAtMouseEvent(N)}function x(N,A="month"){const re=n.value.clone();N<0?re.subtract(Math.abs(N),A):re.add(N,A),n.value=re}function T(N){n.value=Ne(),t.calendarViewSettings.todayMode==="create"?ee(o.value,N):t.calendarViewSettings.todayMode==="navigate"&&ee(o.value,N,!0)}function O(N){new Me(t,"Pick a date",nu,{selectedDate:o.value,onSelect(A){n.value=X(A),t.calendarViewSettings.pickMode==="create"?ee(A,N):t.calendarViewSettings.pickMode==="navigate"&&ee(A,N,!0)}},400).open()}function ee(N,A,re=!1){Bo(t,N,l.day.value.map(le=>le.name),re,Yo(A),A).catch(console.error)}return nt(c,N=>{if(!N)return;const A=t.getJournal(N.journal);if(A)switch(A.type){case"quarter":{const re=X(N.date).startOf("quarter"),le=X(N.date).endOf("quarter");n.value.isBetween(re,le)||(n.value=re);break}case"year":{const re=X(N.date).startOf("year"),le=X(N.date).endOf("year");n.value.isBetween(re,le)||(n.value=re);break}default:n.value=X(N.date)}}),(N,A)=>(v(),C("div",null,[g("div",Ly,[r.value?(v(),I(ie,{key:0,onClick:y},{default:f(()=>[k(P(a.value||"All journals"),1)]),_:1})):Y("",!0),d(ge,{icon:"crosshair",tooltip:"Select a date to be displayed",onClick:O}),d(ie,{onClick:T},{default:f(()=>A[4]||(A[4]=[k("Today")])),_:1})]),d(Za,{"ref-date":o.value},{header:f(()=>[d(ge,{icon:"chevrons-left",tooltip:"Previous year",onClick:A[0]||(A[0]=re=>x(-1,"year"))}),d(ge,{icon:"chevron-left",tooltip:"Previous month",onClick:A[1]||(A[1]=re=>x(-1,"month"))}),g("div",Wy,[d(Yt,{date:s.value,type:"month","data-selected":h.value?"":null},null,8,["date","data-selected"]),b(l).quarter.value.length>0?(v(),I(Yt,{key:0,date:i.value,type:"quarter","data-selected":p.value?"":null},null,8,["date","data-selected"])):Y("",!0),d(Yt,{date:u.value,type:"year","data-selected":_.value?"":null},null,8,["date","data-selected"])]),d(ge,{icon:"chevron-right",tooltip:"Next month",onClick:A[2]||(A[2]=re=>x(1,"month"))}),d(ge,{icon:"chevrons-right",tooltip:"Next year",onClick:A[3]||(A[3]=re=>x(1,"year"))})]),_:1},8,["ref-date"]),A[5]||(A[5]=g("div",{class:"calendar-view-separator"},null,-1)),d(Uy,{date:o.value},null,8,["date"])]))}}),qy=be(Jy,[["__scopeId","data-v-dd49dca8"]]);class Hy extends te.ItemView{constructor(t,n){super(t),this.plugin=n}navigation=!1;#e=null;getViewType(){return rn}getDisplayText(){return"Calendar"}getIcon(){return"calendar-days"}onOpen(){return this.#e=lo(qy),this.#e.provide(En,this.plugin),this.#e.mount(this.contentEl),Promise.resolve()}onClose(){return this.#e?.unmount(),this.#e=null,this.contentEl.empty(),Promise.resolve()}}class zy extends te.MarkdownRenderChild{constructor(t,n,o,a){super(n),this.source=o,this.path=a,this.init(t)}_vueApp;mode;init(t){const n=this.source.split(`
`);for(const o of n){const[a,r]=o.split(":");a.trim()==="mode"&&(this.mode=r.trim())}this._vueApp=lo(_u,{mode:this.mode,path:this.path}),this._vueApp.provide(En,t),this._vueApp.mount(this.containerEl)}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}class Cr extends te.MarkdownRenderChild{constructor(t,n,o,a){super(n),this.source=o,this.path=a,this.init(t)}_vueApp;init(t){this._vueApp=lo(bu,{path:this.path}),this._vueApp.provide(En,t),this._vueApp.mount(this.containerEl)}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}const Ky={key:0},Gy={class:"u-pop"},Qy={key:1},Xy=["value"],Zy={class:"u-pop"},e1={class:"u-pop"},t1={class:"u-pop"},n1={class:"u-pop"},o1={class:"u-pop"},a1=B({__name:"ConnectNote.modal",props:{path:{}},emits:["close"],setup(e,{emit:t}){const n=e,o=t,a=he(),r=Qa(n.path),l=w(()=>a.notesManager.getNoteFilename(n.path)),s=w(()=>a.notesManager.getNoteFolder(n.path)),{defineField:i,errorBag:u,handleSubmit:c}=gn({initialValues:{journalName:"",refDate:"",override:!1,rename:!1,move:!1},validationSchema:yn(Nt({journalName:gt(Ge(),qt("Journal name is required")),refDate:gt(Ge(),qt("Date is required")),override:en(),rename:en(),move:en()}))}),[m,h]=i("journalName"),[p,_]=i("refDate"),[y,x]=i("override"),[T,O]=i("rename"),[ee,N]=i("move");nt(p,()=>{y.value=!1,T.value=!1,ee.value=!1});const A=w(()=>m.value?a.getJournal(m.value):null),re=w(()=>{if(A.value)return A.value.startDate}),le=w(()=>{if(A.value)return A.value.endDate}),U=w(()=>!A.value||!p.value?null:A.value.resolveAnchorDate(p.value)),se=w(()=>!A.value||!U.value?null:A.value.get(U.value)),De=w(()=>!A.value||!p.value||!U.value?null:a.index.get(A.value.name,U.value)),Ee=w(()=>!se.value||!A.value?null:A.value.getConfiguredPathData(se.value)),wt=w(()=>{if(!Ee.value)return!1;const[,fe]=Ee.value;return l.value!==fe}),ut=w(()=>{if(!Ee.value)return!1;const[fe]=Ee.value;return s.value!==(fe??"/")}),Qe=w(()=>!(!A.value||!p.value||De.value&&!y.value));function Ie(){a.disconnectNote(n.path).catch(console.error)}const G=c(()=>{Qe.value&&U.value&&(A.value?.connectNote(n.path,U.value,{override:y.value,rename:T.value,move:ee.value}).catch(console.error),o("close"))});return(fe,z)=>b(r)?(v(),C("div",Ky,[d(M,{name:"Note is already connected"},{description:f(()=>[z[8]||(z[8]=k(" Journal: ")),g("b",Gy,P(b(r).journal),1)]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:z[0]||(z[0]=F=>fe.$emit("close"))},{default:f(()=>z[9]||(z[9]=[k("Cancel")])),_:1}),d(ie,{cta:"",onClick:Ie},{default:f(()=>z[10]||(z[10]=[k("Disconnect")])),_:1})]),_:1})])):(v(),C("div",Qy,[k(P(fe.path)+" ",1),g("form",{onSubmit:z[7]||(z[7]=(...F)=>b(G)&&b(G)(...F))},[d(M,{name:"Journal"},{description:f(()=>[d(et,{errors:b(u).journalName},null,8,["errors"])]),default:f(()=>[d(xe,Se({modelValue:b(m),"onUpdate:modelValue":z[1]||(z[1]=F=>de(m)?m.value=F:null)},b(h)),{default:f(()=>[(v(!0),C(W,null,_e(b(a).journals,F=>(v(),C("option",{key:F.name,value:F.name},P(F.name),9,Xy))),128))]),_:1},16,["modelValue"])]),_:1}),b(m)?(v(),C(W,{key:0},[d(M,{name:"Date"},{description:f(()=>[d(et,{errors:b(u).refDate},null,8,["errors"])]),default:f(()=>[d(Ao,Se({modelValue:b(p),"onUpdate:modelValue":z[2]||(z[2]=F=>de(p)?p.value=F:null)},b(_),{min:re.value,max:le.value}),null,16,["modelValue","min","max"])]),_:1}),De.value?(v(),I(M,{key:0,name:"Override?"},{description:f(()=>[z[11]||(z[11]=k(" Other note ")),g("b",Zy,P(De.value?.path),1),z[12]||(z[12]=k(" is connected to this date. It will be disconnected if override option is on. "))]),default:f(()=>[d(He,Se({modelValue:b(y),"onUpdate:modelValue":z[3]||(z[3]=F=>de(y)?y.value=F:null)},b(x)),null,16,["modelValue"])]),_:1})):Y("",!0),wt.value?(v(),I(M,{key:1,name:"Rename?"},{description:f(()=>[z[13]||(z[13]=k(" Note name ")),g("b",e1,P(l.value),1),z[14]||(z[14]=k(" differs from journal note name config: ")),g("b",t1,P(Ee.value?.[1]??""),1)]),default:f(()=>[d(He,Se({modelValue:b(T),"onUpdate:modelValue":z[4]||(z[4]=F=>de(T)?T.value=F:null)},b(O)),null,16,["modelValue"])]),_:1})):Y("",!0),ut.value?(v(),I(M,{key:2,name:"Move?"},{description:f(()=>[z[15]||(z[15]=k(" Note folder ")),g("b",n1,P(s.value),1),z[16]||(z[16]=k(" differs from journal folder path config: ")),g("b",o1,P(Ee.value?.[0]??""),1)]),default:f(()=>[d(He,Se({modelValue:b(ee),"onUpdate:modelValue":z[5]||(z[5]=F=>de(ee)?ee.value=F:null)},b(N)),null,16,["modelValue"])]),_:1})):Y("",!0)],64)):Y("",!0),d(M,null,{default:f(()=>[d(ie,{onClick:z[6]||(z[6]=F=>fe.$emit("close"))},{default:f(()=>z[17]||(z[17]=[k("Cancel")])),_:1}),d(ie,{cta:"",type:"submit",disabled:!Qe.value},{default:f(()=>z[18]||(z[18]=[k("Connect")])),_:1},8,["disabled"])]),_:1})],32)]))}}),r1="All journals";class l1 extends te.SuggestModal{constructor(t,n,o){super(t),this.shelves=n,this.callback=o}getSuggestions(t){return t=t.toLocaleLowerCase(),["All journals",...this.shelves.filter(n=>n.toLocaleLowerCase().contains(t))]}renderSuggestion(t,n){n.setText(t)}onChooseSuggestion(t){this.callback(t===r1?null:t)}}class s1 extends te.MarkdownRenderChild{constructor(t,n,o,a){super(n),this.source=o,this.context=a,this.init(t)}_vueApp;init(t){const n=this.#e();this._vueApp=lo(Pr,{path:this.context.sourcePath,config:n}),this._vueApp.provide(En,t),this._vueApp.mount(this.containerEl)}#e(){try{const t=this.source?te.parseYaml(this.source.replaceAll("	","  ")):{show:["day"]};return{show:t.show.filter(n=>["day","week","month","quarter","year","custom"].includes(n)),separator:t.separator||"  ",scale:t.scale||1,shelf:t.shelf}}catch(t){return console.error(t),{show:["day"],separator:"  ",scale:1}}}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}function i1(e){e.commands||(e.commands=Vt(pl.commands));for(const t of Object.values(e.shelves))t.commands||(t.commands=[]);return e.dismissedNotifications||(e.dismissedNotifications=[]),e.version=3,e}function u1(e){let t=!1,n=e;return"version"in n||(n=Cp(n),t=!0),n.version===2&&(n=i1(n)),{migratedData:n,needsUser:t}}const d1=B({__name:"ConfirmNoteCreation.modal",props:{noteName:{},journalName:{}},emits:["confirm","close"],setup(e){return(t,n)=>(v(),C(W,null,[d(M,{name:"Journal"},{default:f(()=>[k(P(t.journalName),1)]),_:1}),d(M,{name:"Note"},{default:f(()=>[k(P(t.noteName),1)]),_:1}),d(M,null,{default:f(()=>[d(ie,{onClick:n[0]||(n[0]=o=>t.$emit("confirm",!1))},{default:f(()=>n[2]||(n[2]=[k("Cancel")])),_:1}),d(ie,{cta:"",onClick:n[1]||(n[1]=o=>t.$emit("confirm",!0))},{default:f(()=>n[3]||(n[3]=[k("Create")])),_:1})]),_:1})],64))}});class c1{constructor(t){this.plugin=t,this.app=t.app}app;normalizePath(t){return te.normalizePath(t)}nodeExists(t){return!!this.app.vault.getAbstractFileByPath(t)}getNoteName(t){const n=this.app.vault.getAbstractFileByPath(t);return n?n instanceof te.TFile?n.basename:n.name:""}getNoteFilename(t){return this.app.vault.getAbstractFileByPath(t)?.name??""}getNoteFolder(t){return this.app.vault.getAbstractFileByPath(t)?.parent?.path??""}async confirmNoteCreation(t,n){return new Promise(o=>{const a=new Me(this.plugin,"About to create a new note",d1,{journalName:t,noteName:n,onConfirm(r){a.close(),o(r)},onClose(){a.close(),o(!1)}},400);a.open()})}async createNote(t,n){await this.#e(t),await this.app.vault.create(t,n)}async updateNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof te.TFile&&await this.app.vault.modify(o,n)}async appendNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof te.TFile&&await this.app.vault.append(o,n)}async renameNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof te.TFile&&(await this.#e(n),await this.app.vault.rename(o,n))}getMarkdownFiles(){return this.app.vault.getMarkdownFiles()}getNotesInFolder(t){const n=this.app.vault.getFolderByPath(t||"/");if(!n)throw new Error(`Folder ${t} not found`);const o=[],a=[n];for(;a.length>0;){const r=a.shift();if(!r)break;for(const l of r.children)l instanceof te.TFile?o.push(l.path):l instanceof te.TFolder&&a.push(l)}return o}getNoteMetadata(t){return this.app.metadataCache.getCache(t)}async openNote(t,n){const o=this.findOpenedNote(t);if(o)return this.app.workspace.setActiveLeaf(o,{focus:!0});const a=this.app.vault.getAbstractFileByPath(t);if(!a||!(a instanceof te.TFile))return;await this.app.workspace.getLeaf(n).openFile(a,{active:!0})}findOpenedNote(t){for(const n of this.app.workspace.getLeavesOfType("markdown")){const{file:o}=n.view;if(o&&o.path===t)return n}return null}async getNoteContent(t){const n=this.app.vault.getAbstractFileByPath(t);return!n||!(n instanceof te.TFile)?"":this.app.vault.read(n)}async updateNoteFrontmatter(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof te.TFile&&await this.app.fileManager.processFrontMatter(o,a=>{n(a)})}async deleteNote(t){const n=this.app.vault.getAbstractFileByPath(t);n&&n instanceof te.TFile&&await this.app.vault.delete(n)}async tryApplyingTemplater(t,n,o){const a=this.app.vault.getAbstractFileByPath(t);if(!a||!(a instanceof te.TFile))return o;const r=this.app.vault.getAbstractFileByPath(n);return!r||!(r instanceof te.TFile)?o:mh(this.app,a,r,o)}async tryTemplaterCursorJump(t){const n=this.app.vault.getAbstractFileByPath(t);return!n||!(n instanceof te.TFile)?!1:await fh(this.app,n)}async#e(t){if(!t)return;const n=t.split("/");if(t.endsWith(".md")&&n.pop(),n.length>0){const o=n.join("/");this.app.vault.getAbstractFileByPath(o)||await this.app.vault.createFolder(o)}}}class f1{constructor(t){this.plugin=t}#e=new Map;addCommand(t,n,o){this.plugin.addCommand({id:this.#n(t+":"+n.name),name:t?`${t}: ${n.name}`:n.name,icon:n.icon,checkCallback:o})}removeCommand(t,n){this.plugin.removeCommand(this.#n(t+":"+n.name))}addRibbonIcon(t,n,o,a){const r=this.#n("journals:"+t+":"+o),l=this.plugin.app.workspace.leftRibbon.addRibbonItemButton(r,n,o,a);return this.#e.set(r,l),r}removeRibbonIcon(t,n){const o=this.#n("journals:"+t+":"+n);return this.plugin.app.workspace.leftRibbon.removeRibbonAction(o),this.#e.get(o)?.detach(),this.#e.delete(o),o}showContextMenu(t,n){const o=this.plugin.app.vault.getAbstractFileByPath(t);if(o){const a=new te.Menu;this.plugin.app.workspace.trigger("file-menu",a,o,"file-explorer-context-menu",null),a.addItem(r=>r.setTitle("Delete").setIcon("trash").onClick(()=>{this.plugin.app.fileManager.promptForFileDeletion(o)})),a.showAtMouseEvent(n)}}showPreview(t,n){this.plugin.app.workspace.trigger("link-hover",this.plugin,n.target,t,t)}#n(t){return t.replaceAll(/\s/gi,"-").toLocaleLowerCase()}dispose(){for(const t of this.#e.values())t.detach();this.#e.clear()}}class m1 extends te.Plugin{#e=[];#n=Qr({});#o=new Ey;#a=ce(null);#t=ce(Vt(pl));#r;#l=new c1(this);#i=new f1(this);#s=!1;get hasMigrations(){return this.#t.value.pendingMigrations.length>0}get dismissedNotifications(){return this.#t.value.dismissedNotifications}dismissNotification(t){this.#t.value.dismissedNotifications.push(t)}get notesManager(){return this.#l}get appManager(){return this.#i}get showReloadHint(){return this.#t.value.showReloadHint}get index(){return this.#o}get activeNote(){return this.#a.value}get usesShelves(){return this.#t.value.useShelves}set usesShelves(t){this.#t.value.useShelves=t}get openOnStartup(){return this.#t.value.openOnStartup}set openOnStartup(t){this.#t.value.openOnStartup=t}get calendarSettings(){return this.#t.value.calendar}get calendarViewSettings(){return this.#t.value.calendarView}get uiSettings(){return this.#t.value.ui}get pendingMigrations(){return this.#t.value.pendingMigrations}get shelves(){return Object.values(this.#t.value.shelves).sort((t,n)=>t.name.localeCompare(n.name))}get commands(){return this.#t.value.commands}getShelf(t){return this.#t.value.shelves[t]}get journals(){return Object.values(this.#n.value).sort((t,n)=>t.name.localeCompare(n.name))}hasJournal(t){return t in this.#n.value}getJournal(t){return this.#n.value[t]}getJournalConfig(t){return this.#t.value.journals[t]}createJournal(t,n){const o=Vt({...vl,...hl(n),name:t,write:n});return this.#t.value.journals[t]=o,this.#n.value={...this.#n.value,[t]:new ua(t,w(()=>this.#t.value.journals[t]),this.#o,this.#i,this.#l,this.#a)},this.getJournal(t)?.autoCreate().catch(console.error),this.#t.value.journals[t]}registerJournal(t){if(t.name in this.#t.value.journals)throw new Error("Name already used");this.#t.value.journals[t.name]=t;const n=new ua(t.name,w(()=>this.#t.value.journals[t.name]),this.#o,this.#i,this.#l,this.#a);if(this.#n.value={...this.#n.value,[t.name]:n},t.shelves.length>0)for(const o of t.shelves)this.#t.value.shelves[o].journals.push(t.name);return n}async renameJournal(t,n){const o=this.getJournal(t);if(!o)return;o.dispose(),this.#t.value.journals[n]=this.#t.value.journals[t],this.#t.value.journals[n].name=n,delete this.#t.value.journals[t];for(const i of this.#t.value.journals[n].shelves)this.#t.value.shelves[i].journals=this.#t.value.shelves[i].journals.map(u=>u===t?n:u);const{[t]:a,...r}=this.#n.value,l=new ua(n,w(()=>this.#t.value.journals[n]),this.#o,this.#i,this.#l,this.#a);this.#n.value={...r,[n]:l},l.registerCommands(),this.#t.value.openOnStartup===t&&(this.#t.value.openOnStartup=n);const s=this.#o.getJournalIndex(t);if(s)for(const[,i]of s)await this.#l.updateNoteFrontmatter(i,u=>{u[it]=n})}async removeJournal(t,n){const o=this.getJournal(t);if(!o)return;switch(n){case"clear":{await o.clearNotes();break}case"delete":{await o.deleteNotes();break}}o.dispose();const{[t]:a,...r}=this.#n.value;this.#n.value=r;for(const l of this.#t.value.journals[t].shelves)this.#t.value.shelves[l].journals=this.#t.value.shelves[l].journals.filter(s=>s!==t);delete this.#t.value.journals[t],this.#t.value.openOnStartup===t&&(this.#t.value.openOnStartup="")}getShelfJournals(t){return this.journals.filter(n=>n.shelfName===t)}moveJournal(t,n){const o=this.getJournal(t);if(!o)return;const a=o.shelfName;a&&(this.#t.value.shelves[a].journals=this.#t.value.shelves[a].journals.filter(r=>r!==t)),n?(this.#t.value.shelves[n].journals.push(t),this.#t.value.journals[t].shelves=[n]):this.#t.value.journals[t].shelves=[]}requestReloadHint(){this.#t.value.showReloadHint=!0}placeCalendarView(t=!1){if(this.app.workspace.getLeavesOfType(rn).length>0){if(!t)return;for(const n of this.app.workspace.getLeavesOfType(rn))n.detach()}this.#t.value.calendarView.leaf==="left"?this.app.workspace.getLeftLeaf(!1)?.setViewState({type:rn}).catch(console.error):this.app.workspace.getRightLeaf(!1)?.setViewState({type:rn}).catch(console.error)}hasShelf(t){return t in this.#t.value.shelves}createShelf(t){this.#t.value.shelves[t]={name:t,journals:[],commands:[]}}renameShelf(t,n){this.#t.value.shelves[n]=this.#t.value.shelves[t],this.#t.value.shelves[n].name=n;for(const o of this.#t.value.shelves[n].journals)this.#t.value.journals[o].shelves=this.#t.value.journals[o].shelves.map(a=>a===t?n:a);delete this.#t.value.shelves[t]}removeShelf(t,n){for(const o of this.#t.value.shelves[t].journals)this.#t.value.journals[o].shelves=n?this.#t.value.journals[o].shelves.map(a=>a===t?n:a):this.#t.value.journals[o].shelves.filter(a=>a!==t);delete this.#t.value.shelves[t]}async onload(){const t=!this.app.workspace.layoutReady;await this.#c(),Gc(),this.#t.value.calendar.dow===-1?$a(this.#t.value.calendar.global):ja(this.#t.value.calendar.dow,this.#t.value.calendar.doy,this.#t.value.calendar.global),this.#p(),this.#d(),this.#t.value.showReloadHint&&(this.#t.value.showReloadHint=!1),this.#v(),this.addSettingTab(new Oy(this.app,this)),this.registerMarkdownCodeBlockProcessor("calendar-timeline",(n,o,a)=>{const r=new zy(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("calendar-nav",(n,o,a)=>{const r=new Cr(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("interval-nav",(n,o,a)=>{const r=new Cr(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("journal-nav",(n,o,a)=>{const r=new Cr(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("journals-home",(n,o,a)=>{const r=new s1(this,o,n,a);a.addChild(r)}),this.registerView(rn,n=>new Hy(n,this)),this.app.workspace.onLayoutReady(async()=>{this.reprocessNotes(),this.placeCalendarView(),this.#a.value=this.app.workspace.getActiveFile()?.path??null,await this.autoCreateNotes(),t&&await this.openStartupNote(),this.#s&&(this.#u(),this.#s=!1)})}onunload(){clearTimeout(this.#r);for(const t of this.#e)t();for(const t of this.app.workspace.getLeavesOfType(rn))t.detach();for(const t of this.journals)t.dispose()}reprocessNotes(){const t=this.#l.getMarkdownFiles();for(const n of t)this.#f(n)}async autoCreateNotes(){for(const t of Object.values(this.#n.value))await t.autoCreate();this.#m()}async openStartupNote(){const t=this.#t.value.openOnStartup;t&&this.getJournal(t)&&await Cn(this,Ne().format(we),t)}async disconnectNote(t){const n=this.#l.getNoteMetadata(t);if(!n)return;const{frontmatter:o}=n;if(!o)return;const a=o[it];if(!a)return;const r=this.getJournal(a);if(r)await r.disconnectNote(t);else return this.#l.updateNoteFrontmatter(t,l=>{delete l[it],delete l[qa],delete l[Zt],delete l[mn],delete l[Ha]})}#m(){clearTimeout(this.#r),this.#r=setTimeout(()=>{this.autoCreateNotes().catch(console.error)},vf)}async#c(){const t=await this.loadData();if(t)if((t.version??1)===ou)this.#t.value=t;else{const{migratedData:o,needsUser:a}=u1(t);this.#t.value=o,await this.saveData(o).catch(console.error),this.#s=a}}#u(){new Me(this,"Migrate Journals plugin data to v2",su).open()}#p(){const t={};for(const n of Object.keys(this.#t.value.journals))t[n]=new ua(n,w(()=>this.#t.value.journals[n]),this.#o,this.#i,this.#l,this.#a);this.#n.value=t}#d(){this.#e.push(nt(this.#t,Jc(t=>{this.saveData(t).catch(console.error)},50),{deep:!0}),nt(()=>this.#t.value.calendarView.leaf,()=>{this.placeCalendarView(!0)})),this.registerEvent(this.app.workspace.on("file-open",t=>{this.#a.value=t?.path??null})),this.registerEvent(this.app.vault.on("rename",(t,n)=>{t instanceof te.TFile&&this.index.transferPathData(n,t.path,t.basename)})),this.registerEvent(this.app.vault.on("delete",t=>{t instanceof te.TFile&&this.index.clearForPath(t.path)})),this.registerEvent(this.app.metadataCache.on("changed",t=>{this.#f(t)}))}#f(t){const n=this.#l.getNoteMetadata(t.path);if(!n)return;const{frontmatter:o}=n;if(!o||!(it in o))return;const a=o[it],r=this.getJournal(a);r&&this.index.updateFromMetadata(r,t.basename,t.path,n)}#v(){this.addCommand({id:"open-next",name:"Open next note",editorCallback:async(t,n)=>{const o=n.file;if(!o)return;const a=this.#o.getForPath(o.path);if(!a){new te.Notice("This note is not connected to any journal.");return}const r=this.getJournal(a.journal);if(!r){new te.Notice("Unknown journal.");return}const l=r.next(a.date,!0);if(!l){new te.Notice("There is no next note after this one.");return}await r.open(l)}}),this.addCommand({id:"open-prev",name:"Open previous note",editorCallback:async(t,n)=>{const o=n.file;if(!o)return;const a=this.#o.getForPath(o.path);if(!a){new te.Notice("This note is not connected to any journal.");return}const r=this.getJournal(a.journal);if(!r){new te.Notice("Unknown journal.");return}const l=r.previous(a.date,!0);if(!l){new te.Notice("There is no previous note before this one.");return}await r.open(l)}}),this.addCommand({id:"connect-note",name:"Connect note to a journal",editorCallback:(t,n)=>{const o=n.file;o&&new Me(this,"Connect note to a journal",a1,{path:o.path}).open()}}),this.addCommand({id:"open-calendar",name:"Open calendar",callback:()=>{let[t]=this.app.workspace.getLeavesOfType(rn);t||(this.placeCalendarView(),t=this.app.workspace.getLeavesOfType(rn)[0]),this.app.workspace.revealLeaf(t).catch(console.error)}});for(const t of Object.values(this.#n.value))t.registerCommands();for(const t of this.commands)no(this,t,"",()=>this.journals.filter(n=>n.type===t.writeType));for(const t of this.shelves)for(const n of t.commands)no(this,n,`Shelf: ${t.name}`,()=>this.getShelfJournals(t.name).filter(o=>o.type===n.writeType));this.addCommand({id:"change-calendar-shelf",name:"Change calendar view shelf",checkCallback:t=>t?this.#t.value.useShelves&&Object.values(this.#t.value.shelves).length>0:(new l1(this.app,Object.keys(this.#t.value.shelves),n=>{this.#t.value.ui.calendarShelf=n}).open(),!0)})}}exports.default=m1;
